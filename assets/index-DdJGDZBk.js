const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ServicesSection-zqQxw2rJ.js","assets/react-vendor-BmS7JaCS.js","assets/firebase-vendor-YtbAMjVu.js","assets/ProjectsSection-qJ9LjP-w.js","assets/ContactSection-86qSucva.js"])))=>i.map(i=>d[i]);
import{r as yd,a as vd,b as Y,N as bd,u as _d,c as pi,g as Ig,d as Sg,L as Pr,R as _n,B as Rg,e as Cg,f as Rn}from"./react-vendor-BmS7JaCS.js";import{L as Pg,_ as Og,C as jg,r as uc,a as Lg,F as Mg,b as zt,g as Dg,c as Vg,d as qg,e as Fg,f as Bg,h as Et,i as Ug,j as zg,S as $g,k as Hg,l as Gg,o as xd,s as Kg,m as Wg}from"./firebase-vendor-YtbAMjVu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Uo={exports:{}},_r={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc;function Qg(){if(cc)return _r;cc=1;var n=yd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,c,p){var d,f={},u=null,h=null;p!==void 0&&(u=""+p),c.key!==void 0&&(u=""+c.key),c.ref!==void 0&&(h=c.ref);for(d in c)r.call(c,d)&&!o.hasOwnProperty(d)&&(f[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:a,key:u,ref:h,props:f,_owner:i.current}}return _r.Fragment=t,_r.jsx=s,_r.jsxs=s,_r}var fc;function Yg(){return fc||(fc=1,Uo.exports=Qg()),Uo.exports}var I=Yg(),mi={},hc;function Xg(){if(hc)return mi;hc=1;var n=vd();return mi.createRoot=n.createRoot,mi.hydrateRoot=n.hydrateRoot,mi}var Zg=Xg(),dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tn,wd;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function R(){}R.prototype=w.prototype,x.D=w.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(T,E,N){for(var k=Array(arguments.length-2),j=2;j<arguments.length;j++)k[j-2]=arguments[j];return w.prototype[E].apply(T,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,R){R||(R=0);var T=Array(16);if(typeof w=="string")for(var E=0;16>E;++E)T[E]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(E=0;16>E;++E)T[E]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=x.g[0],R=x.g[1],E=x.g[2];var N=x.g[3],k=w+(N^R&(E^N))+T[0]+3614090360&4294967295;w=R+(k<<7&4294967295|k>>>25),k=N+(E^w&(R^E))+T[1]+3905402710&4294967295,N=w+(k<<12&4294967295|k>>>20),k=E+(R^N&(w^R))+T[2]+606105819&4294967295,E=N+(k<<17&4294967295|k>>>15),k=R+(w^E&(N^w))+T[3]+3250441966&4294967295,R=E+(k<<22&4294967295|k>>>10),k=w+(N^R&(E^N))+T[4]+4118548399&4294967295,w=R+(k<<7&4294967295|k>>>25),k=N+(E^w&(R^E))+T[5]+1200080426&4294967295,N=w+(k<<12&4294967295|k>>>20),k=E+(R^N&(w^R))+T[6]+2821735955&4294967295,E=N+(k<<17&4294967295|k>>>15),k=R+(w^E&(N^w))+T[7]+4249261313&4294967295,R=E+(k<<22&4294967295|k>>>10),k=w+(N^R&(E^N))+T[8]+1770035416&4294967295,w=R+(k<<7&4294967295|k>>>25),k=N+(E^w&(R^E))+T[9]+2336552879&4294967295,N=w+(k<<12&4294967295|k>>>20),k=E+(R^N&(w^R))+T[10]+4294925233&4294967295,E=N+(k<<17&4294967295|k>>>15),k=R+(w^E&(N^w))+T[11]+2304563134&4294967295,R=E+(k<<22&4294967295|k>>>10),k=w+(N^R&(E^N))+T[12]+1804603682&4294967295,w=R+(k<<7&4294967295|k>>>25),k=N+(E^w&(R^E))+T[13]+4254626195&4294967295,N=w+(k<<12&4294967295|k>>>20),k=E+(R^N&(w^R))+T[14]+2792965006&4294967295,E=N+(k<<17&4294967295|k>>>15),k=R+(w^E&(N^w))+T[15]+1236535329&4294967295,R=E+(k<<22&4294967295|k>>>10),k=w+(E^N&(R^E))+T[1]+4129170786&4294967295,w=R+(k<<5&4294967295|k>>>27),k=N+(R^E&(w^R))+T[6]+3225465664&4294967295,N=w+(k<<9&4294967295|k>>>23),k=E+(w^R&(N^w))+T[11]+643717713&4294967295,E=N+(k<<14&4294967295|k>>>18),k=R+(N^w&(E^N))+T[0]+3921069994&4294967295,R=E+(k<<20&4294967295|k>>>12),k=w+(E^N&(R^E))+T[5]+3593408605&4294967295,w=R+(k<<5&4294967295|k>>>27),k=N+(R^E&(w^R))+T[10]+38016083&4294967295,N=w+(k<<9&4294967295|k>>>23),k=E+(w^R&(N^w))+T[15]+3634488961&4294967295,E=N+(k<<14&4294967295|k>>>18),k=R+(N^w&(E^N))+T[4]+3889429448&4294967295,R=E+(k<<20&4294967295|k>>>12),k=w+(E^N&(R^E))+T[9]+568446438&4294967295,w=R+(k<<5&4294967295|k>>>27),k=N+(R^E&(w^R))+T[14]+3275163606&4294967295,N=w+(k<<9&4294967295|k>>>23),k=E+(w^R&(N^w))+T[3]+4107603335&4294967295,E=N+(k<<14&4294967295|k>>>18),k=R+(N^w&(E^N))+T[8]+1163531501&4294967295,R=E+(k<<20&4294967295|k>>>12),k=w+(E^N&(R^E))+T[13]+2850285829&4294967295,w=R+(k<<5&4294967295|k>>>27),k=N+(R^E&(w^R))+T[2]+4243563512&4294967295,N=w+(k<<9&4294967295|k>>>23),k=E+(w^R&(N^w))+T[7]+1735328473&4294967295,E=N+(k<<14&4294967295|k>>>18),k=R+(N^w&(E^N))+T[12]+2368359562&4294967295,R=E+(k<<20&4294967295|k>>>12),k=w+(R^E^N)+T[5]+4294588738&4294967295,w=R+(k<<4&4294967295|k>>>28),k=N+(w^R^E)+T[8]+2272392833&4294967295,N=w+(k<<11&4294967295|k>>>21),k=E+(N^w^R)+T[11]+1839030562&4294967295,E=N+(k<<16&4294967295|k>>>16),k=R+(E^N^w)+T[14]+4259657740&4294967295,R=E+(k<<23&4294967295|k>>>9),k=w+(R^E^N)+T[1]+2763975236&4294967295,w=R+(k<<4&4294967295|k>>>28),k=N+(w^R^E)+T[4]+1272893353&4294967295,N=w+(k<<11&4294967295|k>>>21),k=E+(N^w^R)+T[7]+4139469664&4294967295,E=N+(k<<16&4294967295|k>>>16),k=R+(E^N^w)+T[10]+3200236656&4294967295,R=E+(k<<23&4294967295|k>>>9),k=w+(R^E^N)+T[13]+681279174&4294967295,w=R+(k<<4&4294967295|k>>>28),k=N+(w^R^E)+T[0]+3936430074&4294967295,N=w+(k<<11&4294967295|k>>>21),k=E+(N^w^R)+T[3]+3572445317&4294967295,E=N+(k<<16&4294967295|k>>>16),k=R+(E^N^w)+T[6]+76029189&4294967295,R=E+(k<<23&4294967295|k>>>9),k=w+(R^E^N)+T[9]+3654602809&4294967295,w=R+(k<<4&4294967295|k>>>28),k=N+(w^R^E)+T[12]+3873151461&4294967295,N=w+(k<<11&4294967295|k>>>21),k=E+(N^w^R)+T[15]+530742520&4294967295,E=N+(k<<16&4294967295|k>>>16),k=R+(E^N^w)+T[2]+3299628645&4294967295,R=E+(k<<23&4294967295|k>>>9),k=w+(E^(R|~N))+T[0]+4096336452&4294967295,w=R+(k<<6&4294967295|k>>>26),k=N+(R^(w|~E))+T[7]+1126891415&4294967295,N=w+(k<<10&4294967295|k>>>22),k=E+(w^(N|~R))+T[14]+2878612391&4294967295,E=N+(k<<15&4294967295|k>>>17),k=R+(N^(E|~w))+T[5]+4237533241&4294967295,R=E+(k<<21&4294967295|k>>>11),k=w+(E^(R|~N))+T[12]+1700485571&4294967295,w=R+(k<<6&4294967295|k>>>26),k=N+(R^(w|~E))+T[3]+2399980690&4294967295,N=w+(k<<10&4294967295|k>>>22),k=E+(w^(N|~R))+T[10]+4293915773&4294967295,E=N+(k<<15&4294967295|k>>>17),k=R+(N^(E|~w))+T[1]+2240044497&4294967295,R=E+(k<<21&4294967295|k>>>11),k=w+(E^(R|~N))+T[8]+1873313359&4294967295,w=R+(k<<6&4294967295|k>>>26),k=N+(R^(w|~E))+T[15]+4264355552&4294967295,N=w+(k<<10&4294967295|k>>>22),k=E+(w^(N|~R))+T[6]+2734768916&4294967295,E=N+(k<<15&4294967295|k>>>17),k=R+(N^(E|~w))+T[13]+1309151649&4294967295,R=E+(k<<21&4294967295|k>>>11),k=w+(E^(R|~N))+T[4]+4149444226&4294967295,w=R+(k<<6&4294967295|k>>>26),k=N+(R^(w|~E))+T[11]+3174756917&4294967295,N=w+(k<<10&4294967295|k>>>22),k=E+(w^(N|~R))+T[2]+718787259&4294967295,E=N+(k<<15&4294967295|k>>>17),k=R+(N^(E|~w))+T[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(E+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+E&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var R=w-this.blockSize,T=this.B,E=this.h,N=0;N<w;){if(E==0)for(;N<=R;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<w;)if(T[E++]=x.charCodeAt(N++),E==this.blockSize){i(this,T),E=0;break}}else for(;N<w;)if(T[E++]=x[N++],E==this.blockSize){i(this,T),E=0;break}}this.h=E,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var R=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=R&255,R/=256;for(this.u(x),x=Array(16),w=R=0;4>w;++w)for(var T=0;32>T;T+=8)x[R++]=this.g[w]>>>T&255;return x};function o(x,w){var R=a;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=w(x)}function s(x,w){this.h=w;for(var R=[],T=!0,E=x.length-1;0<=E;E--){var N=x[E]|0;T&&N==w||(R[E]=N,T=!1)}this.g=R}var a={};function c(x){return-128<=x&&128>x?o(x,function(w){return new s([w|0],0>w?-1:0)}):new s([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return v(p(-x));for(var w=[],R=1,T=0;x>=R;T++)w[T]=x/R|0,R*=4294967296;return new s(w,0)}function d(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return v(d(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(w,8)),T=f,E=0;E<x.length;E+=8){var N=Math.min(8,x.length-E),k=parseInt(x.substring(E,E+N),w);8>N?(N=p(Math.pow(w,N)),T=T.j(N).add(p(k))):(T=T.j(R),T=T.add(p(k)))}return T}var f=c(0),u=c(1),h=c(16777216);n=s.prototype,n.m=function(){if(g(this))return-v(this).m();for(var x=0,w=1,R=0;R<this.g.length;R++){var T=this.i(R);x+=(0<=T?T:4294967296+T)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(g(this))return"-"+v(this).toString(x);for(var w=p(Math.pow(x,6)),R=this,T="";;){var E=y(R,w).g;R=m(R,E.j(w));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=E,_(R))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function g(x){return x.h==-1}n.l=function(x){return x=m(this,x),g(x)?-1:_(x)?0:1};function v(x){for(var w=x.g.length,R=[],T=0;T<w;T++)R[T]=~x.g[T];return new s(R,~x.h).add(u)}n.abs=function(){return g(this)?v(this):this},n.add=function(x){for(var w=Math.max(this.g.length,x.g.length),R=[],T=0,E=0;E<=w;E++){var N=T+(this.i(E)&65535)+(x.i(E)&65535),k=(N>>>16)+(this.i(E)>>>16)+(x.i(E)>>>16);T=k>>>16,N&=65535,k&=65535,R[E]=k<<16|N}return new s(R,R[R.length-1]&-2147483648?-1:0)};function m(x,w){return x.add(v(w))}n.j=function(x){if(_(this)||_(x))return f;if(g(this))return g(x)?v(this).j(v(x)):v(v(this).j(x));if(g(x))return v(this.j(v(x)));if(0>this.l(h)&&0>x.l(h))return p(this.m()*x.m());for(var w=this.g.length+x.g.length,R=[],T=0;T<2*w;T++)R[T]=0;for(T=0;T<this.g.length;T++)for(var E=0;E<x.g.length;E++){var N=this.i(T)>>>16,k=this.i(T)&65535,j=x.i(E)>>>16,V=x.i(E)&65535;R[2*T+2*E]+=k*V,b(R,2*T+2*E),R[2*T+2*E+1]+=N*V,b(R,2*T+2*E+1),R[2*T+2*E+1]+=k*j,b(R,2*T+2*E+1),R[2*T+2*E+2]+=N*j,b(R,2*T+2*E+2)}for(T=0;T<w;T++)R[T]=R[2*T+1]<<16|R[2*T];for(T=w;T<2*w;T++)R[T]=0;return new s(R,0)};function b(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function A(x,w){this.g=x,this.h=w}function y(x,w){if(_(w))throw Error("division by zero");if(_(x))return new A(f,f);if(g(x))return w=y(v(x),w),new A(v(w.g),v(w.h));if(g(w))return w=y(x,v(w)),new A(v(w.g),w.h);if(30<x.g.length){if(g(x)||g(w))throw Error("slowDivide_ only works with positive integers.");for(var R=u,T=w;0>=T.l(x);)R=C(R),T=C(T);var E=O(R,1),N=O(T,1);for(T=O(T,2),R=O(R,2);!_(T);){var k=N.add(T);0>=k.l(x)&&(E=E.add(R),N=k),T=O(T,1),R=O(R,1)}return w=m(x,E.j(w)),new A(E,w)}for(E=f;0<=x.l(w);){for(R=Math.max(1,Math.floor(x.m()/w.m())),T=Math.ceil(Math.log(R)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=p(R),k=N.j(w);g(k)||0<k.l(x);)R-=T,N=p(R),k=N.j(w);_(N)&&(N=u),E=E.add(N),x=m(x,k)}return new A(E,x)}n.A=function(x){return y(this,x).h},n.and=function(x){for(var w=Math.max(this.g.length,x.g.length),R=[],T=0;T<w;T++)R[T]=this.i(T)&x.i(T);return new s(R,this.h&x.h)},n.or=function(x){for(var w=Math.max(this.g.length,x.g.length),R=[],T=0;T<w;T++)R[T]=this.i(T)|x.i(T);return new s(R,this.h|x.h)},n.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),R=[],T=0;T<w;T++)R[T]=this.i(T)^x.i(T);return new s(R,this.h^x.h)};function C(x){for(var w=x.g.length+1,R=[],T=0;T<w;T++)R[T]=x.i(T)<<1|x.i(T-1)>>>31;return new s(R,x.h)}function O(x,w){var R=w>>5;w%=32;for(var T=x.g.length-R,E=[],N=0;N<T;N++)E[N]=0<w?x.i(N+R)>>>w|x.i(N+R+1)<<32-w:x.i(N+R);return new s(E,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wd=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=p,s.fromString=d,tn=s}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ed,wr,Td,ki,Fa,Ad,kd,Nd;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,S,P){return l==Array.prototype||l==Object.prototype||(l[S]=P.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var S=0;S<l.length;++S){var P=l[S];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=t(this);function i(l,S){if(S)e:{var P=r;l=l.split(".");for(var M=0;M<l.length-1;M++){var Q=l[M];if(!(Q in P))break e;P=P[Q]}l=l[l.length-1],M=P[l],S=S(M),S!=M&&S!=null&&e(P,l,{configurable:!0,writable:!0,value:S})}}function o(l,S){l instanceof String&&(l+="");var P=0,M=!1,Q={next:function(){if(!M&&P<l.length){var Z=P++;return{value:S(Z,l[Z]),done:!1}}return M=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(l){return l||function(){return o(this,function(S,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function c(l){var S=typeof l;return S=S!="object"?S:l?Array.isArray(l)?"array":S:"null",S=="array"||S=="object"&&typeof l.length=="number"}function p(l){var S=typeof l;return S=="object"&&l!=null||S=="function"}function d(l,S,P){return l.call.apply(l.bind,arguments)}function f(l,S,P){if(!l)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,M),l.apply(S,Q)}}return function(){return l.apply(S,arguments)}}function u(l,S,P){return u=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,u.apply(null,arguments)}function h(l,S){var P=Array.prototype.slice.call(arguments,1);return function(){var M=P.slice();return M.push.apply(M,arguments),l.apply(this,M)}}function _(l,S){function P(){}P.prototype=S.prototype,l.aa=S.prototype,l.prototype=new P,l.prototype.constructor=l,l.Qb=function(M,Q,Z){for(var ae=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ae[Ve-2]=arguments[Ve];return S.prototype[Q].apply(M,ae)}}function g(l){const S=l.length;if(0<S){const P=Array(S);for(let M=0;M<S;M++)P[M]=l[M];return P}return[]}function v(l,S){for(let P=1;P<arguments.length;P++){const M=arguments[P];if(c(M)){const Q=l.length||0,Z=M.length||0;l.length=Q+Z;for(let ae=0;ae<Z;ae++)l[Q+ae]=M[ae]}else l.push(M)}}class m{constructor(S,P){this.i=S,this.j=P,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function b(l){return/^[\s\xa0]*$/.test(l)}function A(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function y(l){return y[" "](l),l}y[" "]=function(){};var C=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function O(l,S,P){for(const M in l)S.call(P,l[M],M,l)}function x(l,S){for(const P in l)S.call(void 0,l[P],P,l)}function w(l){const S={};for(const P in l)S[P]=l[P];return S}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,S){let P,M;for(let Q=1;Q<arguments.length;Q++){M=arguments[Q];for(P in M)l[P]=M[P];for(let Z=0;Z<R.length;Z++)P=R[Z],Object.prototype.hasOwnProperty.call(M,P)&&(l[P]=M[P])}}function E(l){var S=1;l=l.split(":");const P=[];for(;0<S&&l.length;)P.push(l.shift()),S--;return l.length&&P.push(l.join(":")),P}function N(l){a.setTimeout(()=>{throw l},0)}function k(){var l=G;let S=null;return l.g&&(S=l.g,l.g=l.g.next,l.g||(l.h=null),S.next=null),S}class j{constructor(){this.h=this.g=null}add(S,P){const M=V.get();M.set(S,P),this.h?this.h.next=M:this.g=M,this.h=M}}var V=new m(()=>new H,l=>l.reset());class H{constructor(){this.next=this.g=this.h=null}set(S,P){this.h=S,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let $,ie=!1,G=new j,B=()=>{const l=a.Promise.resolve(void 0);$=()=>{l.then(L)}};var L=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(P){N(P)}var S=V;S.j(l),100>S.h&&(S.h++,l.next=S.g,S.g=l)}ie=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(l,S){this.type=l,this.g=this.target=S,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,S=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const P=()=>{};a.addEventListener("test",P,S),a.removeEventListener("test",P,S)}catch{}return l}();function U(l,S){if(F.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var P=this.type=l.type,M=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=S,S=l.relatedTarget){if(C){e:{try{y(S.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(S=null)}}else P=="mouseover"?S=l.fromElement:P=="mouseout"&&(S=l.toElement);this.relatedTarget=S,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:D[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&U.aa.h.call(this)}}_(U,F);var D={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),K=0;function X(l,S,P,M,Q){this.listener=l,this.proxy=null,this.src=S,this.type=P,this.capture=!!M,this.ha=Q,this.key=++K,this.da=this.fa=!1}function ne(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ue(l){this.src=l,this.g={},this.h=0}ue.prototype.add=function(l,S,P,M,Q){var Z=l.toString();l=this.g[Z],l||(l=this.g[Z]=[],this.h++);var ae=ye(l,S,M,Q);return-1<ae?(S=l[ae],P||(S.fa=!1)):(S=new X(S,this.src,Z,!!M,Q),S.fa=P,l.push(S)),S};function me(l,S){var P=S.type;if(P in l.g){var M=l.g[P],Q=Array.prototype.indexOf.call(M,S,void 0),Z;(Z=0<=Q)&&Array.prototype.splice.call(M,Q,1),Z&&(ne(S),l.g[P].length==0&&(delete l.g[P],l.h--))}}function ye(l,S,P,M){for(var Q=0;Q<l.length;++Q){var Z=l[Q];if(!Z.da&&Z.listener==S&&Z.capture==!!P&&Z.ha==M)return Q}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Oe={};function tt(l,S,P,M,Q){if(Array.isArray(S)){for(var Z=0;Z<S.length;Z++)tt(l,S[Z],P,M,Q);return null}return P=Ae(P),l&&l[z]?l.K(S,P,p(M)?!!M.capture:!1,Q):He(l,S,P,!1,M,Q)}function He(l,S,P,M,Q,Z){if(!S)throw Error("Invalid event type");var ae=p(Q)?!!Q.capture:!!Q,Ve=xe(l);if(Ve||(l[ke]=Ve=new ue(l)),P=Ve.add(S,P,M,ae,Z),P.proxy)return P;if(M=J(),P.proxy=M,M.src=l,M.listener=P,l.addEventListener)W||(Q=ae),Q===void 0&&(Q=!1),l.addEventListener(S.toString(),M,Q);else if(l.attachEvent)l.attachEvent(ce(S.toString()),M);else if(l.addListener&&l.removeListener)l.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return P}function J(){function l(P){return S.call(l.src,l.listener,P)}const S=oe;return l}function ee(l,S,P,M,Q){if(Array.isArray(S))for(var Z=0;Z<S.length;Z++)ee(l,S[Z],P,M,Q);else M=p(M)?!!M.capture:!!M,P=Ae(P),l&&l[z]?(l=l.i,S=String(S).toString(),S in l.g&&(Z=l.g[S],P=ye(Z,P,M,Q),-1<P&&(ne(Z[P]),Array.prototype.splice.call(Z,P,1),Z.length==0&&(delete l.g[S],l.h--)))):l&&(l=xe(l))&&(S=l.g[S.toString()],l=-1,S&&(l=ye(S,P,M,Q)),(P=-1<l?S[l]:null)&&le(P))}function le(l){if(typeof l!="number"&&l&&!l.da){var S=l.src;if(S&&S[z])me(S.i,l);else{var P=l.type,M=l.proxy;S.removeEventListener?S.removeEventListener(P,M,l.capture):S.detachEvent?S.detachEvent(ce(P),M):S.addListener&&S.removeListener&&S.removeListener(M),(P=xe(S))?(me(P,l),P.h==0&&(P.src=null,S[ke]=null)):ne(l)}}}function ce(l){return l in Oe?Oe[l]:Oe[l]="on"+l}function oe(l,S){if(l.da)l=!0;else{S=new U(S,this);var P=l.listener,M=l.ha||l.src;l.fa&&le(l),l=P.call(M,S)}return l}function xe(l){return l=l[ke],l instanceof ue?l:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(l){return typeof l=="function"?l:(l[we]||(l[we]=function(S){return l.handleEvent(S)}),l[we])}function Me(){q.call(this),this.i=new ue(this),this.M=this,this.F=null}_(Me,q),Me.prototype[z]=!0,Me.prototype.removeEventListener=function(l,S,P,M){ee(this,l,S,P,M)};function qe(l,S){var P,M=l.F;if(M)for(P=[];M;M=M.F)P.push(M);if(l=l.M,M=S.type||S,typeof S=="string")S=new F(S,l);else if(S instanceof F)S.target=S.target||l;else{var Q=S;S=new F(M,l),T(S,Q)}if(Q=!0,P)for(var Z=P.length-1;0<=Z;Z--){var ae=S.g=P[Z];Q=De(ae,M,!0,S)&&Q}if(ae=S.g=l,Q=De(ae,M,!0,S)&&Q,Q=De(ae,M,!1,S)&&Q,P)for(Z=0;Z<P.length;Z++)ae=S.g=P[Z],Q=De(ae,M,!1,S)&&Q}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var l=this.i,S;for(S in l.g){for(var P=l.g[S],M=0;M<P.length;M++)ne(P[M]);delete l.g[S],l.h--}}this.F=null},Me.prototype.K=function(l,S,P,M){return this.i.add(String(l),S,!1,P,M)},Me.prototype.L=function(l,S,P,M){return this.i.add(String(l),S,!0,P,M)};function De(l,S,P,M){if(S=l.i.g[String(S)],!S)return!0;S=S.concat();for(var Q=!0,Z=0;Z<S.length;++Z){var ae=S[Z];if(ae&&!ae.da&&ae.capture==P){var Ve=ae.listener,nt=ae.ha||ae.src;ae.fa&&me(l.i,ae),Q=Ve.call(nt,M)!==!1&&Q}}return Q&&!M.defaultPrevented}function Zr(l,S,P){if(typeof l=="function")P&&(l=u(l,P));else if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:a.setTimeout(l,S||0)}function Ue(l){l.g=Zr(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const S=l.h;l.h=null,l.m.apply(null,S)}class Ct extends q{constructor(S,P){super(),this.m=S,this.l=P,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(l){q.call(this),this.h=l,this.g={}}_(ar,q);var gu=[];function yu(l){O(l.g,function(S,P){this.g.hasOwnProperty(P)&&le(S)},l),l.g={}}ar.prototype.N=function(){ar.aa.N.call(this),yu(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=a.JSON.stringify,rg=a.JSON.parse,ig=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function No(){}No.prototype.h=null;function vu(l){return l.h||(l.h=l.i())}function bu(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Io(){F.call(this,"d")}_(Io,F);function So(){F.call(this,"c")}_(So,F);var mn={},_u=null;function Jr(){return _u=_u||new Me}mn.La="serverreachability";function xu(l){F.call(this,mn.La,l)}_(xu,F);function ur(l){const S=Jr();qe(S,new xu(S))}mn.STAT_EVENT="statevent";function wu(l,S){F.call(this,mn.STAT_EVENT,l),this.stat=S}_(wu,F);function dt(l){const S=Jr();qe(S,new wu(S,l))}mn.Ma="timingevent";function Eu(l,S){F.call(this,mn.Ma,l),this.size=S}_(Eu,F);function cr(l,S){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},S)}function fr(){this.g=!0}fr.prototype.xa=function(){this.g=!1};function og(l,S,P,M,Q,Z){l.info(function(){if(l.g)if(Z)for(var ae="",Ve=Z.split("&"),nt=0;nt<Ve.length;nt++){var je=Ve[nt].split("=");if(1<je.length){var st=je[0];je=je[1];var at=st.split("_");ae=2<=at.length&&at[1]=="type"?ae+(st+"="+je+"&"):ae+(st+"=redacted&")}}else ae=null;else ae=Z;return"XMLHTTP REQ ("+M+") [attempt "+Q+"]: "+S+`
`+P+`
`+ae})}function sg(l,S,P,M,Q,Z,ae){l.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+Q+"]: "+S+`
`+P+`
`+Z+" "+ae})}function kn(l,S,P,M){l.info(function(){return"XMLHTTP TEXT ("+S+"): "+lg(l,P)+(M?" "+M:"")})}function ag(l,S){l.info(function(){return"TIMEOUT: "+S})}fr.prototype.info=function(){};function lg(l,S){if(!l.g)return S;if(!S)return null;try{var P=JSON.parse(S);if(P){for(l=0;l<P.length;l++)if(Array.isArray(P[l])){var M=P[l];if(!(2>M.length)){var Q=M[1];if(Array.isArray(Q)&&!(1>Q.length)){var Z=Q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ae=1;ae<Q.length;ae++)Q[ae]=""}}}}return ko(P)}catch{return S}}var ei={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ro;function ti(){}_(ti,No),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Ro=new ti;function Yt(l,S,P,M){this.j=l,this.i=S,this.l=P,this.R=M||1,this.U=new ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Au}function Au(){this.i=null,this.g="",this.h=!1}var ku={},Co={};function Po(l,S,P){l.L=1,l.v=oi(qt(S)),l.m=P,l.P=!0,Nu(l,null)}function Nu(l,S){l.F=Date.now(),ni(l),l.A=qt(l.v);var P=l.A,M=l.R;Array.isArray(M)||(M=[String(M)]),Bu(P.i,"t",M),l.C=0,P=l.j.J,l.h=new Au,l.g=oc(l.j,P?S:null,!l.m),0<l.O&&(l.M=new Ct(u(l.Y,l,l.g),l.O)),S=l.U,P=l.g,M=l.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(gu[0]=Q.toString()),Q=gu);for(var Z=0;Z<Q.length;Z++){var ae=tt(P,Q[Z],M||S.handleEvent,!1,S.h||S);if(!ae)break;S.g[ae.key]=ae}S=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,S)):(l.u="GET",l.g.ea(l.A,l.u,null,S)),ur(),og(l.i,l.u,l.A,l.l,l.R,l.m)}Yt.prototype.ca=function(l){l=l.target;const S=this.M;S&&Ft(l)==3?S.j():this.Y(l)},Yt.prototype.Y=function(l){try{if(l==this.g)e:{const at=Ft(this.g);var S=this.g.Ba();const Sn=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Wu(this.g)))){this.J||at!=4||S==7||(S==8||0>=Sn?ur(3):ur(2)),Oo(this);var P=this.g.Z();this.X=P;t:if(Iu(this)){var M=Wu(this.g);l="";var Q=M.length,Z=Ft(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),hr(this);var ae="";break t}this.h.i=new a.TextDecoder}for(S=0;S<Q;S++)this.h.h=!0,l+=this.h.i.decode(M[S],{stream:!(Z&&S==Q-1)});M.length=0,this.h.g+=l,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=P==200,sg(this.i,this.u,this.A,this.l,this.R,at,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,nt=this.g;if((Ve=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ve)){var je=Ve;break t}}je=null}if(P=je)kn(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jo(this,P);else{this.o=!1,this.s=3,dt(12),gn(this),hr(this);break e}}if(this.P){P=!0;let At;for(;!this.J&&this.C<ae.length;)if(At=ug(this,ae),At==Co){at==4&&(this.s=4,dt(14),P=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(At==ku){this.s=4,dt(15),kn(this.i,this.l,ae,"[Invalid Chunk]"),P=!1;break}else kn(this.i,this.l,At,null),jo(this,At);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||ae.length!=0||this.h.h||(this.s=1,dt(16),P=!1),this.o=this.o&&P,!P)kn(this.i,this.l,ae,"[Invalid Chunked Response]"),gn(this),hr(this);else if(0<ae.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Fo(st),st.M=!0,dt(11))}}else kn(this.i,this.l,ae,null),jo(this,ae);at==4&&gn(this),this.o&&!this.J&&(at==4?tc(this.j,this):(this.o=!1,ni(this)))}else kg(this.g),P==400&&0<ae.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),gn(this),hr(this)}}}catch{}finally{}};function Iu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ug(l,S){var P=l.C,M=S.indexOf(`
`,P);return M==-1?Co:(P=Number(S.substring(P,M)),isNaN(P)?ku:(M+=1,M+P>S.length?Co:(S=S.slice(M,M+P),l.C=M+P,S)))}Yt.prototype.cancel=function(){this.J=!0,gn(this)};function ni(l){l.S=Date.now()+l.I,Su(l,l.I)}function Su(l,S){if(l.B!=null)throw Error("WatchDog timer not null");l.B=cr(u(l.ba,l),S)}function Oo(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Yt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ag(this.i,this.A),this.L!=2&&(ur(),dt(17)),gn(this),this.s=2,hr(this)):Su(this,this.S-l)};function hr(l){l.j.G==0||l.J||tc(l.j,l)}function gn(l){Oo(l);var S=l.M;S&&typeof S.ma=="function"&&S.ma(),l.M=null,yu(l.U),l.g&&(S=l.g,l.g=null,S.abort(),S.ma())}function jo(l,S){try{var P=l.j;if(P.G!=0&&(P.g==l||Lo(P.h,l))){if(!l.K&&Lo(P.h,l)&&P.G==3){try{var M=P.Da.g.parse(S)}catch{M=null}if(Array.isArray(M)&&M.length==3){var Q=M;if(Q[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<l.F)fi(P),ui(P);else break e;qo(P),dt(18)}}else P.za=Q[1],0<P.za-P.T&&37500>Q[2]&&P.F&&P.v==0&&!P.C&&(P.C=cr(u(P.Za,P),6e3));if(1>=Pu(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else vn(P,11)}else if((l.K||P.g==l)&&fi(P),!b(S))for(Q=P.Da.g.parse(S),S=0;S<Q.length;S++){let je=Q[S];if(P.T=je[0],je=je[1],P.G==2)if(je[0]=="c"){P.K=je[1],P.ia=je[2];const st=je[3];st!=null&&(P.la=st,P.j.info("VER="+P.la));const at=je[4];at!=null&&(P.Aa=at,P.j.info("SVER="+P.Aa));const Sn=je[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(M=1.5*Sn,P.L=M,P.j.info("backChannelRequestTimeoutMs_="+M)),M=P;const At=l.g;if(At){const di=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var Z=M.h;Z.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Mo(Z,Z.h),Z.h=null))}if(M.D){const Bo=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(M.ya=Bo,Fe(M.I,M.D,Bo))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-l.F,P.j.info("Handshake RTT: "+P.R+"ms")),M=P;var ae=l;if(M.qa=ic(M,M.J?M.ia:null,M.W),ae.K){Ou(M.h,ae);var Ve=ae,nt=M.L;nt&&(Ve.I=nt),Ve.B&&(Oo(Ve),ni(Ve)),M.g=ae}else Ju(M);0<P.i.length&&ci(P)}else je[0]!="stop"&&je[0]!="close"||vn(P,7);else P.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?vn(P,7):Vo(P):je[0]!="noop"&&P.l&&P.l.ta(je),P.v=0)}}ur(4)}catch{}}var cg=class{constructor(l,S){this.g=l,this.map=S}};function Ru(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cu(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Pu(l){return l.h?1:l.g?l.g.size:0}function Lo(l,S){return l.h?l.h==S:l.g?l.g.has(S):!1}function Mo(l,S){l.g?l.g.add(S):l.h=S}function Ou(l,S){l.h&&l.h==S?l.h=null:l.g&&l.g.has(S)&&l.g.delete(S)}Ru.prototype.cancel=function(){if(this.i=ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ju(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let S=l.i;for(const P of l.g.values())S=S.concat(P.D);return S}return g(l.i)}function fg(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var S=[],P=l.length,M=0;M<P;M++)S.push(l[M]);return S}S=[],P=0;for(M in l)S[P++]=l[M];return S}function hg(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var S=[];l=l.length;for(var P=0;P<l;P++)S.push(P);return S}S=[],P=0;for(const M in l)S[P++]=M;return S}}}function Lu(l,S){if(l.forEach&&typeof l.forEach=="function")l.forEach(S,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,S,void 0);else for(var P=hg(l),M=fg(l),Q=M.length,Z=0;Z<Q;Z++)S.call(void 0,M[Z],P&&P[Z],l)}var Mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dg(l,S){if(l){l=l.split("&");for(var P=0;P<l.length;P++){var M=l[P].indexOf("="),Q=null;if(0<=M){var Z=l[P].substring(0,M);Q=l[P].substring(M+1)}else Z=l[P];S(Z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function yn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof yn){this.h=l.h,ri(this,l.j),this.o=l.o,this.g=l.g,ii(this,l.s),this.l=l.l;var S=l.i,P=new mr;P.i=S.i,S.g&&(P.g=new Map(S.g),P.h=S.h),Du(this,P),this.m=l.m}else l&&(S=String(l).match(Mu))?(this.h=!1,ri(this,S[1]||"",!0),this.o=dr(S[2]||""),this.g=dr(S[3]||"",!0),ii(this,S[4]),this.l=dr(S[5]||"",!0),Du(this,S[6]||"",!0),this.m=dr(S[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}yn.prototype.toString=function(){var l=[],S=this.j;S&&l.push(pr(S,Vu,!0),":");var P=this.g;return(P||S=="file")&&(l.push("//"),(S=this.o)&&l.push(pr(S,Vu,!0),"@"),l.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&l.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&l.push("/"),l.push(pr(P,P.charAt(0)=="/"?gg:mg,!0))),(P=this.i.toString())&&l.push("?",P),(P=this.m)&&l.push("#",pr(P,vg)),l.join("")};function qt(l){return new yn(l)}function ri(l,S,P){l.j=P?dr(S,!0):S,l.j&&(l.j=l.j.replace(/:$/,""))}function ii(l,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);l.s=S}else l.s=null}function Du(l,S,P){S instanceof mr?(l.i=S,bg(l.i,l.h)):(P||(S=pr(S,yg)),l.i=new mr(S,l.h))}function Fe(l,S,P){l.i.set(S,P)}function oi(l){return Fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function dr(l,S){return l?S?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function pr(l,S,P){return typeof l=="string"?(l=encodeURI(l).replace(S,pg),P&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Vu=/[#\/\?@]/g,mg=/[#\?:]/g,gg=/[#\?]/g,yg=/[#\?@]/g,vg=/#/g;function mr(l,S){this.h=this.g=null,this.i=l||null,this.j=!!S}function Xt(l){l.g||(l.g=new Map,l.h=0,l.i&&dg(l.i,function(S,P){l.add(decodeURIComponent(S.replace(/\+/g," ")),P)}))}n=mr.prototype,n.add=function(l,S){Xt(this),this.i=null,l=Nn(this,l);var P=this.g.get(l);return P||this.g.set(l,P=[]),P.push(S),this.h+=1,this};function qu(l,S){Xt(l),S=Nn(l,S),l.g.has(S)&&(l.i=null,l.h-=l.g.get(S).length,l.g.delete(S))}function Fu(l,S){return Xt(l),S=Nn(l,S),l.g.has(S)}n.forEach=function(l,S){Xt(this),this.g.forEach(function(P,M){P.forEach(function(Q){l.call(S,Q,M,this)},this)},this)},n.na=function(){Xt(this);const l=Array.from(this.g.values()),S=Array.from(this.g.keys()),P=[];for(let M=0;M<S.length;M++){const Q=l[M];for(let Z=0;Z<Q.length;Z++)P.push(S[M])}return P},n.V=function(l){Xt(this);let S=[];if(typeof l=="string")Fu(this,l)&&(S=S.concat(this.g.get(Nn(this,l))));else{l=Array.from(this.g.values());for(let P=0;P<l.length;P++)S=S.concat(l[P])}return S},n.set=function(l,S){return Xt(this),this.i=null,l=Nn(this,l),Fu(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[S]),this.h+=1,this},n.get=function(l,S){return l?(l=this.V(l),0<l.length?String(l[0]):S):S};function Bu(l,S,P){qu(l,S),0<P.length&&(l.i=null,l.g.set(Nn(l,S),g(P)),l.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],S=Array.from(this.g.keys());for(var P=0;P<S.length;P++){var M=S[P];const Z=encodeURIComponent(String(M)),ae=this.V(M);for(M=0;M<ae.length;M++){var Q=Z;ae[M]!==""&&(Q+="="+encodeURIComponent(String(ae[M]))),l.push(Q)}}return this.i=l.join("&")};function Nn(l,S){return S=String(S),l.j&&(S=S.toLowerCase()),S}function bg(l,S){S&&!l.j&&(Xt(l),l.i=null,l.g.forEach(function(P,M){var Q=M.toLowerCase();M!=Q&&(qu(this,M),Bu(this,Q,P))},l)),l.j=S}function _g(l,S){const P=new fr;if(a.Image){const M=new Image;M.onload=h(Zt,P,"TestLoadImage: loaded",!0,S,M),M.onerror=h(Zt,P,"TestLoadImage: error",!1,S,M),M.onabort=h(Zt,P,"TestLoadImage: abort",!1,S,M),M.ontimeout=h(Zt,P,"TestLoadImage: timeout",!1,S,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=l}else S(!1)}function xg(l,S){const P=new fr,M=new AbortController,Q=setTimeout(()=>{M.abort(),Zt(P,"TestPingServer: timeout",!1,S)},1e4);fetch(l,{signal:M.signal}).then(Z=>{clearTimeout(Q),Z.ok?Zt(P,"TestPingServer: ok",!0,S):Zt(P,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Q),Zt(P,"TestPingServer: error",!1,S)})}function Zt(l,S,P,M,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),M(P)}catch{}}function wg(){this.g=new ig}function Eg(l,S,P){const M=P||"";try{Lu(l,function(Q,Z){let ae=Q;p(Q)&&(ae=ko(Q)),S.push(M+Z+"="+encodeURIComponent(ae))})}catch(Q){throw S.push(M+"type="+encodeURIComponent("_badmap")),Q}}function si(l){this.l=l.Ub||null,this.j=l.eb||!1}_(si,No),si.prototype.g=function(){return new ai(this.l,this.j)},si.prototype.i=function(l){return function(){return l}}({});function ai(l,S){Me.call(this),this.D=l,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ai,Me),n=ai.prototype,n.open=function(l,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=S,this.readyState=1,yr(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(S.body=l),(this.D||a).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uu(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uu(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var S=l.value?l.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!l.done}))&&(this.response=this.responseText+=S)}l.done?gr(this):yr(this),this.readyState==3&&Uu(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,gr(this))},n.Qa=function(l){this.g&&(this.response=l,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,yr(l)}n.setRequestHeader=function(l,S){this.u.append(l,S)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],S=this.h.entries();for(var P=S.next();!P.done;)P=P.value,l.push(P[0]+": "+P[1]),P=S.next();return l.join(`\r
`)};function yr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zu(l){let S="";return O(l,function(P,M){S+=M,S+=":",S+=P,S+=`\r
`}),S}function Do(l,S,P){e:{for(M in P){var M=!1;break e}M=!0}M||(P=zu(P),typeof l=="string"?P!=null&&encodeURIComponent(String(P)):Fe(l,S,P))}function $e(l){Me.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_($e,Me);var Tg=/^https?$/i,Ag=["POST","PUT"];n=$e.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,S,P,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);S=S?S.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ro.g(),this.v=this.o?vu(this.o):vu(Ro),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(S,String(l),!0),this.B=!1}catch(Z){$u(this,Z);return}if(l=P||"",P=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var Q in M)P.set(Q,M[Q]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const Z of M.keys())P.set(Z,M.get(Z));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(P.keys()).find(Z=>Z.toLowerCase()=="content-type"),Q=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,S,void 0))||M||Q||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ae]of P)this.g.setRequestHeader(Z,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ku(this),this.u=!0,this.g.send(l),this.u=!1}catch(Z){$u(this,Z)}};function $u(l,S){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=S,l.m=5,Hu(l),li(l)}function Hu(l){l.A||(l.A=!0,qe(l,"complete"),qe(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,qe(this,"complete"),qe(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Gu(this):this.bb())},n.bb=function(){Gu(this)};function Gu(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Ft(l)!=4||l.Z()!=2)){if(l.u&&Ft(l)==4)Zr(l.Ea,0,l);else if(qe(l,"readystatechange"),Ft(l)==4){l.h=!1;try{const ae=l.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var P;if(!(P=S)){var M;if(M=ae===0){var Q=String(l.D).match(Mu)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),M=!Tg.test(Q?Q.toLowerCase():"")}P=M}if(P)qe(l,"complete"),qe(l,"success");else{l.m=6;try{var Z=2<Ft(l)?l.g.statusText:""}catch{Z=""}l.l=Z+" ["+l.Z()+"]",Hu(l)}}finally{li(l)}}}}function li(l,S){if(l.g){Ku(l);const P=l.g,M=l.v[0]?()=>{}:null;l.g=null,l.v=null,S||qe(l,"ready");try{P.onreadystatechange=M}catch{}}}function Ku(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Ft(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Ft(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var S=this.g.responseText;return l&&S.indexOf(l)==0&&(S=S.substring(l.length)),rg(S)}};function Wu(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function kg(l){const S={};l=(l.g&&2<=Ft(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<l.length;M++){if(b(l[M]))continue;var P=E(l[M]);const Q=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Z=S[Q]||[];S[Q]=Z,Z.push(P)}x(S,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(l,S,P){return P&&P.internalChannelParams&&P.internalChannelParams[l]||S}function Qu(l){this.Aa=0,this.i=[],this.j=new fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vr("baseRetryDelayMs",5e3,l),this.cb=vr("retryDelaySeedMs",1e4,l),this.Wa=vr("forwardChannelMaxRetries",2,l),this.wa=vr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ru(l&&l.concurrentRequestLimit),this.Da=new wg,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qu.prototype,n.la=8,n.G=1,n.connect=function(l,S,P,M){dt(0),this.W=l,this.H=S||{},P&&M!==void 0&&(this.H.OSID=P,this.H.OAID=M),this.F=this.X,this.I=ic(this,null,this.W),ci(this)};function Vo(l){if(Yu(l),l.G==3){var S=l.U++,P=qt(l.I);if(Fe(P,"SID",l.K),Fe(P,"RID",S),Fe(P,"TYPE","terminate"),br(l,P),S=new Yt(l,l.j,S),S.L=2,S.v=oi(qt(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(S.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=S.v,P=!0),P||(S.g=oc(S.j,null),S.g.ea(S.v)),S.F=Date.now(),ni(S)}rc(l)}function ui(l){l.g&&(Fo(l),l.g.cancel(),l.g=null)}function Yu(l){ui(l),l.u&&(a.clearTimeout(l.u),l.u=null),fi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ci(l){if(!Cu(l.h)&&!l.s){l.s=!0;var S=l.Ga;$||B(),ie||($(),ie=!0),G.add(S,l),l.B=0}}function Ng(l,S){return Pu(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=S.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=cr(u(l.Ga,l,S),nc(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const Q=new Yt(this,this.j,l);let Z=this.o;if(this.S&&(Z?(Z=w(Z),T(Z,this.S)):Z=this.S),this.m!==null||this.O||(Q.H=Z,Z=null),this.P)e:{for(var S=0,P=0;P<this.i.length;P++){t:{var M=this.i[P];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(S+=M,4096<S){S=P;break e}if(S===4096||P===this.i.length-1){S=P+1;break e}}S=1e3}else S=1e3;S=Zu(this,Q,S),P=qt(this.I),Fe(P,"RID",l),Fe(P,"CVER",22),this.D&&Fe(P,"X-HTTP-Session-Id",this.D),br(this,P),Z&&(this.O?S="headers="+encodeURIComponent(String(zu(Z)))+"&"+S:this.m&&Do(P,this.m,Z)),Mo(this.h,Q),this.Ua&&Fe(P,"TYPE","init"),this.P?(Fe(P,"$req",S),Fe(P,"SID","null"),Q.T=!0,Po(Q,P,null)):Po(Q,P,S),this.G=2}}else this.G==3&&(l?Xu(this,l):this.i.length==0||Cu(this.h)||Xu(this))};function Xu(l,S){var P;S?P=S.l:P=l.U++;const M=qt(l.I);Fe(M,"SID",l.K),Fe(M,"RID",P),Fe(M,"AID",l.T),br(l,M),l.m&&l.o&&Do(M,l.m,l.o),P=new Yt(l,l.j,P,l.B+1),l.m===null&&(P.H=l.o),S&&(l.i=S.D.concat(l.i)),S=Zu(l,P,1e3),P.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Mo(l.h,P),Po(P,M,S)}function br(l,S){l.H&&O(l.H,function(P,M){Fe(S,M,P)}),l.l&&Lu({},function(P,M){Fe(S,M,P)})}function Zu(l,S,P){P=Math.min(l.i.length,P);var M=l.l?u(l.l.Na,l.l,l):null;e:{var Q=l.i;let Z=-1;for(;;){const ae=["count="+P];Z==-1?0<P?(Z=Q[0].g,ae.push("ofs="+Z)):Z=0:ae.push("ofs="+Z);let Ve=!0;for(let nt=0;nt<P;nt++){let je=Q[nt].g;const st=Q[nt].map;if(je-=Z,0>je)Z=Math.max(0,Q[nt].g-100),Ve=!1;else try{Eg(st,ae,"req"+je+"_")}catch{M&&M(st)}}if(Ve){M=ae.join("&");break e}}}return l=l.i.splice(0,P),S.D=l,M}function Ju(l){if(!l.g&&!l.u){l.Y=1;var S=l.Fa;$||B(),ie||($(),ie=!0),G.add(S,l),l.v=0}}function qo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=cr(u(l.Fa,l),nc(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=cr(u(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),ui(this),ec(this))};function Fo(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function ec(l){l.g=new Yt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var S=qt(l.qa);Fe(S,"RID","rpc"),Fe(S,"SID",l.K),Fe(S,"AID",l.T),Fe(S,"CI",l.F?"0":"1"),!l.F&&l.ja&&Fe(S,"TO",l.ja),Fe(S,"TYPE","xmlhttp"),br(l,S),l.m&&l.o&&Do(S,l.m,l.o),l.L&&(l.g.I=l.L);var P=l.g;l=l.ia,P.L=1,P.v=oi(qt(S)),P.m=null,P.P=!0,Nu(P,l)}n.Za=function(){this.C!=null&&(this.C=null,ui(this),qo(this),dt(19))};function fi(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function tc(l,S){var P=null;if(l.g==S){fi(l),Fo(l),l.g=null;var M=2}else if(Lo(l.h,S))P=S.D,Ou(l.h,S),M=1;else return;if(l.G!=0){if(S.o)if(M==1){P=S.m?S.m.length:0,S=Date.now()-S.F;var Q=l.B;M=Jr(),qe(M,new Eu(M,P)),ci(l)}else Ju(l);else if(Q=S.s,Q==3||Q==0&&0<S.X||!(M==1&&Ng(l,S)||M==2&&qo(l)))switch(P&&0<P.length&&(S=l.h,S.i=S.i.concat(P)),Q){case 1:vn(l,5);break;case 4:vn(l,10);break;case 3:vn(l,6);break;default:vn(l,2)}}}function nc(l,S){let P=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(P*=2),P*S}function vn(l,S){if(l.j.info("Error code "+S),S==2){var P=u(l.fb,l),M=l.Xa;const Q=!M;M=new yn(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ri(M,"https"),oi(M),Q?_g(M.toString(),P):xg(M.toString(),P)}else dt(2);l.G=0,l.l&&l.l.sa(S),rc(l),Yu(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function rc(l){if(l.G=0,l.ka=[],l.l){const S=ju(l.h);(S.length!=0||l.i.length!=0)&&(v(l.ka,S),v(l.ka,l.i),l.h.i.length=0,g(l.i),l.i.length=0),l.l.ra()}}function ic(l,S,P){var M=P instanceof yn?qt(P):new yn(P);if(M.g!="")S&&(M.g=S+"."+M.g),ii(M,M.s);else{var Q=a.location;M=Q.protocol,S=S?S+"."+Q.hostname:Q.hostname,Q=+Q.port;var Z=new yn(null);M&&ri(Z,M),S&&(Z.g=S),Q&&ii(Z,Q),P&&(Z.l=P),M=Z}return P=l.D,S=l.ya,P&&S&&Fe(M,P,S),Fe(M,"VER",l.la),br(l,M),M}function oc(l,S,P){if(S&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=l.Ca&&!l.pa?new $e(new si({eb:P})):new $e(l.pa),S.Ha(l.J),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}n=sc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hi(){}hi.prototype.g=function(l,S){return new bt(l,S)};function bt(l,S){Me.call(this),this.g=new Qu(S),this.l=l,this.h=S&&S.messageUrlParams||null,l=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(l?l["X-WebChannel-Content-Type"]=S.messageContentType:l={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(l?l["X-WebChannel-Client-Profile"]=S.va:l={"X-WebChannel-Client-Profile":S.va}),this.g.S=l,(l=S&&S.Sb)&&!b(l)&&(this.g.m=l),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!b(S)&&(this.g.D=S,l=this.h,l!==null&&S in l&&(l=this.h,S in l&&delete l[S])),this.j=new In(this)}_(bt,Me),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Vo(this.g)},bt.prototype.o=function(l){var S=this.g;if(typeof l=="string"){var P={};P.__data__=l,l=P}else this.u&&(P={},P.__data__=ko(l),l=P);S.i.push(new cg(S.Ya++,l)),S.G==3&&ci(S)},bt.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,bt.aa.N.call(this)};function ac(l){Io.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var S=l.__sm__;if(S){e:{for(const P in S){l=P;break e}l=void 0}(this.i=l)&&(l=this.i,S=S!==null&&l in S?S[l]:void 0),this.data=S}else this.data=l}_(ac,Io);function lc(){So.call(this),this.status=1}_(lc,So);function In(l){this.g=l}_(In,sc),In.prototype.ua=function(){qe(this.g,"a")},In.prototype.ta=function(l){qe(this.g,new ac(l))},In.prototype.sa=function(l){qe(this.g,new lc)},In.prototype.ra=function(){qe(this.g,"b")},hi.prototype.createWebChannel=hi.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Nd=function(){return new hi},kd=function(){return Jr()},Ad=mn,Fa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,ki=ei,Tu.COMPLETE="complete",Td=Tu,bu.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",Me.prototype.listen=Me.prototype.K,wr=bu,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Ed=$e}).apply(typeof gi<"u"?gi:typeof self<"u"?self:typeof window<"u"?window:{});const pc="@firebase/firestore",mc="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new Pg("@firebase/firestore");function jn(){return wn.logLevel}function he(n,...e){if(wn.logLevel<=zt.DEBUG){const t=e.map(fl);wn.debug(`Firestore (${Yn}): ${n}`,...t)}}function Kt(n,...e){if(wn.logLevel<=zt.ERROR){const t=e.map(fl);wn.error(`Firestore (${Yn}): ${n}`,...t)}}function qn(n,...e){if(wn.logLevel<=zt.WARN){const t=e.map(fl);wn.warn(`Firestore (${Yn}): ${n}`,...t)}}function fl(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(n="Unexpected state"){const e=`FIRESTORE (${Yn}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function Le(n,e){n||ge()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Mg{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ut.UNAUTHENTICATED))}shutdown(){}}class ey{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ty{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ht,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ht)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new Id(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new ut(e)}}class ny{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ry{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ny(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iy{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Lg(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Le(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new gc(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le(typeof t.token=="string"),this.R=t.token,new gc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=oy(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ne(n,e){return n<e?-1:n>e?1:0}function Ba(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ne(r,i);{const o=Sd(),s=sy(o.encode(yc(n,t)),o.encode(yc(e,t)));return s!==0?s:Ne(r,i)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function yc(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function sy(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Fn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-62135596800,bc=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bc);return new Ze(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vc)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bc}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-vc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ze(0,0))}static max(){return new ve(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="__name__";class Pt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Pt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Pt.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ne(e.length,t.length)}static compareSegments(e,t){const r=Pt.isNumericId(e),i=Pt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Pt.extractNumericId(e).compare(Pt.extractNumericId(t)):Ba(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tn.fromString(e.substring(4,e.length-2))}}class Be extends Pt{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const ay=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends Pt{construct(e,t,r){return new it(e,t,r)}static isValidIdentifier(e){return ay.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_c}static keyField(){return new it([_c])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(t)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Be.fromString(e))}static fromName(e){return new pe(Be.fromString(e).popFirst(5))}static empty(){return new pe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=-1;function ly(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(r===1e9?new Ze(t+1,0):new Ze(t,r));return new rn(i,pe.empty(),e)}function uy(n){return new rn(n.readTime,n.key,Or)}class rn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rn(ve.min(),pe.empty(),Or)}static max(){return new rn(ve.max(),pe.empty(),Or)}}function cy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xn(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==fy)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const p=c;t(e[p]).next(d=>{s[p]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new re((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function dy(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zn(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ji.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function eo(n){return n==null}function ji(n){return n===0&&1/n==-1/0}function py(n){return typeof n=="number"&&Number.isInteger(n)&&!ji(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="";function my(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xc(e)),e=gy(n.get(t),e);return xc(e)}function gy(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case Cd:t+="";break;default:t+=o}}return t}function xc(n){return n+Cd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||rt.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yi(this.root,e,this.comparator,!1)}getReverseIterator(){return new yi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yi(this.root,e,this.comparator,!0)}}class yi{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??rt.RED,this.left=i??rt.EMPTY,this.right=o??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new rt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,i,o){return this}insert(e,t,r){return new rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ec(this.data.getIterator())}getIteratorFrom(e){return new Ec(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class Ec{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new _t([])}unionWith(e){let t=new Je(it.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _t(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fn(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Od("Invalid base64 string: "+o):o}}(e);return new ot(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const yy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(n){if(Le(!!n),typeof n=="string"){let e=0;const t=yy.exec(n);if(Le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sn(n){return typeof n=="string"?ot.fromBase64String(n):ot.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="server_timestamp",Ld="__type__",Md="__previous_value__",Dd="__local_write_time__";function dl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ld])===null||t===void 0?void 0:t.stringValue)===jd}function to(n){const e=n.mapValue.fields[Md];return dl(e)?to(e):e}function jr(n){const e=on(n.mapValue.fields[Dd].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,r,i,o,s,a,c,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=p}}const Li="(default)";class Lr{constructor(e,t){this.projectId=e,this.database=t||Li}static empty(){return new Lr("","")}get isDefaultDatabase(){return this.database===Li}isEqual(e){return e instanceof Lr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="__type__",by="__max__",vi={mapValue:{}},qd="__vector__",Mi="value";function an(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dl(n)?4:xy(n)?9007199254740991:_y(n)?10:11:ge()}function Mt(n,e){if(n===e)return!0;const t=an(n);if(t!==an(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jr(n).isEqual(jr(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=on(i.timestampValue),a=on(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return sn(i.bytesValue).isEqual(sn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?ji(s)===ji(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Fn(n.arrayValue.values||[],e.arrayValue.values||[],Mt);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(wc(s)!==wc(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Mt(s[c],a[c])))return!1;return!0}(n,e);default:return ge()}}function Mr(n,e){return(n.values||[]).find(t=>Mt(t,e))!==void 0}function Bn(n,e){if(n===e)return 0;const t=an(n),r=an(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Ge(o.integerValue||o.doubleValue),c=Ge(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Tc(n.timestampValue,e.timestampValue);case 4:return Tc(jr(n),jr(e));case 5:return Ba(n.stringValue,e.stringValue);case 6:return function(o,s){const a=sn(o),c=sn(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let p=0;p<a.length&&p<c.length;p++){const d=Ne(a[p],c[p]);if(d!==0)return d}return Ne(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ne(Ge(o.latitude),Ge(s.latitude));return a!==0?a:Ne(Ge(o.longitude),Ge(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ac(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,p,d;const f=o.fields||{},u=s.fields||{},h=(a=f[Mi])===null||a===void 0?void 0:a.arrayValue,_=(c=u[Mi])===null||c===void 0?void 0:c.arrayValue,g=Ne(((p=h==null?void 0:h.values)===null||p===void 0?void 0:p.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:Ac(h,_)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===vi.mapValue&&s===vi.mapValue)return 0;if(o===vi.mapValue)return 1;if(s===vi.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),p=s.fields||{},d=Object.keys(p);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const u=Ba(c[f],d[f]);if(u!==0)return u;const h=Bn(a[c[f]],p[d[f]]);if(h!==0)return h}return Ne(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ge()}}function Tc(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=on(n),r=on(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function Ac(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Bn(t[i],r[i]);if(o)return o}return Ne(t.length,r.length)}function Un(n){return Ua(n)}function Ua(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=on(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return sn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Ua(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Ua(t.fields[s])}`;return i+"}"}(n.mapValue):ge()}function Ni(n){switch(an(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=to(n);return e?16+Ni(e):16;case 5:return 2*n.stringValue.length;case 6:return sn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ni(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return cn(r.fields,(o,s)=>{i+=o.length+Ni(s)}),i}(n.mapValue);default:throw ge()}}function kc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function za(n){return!!n&&"integerValue"in n}function pl(n){return!!n&&"arrayValue"in n}function Nc(n){return!!n&&"nullValue"in n}function Ic(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ii(n){return!!n&&"mapValue"in n}function _y(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vd])===null||t===void 0?void 0:t.stringValue)===qd}function Ir(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ir(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ir(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xy(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===by}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ii(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ir(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ir(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Ii(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ii(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cn(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new vt(Ir(this.value))}}function Fd(n){const e=[];return cn(n.fields,(t,r)=>{const i=new it([t]);if(Ii(r)){const o=Fd(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new _t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,ve.min(),ve.min(),ve.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new ct(e,1,t,ve.min(),r,i,0)}static newNoDocument(e,t){return new ct(e,2,t,ve.min(),ve.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new ct(e,3,t,ve.min(),ve.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this.position=e,this.inclusive=t}}function Sc(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=Bn(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rc(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t="asc"){this.field=e,this.dir=t}}function wy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{}class Ye extends Bd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ty(e,t,r):t==="array-contains"?new Ny(e,r):t==="in"?new Iy(e,r):t==="not-in"?new Sy(e,r):t==="array-contains-any"?new Ry(e,r):new Ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ay(e,r):new ky(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bn(t,this.value)):t!==null&&an(this.value)===an(t)&&this.matchesComparison(Bn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends Bd{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new St(e,t)}matches(e){return Ud(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ud(n){return n.op==="and"}function zd(n){return Ey(n)&&Ud(n)}function Ey(n){for(const e of n.filters)if(e instanceof St)return!1;return!0}function $a(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+Un(n.value);if(zd(n))return n.filters.map(e=>$a(e)).join(",");{const e=n.filters.map(t=>$a(t)).join(",");return`${n.op}(${e})`}}function $d(n,e){return n instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Mt(r.value,i.value)}(n,e):n instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$d(s,i.filters[a]),!0):!1}(n,e):void ge()}function Hd(n){return n instanceof Ye?function(t){return`${t.field.canonicalString()} ${t.op} ${Un(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(Hd).join(" ,")+"}"}(n):"Filter"}class Ty extends Ye{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ay extends Ye{constructor(e,t){super(e,"in",t),this.keys=Gd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ky extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=Gd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gd(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}class Ny extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pl(t)&&Mr(t.arrayValue,this.value)}}class Iy extends Ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mr(this.value.arrayValue,t)}}class Sy extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Mr(this.value.arrayValue,t)}}class Ry extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}}function Cc(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Cy(n,e,t,r,i,o,s)}function ml(n){const e=be(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$a(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),eo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Un(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Un(r)).join(",")),e.le=t}return e.le}function gl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wy(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$d(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rc(n.startAt,e.startAt)&&Rc(n.endAt,e.endAt)}function Ha(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Py(n,e,t,r,i,o,s,a){return new Jn(n,e,t,r,i,o,s,a)}function no(n){return new Jn(n)}function Pc(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kd(n){return n.collectionGroup!==null}function Sr(n){const e=be(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je(it.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(p=>{p.isInequality()&&(a=a.add(p.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Dr(o,r))}),t.has(it.keyField().canonicalString())||e.he.push(new Dr(it.keyField(),r))}return e.he}function Ot(n){const e=be(n);return e.Pe||(e.Pe=Oy(e,Sr(n))),e.Pe}function Oy(n,e){if(n.limitType==="F")return Cc(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Dr(i.field,o)});const t=n.endAt?new Di(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Di(n.startAt.position,n.startAt.inclusive):null;return Cc(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ga(n,e){const t=n.filters.concat([e]);return new Jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ka(n,e,t){return new Jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ro(n,e){return gl(Ot(n),Ot(e))&&n.limitType===e.limitType}function Wd(n){return`${ml(Ot(n))}|lt:${n.limitType}`}function Ln(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Hd(i)).join(", ")}]`),eo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Un(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Un(i)).join(",")),`Target(${r})`}(Ot(n))}; limitType=${n.limitType})`}function io(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Sr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){const p=Sc(s,a,c);return s.inclusive?p<=0:p<0}(r.startAt,Sr(r),i)||r.endAt&&!function(s,a,c){const p=Sc(s,a,c);return s.inclusive?p>=0:p>0}(r.endAt,Sr(r),i))}(n,e)}function jy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qd(n){return(e,t)=>{let r=!1;for(const i of Sr(n)){const o=Ly(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Ly(n,e,t){const r=n.field.isKeyField()?pe.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),p=a.data.field(o);return c!==null&&p!==null?Bn(c,p):ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cn(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Pd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new ze(pe.comparator);function Wt(){return My}const Yd=new ze(pe.comparator);function Er(...n){let e=Yd;for(const t of n)e=e.insert(t.key,t);return e}function Xd(n){let e=Yd;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bn(){return Rr()}function Zd(){return Rr()}function Rr(){return new Tn(n=>n.toString(),(n,e)=>n.isEqual(e))}const Dy=new ze(pe.comparator),Vy=new Je(pe.comparator);function Se(...n){let e=Vy;for(const t of n)e=e.add(t);return e}const qy=new Je(Ne);function Fy(){return qy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(e)?"-0":e}}function Jd(n){return{integerValue:""+n}}function By(n,e){return py(e)?Jd(e):yl(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this._=void 0}}function Uy(n,e,t){return n instanceof Vi?function(i,o){const s={fields:{[Ld]:{stringValue:jd},[Dd]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&dl(o)&&(o=to(o)),o&&(s.fields[Md]=o),{mapValue:s}}(t,e):n instanceof Vr?tp(n,e):n instanceof qr?np(n,e):function(i,o){const s=ep(i,o),a=Oc(s)+Oc(i.Ie);return za(s)&&za(i.Ie)?Jd(a):yl(i.serializer,a)}(n,e)}function zy(n,e,t){return n instanceof Vr?tp(n,e):n instanceof qr?np(n,e):t}function ep(n,e){return n instanceof qi?function(r){return za(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Vi extends oo{}class Vr extends oo{constructor(e){super(),this.elements=e}}function tp(n,e){const t=rp(e);for(const r of n.elements)t.some(i=>Mt(i,r))||t.push(r);return{arrayValue:{values:t}}}class qr extends oo{constructor(e){super(),this.elements=e}}function np(n,e){let t=rp(e);for(const r of n.elements)t=t.filter(i=>!Mt(i,r));return{arrayValue:{values:t}}}class qi extends oo{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Oc(n){return Ge(n.integerValue||n.doubleValue)}function rp(n){return pl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function $y(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vr&&i instanceof Vr||r instanceof qr&&i instanceof qr?Fn(r.elements,i.elements,Mt):r instanceof qi&&i instanceof qi?Mt(r.Ie,i.Ie):r instanceof Vi&&i instanceof Vi}(n.transform,e.transform)}class Hy{constructor(e,t){this.version=e,this.transformResults=t}}class mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Si(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class so{}function ip(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ao(n.key,mt.none()):new Ur(n.key,n.data,mt.none());{const t=n.data,r=vt.empty();let i=new Je(it.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fn(n.key,r,new _t(i.toArray()),mt.none())}}function Gy(n,e,t){n instanceof Ur?function(i,o,s){const a=i.value.clone(),c=Lc(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fn?function(i,o,s){if(!Si(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Lc(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(op(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Cr(n,e,t,r){return n instanceof Ur?function(o,s,a,c){if(!Si(o.precondition,s))return a;const p=o.value.clone(),d=Mc(o.fieldTransforms,c,s);return p.setAll(d),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof fn?function(o,s,a,c){if(!Si(o.precondition,s))return a;const p=Mc(o.fieldTransforms,c,s),d=s.data;return d.setAll(op(o)),d.setAll(p),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Si(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Ky(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=ep(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function jc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fn(r,i,(o,s)=>$y(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ur extends so{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fn extends so{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function op(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lc(n,e,t){const r=new Map;Le(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zy(s,a,t[i]))}return r}function Mc(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Uy(o,s,e))}return r}class ao extends so{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wy extends so{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Gy(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cr(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Zd();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=ip(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Se())}isEqual(e){return this.batchId===e.batchId&&Fn(this.mutations,e.mutations,(t,r)=>jc(t,r))&&Fn(this.baseMutations,e.baseMutations,(t,r)=>jc(t,r))}}class vl{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length);let i=function(){return Dy}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new vl(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,Pe;function Zy(n){switch(n){case te.OK:return ge();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ge()}}function sp(n){if(n===void 0)return Kt("GRPC error has no .code"),te.UNKNOWN;switch(n){case Qe.OK:return te.OK;case Qe.CANCELLED:return te.CANCELLED;case Qe.UNKNOWN:return te.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return te.INTERNAL;case Qe.UNAVAILABLE:return te.UNAVAILABLE;case Qe.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Qe.NOT_FOUND:return te.NOT_FOUND;case Qe.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Qe.ABORTED:return te.ABORTED;case Qe.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Qe.DATA_LOSS:return te.DATA_LOSS;default:return ge()}}(Pe=Qe||(Qe={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new tn([4294967295,4294967295],0);function Dc(n){const e=Sd().encode(n),t=new wd;return t.update(e),new Uint8Array(t.digest())}function Vc(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new tn([t,r],0),new tn([i,o],0)]}class bl{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tr(`Invalid padding: ${t}`);if(r<0)throw new Tr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tr(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=tn.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(tn.fromNumber(r)));return i.compare(Jy)===1&&(i=new tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Dc(e),[r,i]=Vc(t);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new bl(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;const t=Dc(e),[r,i]=Vc(t);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Tr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zr.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lo(ve.min(),i,new ze(Ne),Wt(),Se())}}class zr{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zr(r,t,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class ap{constructor(e,t){this.targetId=e,this.ge=t}}class lp{constructor(e,t,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qc{constructor(){this.pe=0,this.ye=Fc(),this.we=ot.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Se(),t=Se(),r=Se();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new zr(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=Fc()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Le(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class e0{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Wt(),this.$e=bi(),this.Ue=bi(),this.Ke=new ze(Ne)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const o=i.target;if(Ha(o))if(r===0){const s=new pe(o.path);this.ze(t,s,ct.newNoDocument(s,ve.min()))}else Le(r===1);else{const s=this.et(t);if(s!==r){const a=this.tt(e),c=a?this.nt(a,e,s):1;if(c!==0){this.Ye(t);const p=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=sn(r).toUint8Array()}catch(c){if(c instanceof Od)return qn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new bl(s,i,o)}catch(c){return qn(c instanceof Tr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((o,s)=>{const a=this.Xe(s);if(a){if(o.current&&Ha(a.target)){const c=new pe(a.target.path);this._t(c).has(s)||this.ut(s,c)||this.ze(s,c,ct.newNoDocument(c,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Se();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const p=this.Xe(c);return!p||p.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));const i=new lo(e,t,this.Ke,this.Qe,r);return this.Qe=Wt(),this.$e=bi(),this.Ue=bi(),this.Ke=new ze(Ne),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new qc,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Je(Ne),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Je(Ne),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new qc),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function bi(){return new ze(pe.comparator)}function Fc(){return new ze(pe.comparator)}const t0={asc:"ASCENDING",desc:"DESCENDING"},n0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r0={and:"AND",or:"OR"};class i0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wa(n,e){return n.useProto3Json||eo(e)?e:{value:e}}function Fi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function up(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function o0(n,e){return Fi(n,e.toTimestamp())}function jt(n){return Le(!!n),ve.fromTimestamp(function(t){const r=on(t);return new Ze(r.seconds,r.nanos)}(n))}function _l(n,e){return Qa(n,e).canonicalString()}function Qa(n,e){const t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cp(n){const e=Be.fromString(n);return Le(mp(e)),e}function Ya(n,e){return _l(n.databaseId,e.path)}function zo(n,e){const t=cp(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(hp(t))}function fp(n,e){return _l(n.databaseId,e)}function s0(n){const e=cp(n);return e.length===4?Be.emptyPath():hp(e)}function Xa(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hp(n){return Le(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Bc(n,e,t){return{name:Ya(n,e),fields:t.value.mapValue.fields}}function a0(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,d){return p.useProto3Json?(Le(d===void 0||typeof d=="string"),ot.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ot.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(p){const d=p.code===void 0?te.UNKNOWN:sp(p.code);return new fe(d,p.message||"")}(s);t=new lp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zo(n,r.document.name),o=jt(r.document.updateTime),s=r.document.createTime?jt(r.document.createTime):ve.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=ct.newFoundDocument(i,o,s,a),p=r.targetIds||[],d=r.removedTargetIds||[];t=new Ri(p,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zo(n,r.document),o=r.readTime?jt(r.readTime):ve.min(),s=ct.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ri([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zo(n,r.document),o=r.removedTargetIds||[];t=new Ri([],o,i,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Xy(i,o),a=r.targetId;t=new ap(a,s)}}return t}function l0(n,e){let t;if(e instanceof Ur)t={update:Bc(n,e.key,e.value)};else if(e instanceof ao)t={delete:Ya(n,e.key)};else if(e instanceof fn)t={update:Bc(n,e.key,e.data),updateMask:y0(e.fieldMask)};else{if(!(e instanceof Wy))return ge();t={verify:Ya(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:o0(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge()}(n,e.precondition)),t}function u0(n,e){return n&&n.length>0?(Le(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?jt(i.updateTime):jt(o);return s.isEqual(ve.min())&&(s=jt(o)),new Hy(s,i.transformResults||[])}(t,e))):[]}function c0(n,e){return{documents:[fp(n,e.path)]}}function f0(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fp(n,i);const o=function(p){if(p.length!==0)return pp(St.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(p){if(p.length!==0)return p.map(d=>function(u){return{field:Mn(u.field),direction:p0(u.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Wa(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:i}}function h0(n){let e=s0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Le(r===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){const u=dp(f);return u instanceof St&&zd(u)?u.getFilters():[u]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(u=>function(_){return new Dr(Dn(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(u))}(t.orderBy));let a=null;t.limit&&(a=function(f){let u;return u=typeof f=="object"?f.value:f,eo(u)?null:u}(t.limit));let c=null;t.startAt&&(c=function(f){const u=!!f.before,h=f.values||[];return new Di(h,u)}(t.startAt));let p=null;return t.endAt&&(p=function(f){const u=!f.before,h=f.values||[];return new Di(h,u)}(t.endAt)),Py(e,i,s,o,a,"F",c,p)}function d0(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dp(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dn(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dn(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Dn(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Dn(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return Ye.create(Dn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(r=>dp(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function p0(n){return t0[n]}function m0(n){return n0[n]}function g0(n){return r0[n]}function Mn(n){return{fieldPath:n.canonicalString()}}function Dn(n){return it.fromServerFormat(n.fieldPath)}function pp(n){return n instanceof Ye?function(t){if(t.op==="=="){if(Ic(t.value))return{unaryFilter:{field:Mn(t.field),op:"IS_NAN"}};if(Nc(t.value))return{unaryFilter:{field:Mn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ic(t.value))return{unaryFilter:{field:Mn(t.field),op:"IS_NOT_NAN"}};if(Nc(t.value))return{unaryFilter:{field:Mn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mn(t.field),op:m0(t.op),value:t.value}}}(n):n instanceof St?function(t){const r=t.getFilters().map(i=>pp(i));return r.length===1?r[0]:{compositeFilter:{op:g0(t.op),filters:r}}}(n):ge()}function y0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,r,i,o=ve.min(),s=ve.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new en(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.Tt=e}}function b0(n){const e=h0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ka(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Tn=new x0}addToCollectionParentIndex(e,t){return this.Tn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(rn.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class x0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gp=41943040;class yt{static withCacheSize(e){return new yt(e,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(gp,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new zn(0)}static Kn(){return new zn(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="LruGarbageCollector",w0=1048576;function $c([n,e],[t,r]){const i=Ne(n,t);return i===0?Ne(e,r):i}class E0{constructor(e){this.Hn=e,this.buffer=new Je($c),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$c(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(zc,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zn(t)?he(zc,"Ignoring IndexedDB error during garbage collection: ",t):await Xn(t)}await this.er(3e5)})}}class A0{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Ji.ae);const r=new E0(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Uc)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uc):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,c,p;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(p=Date.now(),jn()<=zt.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(p-c)+`ms
Total Duration: ${p-d}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function k0(n,e){return new A0(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.changes=new Tn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Cr(r.mutation,i,_t.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Se()){const i=bn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Er();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Se()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Wt();const s=Rr(),a=function(){return Rr()}();return t.forEach((c,p)=>{const d=r.get(p.key);i.has(p.key)&&(d===void 0||d.mutation instanceof fn)?o=o.insert(p.key,p):d!==void 0?(s.set(p.key,d.mutation.getFieldMask()),Cr(d.mutation,p,d.mutation.getFieldMask(),Ze.now())):s.set(p.key,_t.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((p,d)=>s.set(p,d)),t.forEach((p,d)=>{var f;return a.set(p,new I0(d,(f=s.get(p))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Rr();let i=new ze((s,a)=>s-a),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const p=t.get(c);if(p===null)return;let d=r.get(c)||_t.empty();d=a.applyToLocalView(p,d),r.set(c,d);const f=(i.get(a.batchId)||Se()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),p=c.key,d=c.value,f=Zd();d.forEach(u=>{if(!o.has(u)){const h=ip(t.get(u),r.get(u));h!==null&&f.set(u,h),o=o.add(u)}}),s.push(this.documentOverlayCache.saveOverlays(e,p,f))}return re.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):re.resolve(bn());let a=Or,c=o;return s.next(p=>re.forEach(p,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?re.resolve():this.remoteDocumentCache.getEntry(e,d).next(u=>{c=c.insert(d,u)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,c,p,Se())).next(d=>({batchId:a,changes:Xd(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=Er();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Er();return this.indexManager.getCollectionParents(e,o).next(a=>re.forEach(a,c=>{const p=function(f,u){return new Jn(u,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(d=>{d.forEach((f,u)=>{s=s.insert(f,u)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,p)=>{const d=p.getKey();s.get(d)===null&&(s=s.insert(d,ct.newInvalidDocument(d)))});let a=Er();return s.forEach((c,p)=>{const d=o.get(c);d!==void 0&&Cr(d.mutation,p,_t.empty(),Ze.now()),io(t,p)&&(a=a.insert(c,p))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return re.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:jt(i.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:b0(i.bundledQuery),readTime:jt(i.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.overlays=new ze(pe.comparator),this.Rr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bn();return re.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=bn(),o=t.length+1,s=new pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,p=c.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ze((p,d)=>p-d);const s=this.overlays.getIterator();for(;s.hasNext();){const p=s.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let d=o.get(p.largestBatchId);d===null&&(d=bn(),o=o.insert(p.largestBatchId,d)),d.set(p.getKey(),p)}}const a=bn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((p,d)=>a.set(p,d)),!(a.size()>=i)););return re.resolve(a)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Yy(t,r));let o=this.Rr.get(t);o===void 0&&(o=Se(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.Vr=new Je(et.mr),this.gr=new Je(et.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new et(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new et(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new pe(new Be([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new pe(new Be([])),r=new et(t,e),i=new et(t,e+1);let o=Se();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new et(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return pe.comparator(e.key,t.key)||Ne(e.Cr,t.Cr)}static pr(e,t){return Ne(e.Cr,t.Cr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Je(et.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Qy(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Mr=this.Mr.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(s)}lookupMutationBatch(e,t){return re.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),o=i<0?0:i;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?hl:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{const a=this.Or(s.Cr);o.push(a)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Ne);return t.forEach(i=>{const o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),re.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;pe.isDocumentKey(o)||(o=o.child(""));const s=new et(new pe(o),0);let a=new Je(Ne);return this.Mr.forEachWhile(c=>{const p=c.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(a=a.add(c.Cr)),!0)},s),re.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Le(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return re.forEach(t.mutations,i=>{const o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new et(t,0),i=this.Mr.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.kr=e,this.docs=function(){return new ze(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(t))}getEntries(e,t){let r=Wt();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ct.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Wt();const s=t.path,a=new pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:d}}=c.getNext();if(!s.isPrefixOf(p.path))break;p.path.length>s.length+1||cy(uy(d),r)<=0||(i.has(d.key)||io(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ge()}qr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new L0(this)}getSize(e){return re.resolve(this.size)}}class L0 extends N0{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.persistence=e,this.Qr=new Tn(t=>ml(t),gl),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.$r=0,this.Ur=new xl,this.targetCount=0,this.Kr=zn.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),re.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new zn(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.zn(t),re.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),re.waitFor(o).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ji(0),this.zr=!1,this.zr=!0,this.jr=new P0,this.referenceDelegate=e(this),this.Hr=new M0(this),this.indexManager=new _0,this.remoteDocumentCache=function(i){return new j0(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new v0(t),this.Yr=new R0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new C0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new O0(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new D0(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return re.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class D0 extends hy{constructor(e){super(),this.currentSequenceNumber=e}}class wl{constructor(e){this.persistence=e,this.ti=new xl,this.ni=null}static ri(e){return new wl(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),re.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,r=>{const i=pe.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ve.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return re.or([()=>re.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Bi{constructor(e,t){this.persistence=e,this.oi=new Tn(r=>my(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=k0(this,t)}static ri(e,t){return new Bi(e,t)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return re.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?re.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ve.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ni(e.data.value)),t}ar(e,t,r){return re.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Se(),i=Se();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new El(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Ug()?8:dy(zg())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new V0;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(jn()<=zt.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ln(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(jn()<=zt.DEBUG&&he("QueryEngine","Query:",Ln(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(jn()<=zt.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ln(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ot(t))):re.resolve())}rs(e,t){if(Pc(t))return re.resolve(null);let r=Ot(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ka(t,null,"F"),r=Ot(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Se(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const p=this.cs(t,a);return this.ls(t,p,s,c.readTime)?this.rs(e,Ka(t,null,"F")):this.hs(e,p,t,c)}))})))}ss(e,t,r,i){return Pc(t)||i.isEqual(ve.min())?re.resolve(null):this.ns.getDocuments(e,r).next(o=>{const s=this.cs(t,o);return this.ls(t,s,r,i)?re.resolve(null):(jn()<=zt.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ln(t)),this.hs(e,s,t,ly(i,Or)).next(a=>a))})}cs(e,t){let r=new Je(Qd(e));return t.forEach((i,o)=>{io(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return jn()<=zt.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ln(t)),this.ns.getDocumentsMatchingQuery(e,t,rn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="LocalStore",F0=3e8;class B0{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ze(Ne),this.Is=new Tn(o=>ml(o),gl),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S0(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function U0(n,e,t,r){return new B0(n,e,t,r)}async function vp(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=Se();for(const p of i){s.push(p.batchId);for(const d of p.mutations)c=c.add(d.key)}for(const p of o){a.push(p.batchId);for(const d of p.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(p=>({Rs:p,removedBatchIds:s,addedBatchIds:a}))})})}function z0(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,p,d){const f=p.batch,u=f.keys();let h=re.resolve();return u.forEach(_=>{h=h.next(()=>d.getEntry(c,_)).next(g=>{const v=p.docVersions.get(_);Le(v!==null),g.version.compareTo(v)<0&&(f.applyToRemoteDocument(g,p),g.isValidDocument()&&(g.setReadTime(p.commitVersion),d.addEntry(g)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Se();for(let p=0;p<a.mutationResults.length;++p)a.mutationResults[p].transformResults.length>0&&(c=c.add(a.batch.mutations[p].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bp(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function $0(n,e){const t=be(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((d,f)=>{const u=i.get(f);if(!u)return;a.push(t.Hr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(o,d.addedDocuments,f)));let h=u.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(ot.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,r)),i=i.insert(f,h),function(g,v,m){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=F0?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(u,h,d)&&a.push(t.Hr.updateTargetData(o,h))});let c=Wt(),p=Se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(H0(o,s,e.documentUpdates).next(d=>{c=d.Vs,p=d.fs})),!r.isEqual(ve.min())){const d=t.Hr.getLastRemoteSnapshotVersion(o).next(f=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return re.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,p)).next(()=>c)}).then(o=>(t.Ts=i,o))}function H0(n,e,t){let r=Se(),i=Se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Wt();return t.forEach((a,c)=>{const p=o.get(a);c.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!p.isValidDocument()||c.version.compareTo(p.version)>0||c.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):he(Tl,"Ignoring outdated watch update for ",a,". Current version:",p.version," Watch version:",c.version)}),{Vs:s,fs:i}})}function G0(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hl),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function K0(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,re.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new en(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Za(n,e,t){const r=be(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Zn(s))throw s;he(Tl,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function Hc(n,e,t){const r=be(n);let i=ve.min(),o=Se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,p,d){const f=be(c),u=f.Is.get(d);return u!==void 0?re.resolve(f.Ts.get(u)):f.Hr.getTargetData(p,d)}(r,s,Ot(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:ve.min(),t?o:Se())).next(a=>(W0(r,jy(e),a),{documents:a,gs:o})))}function W0(n,e,t){let r=n.Es.get(e)||ve.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class Gc{constructor(){this.activeTargetIds=Fy()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q0{constructor(){this.ho=new Gc,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Gc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="ConnectivityMonitor";class Wc{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(Kc,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(Kc,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i=null;function Ja(){return _i===null?_i=function(){return 268435456+Math.round(2147483648*Math.random())}():_i++,"0x"+_i.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RestConnection",X0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z0{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Li?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){const s=Ja(),a=this.bo(e,t.toUriEncodedString());he($o,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,o),this.vo(e,a,c,r).then(p=>(he($o,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qn($o,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){const r=X0[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class ev extends Z0{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const o=Ja();return new Promise((s,a)=>{const c=new Ed;c.setWithCredentials(!0),c.listenOnce(Td.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ki.NO_ERROR:const d=c.getResponseJson();he(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case ki.TIMEOUT:he(lt,`RPC '${e}' ${o} timed out`),a(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ki.HTTP_ERROR:const f=c.getStatus();if(he(lt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let u=c.getResponseJson();Array.isArray(u)&&(u=u[0]);const h=u==null?void 0:u.error;if(h&&h.status&&h.message){const _=function(v){const m=v.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(m)>=0?m:te.UNKNOWN}(h.status);a(new fe(_,h.message))}else a(new fe(te.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new fe(te.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{he(lt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);he(lt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",p,r,15)})}Wo(e,t,r){const i=Ja(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Nd(),a=kd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(c.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=o.join("");he(lt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=s.createWebChannel(d,c);let u=!1,h=!1;const _=new J0({Fo:v=>{h?he(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(u||(he(lt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),u=!0),he(lt,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},Mo:()=>f.close()}),g=(v,m,b)=>{v.listen(m,A=>{try{b(A)}catch(y){setTimeout(()=>{throw y},0)}})};return g(f,wr.EventType.OPEN,()=>{h||(he(lt,`RPC '${e}' stream ${i} transport opened.`),_.Qo())}),g(f,wr.EventType.CLOSE,()=>{h||(h=!0,he(lt,`RPC '${e}' stream ${i} transport closed`),_.Uo())}),g(f,wr.EventType.ERROR,v=>{h||(h=!0,qn(lt,`RPC '${e}' stream ${i} transport errored:`,v),_.Uo(new fe(te.UNAVAILABLE,"The operation could not be completed")))}),g(f,wr.EventType.MESSAGE,v=>{var m;if(!h){const b=v.data[0];Le(!!b);const A=b,y=(A==null?void 0:A.error)||((m=A[0])===null||m===void 0?void 0:m.error);if(y){he(lt,`RPC '${e}' stream ${i} received error:`,y);const C=y.status;let O=function(R){const T=Qe[R];if(T!==void 0)return sp(T)}(C),x=y.message;O===void 0&&(O=te.INTERNAL,x="Unknown error status: "+C+" with message "+y.message),h=!0,_.Uo(new fe(O,x)),f.close()}else he(lt,`RPC '${e}' stream ${i} received:`,b),_.Ko(b)}}),g(a,Ad.STAT_EVENT,v=>{v.stat===Fa.PROXY?he(lt,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Fa.NOPROXY&&he(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.$o()},0),_}}function Ho(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n){return new i0(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="PersistentStream";class xp{constructor(e,t,r,i,o,s,a,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new _p(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new fe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(Qc,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(Qc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tv extends xp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=a0(this.serializer,e),r=function(o){if(!("targetChange"in o))return ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ve.min():s.readTime?jt(s.readTime):ve.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Xa(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=Ha(c)?{documents:c0(o,c)}:{query:f0(o,c).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=up(o,s.resumeToken);const p=Wa(o,s.expectedCount);p!==null&&(a.expectedCount=p)}else if(s.snapshotVersion.compareTo(ve.min())>0){a.readTime=Fi(o,s.snapshotVersion.toTimestamp());const p=Wa(o,s.expectedCount);p!==null&&(a.expectedCount=p)}return a}(this.serializer,e);const r=d0(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Xa(this.serializer),t.removeTarget=e,this.I_(t)}}class nv extends xp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=u0(e.writeResults,e.commitTime),r=jt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Xa(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>l0(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{}class iv extends rv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Qa(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(te.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,Qa(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(te.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class ov{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Kt(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="RemoteStore";class sv{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(async()=>{An(this)&&(he(En,"Restarting streams for network reachability change."),await async function(c){const p=be(c);p.W_.add(4),await $r(p),p.j_.set("Unknown"),p.W_.delete(4),await co(p)}(this))})}),this.j_=new ov(r,i)}}async function co(n){if(An(n))for(const e of n.G_)await e(!0)}async function $r(n){for(const e of n.G_)await e(!1)}function wp(n,e){const t=be(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Il(t)?Nl(t):er(t).c_()&&kl(t,e))}function Al(n,e){const t=be(n),r=er(t);t.K_.delete(e),r.c_()&&Ep(t,e),t.K_.size===0&&(r.c_()?r.P_():An(t)&&t.j_.set("Unknown"))}function kl(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}er(n).y_(e)}function Ep(n,e){n.H_.Ne(e),er(n).w_(e)}function Nl(n){n.H_=new e0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),er(n).start(),n.j_.B_()}function Il(n){return An(n)&&!er(n).u_()&&n.K_.size>0}function An(n){return be(n).W_.size===0}function Tp(n){n.H_=void 0}async function av(n){n.j_.set("Online")}async function lv(n){n.K_.forEach((e,t)=>{kl(n,e)})}async function uv(n,e){Tp(n),Il(n)?(n.j_.q_(e),Nl(n)):n.j_.set("Unknown")}async function cv(n,e,t){if(n.j_.set("Online"),e instanceof lp&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(r){he(En,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ui(n,r)}else if(e instanceof Ri?n.H_.We(e):e instanceof ap?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ve.min()))try{const r=await bp(n.localStore);t.compareTo(r)>=0&&await function(o,s){const a=o.H_.ot(s);return a.targetChanges.forEach((c,p)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.K_.get(p);d&&o.K_.set(p,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,p)=>{const d=o.K_.get(c);if(!d)return;o.K_.set(c,d.withResumeToken(ot.EMPTY_BYTE_STRING,d.snapshotVersion)),Ep(o,c);const f=new en(d.target,c,p,d.sequenceNumber);kl(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){he(En,"Failed to raise snapshot:",r),await Ui(n,r)}}async function Ui(n,e,t){if(!Zn(e))throw e;n.W_.add(1),await $r(n),n.j_.set("Offline"),t||(t=()=>bp(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(En,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await co(n)})}function Ap(n,e){return e().catch(t=>Ui(n,t,e))}async function fo(n){const e=be(n),t=ln(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:hl;for(;fv(e);)try{const i=await G0(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,hv(e,i)}catch(i){await Ui(e,i)}kp(e)&&Np(e)}function fv(n){return An(n)&&n.U_.length<10}function hv(n,e){n.U_.push(e);const t=ln(n);t.c_()&&t.S_&&t.b_(e.mutations)}function kp(n){return An(n)&&!ln(n).u_()&&n.U_.length>0}function Np(n){ln(n).start()}async function dv(n){ln(n).C_()}async function pv(n){const e=ln(n);for(const t of n.U_)e.b_(t.mutations)}async function mv(n,e,t){const r=n.U_.shift(),i=vl.from(r,e,t);await Ap(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await fo(n)}async function gv(n,e){e&&ln(n).S_&&await async function(r,i){if(function(s){return Zy(s)&&s!==te.ABORTED}(i.code)){const o=r.U_.shift();ln(r).h_(),await Ap(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await fo(r)}}(n,e),kp(n)&&Np(n)}async function Yc(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),he(En,"RemoteStore received new credentials");const r=An(t);t.W_.add(3),await $r(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await co(t)}async function yv(n,e){const t=be(n);e?(t.W_.delete(2),await co(t)):e||(t.W_.add(2),await $r(t),t.j_.set("Unknown"))}function er(n){return n.J_||(n.J_=function(t,r,i){const o=be(t);return o.M_(),new tv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:av.bind(null,n),No:lv.bind(null,n),Lo:uv.bind(null,n),p_:cv.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Il(n)?Nl(n):n.j_.set("Unknown")):(await n.J_.stop(),Tp(n))})),n.J_}function ln(n){return n.Y_||(n.Y_=function(t,r,i){const o=be(t);return o.M_(),new nv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:dv.bind(null,n),Lo:gv.bind(null,n),D_:pv.bind(null,n),v_:mv.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await fo(n)):(await n.Y_.stop(),n.U_.length>0&&(he(En,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new Sl(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rl(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Zn(n))return new fe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{static emptySet(e){return new Vn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Er(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.Z_=new ze(pe.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class $n{constructor(e,t,r,i,o,s,a,c,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new $n(e,t,Vn.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ro(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class bv{constructor(){this.queries=Zc(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=be(t),o=i.queries;i.queries=Zc(),o.forEach((s,a)=>{for(const c of a.ta)c.onError(r)})})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function Zc(){return new Tn(n=>Wd(n),ro)}async function Cl(n,e){const t=be(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new vv,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(i,!0);break;case 1:o.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const a=Rl(s,`Initialization of query '${Ln(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Ol(t)}async function Pl(n,e){const t=be(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _v(n,e){const t=be(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&Ol(t)}function xv(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const o of i.ta)o.onError(t);r.queries.delete(e)}function Ol(n){n.ia.forEach(e=>{e.next()})}var el,Jc;(Jc=el||(el={}))._a="default",Jc.Cache="cache";class jl{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $n(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=$n.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==el.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class wv{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Se(),this.mutatedKeys=Se(),this.ya=Qd(e),this.wa=new Vn(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new Xc,i=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const u=i.get(d),h=io(this.query,f)?f:null,_=!!u&&this.mutatedKeys.has(u.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;u&&h?u.data.isEqual(h.data)?_!==g&&(r.track({type:3,doc:h}),v=!0):this.va(u,h)||(r.track({type:2,doc:h}),v=!0,(c&&this.ya(h,c)>0||p&&this.ya(h,p)<0)&&(a=!0)):!u&&h?(r.track({type:0,doc:h}),v=!0):u&&!h&&(r.track({type:1,doc:u}),v=!0,(c||p)&&(a=!0)),v&&(h?(s=s.add(h),o=g?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort((d,f)=>function(h,_){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return g(h)-g(_)}(d.type,f.type)||this.ya(d.doc,f.doc)),this.Ca(r),i=i!=null&&i;const a=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,p=c!==this.ga;return this.ga=c,s.length!==0||p?{snapshot:new $n(this.query,e.wa,o,s,e.mutatedKeys,c===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Xc,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Se(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Sp(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Ip(r))}),t}Oa(e){this.fa=e.gs,this.pa=Se();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return $n.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ll="SyncEngine";class Ev{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Tv{constructor(e){this.key=e,this.Ba=!1}}class Av{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Tn(a=>Wd(a),ro),this.qa=new Map,this.Qa=new Set,this.$a=new ze(pe.comparator),this.Ua=new Map,this.Ka=new xl,this.Wa={},this.Ga=new Map,this.za=zn.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function kv(n,e,t=!0){const r=Lp(n);let i;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await Rp(r,e,t,!0),i}async function Nv(n,e){const t=Lp(n);await Rp(t,e,!0,!1)}async function Rp(n,e,t,r){const i=await K0(n.localStore,Ot(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=await Iv(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&wp(n.remoteStore,i),a}async function Iv(n,e,t,r,i){n.Ha=(f,u,h)=>async function(g,v,m,b){let A=v.view.ba(m);A.ls&&(A=await Hc(g.localStore,v.query,!1).then(({documents:x})=>v.view.ba(x,A)));const y=b&&b.targetChanges.get(v.targetId),C=b&&b.targetMismatches.get(v.targetId)!=null,O=v.view.applyChanges(A,g.isPrimaryClient,y,C);return tf(g,v.targetId,O.Ma),O.snapshot}(n,f,u,h);const o=await Hc(n.localStore,e,!0),s=new wv(e,o.gs),a=s.ba(o.documents),c=zr.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=s.applyChanges(a,n.isPrimaryClient,c);tf(n,t,p.Ma);const d=new Ev(e,t,s);return n.ka.set(e,d),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function Sv(n,e,t){const r=be(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!ro(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Za(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Al(r.remoteStore,i.targetId),tl(r,i.targetId)}).catch(Xn)):(tl(r,i.targetId),await Za(r.localStore,i.targetId,!0))}async function Rv(n,e){const t=be(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Al(t.remoteStore,r.targetId))}async function Cv(n,e,t){const r=Vv(n);try{const i=await function(s,a){const c=be(s),p=Ze.now(),d=a.reduce((h,_)=>h.add(_.key),Se());let f,u;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let _=Wt(),g=Se();return c.ds.getEntries(h,d).next(v=>{_=v,_.forEach((m,b)=>{b.isValidDocument()||(g=g.add(m))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,_)).next(v=>{f=v;const m=[];for(const b of a){const A=Ky(b,f.get(b.key).overlayedDocument);A!=null&&m.push(new fn(b.key,A,Fd(A.value.mapValue),mt.exists(!0)))}return c.mutationQueue.addMutationBatch(h,p,m,a)}).next(v=>{u=v;const m=v.applyToLocalDocumentSet(f,g);return c.documentOverlayCache.saveOverlays(h,v.batchId,m)})}).then(()=>({batchId:u.batchId,changes:Xd(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let p=s.Wa[s.currentUser.toKey()];p||(p=new ze(Ne)),p=p.insert(a,c),s.Wa[s.currentUser.toKey()]=p}(r,i.batchId,t),await Hr(r,i.changes),await fo(r.remoteStore)}catch(i){const o=Rl(i,"Failed to persist write");t.reject(o)}}async function Cp(n,e){const t=be(n);try{const r=await $0(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Ua.get(o);s&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Le(s.Ba):i.removedDocuments.size>0&&(Le(s.Ba),s.Ba=!1))}),await Hr(t,r,e)}catch(r){await Xn(r)}}function ef(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((o,s)=>{const a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=be(s);c.onlineState=a;let p=!1;c.queries.forEach((d,f)=>{for(const u of f.ta)u.sa(a)&&(p=!0)}),p&&Ol(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pv(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),o=i&&i.key;if(o){let s=new ze(pe.comparator);s=s.insert(o,ct.newNoDocument(o,ve.min()));const a=Se().add(o),c=new lo(ve.min(),new Map,new ze(Ne),s,a);await Cp(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),Ml(r)}else await Za(r.localStore,e,!1).then(()=>tl(r,e,t)).catch(Xn)}async function Ov(n,e){const t=be(n),r=e.batch.batchId;try{const i=await z0(t.localStore,e);Op(t,r,null),Pp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hr(t,i)}catch(i){await Xn(i)}}async function jv(n,e,t){const r=be(n);try{const i=await function(s,a){const c=be(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let d;return c.mutationQueue.lookupMutationBatch(p,a).next(f=>(Le(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(p,f))).next(()=>c.mutationQueue.performConsistencyCheck(p)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(p,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,d)).next(()=>c.localDocuments.getDocuments(p,d))})}(r.localStore,e);Op(r,e,t),Pp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hr(r,i)}catch(i){await Xn(i)}}function Pp(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function Op(n,e,t){const r=be(n);let i=r.Wa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function tl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||jp(n,r)})}function jp(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Al(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Ml(n))}function tf(n,e,t){for(const r of t)r instanceof Ip?(n.Ka.addReference(r.key,e),Lv(n,r)):r instanceof Sp?(he(Ll,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||jp(n,r.key)):ge()}function Lv(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(he(Ll,"New document in limbo: "+t),n.Qa.add(r),Ml(n))}function Ml(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new pe(Be.fromString(e)),r=n.za.next();n.Ua.set(r,new Tv(t)),n.$a=n.$a.insert(t,r),wp(n.remoteStore,new en(Ot(no(t.path)),r,"TargetPurposeLimboResolution",Ji.ae))}}async function Hr(n,e,t){const r=be(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,c)=>{s.push(r.Ha(c,e,t).then(p=>{var d;if((p||t)&&r.isPrimaryClient){const f=p?!p.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(p){i.push(p);const f=El.Yi(c.targetId,p);o.push(f)}}))}),await Promise.all(s),r.La.p_(i),await async function(c,p){const d=be(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>re.forEach(p,u=>re.forEach(u.Hi,h=>d.persistence.referenceDelegate.addReference(f,u.targetId,h)).next(()=>re.forEach(u.Ji,h=>d.persistence.referenceDelegate.removeReference(f,u.targetId,h)))))}catch(f){if(!Zn(f))throw f;he(Tl,"Failed to update sequence numbers: "+f)}for(const f of p){const u=f.targetId;if(!f.fromCache){const h=d.Ts.get(u),_=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(_);d.Ts=d.Ts.insert(u,g)}}}(r.localStore,o))}async function Mv(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){he(Ll,"User change. New user:",e.toKey());const r=await vp(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(c=>{c.reject(new fe(te.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hr(t,r.Rs)}}function Dv(n,e){const t=be(n),r=t.Ua.get(e);if(r&&r.Ba)return Se().add(r.key);{let i=Se();const o=t.qa.get(e);if(!o)return i;for(const s of o){const a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function Lp(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pv.bind(null,e),e.La.p_=_v.bind(null,e.eventManager),e.La.Ja=xv.bind(null,e.eventManager),e}function Vv(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ov.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jv.bind(null,e),e}class zi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uo(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return U0(this.persistence,new q0,e.initialUser,this.serializer)}Xa(e){return new yp(wl.ri,this.serializer)}Za(e){return new Q0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zi.provider={build:()=>new zi};class qv extends zi{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Le(this.persistence.referenceDelegate instanceof Bi);const r=this.persistence.referenceDelegate.garbageCollector;return new T0(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?yt.withCacheSize(this.cacheSizeBytes):yt.DEFAULT;return new yp(r=>Bi.ri(r,t),this.serializer)}}class nl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ef(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mv.bind(null,this.syncEngine),await yv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bv}()}createDatastore(e){const t=uo(e.databaseInfo.databaseId),r=function(o){return new ev(o)}(e.databaseInfo);return function(o,s,a,c){return new iv(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new sv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>ef(this.syncEngine,t,0),function(){return Wc.D()?new Wc:new Y0}())}createSyncEngine(e,t){return function(i,o,s,a,c,p,d){const f=new Av(i,o,s,a,c,p);return d&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=be(i);he(En,"RemoteStore shutting down."),o.W_.add(5),await $r(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nl.provider={build:()=>new nl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="FirestoreClient";class Fv{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=Rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{he(un,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(he(un,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Rl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Go(n,e){n.asyncQueue.verifyOperationInProgress(),he(un,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vp(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function nf(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Bv(n);he(un,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Yc(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Yc(e.remoteStore,i)),n._onlineComponents=e}async function Bv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(un,"Using user provided OfflineComponentProvider");try{await Go(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qn("Error using user provided cache. Falling back to memory cache: "+t),await Go(n,new zi)}}else he(un,"Using default OfflineComponentProvider"),await Go(n,new qv(void 0));return n._offlineComponents}async function Mp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(un,"Using user provided OnlineComponentProvider"),await nf(n,n._uninitializedComponentsProvider._online)):(he(un,"Using default OnlineComponentProvider"),await nf(n,new nl))),n._onlineComponents}function Uv(n){return Mp(n).then(e=>e.syncEngine)}async function $i(n){const e=await Mp(n),t=e.eventManager;return t.onListen=kv.bind(null,e.syncEngine),t.onUnlisten=Sv.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Nv.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rv.bind(null,e.syncEngine),t}function zv(n,e,t={}){const r=new Ht;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,c,p){const d=new Dl({next:u=>{d.su(),s.enqueueAndForget(()=>Pl(o,f));const h=u.docs.has(a);!h&&u.fromCache?p.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&u.fromCache&&c&&c.source==="server"?p.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(u)},error:u=>p.reject(u)}),f=new jl(no(a.path),d,{includeMetadataChanges:!0,Ta:!0});return Cl(o,f)}(await $i(n),n.asyncQueue,e,t,r)),r.promise}function $v(n,e,t={}){const r=new Ht;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,c,p){const d=new Dl({next:u=>{d.su(),s.enqueueAndForget(()=>Pl(o,f)),u.fromCache&&c.source==="server"?p.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(u)},error:u=>p.reject(u)}),f=new jl(a,d,{includeMetadataChanges:!0,Ta:!0});return Cl(o,f)}(await $i(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(n,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Hv(n,e,t,r){if(e===!0&&r===!0)throw new fe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function of(n){if(!pe.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sf(n){if(pe.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ho(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ho(n);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="firestore.googleapis.com",af=!0;class lf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qp,this.ssl=af}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:af;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gp;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w0)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dp((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class po{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jg;switch(r.type){case"firstParty":return new ry(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=rf.get(t);r&&(he("ComponentProvider","Removing Datastore"),rf.delete(t),r.terminate())}(this),Promise.resolve()}}function Gv(n,e,t,r={}){var i;const o=(n=gt(n,po))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==qp&&o.host!==a&&qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!Fg(c,s)&&(n._setSettings(c),r.mockUserToken)){let p,d;if(typeof r.mockUserToken=="string")p=r.mockUserToken,d=ut.MOCK_USER;else{p=Bg(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ut(f)}n._authCredentials=new ey(new Id(p,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hn(this.firestore,e,this._query)}}class ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class nn extends hn{constructor(e,t,r){super(e,t,no(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new pe(e))}withConverter(e){return new nn(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=Et(n),Vp("collection","path",e),n instanceof po){const r=Be.fromString(e,...t);return sf(r),new nn(n,null,r)}{if(!(n instanceof ht||n instanceof nn))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return sf(r),new nn(n.firestore,null,r)}}function Xe(n,e,...t){if(n=Et(n),arguments.length===1&&(e=Rd.newId()),Vp("doc","path",e),n instanceof po){const r=Be.fromString(e,...t);return of(r),new ht(n,null,new pe(r))}{if(!(n instanceof ht||n instanceof nn))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return of(r),new ht(n.firestore,n instanceof nn?n.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="AsyncQueue";class cf{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new _p(this,"async_queue_retry"),this.Su=()=>{const r=Ho();r&&he(uf,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Ho();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Ho();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ht;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Zn(e))throw e;he(uf,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Sl.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ff(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Dt extends po{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cf,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cf(e),this._firestoreClient=void 0,await e}}}function Kv(n,e){const t=typeof n=="object"?n:Dg(),r=typeof n=="string"?n:Li,i=Vg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=qg("firestore");o&&Gv(i,...o)}return i}function Gr(n){if(n._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Wv(n),n._firestoreClient}function Wv(n){var e,t,r;const i=n._freezeSettings(),o=function(a,c,p,d){return new vy(a,c,p,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Dp(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(ot.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=/^__.*__$/;class Yv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ur(e,this.data,t,this.fieldTransforms)}}class Fp{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Bl{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Bl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hi(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Bp(this.Lu)&&Qv.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Xv{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uo(e)}ju(e,t,r,i=!1){return new Bl({Lu:e,methodName:t,zu:r,path:it.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wr(n){const e=n._freezeSettings(),t=uo(n._databaseId);return new Xv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ul(n,e,t,r,i,o={}){const s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);zl("Data must be an object, but it was:",s,r);const a=$p(r,s);let c,p;if(o.merge)c=new _t(s.fieldMask),p=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const f of o.mergeFields){const u=rl(e,f,t);if(!s.contains(u))throw new fe(te.INVALID_ARGUMENT,`Field '${u}' is specified in your field mask but missing from your input data.`);Gp(d,u)||d.push(u)}c=new _t(d),p=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,p=s.fieldTransforms;return new Yv(new vt(a),c,p)}class mo extends Vl{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mo}}function Up(n,e,t,r){const i=n.ju(1,e,t);zl("Data must be an object, but it was:",i,r);const o=[],s=vt.empty();cn(r,(c,p)=>{const d=$l(e,c,t);p=Et(p);const f=i.Uu(d);if(p instanceof mo)o.push(d);else{const u=Qr(p,f);u!=null&&(o.push(d),s.set(d,u))}});const a=new _t(o);return new Fp(s,a,i.fieldTransforms)}function zp(n,e,t,r,i,o){const s=n.ju(1,e,t),a=[rl(e,r,t)],c=[i];if(o.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let u=0;u<o.length;u+=2)a.push(rl(e,o[u])),c.push(o[u+1]);const p=[],d=vt.empty();for(let u=a.length-1;u>=0;--u)if(!Gp(p,a[u])){const h=a[u];let _=c[u];_=Et(_);const g=s.Uu(h);if(_ instanceof mo)p.push(h);else{const v=Qr(_,g);v!=null&&(p.push(h),d.set(h,v))}}const f=new _t(p);return new Fp(d,f,s.fieldTransforms)}function Zv(n,e,t,r=!1){return Qr(t,n.ju(r?4:3,e))}function Qr(n,e){if(Hp(n=Et(n)))return zl("Unsupported field value:",e,n),$p(n,e);if(n instanceof Vl)return function(r,i){if(!Bp(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Qr(a,i.Ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return By(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ze.fromDate(r);return{timestampValue:Fi(i.serializer,o)}}if(r instanceof Ze){const o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fi(i.serializer,o)}}if(r instanceof ql)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:up(i.serializer,r._byteString)};if(r instanceof ht){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_l(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fl)return function(s,a){return{mapValue:{fields:{[Vd]:{stringValue:qd},[Mi]:{arrayValue:{values:s.toArray().map(p=>{if(typeof p!="number")throw a.Wu("VectorValues must only contain numeric values.");return yl(a.serializer,p)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${ho(r)}`)}(n,e)}function $p(n,e){const t={};return Pd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cn(n,(r,i)=>{const o=Qr(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Hp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof ql||n instanceof Gn||n instanceof ht||n instanceof Vl||n instanceof Fl)}function zl(n,e,t){if(!Hp(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ho(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function rl(n,e,t){if((e=Et(e))instanceof Kr)return e._internalPath;if(typeof e=="string")return $l(n,e);throw Hi("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jv=new RegExp("[~\\*/\\[\\]]");function $l(n,e,t){if(e.search(Jv)>=0)throw Hi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kr(...e.split("."))._internalPath}catch{throw Hi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hi(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new fe(te.INVALID_ARGUMENT,a+n+c)}function Gp(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class e1 extends Kp{data(){return super.data()}}function Hl(n,e){return typeof e=="string"?$l(n,e):e instanceof Kr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gl{}class Qp extends Gl{}function go(n,e,...t){let r=[];e instanceof Gl&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof Wl).length,a=o.filter(c=>c instanceof Kl).length;if(s>1||s>0&&a>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Kl extends Qp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Kl(e,t,r)}_apply(e){const t=this._parse(e);return Yp(e._query,t),new hn(e.firestore,e.converter,Ga(e._query,t))}_parse(e){const t=Wr(e.firestore);return function(o,s,a,c,p,d,f){let u;if(p.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){df(f,d);const _=[];for(const g of f)_.push(hf(c,o,g));u={arrayValue:{values:_}}}else u=hf(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||df(f,d),u=Zv(a,s,f,d==="in"||d==="not-in");return Ye.create(p,d,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wl extends Gl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wl(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)Yp(s,c),s=Ga(s,c)}(e._query,t),new hn(e.firestore,e.converter,Ga(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ql extends Qp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ql(e,t)}_apply(e){const t=function(i,o,s){if(i.startAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dr(o,s)}(e._query,this._field,this._direction);return new hn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Jn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function yo(n,e="asc"){const t=e,r=Hl("orderBy",n);return Ql._create(r,t)}function hf(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kd(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Be.fromString(t));if(!pe.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kc(n,new pe(r))}if(t instanceof ht)return kc(n,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ho(t)}.`)}function df(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yp(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class t1{convertValue(e,t="none"){switch(an(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cn(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Mi].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ge(s.doubleValue));return new Fl(o)}convertGeoPoint(e){return new ql(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=to(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jr(e));default:return null}}convertTimestamp(e){const t=on(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);Le(mp(r));const i=new Lr(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xp extends Kp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ci(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ci extends Xp{data(e={}){return super.data(e)}}class Zp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ar(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ci(this._firestore,this._userDataWriter,r.key,r,new Ar(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const c=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ar(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const c=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ar(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,d=-1;return a.type!==0&&(p=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:n1(a.type),doc:c,oldIndex:p,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function n1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n){n=gt(n,ht);const e=gt(n.firestore,Dt);return zv(Gr(e),n._key).then(t=>Jp(e,n,t))}class Xl extends t1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}function Yr(n){n=gt(n,hn);const e=gt(n.firestore,Dt),t=Gr(e),r=new Xl(e);return Wp(n._query),$v(t,n._query).then(i=>new Zp(e,r,n,i))}function il(n,e,t){n=gt(n,ht);const r=gt(n.firestore,Dt),i=Yl(n.converter,e,t);return Xr(r,[Ul(Wr(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mt.none())])}function Gi(n,e,t,...r){n=gt(n,ht);const i=gt(n.firestore,Dt),o=Wr(i);let s;return s=typeof(e=Et(e))=="string"||e instanceof Kr?zp(o,"updateDoc",n._key,e,t,r):Up(o,"updateDoc",n._key,e),Xr(i,[s.toMutation(n._key,mt.exists(!0))])}function Zl(n){return Xr(gt(n.firestore,Dt),[new ao(n._key,mt.none())])}function Jl(n,e){const t=gt(n.firestore,Dt),r=Xe(n),i=Yl(n.converter,e);return Xr(t,[Ul(Wr(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function eu(n,...e){var t,r,i;n=Et(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ff(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ff(e[s])){const f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,p,d;if(n instanceof ht)p=gt(n.firestore,Dt),d=no(n._key.path),c={next:f=>{e[s]&&e[s](Jp(p,n,f))},error:e[s+1],complete:e[s+2]};else{const f=gt(n,hn);p=gt(f.firestore,Dt),d=f._query;const u=new Xl(p);c={next:h=>{e[s]&&e[s](new Zp(p,u,f,h))},error:e[s+1],complete:e[s+2]},Wp(n._query)}return function(u,h,_,g){const v=new Dl(g),m=new jl(h,v,_);return u.asyncQueue.enqueueAndForget(async()=>Cl(await $i(u),m)),()=>{v.su(),u.asyncQueue.enqueueAndForget(async()=>Pl(await $i(u),m))}}(Gr(p),d,a,c)}function Xr(n,e){return function(r,i){const o=new Ht;return r.asyncQueue.enqueueAndForget(async()=>Cv(await Uv(r),i,o)),o.promise}(Gr(n),e)}function Jp(n,e,t){const r=t.docs.get(e._key),i=new Xl(n);return new Xp(n,i,e._key,r,new Ar(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wr(e)}set(e,t,r){this._verifyNotCommitted();const i=Ko(e,this._firestore),o=Yl(i.converter,t,r),s=Ul(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,mt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Ko(e,this._firestore);let s;return s=typeof(t=Et(t))=="string"||t instanceof Kr?zp(this._dataReader,"WriteBatch.update",o._key,t,r,i):Up(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ko(e,this._firestore);return this._mutations=this._mutations.concat(new ao(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ko(n,e){if((n=Et(n)).firestore!==e)throw new fe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(n){return Gr(n=gt(n,Dt)),new i1(n,e=>Xr(n,e))}(function(e,t=!0){(function(i){Yn=i})($g),Og(new jg("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Dt(new ty(r.getProvider("auth-internal")),new iy(s,r.getProvider("app-check-internal")),function(p,d){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lr(p.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),uc(pc,mc,e),uc(pc,mc,"esm2017")})();const o1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},s1=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID","VITE_FIREBASE_MEASUREMENT_ID"];for(const n of s1)if(!o1[n])throw new Error(`Missing required environment variable: ${n}`);const a1={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0};let Wo=null,Nt=null,de=null;try{Wo=Hg(a1),Nt=Gg(Wo),de=Kv(Wo)}catch(n){throw console.error("Firebase initialization error:",n),new Error(`Firebase initialization failed: ${n instanceof Error?n.message:String(n)}`)}if(!de)throw new Error("Firestore failed to initialize and is null.");const l1=()=>{Y.useEffect(()=>{if(!de){console.error("useGlobalStyles: Firestore not initialized correctly.");return}const n=Xe(de,"settings","styles"),e=eu(n,t=>{if(t.exists()){const r=t.data();document.documentElement.style.setProperty("--color-primary",r.primaryColor),document.documentElement.style.setProperty("--color-secondary",r.secondaryColor),document.documentElement.style.setProperty("--font-family",r.fontFamily),document.documentElement.style.setProperty("--color-text",r.textColor||"#c6d3e2"),document.documentElement.style.setProperty("--title-color",r.titleColor||r.primaryColor||"#FFFFFF"),document.documentElement.style.setProperty("--h3-title-color",r.h3TitleColor||r.textColor||"#E5E7EB"),document.documentElement.style.setProperty("--color-background",r.backgroundFromColor||"#111827"),document.documentElement.style.setProperty("--color-background-secondary",r.backgroundToColor||"#1F2937"),document.documentElement.style.setProperty("--section-bg-color",r.sectionBgColor||"#374151")}},t=>{console.error("useGlobalStyles: Error listening to global styles:",t)});return()=>{e()}},[])},u1=()=>{const[n,e]=Y.useState([]),[t,r]=Y.useState(!0),[i,o]=Y.useState(null);return Y.useEffect(()=>{if(r(!0),o(null),!de){console.error("useDynamicPages: Firestore not initialized correctly."),o(new Error("Firestore not initialized correctly.")),r(!1);return}(async()=>{if(!de){console.error("useDynamicPages: Firestore not initialized inside fetchPages."),o(new Error("Firestore not initialized.")),r(!1);return}try{const a=Hn(de,"pages"),c=go(a,yo("order","asc")),d=(await Yr(c)).docs.map(f=>({id:f.id,...f.data()}));e(d)}catch(a){console.error("useDynamicPages: Error fetching dynamic pages:",a),o(a instanceof Error?a:new Error("An unknown error occurred"))}finally{r(!1)}})()},[]),{dynamicPages:n,loadingPages:t,errorPages:i}},c1=({message:n,type:e})=>{if(!n||!e)return null;const t=e==="success"?"bg-green-500":"bg-red-500",r=e==="success"?I.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):I.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return I.jsxs("div",{className:`fixed bottom-5 right-5 ${t} text-white px-4 py-2 rounded-md shadow-lg flex items-center z-[100] transition-opacity duration-300 animate-fade-in-out max-w-sm`,children:[r,I.jsx("span",{children:n})]})},f1=({isOpen:n,message:e,onConfirm:t,onCancel:r,confirmText:i="Confirm",cancelText:o="Cancel",title:s="Confirm Action"})=>n?I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4",children:I.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full",children:[I.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s}),I.jsx("p",{className:"text-sm text-gray-600 mb-6 whitespace-pre-wrap",children:e}),I.jsxs("div",{className:"flex justify-end space-x-3",children:[I.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors text-sm",children:o}),I.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm",children:i})]})]})}):null,tm=Y.createContext(void 0),Vt=()=>{const n=Y.useContext(tm);if(!n)throw new Error("useNotifications must be used within a NotificationProvider");return n},nm=({children:n})=>{const[e,t]=Y.useState(null),[r,i]=Y.useState(null),o=Y.useRef(null),[s,a]=Y.useState(null),[c,p]=Y.useState(!1),d=Y.useCallback((g,v="success",m=3e3)=>{o.current&&clearTimeout(o.current),t(g),i(v),o.current=setTimeout(()=>{t(null),i(null),o.current=null},m)},[]);Y.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const f=Y.useCallback(g=>{a(g),p(!0)},[]),u=()=>{s!=null&&s.onConfirm&&s.onConfirm(),p(!1),a(null)},h=()=>{p(!1),a(null)},_={showToast:d,requestConfirmation:f};return I.jsxs(tm.Provider,{value:_,children:[n,I.jsx(c1,{message:e,type:r}),s&&I.jsx(f1,{isOpen:c,message:s.message,onConfirm:u,onCancel:h,confirmText:s.confirmText||"Confirm Delete",cancelText:s.cancelText,title:s.title})]})},h1=({children:n})=>{const[e,t]=Y.useState(null),[r,i]=Y.useState(!0);return Y.useEffect(()=>{if(!Nt){console.error("ProtectedRoute: Firebase auth is not initialized."),i(!1);return}const o=xd(Nt,s=>{t(s),i(!1)});return()=>o()},[]),r?I.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):e?I.jsx(I.Fragment,{children:n}):I.jsx(bd,{to:"/admin/login",replace:!0})},d1=()=>{const[n,e]=Y.useState(!1),t=()=>{window.pageYOffset>300?e(!0):e(!1)};Y.useEffect(()=>(window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}),[]);const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return I.jsx("button",{type:"button",onClick:r,className:`fixed bottom-5 right-5 p-3 rounded-full bg-primary text-text shadow-lg transition-opacity duration-300 hover:bg-gradient-to-br from-background to-background-secondary ${n?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-label":"Scroll to top",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})})})},p1=n=>{const t=/[A-Z]/.test(n),r=/[a-z]/.test(n),i=/\d/.test(n),o=/[!@#$%^&*(),.?":{}|<>]/.test(n);return n.length>=8&&t&&r&&i&&o},m1=()=>{const[n,e]=Y.useState(""),[t,r]=Y.useState(""),[i,o]=Y.useState(""),[s,a]=Y.useState(!1),c=_d();Y.useEffect(()=>{const d=setTimeout(()=>{Nt&&Nt.signOut()},18e5);return()=>clearTimeout(d)},[]),Y.useEffect(()=>{if(!Nt)return;const d=xd(Nt,f=>{f&&c("/admin/dashboard",{replace:!0})});return()=>d()},[c]);const p=async d=>{if(d.preventDefault(),o(""),a(!0),!n.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){o("Please enter a valid email address"),a(!1);return}if(!p1(t)){o("Password must be at least 8 characters long and contain uppercase, lowercase, numbers, and special characters"),a(!1);return}if(!Nt){o("Authentication service is not available."),a(!1);return}try{await Kg(Nt,n,t)}catch(f){let u="Failed to log in. Please check your credentials.";if(f.code)switch(f.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":u="Invalid email or password.";break;case"auth/invalid-email":u="Invalid email format.";break;case"auth/too-many-requests":u="Too many failed attempts. Please try again later.";break;default:console.error("Firebase Login error:",f)}o(u)}finally{a(!1)}};return I.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:I.jsxs("div",{className:"p-8 bg-white rounded shadow-md w-full max-w-sm",children:[I.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),I.jsxs("form",{onSubmit:p,children:[I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),I.jsx("input",{type:"email",id:"email",value:n,onChange:d=>e(d.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:s})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),I.jsx("input",{type:"password",id:"password",value:t,onChange:d=>r(d.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:s})]}),i&&I.jsx("p",{className:"text-red-500 text-xs italic mb-4",children:i}),I.jsx("div",{className:"flex items-center justify-between",children:I.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full disabled:opacity-50",disabled:s,children:s?"Logging in...":"Login"})})]})]})})};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),pf=n=>{const e=y1(n);return e.charAt(0).toUpperCase()+e.slice(1)},rm=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Y.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>Y.createElement("svg",{ref:c,...v1,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:rm("lucide",i),...a},[...s.map(([p,d])=>Y.createElement(p,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(n,e)=>{const t=Y.forwardRef(({className:r,...i},o)=>Y.createElement(b1,{ref:o,iconNode:e,className:rm(`lucide-${g1(pf(n))}`,`lucide-${n}`,r),...i}));return t.displayName=pf(n),t};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ol=Re("arrow-down",_1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],sl=Re("arrow-up",x1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],E1=Re("briefcase",w1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tu=Re("chevron-down",T1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],im=Re("chevron-up",A1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nu=Re("circle-help",k1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],I1=Re("circle-plus",N1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],R1=Re("circle-x",S1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],P1=Re("copy",C1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j1=Re("eye",O1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],om=Re("facebook",L1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],D1=Re("file-pen",M1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sm=Re("file-text",V1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],am=Re("github",q1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],B1=Re("image",F1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],lm=Re("instagram",U1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],$1=Re("layout-dashboard",z1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],G1=Re("link-2",H1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],um=Re("linkedin",K1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Q1=Re("log-out",W1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],cm=Re("mail",Y1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Z1=Re("maximize-2",X1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mf=Re("menu",J1);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],tb=Re("message-square",eb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],rb=Re("minimize-2",nb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],fm=Re("palette",ib);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sb=Re("refresh-cw",ob);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],al=Re("save",ab);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ub=Re("settings",lb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Fr=Re("square-pen",cb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hb=Re("star",fb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Kn=Re("trash-2",db);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],hm=Re("twitter",pb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],gb=Re("type",mb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vb=Re("user",yb);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],_b=Re("wand-sparkles",bb),xt={en:{generalInfo:{title:"General Information",siteTitle:"Tiger3Homs",siteRole:"Website Developer & Tech Enthusiast",logoUrl:"https://raw.githubusercontent.com/tiger3homs/home/refs/heads/main/public/logo.png",footerText:" 2025. Built and designed by Tiger3homs"},about:{title:"About Me",description:"I'm a passionate software developer with expertise in web development and system architecture. I love building efficient, scalable solutions and contributing to open-source projects. When I'm not coding, you can find me exploring new technologies and sharing knowledge with the developer community."},projects:{title:"Featured Projects",project1:{title:"OS Design v1",description:"The website offers a sleek, intuitive design with straightforward navigation and professional fonts. It highlights the company's services and expertise, making it easy for visitors to get in touch. Simple visuals and effective calls-to-action ensure a smooth and engaging experience. For more information, explore the site.",tags:["Modern","User-friendly","Professional"],link:""},project2:{title:"Project 2",description:"Coming soon.",tags:["Wait","For","It"],link:""},project3:{title:"New Project",description:"This is a new project description.",tags:["New","Exciting","Innovative"],link:""}},contact:{title:"Contact Me",nameLabel:"Name",namePlaceholder:"Enter your name",emailLabel:"Email",emailPlaceholder:"Enter your email",messageLabel:"Message",messagePlaceholder:"Enter your message",submitButton:"Send Message"},services:{title:"Services",list:[{title:"Web Development",description:"Building modern, responsive websites tailored to your needs."},{title:"UI/UX Design",description:"Crafting user-friendly and visually appealing designs."},{title:"SEO Optimization",description:"Improving your website's visibility on search engines."},{title:"Consulting",description:"Providing expert advice to help you achieve your goals."}]}}},xb={title:"New Project Title",description:"New project description.",tags:["Tag1","Tag2"],link:""},wb=(n,e,t)=>{if(!e||e.length===0)return n;const r=typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n));let i=r;for(let s=0;s<e.length-1;s++){const a=e[s];if(i[a]===void 0||i[a]===null){const c=typeof e[s+1]=="number";i[a]=c?[]:{}}if(Array.isArray(i)&&typeof a=="number")for(;i.length<=a;)i.push(void 0);else if(typeof i!="object"||i===null)return console.error("Cannot traverse into non-object:",i,"at path segment",a),n;i=i[a]}const o=e[e.length-1];if(typeof i!="object"||i===null)return console.error("Cannot set property on non-object/array:",i,"at path",e),n;if(Array.isArray(i)&&typeof o=="number")for(;i.length<=o;)i.push(void 0);return i[o]=t,r},Ki=n=>n?n.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()):"",xr="translations/en",Eb={title:"New Service Title",description:"New service description."},Tb=()=>{const[n,e]=Y.useState(xt),[t,r]=Y.useState(!0),[i,o]=Y.useState(""),{showToast:s}=Vt();Y.useEffect(()=>{if(!de){console.error("Firestore instance is not available."),o("Error: Firestore connection failed."),r(!1);return}const h=Xe(de,xr);r(!0);const _=eu(h,g=>{if(g.exists()){const v=g.data();e(m=>({...m,en:v}))}else e(xt),console.log("No translations document found in Firestore, using defaults.");r(!1)},g=>{console.error("Firestore snapshot error:",g),o("Error fetching data from Firestore."),r(!1)});return()=>_()},[]);const a=Y.useCallback((h,_)=>{e(g=>{const v="en";if(!h||h.length===0)return g;const m=wb(g[v],h,_);return{...g,[v]:m}}),o("")},[]),c=Y.useCallback(()=>{e(h=>{const _=`project_${Date.now()}`,g={...h.en};return(typeof g.projects!="object"||g.projects===null)&&(g.projects={title:xt.en.projects.title}),g.projects[_]={...xb},{...h,en:g}}),o("New project added. Edit details and save.")},[]),p=Y.useCallback(()=>{e(h=>{var b;const _=(b=h.en)==null?void 0:b.services,v=[...Array.isArray(_==null?void 0:_.list)?_.list:[],{...Eb}],m={...h.en,services:{..._||{title:xt.en.services.title||"Services",list:[]},list:v}};return{...h,en:m}}),o("New service added. Edit details and save.")},[]),d=async h=>{const _=h||n.en;if(!de){o("Error: Firestore connection failed.");return}o("Saving...");try{const g=Xe(de,xr);await il(g,_,{merge:!0}),s("Content changes saved successfully!","success"),o("")}catch(g){console.error("Failed to save translations to Firestore:",g),s("Error saving content changes.","error"),o("")}finally{}},f=Y.useCallback(async h=>{var _;if(!h||h.length<1){console.error("Invalid path for deletion:",h),s("Error: Invalid deletion path.","error");return}if(h[0]==="services"&&h[1]==="list"&&typeof h[2]=="number"){const g=h[2],v=(_=n.en.services)==null?void 0:_.list;if(!Array.isArray(v)){console.error("Cannot delete service item: services.list is not an array or is missing.",v),s("Error: Services data structure issue.","error");return}const m=v.filter((A,y)=>y!==g);if(e(A=>({...A,en:{...A.en,services:{...A.en.services||{title:"",list:[]},list:m}}})),!de){s("Error: Firestore connection failed.","error");return}const b=Xe(de,xr);try{o("Deleting service item..."),await Gi(b,{"services.list":m}),s("Service item deleted.","success")}catch(A){console.error("Failed to update services list in Firestore:",A),s("Error deleting service item.","error")}finally{o("")}}else if(h[0]==="projects"&&h.length===2){const g=h[1],v=h.join(".");if(typeof g!="string"||!v){console.error("Invalid project path for deletion:",h),s("Error: Could not determine project to delete.","error");return}if(e(b=>{const A={...b.en.projects};return delete A[g],{...b,en:{...b.en,projects:A}}}),!de){s("Error: Firestore connection failed.","error");return}const m=Xe(de,xr);try{o("Deleting project item...");const A={...n.en.projects};A.hasOwnProperty(g)?delete A[g]:console.warn(`Attempted to delete non-existent project key: ${g}`),await Gi(m,{projects:A}),s("Project item deleted.","success")}catch(b){console.error("Failed to delete project item from Firestore:",b),s("Error deleting project item.","error"),console.error("Firestore delete failed, local state might be inconsistent until next snapshot/refresh.")}finally{o("")}}else console.error("Unhandled deletion path:",h),s("Error: Deletion logic not implemented for this path.","error")},[n,s]);return{translations:n,isLoading:t,saveStatus:i,setSaveStatus:o,setTranslations:e,handleInputChange:a,handleAddNewProject:c,handleAddNewService:p,saveChanges:d,handleDeleteItem:f,resetToDefaults:async()=>{if(!de){o("Error: Firestore connection failed.");return}if(window.confirm("Are you sure you want to reset the English text content (About, Contact, Services, General Info) to the default values? This cannot be undone and does not affect Projects, Styles, or Social Links.")){o("Resetting...");const h={...xt.en,projects:n.en.projects};try{const _=Xe(de,xr);await il(_,h),s("Text content sections reset to defaults.","success"),o("")}catch(_){console.error("Failed to reset translations in Firestore:",_),s("Error resetting content.","error"),o("")}}}}},Ab=({onToggleMobileSidebar:n,onToggleDesktopSidebar:e,onLogout:t})=>{const[r,i]=Y.useState(!1);return I.jsx("nav",{className:"bg-white shadow-md fixed w-full z-10",children:I.jsxs("div",{className:"px-4 h-16 flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 md:hidden","aria-label":"Toggle sidebar",children:I.jsx(mf,{size:24})}),I.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 hidden md:block","aria-label":"Toggle sidebar",children:I.jsx(mf,{size:24})})]}),I.jsx("div",{className:"flex items-center space-x-4",children:I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>i(!r),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900","aria-expanded":r,"aria-haspopup":"true",children:[I.jsx(vb,{size:20}),I.jsx("span",{children:"Admin"}),I.jsx(tu,{size:16})]}),r&&I.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 border border-gray-200",children:I.jsxs("button",{onClick:()=>{t(),i(!1)},className:"w-full px-4 py-2 text-left text-red-600 hover:bg-gray-50 flex items-center space-x-2",children:[I.jsx(Q1,{size:16}),I.jsx("span",{children:"Logout"})]})})]})})]})})},kb=({isMobile:n,isSidebarOpen:e,isDesktopSidebarCollapsed:t,activeTab:r,navItems:i,onTabClick:o,onCloseMobileSidebar:s})=>I.jsxs(I.Fragment,{children:[n&&e&&I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:s,"aria-hidden":"true"}),I.jsx("aside",{className:`fixed top-16 h-[calc(100vh-4rem)] bg-gray-800 text-white transition-transform duration-300 ease-in-out z-30 md:translate-x-0 md:transition-all md:duration-300
          ${n?e?"translate-x-0 w-64":"-translate-x-full w-64":t?"w-20":"w-64"}
        `,"aria-label":"Main Navigation",children:I.jsx("nav",{className:"p-4 overflow-y-auto h-full",children:i.map(a=>I.jsxs("button",{onClick:()=>o(a.tab),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r===a.tab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,"aria-current":r===a.tab?"page":void 0,children:[a.icon,I.jsx("span",{className:`${n&&e||!n&&!t?"inline":"hidden"}`,children:a.label})]},a.tab))})})]}),Nb=({data:n,path:e,handleChange:t,handleAddProject:r,handleDelete:i})=>{const{requestConfirmation:o}=Vt(),[s,a]=Y.useState({});if(!n||typeof n!="object")return I.jsx("p",{className:"text-red-500",children:"Error: Projects data is missing or invalid."});const c=[...e,"title"],p=Object.entries(n).filter(([m,b])=>m!=="title"&&typeof b=="object"&&b!==null),d=m=>{a(b=>({...b,[m]:!b[m]}))},[f,u]=Y.useState({}),h=(m,b,A)=>{const y=(f[m]||"").trim();y&&!A.includes(y)?(t(b,[...A,y]),u(C=>({...C,[m]:""}))):y||u(C=>({...C,[m]:""}))},_=(m,b,A)=>{t(m,b.filter(y=>y!==A))},g=(m,b)=>{b.endsWith(",")?u(A=>({...A,[m]:b.slice(0,-1)})):u(A=>({...A,[m]:b}))},v=(m,b,A,y)=>{(m.key==="Enter"||m.key===",")&&(m.preventDefault(),h(b,A,y))};return I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"projects-section-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),I.jsx("input",{id:"projects-section-title",type:"text",value:typeof n.title=="string"?n.title:"",onChange:m=>t(c,m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter the title for the projects section"})]}),I.jsx("div",{className:"flex justify-end",children:I.jsxs("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center gap-2","aria-label":"Add new project item",children:[I.jsx(Fr,{size:16})," Add New Project"]})}),I.jsxs("div",{className:"space-y-3",children:[I.jsxs("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2 mb-3",children:["Project Items (",p.length,")"]}),p.length===0?I.jsx("p",{className:"text-gray-500 italic",children:'No projects added yet. Click "Add New Project" to begin.'}):p.map(([m,b])=>{const A=[...e,m],y=[...A,"title"],C=[...A,"description"],O=[...A,"tags"],x=[...A,"link"],w=s[m]||!1,R=(b==null?void 0:b.title)||"",T=(b==null?void 0:b.description)||"",E=Array.isArray(b==null?void 0:b.tags)?b.tags:[],N=(b==null?void 0:b.link)||"";return I.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[I.jsxs("div",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-100 relative group",onClick:()=>d(m),role:"button",tabIndex:0,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&d(m)},"aria-expanded":w,"aria-controls":`project-content-${m}`,children:[I.jsx("div",{className:"mr-3 text-gray-500",children:w?I.jsx(im,{size:18}):I.jsx(tu,{size:18})}),I.jsxs("div",{className:"flex-grow mr-2 font-medium text-gray-700 truncate",children:[R||`Project: ${m}`," "]}),I.jsx("button",{onClick:k=>{k.stopPropagation(),o({message:`Are you sure you want to delete project "${R||m}"?
This action cannot be undone.`,onConfirm:()=>i(A),confirmText:"Delete Project",title:"Confirm Deletion"})},className:"p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity focus:outline-none focus:ring-1 focus:ring-red-500 rounded-full z-10","aria-label":`Delete project ${R||m}`,children:I.jsx(Kn,{size:18})})]}),w&&I.jsxs("div",{id:`project-content-${m}`,className:"p-4 border-t border-gray-200 bg-white space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`project-title-${m}`,className:"block text-sm font-medium text-gray-600 mb-1",children:"Project Title"}),I.jsx("input",{id:`project-title-${m}`,type:"text",value:R,onChange:k=>t(y,k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter project title"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`project-description-${m}`,className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),I.jsx("textarea",{id:`project-description-${m}`,value:T,onChange:k=>t(C,k.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter project description"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`project-tags-input-${m}`,className:"block text-sm font-medium text-gray-600 mb-1",children:"Tags (add with Enter or comma)"}),I.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md bg-white",children:[E.map((k,j)=>I.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[k,I.jsx("button",{type:"button",onClick:()=>_(O,E,k),className:"ml-1.5 text-blue-600 hover:text-blue-800 focus:outline-none","aria-label":`Remove tag ${k}`,children:" "})]},j)),I.jsx("input",{id:`project-tags-input-${m}`,type:"text",value:f[m]||"",onChange:k=>g(m,k.target.value),onKeyDown:k=>v(k,m,O,E),className:"flex-grow px-1 py-0.5 border-none focus:ring-0 focus:outline-none text-sm",placeholder:E.length===0?"e.g., react, typescript":"Add tag..."})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`project-link-${m}`,className:"block text-sm font-medium text-gray-600 mb-1",children:"Project Link (URL)"}),I.jsx("input",{id:`project-link-${m}`,type:"url",value:N,onChange:k=>t(x,k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://example.com"})]})]})]},m)})]})]})},Ib=({data:n,path:e,handleChange:t,handleDelete:r,handleAddService:i})=>{const{requestConfirmation:o}=Vt(),[s,a]=Y.useState({});if(!n||typeof n!="object")return I.jsx("p",{className:"text-red-500",children:"Error: Services data is missing or invalid."});const c=Array.isArray(n.list)?n.list:[],p=[...e,"title"],d=f=>{a(u=>({...u,[f]:!u[f]}))};return I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"services-section-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),I.jsx("input",{id:"services-section-title",type:"text",value:n.title||"",onChange:f=>t(p,f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter the title for the services section"})]}),I.jsx("div",{className:"flex justify-end",children:I.jsxs("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center gap-2","aria-label":"Add new service item",children:[I.jsx(Fr,{size:16})," Add New Service"]})}),I.jsxs("div",{className:"space-y-3",children:[I.jsxs("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2 mb-3",children:["Service Items (",c.length,")"]}),c.length===0?I.jsx("p",{className:"text-gray-500 italic",children:'No services added yet. Click "Add New Service" to begin.'}):c.map((f,u)=>{const h=[...e,"list",u],_=[...h,"title"],g=[...h,"description"],v=s[u]||!1;return I.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[I.jsxs("div",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-100 relative group",onClick:()=>d(u),role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&d(u)},"aria-expanded":v,"aria-controls":`service-content-${u}`,children:[I.jsx("div",{className:"mr-3 text-gray-500",children:v?I.jsx(im,{size:18}):I.jsx(tu,{size:18})}),I.jsxs("div",{className:"flex-grow mr-2",children:[I.jsxs("label",{htmlFor:`service-title-${u}`,className:"sr-only",children:["Service Title #",u+1]}),I.jsx("input",{id:`service-title-${u}`,type:"text",value:f.title||"",onChange:m=>{m.stopPropagation(),t(_,m.target.value)},onClick:m=>m.stopPropagation(),className:"w-full px-2 py-1 border border-transparent rounded focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 bg-transparent hover:border-gray-300 focus:bg-white",placeholder:`Service Title #${u+1}`})]}),I.jsx("button",{onClick:m=>{m.stopPropagation(),o({message:`Are you sure you want to delete service "${f.title||`Item #${u+1}`}"?
This action cannot be undone.`,onConfirm:()=>r([...e,"list",u]),confirmText:"Delete Service",title:"Confirm Deletion"})},className:"p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity focus:outline-none focus:ring-1 focus:ring-red-500 rounded-full z-10","aria-label":`Delete service ${u+1}`,children:I.jsx(Kn,{size:18})})]}),v&&I.jsxs("div",{id:`service-content-${u}`,className:"p-4 border-t border-gray-200 bg-white",children:[I.jsx("label",{htmlFor:`service-description-${u}`,className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),I.jsx("textarea",{id:`service-description-${u}`,value:f.description||"",onChange:m=>t(g,m.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter service description"})]})]},u)})]})]})},{min:Sb,max:Rb}=Math,xn=(n,e=0,t=1)=>Sb(Rb(e,n),t),ru=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let e=0;e<=3;e++)e<3?((n[e]<0||n[e]>255)&&(n._clipped=!0),n[e]=xn(n[e],0,255)):e===3&&(n[e]=xn(n[e],0,1));return n},dm={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])dm[`[object ${n}]`]=n.toLowerCase();function Ie(n){return dm[Object.prototype.toString.call(n)]||"object"}const Ee=(n,e=null)=>n.length>=3?Array.prototype.slice.call(n):Ie(n[0])=="object"&&e?e.split("").filter(t=>n[0][t]!==void 0).map(t=>n[0][t]):n[0].slice(0),tr=n=>{if(n.length<2)return null;const e=n.length-1;return Ie(n[e])=="string"?n[e].toLowerCase():null},{PI:vo,min:pm,max:mm}=Math,wt=n=>Math.round(n*100)/100,ll=n=>Math.round(n*100)/100,Ut=vo*2,Qo=vo/3,Cb=vo/180,Pb=180/vo;function gm(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const _e={format:{},autodetect:[]};class se{constructor(...e){const t=this;if(Ie(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=tr(e),i=!1;if(!r){i=!0,_e.sorted||(_e.autodetect=_e.autodetect.sort((o,s)=>s.p-o.p),_e.sorted=!0);for(let o of _e.autodetect)if(r=o.test(...e),r)break}if(_e.format[r]){const o=_e.format[r].apply(null,i?e:e.slice(0,-1));t._rgb=ru(o)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Ie(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Ob="3.1.2",Te=(...n)=>new se(...n);Te.version=Ob;const Wn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},jb=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Lb=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,ym=n=>{if(n.match(jb)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=parseInt(n,16),t=e>>16,r=e>>8&255,i=e&255;return[t,r,i,1]}if(n.match(Lb)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=parseInt(n,16),t=e>>24&255,r=e>>16&255,i=e>>8&255,o=Math.round((e&255)/255*100)/100;return[t,r,i,o]}throw new Error(`unknown hex color: ${n}`)},{round:xi}=Math,vm=(...n)=>{let[e,t,r,i]=Ee(n,"rgba"),o=tr(n)||"auto";i===void 0&&(i=1),o==="auto"&&(o=i<1?"rgba":"rgb"),e=xi(e),t=xi(t),r=xi(r);let a="000000"+(e<<16|t<<8|r).toString(16);a=a.substr(a.length-6);let c="0"+xi(i*255).toString(16);switch(c=c.substr(c.length-2),o.toLowerCase()){case"rgba":return`#${a}${c}`;case"argb":return`#${c}${a}`;default:return`#${a}`}};se.prototype.name=function(){const n=vm(this._rgb,"rgb");for(let e of Object.keys(Wn))if(Wn[e]===n)return e.toLowerCase();return n};_e.format.named=n=>{if(n=n.toLowerCase(),Wn[n])return ym(Wn[n]);throw new Error("unknown color name: "+n)};_e.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Ie(n)==="string"&&Wn[n.toLowerCase()])return"named"}});se.prototype.alpha=function(n,e=!1){return n!==void 0&&Ie(n)==="number"?e?(this._rgb[3]=n,this):new se([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};se.prototype.clipped=function(){return this._rgb._clipped||!1};const Lt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Mb=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function $t(n){const e=Mb.get(String(n).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+n);Lt.labWhitePoint=n,Lt.Xn=e[0],Lt.Zn=e[1]}function Br(){return Lt.labWhitePoint}const iu=(...n)=>{n=Ee(n,"lab");const[e,t,r]=n,[i,o,s]=Db(e,t,r),[a,c,p]=bm(i,o,s);return[a,c,p,n.length>3?n[3]:1]},Db=(n,e,t)=>{const{kE:r,kK:i,kKE:o,Xn:s,Yn:a,Zn:c}=Lt,p=(n+16)/116,d=.002*e+p,f=p-.005*t,u=d*d*d,h=f*f*f,_=u>r?u:(116*d-16)/i,g=n>o?Math.pow((n+16)/116,3):n/i,v=h>r?h:(116*f-16)/i,m=_*s,b=g*a,A=v*c;return[m,b,A]},Yo=n=>{const e=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*e},bm=(n,e,t)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:a,Yn:c,Zn:p}=Lt,d=a*r.m00+c*r.m10+p*r.m20,f=a*r.m01+c*r.m11+p*r.m21,u=a*r.m02+c*r.m12+p*r.m22,h=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,_=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,g=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,v=(n*r.m00+e*r.m10+t*r.m20)*(h/d),m=(n*r.m01+e*r.m11+t*r.m21)*(_/f),b=(n*r.m02+e*r.m12+t*r.m22)*(g/u),A=v*i.m00+m*i.m10+b*i.m20,y=v*i.m01+m*i.m11+b*i.m21,C=v*i.m02+m*i.m12+b*i.m22,O=Yo(A*o.m00+y*o.m10+C*o.m20),x=Yo(A*o.m01+y*o.m11+C*o.m21),w=Yo(A*o.m02+y*o.m12+C*o.m22);return[O*255,x*255,w*255]},ou=(...n)=>{const[e,t,r,...i]=Ee(n,"rgb"),[o,s,a]=_m(e,t,r),[c,p,d]=Vb(o,s,a);return[c,p,d,...i.length>0&&i[0]<1?[i[0]]:[]]};function Vb(n,e,t){const{Xn:r,Yn:i,Zn:o,kE:s,kK:a}=Lt,c=n/r,p=e/i,d=t/o,f=c>s?Math.pow(c,1/3):(a*c+16)/116,u=p>s?Math.pow(p,1/3):(a*p+16)/116,h=d>s?Math.pow(d,1/3):(a*d+16)/116;return[116*u-16,500*(f-u),200*(u-h)]}function Xo(n){const e=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*e}const _m=(n,e,t)=>{n=Xo(n/255),e=Xo(e/255),t=Xo(t/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:s,Yn:a,Zn:c,As:p,Bs:d,Cs:f}=Lt;let u=n*r.m00+e*r.m10+t*r.m20,h=n*r.m01+e*r.m11+t*r.m21,_=n*r.m02+e*r.m12+t*r.m22;const g=s*i.m00+a*i.m10+c*i.m20,v=s*i.m01+a*i.m11+c*i.m21,m=s*i.m02+a*i.m12+c*i.m22;let b=u*i.m00+h*i.m10+_*i.m20,A=u*i.m01+h*i.m11+_*i.m21,y=u*i.m02+h*i.m12+_*i.m22;return b*=g/p,A*=v/d,y*=m/f,u=b*o.m00+A*o.m10+y*o.m20,h=b*o.m01+A*o.m11+y*o.m21,_=b*o.m02+A*o.m12+y*o.m22,[u,h,_]};se.prototype.lab=function(){return ou(this._rgb)};const qb=(...n)=>new se(...n,"lab");Object.assign(Te,{lab:qb,getLabWhitePoint:Br,setLabWhitePoint:$t});_e.format.lab=iu;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"lab"),Ie(n)==="array"&&n.length===3)return"lab"}});se.prototype.darken=function(n=1){const e=this,t=e.lab();return t[0]-=Lt.Kn*n,new se(t,"lab").alpha(e.alpha(),!0)};se.prototype.brighten=function(n=1){return this.darken(-n)};se.prototype.darker=se.prototype.darken;se.prototype.brighter=se.prototype.brighten;se.prototype.get=function(n){const[e,t]=n.split("."),r=this[e]();if(t){const i=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${t} in mode ${e}`)}else return r};const{pow:Fb}=Math,Bb=1e-7,Ub=20;se.prototype.luminance=function(n,e="rgb"){if(n!==void 0&&Ie(n)==="number"){if(n===0)return new se([0,0,0,this._rgb[3]],"rgb");if(n===1)return new se([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),r=Ub;const i=(s,a)=>{const c=s.interpolate(a,.5,e),p=c.luminance();return Math.abs(n-p)<Bb||!r--?c:p>n?i(s,c):i(c,a)},o=(t>n?i(new se([0,0,0]),this):i(this,new se([255,255,255]))).rgb();return new se([...o,this._rgb[3]])}return zb(...this._rgb.slice(0,3))};const zb=(n,e,t)=>(n=Zo(n),e=Zo(e),t=Zo(t),.2126*n+.7152*e+.0722*t),Zo=n=>(n/=255,n<=.03928?n/12.92:Fb((n+.055)/1.055,2.4)),ft={},Qn=(n,e,t=.5,...r)=>{let i=r[0]||"lrgb";if(!ft[i]&&!r.length&&(i=Object.keys(ft)[0]),!ft[i])throw new Error(`interpolation mode ${i} is not defined`);return Ie(n)!=="object"&&(n=new se(n)),Ie(e)!=="object"&&(e=new se(e)),ft[i](n,e,t).alpha(n.alpha()+t*(e.alpha()-n.alpha()))};se.prototype.mix=se.prototype.interpolate=function(n,e=.5,...t){return Qn(this,n,e,...t)};se.prototype.premultiply=function(n=!1){const e=this._rgb,t=e[3];return n?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new se([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};const{sin:$b,cos:Hb}=Math,xm=(...n)=>{let[e,t,r]=Ee(n,"lch");return isNaN(r)&&(r=0),r=r*Cb,[e,Hb(r)*t,$b(r)*t]},su=(...n)=>{n=Ee(n,"lch");const[e,t,r]=n,[i,o,s]=xm(e,t,r),[a,c,p]=iu(i,o,s);return[a,c,p,n.length>3?n[3]:1]},Gb=(...n)=>{const e=gm(Ee(n,"hcl"));return su(...e)},{sqrt:Kb,atan2:Wb,round:Qb}=Math,wm=(...n)=>{const[e,t,r]=Ee(n,"lab"),i=Kb(t*t+r*r);let o=(Wb(r,t)*Pb+360)%360;return Qb(i*1e4)===0&&(o=Number.NaN),[e,i,o]},au=(...n)=>{const[e,t,r,...i]=Ee(n,"rgb"),[o,s,a]=ou(e,t,r),[c,p,d]=wm(o,s,a);return[c,p,d,...i.length>0&&i[0]<1?[i[0]]:[]]};se.prototype.lch=function(){return au(this._rgb)};se.prototype.hcl=function(){return gm(au(this._rgb))};const Yb=(...n)=>new se(...n,"lch"),Xb=(...n)=>new se(...n,"hcl");Object.assign(Te,{lch:Yb,hcl:Xb});_e.format.lch=su;_e.format.hcl=Gb;["lch","hcl"].forEach(n=>_e.autodetect.push({p:2,test:(...e)=>{if(e=Ee(e,n),Ie(e)==="array"&&e.length===3)return n}}));se.prototype.saturate=function(n=1){const e=this,t=e.lch();return t[1]+=Lt.Kn*n,t[1]<0&&(t[1]=0),new se(t,"lch").alpha(e.alpha(),!0)};se.prototype.desaturate=function(n=1){return this.saturate(-n)};se.prototype.set=function(n,e,t=!1){const[r,i]=n.split("."),o=this[r]();if(i){const s=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(Ie(e)=="string")switch(e.charAt(0)){case"+":o[s]+=+e;break;case"-":o[s]+=+e;break;case"*":o[s]*=+e.substr(1);break;case"/":o[s]/=+e.substr(1);break;default:o[s]=+e}else if(Ie(e)==="number")o[s]=e;else throw new Error("unsupported value for Color.set");const a=new se(o,r);return t?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${i} in mode ${r}`)}else return o};se.prototype.tint=function(n=.5,...e){return Qn(this,"white",n,...e)};se.prototype.shade=function(n=.5,...e){return Qn(this,"black",n,...e)};const Zb=(n,e,t)=>{const r=n._rgb,i=e._rgb;return new se(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"rgb")};ft.rgb=Zb;const{sqrt:Jo,pow:Cn}=Math,Jb=(n,e,t)=>{const[r,i,o]=n._rgb,[s,a,c]=e._rgb;return new se(Jo(Cn(r,2)*(1-t)+Cn(s,2)*t),Jo(Cn(i,2)*(1-t)+Cn(a,2)*t),Jo(Cn(o,2)*(1-t)+Cn(c,2)*t),"rgb")};ft.lrgb=Jb;const e_=(n,e,t)=>{const r=n.lab(),i=e.lab();return new se(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"lab")};ft.lab=e_;const nr=(n,e,t,r)=>{let i,o;r==="hsl"?(i=n.hsl(),o=e.hsl()):r==="hsv"?(i=n.hsv(),o=e.hsv()):r==="hcg"?(i=n.hcg(),o=e.hcg()):r==="hsi"?(i=n.hsi(),o=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",i=n.hcl(),o=e.hcl()):r==="oklch"&&(i=n.oklch().reverse(),o=e.oklch().reverse());let s,a,c,p,d,f;(r.substr(0,1)==="h"||r==="oklch")&&([s,c,d]=i,[a,p,f]=o);let u,h,_,g;return!isNaN(s)&&!isNaN(a)?(a>s&&a-s>180?g=a-(s+360):a<s&&s-a>180?g=a+360-s:g=a-s,h=s+t*g):isNaN(s)?isNaN(a)?h=Number.NaN:(h=a,(d==1||d==0)&&r!="hsv"&&(u=p)):(h=s,(f==1||f==0)&&r!="hsv"&&(u=c)),u===void 0&&(u=c+t*(p-c)),_=d+t*(f-d),r==="oklch"?new se([_,u,h],r):new se([h,u,_],r)},Em=(n,e,t)=>nr(n,e,t,"lch");ft.lch=Em;ft.hcl=Em;const t_=n=>{if(Ie(n)=="number"&&n>=0&&n<=16777215){const e=n>>16,t=n>>8&255,r=n&255;return[e,t,r,1]}throw new Error("unknown num color: "+n)},n_=(...n)=>{const[e,t,r]=Ee(n,"rgb");return(e<<16)+(t<<8)+r};se.prototype.num=function(){return n_(this._rgb)};const r_=(...n)=>new se(...n,"num");Object.assign(Te,{num:r_});_e.format.num=t_;_e.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&Ie(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const i_=(n,e,t)=>{const r=n.num(),i=e.num();return new se(r+t*(i-r),"num")};ft.num=i_;const{floor:o_}=Math,s_=(...n)=>{n=Ee(n,"hcg");let[e,t,r]=n,i,o,s;r=r*255;const a=t*255;if(t===0)i=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const c=o_(e),p=e-c,d=r*(1-t),f=d+a*(1-p),u=d+a*p,h=d+a;switch(c){case 0:[i,o,s]=[h,u,d];break;case 1:[i,o,s]=[f,h,d];break;case 2:[i,o,s]=[d,h,u];break;case 3:[i,o,s]=[d,f,h];break;case 4:[i,o,s]=[u,d,h];break;case 5:[i,o,s]=[h,d,f];break}}return[i,o,s,n.length>3?n[3]:1]},a_=(...n)=>{const[e,t,r]=Ee(n,"rgb"),i=pm(e,t,r),o=mm(e,t,r),s=o-i,a=s*100/255,c=i/(255-s)*100;let p;return s===0?p=Number.NaN:(e===o&&(p=(t-r)/s),t===o&&(p=2+(r-e)/s),r===o&&(p=4+(e-t)/s),p*=60,p<0&&(p+=360)),[p,a,c]};se.prototype.hcg=function(){return a_(this._rgb)};const l_=(...n)=>new se(...n,"hcg");Te.hcg=l_;_e.format.hcg=s_;_e.autodetect.push({p:1,test:(...n)=>{if(n=Ee(n,"hcg"),Ie(n)==="array"&&n.length===3)return"hcg"}});const u_=(n,e,t)=>nr(n,e,t,"hcg");ft.hcg=u_;const{cos:Pn}=Math,c_=(...n)=>{n=Ee(n,"hsi");let[e,t,r]=n,i,o,s;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(s=(1-t)/3,i=(1+t*Pn(Ut*e)/Pn(Qo-Ut*e))/3,o=1-(s+i)):e<2/3?(e-=1/3,i=(1-t)/3,o=(1+t*Pn(Ut*e)/Pn(Qo-Ut*e))/3,s=1-(i+o)):(e-=2/3,o=(1-t)/3,s=(1+t*Pn(Ut*e)/Pn(Qo-Ut*e))/3,i=1-(o+s)),i=xn(r*i*3),o=xn(r*o*3),s=xn(r*s*3),[i*255,o*255,s*255,n.length>3?n[3]:1]},{min:f_,sqrt:h_,acos:d_}=Math,p_=(...n)=>{let[e,t,r]=Ee(n,"rgb");e/=255,t/=255,r/=255;let i;const o=f_(e,t,r),s=(e+t+r)/3,a=s>0?1-o/s:0;return a===0?i=NaN:(i=(e-t+(e-r))/2,i/=h_((e-t)*(e-t)+(e-r)*(t-r)),i=d_(i),r>t&&(i=Ut-i),i/=Ut),[i*360,a,s]};se.prototype.hsi=function(){return p_(this._rgb)};const m_=(...n)=>new se(...n,"hsi");Te.hsi=m_;_e.format.hsi=c_;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"hsi"),Ie(n)==="array"&&n.length===3)return"hsi"}});const g_=(n,e,t)=>nr(n,e,t,"hsi");ft.hsi=g_;const ul=(...n)=>{n=Ee(n,"hsl");const[e,t,r]=n;let i,o,s;if(t===0)i=o=s=r*255;else{const a=[0,0,0],c=[0,0,0],p=r<.5?r*(1+t):r+t-r*t,d=2*r-p,f=e/360;a[0]=f+1/3,a[1]=f,a[2]=f-1/3;for(let u=0;u<3;u++)a[u]<0&&(a[u]+=1),a[u]>1&&(a[u]-=1),6*a[u]<1?c[u]=d+(p-d)*6*a[u]:2*a[u]<1?c[u]=p:3*a[u]<2?c[u]=d+(p-d)*(2/3-a[u])*6:c[u]=d;[i,o,s]=[c[0]*255,c[1]*255,c[2]*255]}return n.length>3?[i,o,s,n[3]]:[i,o,s,1]},Tm=(...n)=>{n=Ee(n,"rgba");let[e,t,r]=n;e/=255,t/=255,r/=255;const i=pm(e,t,r),o=mm(e,t,r),s=(o+i)/2;let a,c;return o===i?(a=0,c=Number.NaN):a=s<.5?(o-i)/(o+i):(o-i)/(2-o-i),e==o?c=(t-r)/(o-i):t==o?c=2+(r-e)/(o-i):r==o&&(c=4+(e-t)/(o-i)),c*=60,c<0&&(c+=360),n.length>3&&n[3]!==void 0?[c,a,s,n[3]]:[c,a,s]};se.prototype.hsl=function(){return Tm(this._rgb)};const y_=(...n)=>new se(...n,"hsl");Te.hsl=y_;_e.format.hsl=ul;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"hsl"),Ie(n)==="array"&&n.length===3)return"hsl"}});const v_=(n,e,t)=>nr(n,e,t,"hsl");ft.hsl=v_;const{floor:b_}=Math,__=(...n)=>{n=Ee(n,"hsv");let[e,t,r]=n,i,o,s;if(r*=255,t===0)i=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=b_(e),c=e-a,p=r*(1-t),d=r*(1-t*c),f=r*(1-t*(1-c));switch(a){case 0:[i,o,s]=[r,f,p];break;case 1:[i,o,s]=[d,r,p];break;case 2:[i,o,s]=[p,r,f];break;case 3:[i,o,s]=[p,d,r];break;case 4:[i,o,s]=[f,p,r];break;case 5:[i,o,s]=[r,p,d];break}}return[i,o,s,n.length>3?n[3]:1]},{min:x_,max:w_}=Math,E_=(...n)=>{n=Ee(n,"rgb");let[e,t,r]=n;const i=x_(e,t,r),o=w_(e,t,r),s=o-i;let a,c,p;return p=o/255,o===0?(a=Number.NaN,c=0):(c=s/o,e===o&&(a=(t-r)/s),t===o&&(a=2+(r-e)/s),r===o&&(a=4+(e-t)/s),a*=60,a<0&&(a+=360)),[a,c,p]};se.prototype.hsv=function(){return E_(this._rgb)};const T_=(...n)=>new se(...n,"hsv");Te.hsv=T_;_e.format.hsv=__;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"hsv"),Ie(n)==="array"&&n.length===3)return"hsv"}});const A_=(n,e,t)=>nr(n,e,t,"hsv");ft.hsv=A_;function Wi(n,e){let t=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,i=e[0].map((s,a)=>e.map(c=>c[a])),o=n.map(s=>i.map(a=>Array.isArray(s)?s.reduce((c,p,d)=>c+p*(a[d]||0),0):a.reduce((c,p)=>c+p*s,0)));return t===1&&(o=o[0]),r===1?o.map(s=>s[0]):o}const lu=(...n)=>{n=Ee(n,"lab");const[e,t,r,...i]=n,[o,s,a]=k_([e,t,r]),[c,p,d]=bm(o,s,a);return[c,p,d,...i.length>0&&i[0]<1?[i[0]]:[]]};function k_(n){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],t=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Wi(t,n);return Wi(e,r.map(i=>i**3))}const uu=(...n)=>{const[e,t,r,...i]=Ee(n,"rgb"),o=_m(e,t,r);return[...N_(o),...i.length>0&&i[0]<1?[i[0]]:[]]};function N_(n){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Wi(e,n);return Wi(t,r.map(i=>Math.cbrt(i)))}se.prototype.oklab=function(){return uu(this._rgb)};const I_=(...n)=>new se(...n,"oklab");Object.assign(Te,{oklab:I_});_e.format.oklab=lu;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"oklab"),Ie(n)==="array"&&n.length===3)return"oklab"}});const S_=(n,e,t)=>{const r=n.oklab(),i=e.oklab();return new se(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"oklab")};ft.oklab=S_;const R_=(n,e,t)=>nr(n,e,t,"oklch");ft.oklch=R_;const{pow:es,sqrt:ts,PI:ns,cos:gf,sin:yf,atan2:C_}=Math,P_=(n,e="lrgb",t=null)=>{const r=n.length;t||(t=Array.from(new Array(r)).map(()=>1));const i=r/t.reduce(function(f,u){return f+u});if(t.forEach((f,u)=>{t[u]*=i}),n=n.map(f=>new se(f)),e==="lrgb")return O_(n,t);const o=n.shift(),s=o.get(e),a=[];let c=0,p=0;for(let f=0;f<s.length;f++)if(s[f]=(s[f]||0)*t[0],a.push(isNaN(s[f])?0:t[0]),e.charAt(f)==="h"&&!isNaN(s[f])){const u=s[f]/180*ns;c+=gf(u)*t[0],p+=yf(u)*t[0]}let d=o.alpha()*t[0];n.forEach((f,u)=>{const h=f.get(e);d+=f.alpha()*t[u+1];for(let _=0;_<s.length;_++)if(!isNaN(h[_]))if(a[_]+=t[u+1],e.charAt(_)==="h"){const g=h[_]/180*ns;c+=gf(g)*t[u+1],p+=yf(g)*t[u+1]}else s[_]+=h[_]*t[u+1]});for(let f=0;f<s.length;f++)if(e.charAt(f)==="h"){let u=C_(p/a[f],c/a[f])/ns*180;for(;u<0;)u+=360;for(;u>=360;)u-=360;s[f]=u}else s[f]=s[f]/a[f];return d/=r,new se(s,e).alpha(d>.99999?1:d,!0)},O_=(n,e)=>{const t=n.length,r=[0,0,0,0];for(let i=0;i<n.length;i++){const o=n[i],s=e[i]/t,a=o._rgb;r[0]+=es(a[0],2)*s,r[1]+=es(a[1],2)*s,r[2]+=es(a[2],2)*s,r[3]+=a[3]*s}return r[0]=ts(r[0]),r[1]=ts(r[1]),r[2]=ts(r[2]),r[3]>.9999999&&(r[3]=1),new se(ru(r))},{pow:j_}=Math;function Qi(n){let e="rgb",t=Te("#ccc"),r=0,i=[0,1],o=[],s=[0,0],a=!1,c=[],p=!1,d=0,f=1,u=!1,h={},_=!0,g=1;const v=function(x){if(x=x||["#fff","#000"],x&&Ie(x)==="string"&&Te.brewer&&Te.brewer[x.toLowerCase()]&&(x=Te.brewer[x.toLowerCase()]),Ie(x)==="array"){x.length===1&&(x=[x[0],x[0]]),x=x.slice(0);for(let w=0;w<x.length;w++)x[w]=Te(x[w]);o.length=0;for(let w=0;w<x.length;w++)o.push(w/(x.length-1))}return C(),c=x},m=function(x){if(a!=null){const w=a.length-1;let R=0;for(;R<w&&x>=a[R];)R++;return R-1}return 0};let b=x=>x,A=x=>x;const y=function(x,w){let R,T;if(w==null&&(w=!1),isNaN(x)||x===null)return t;w?T=x:a&&a.length>2?T=m(x)/(a.length-2):f!==d?T=(x-d)/(f-d):T=1,T=A(T),w||(T=b(T)),g!==1&&(T=j_(T,g)),T=s[0]+T*(1-s[0]-s[1]),T=xn(T,0,1);const E=Math.floor(T*1e4);if(_&&h[E])R=h[E];else{if(Ie(c)==="array")for(let N=0;N<o.length;N++){const k=o[N];if(T<=k){R=c[N];break}if(T>=k&&N===o.length-1){R=c[N];break}if(T>k&&T<o[N+1]){T=(T-k)/(o[N+1]-k),R=Te.interpolate(c[N],c[N+1],T,e);break}}else Ie(c)==="function"&&(R=c(T));_&&(h[E]=R)}return R};var C=()=>h={};v(n);const O=function(x){const w=Te(y(x));return p&&w[p]?w[p]():w};return O.classes=function(x){if(x!=null){if(Ie(x)==="array")a=x,i=[x[0],x[x.length-1]];else{const w=Te.analyze(i);x===0?a=[w.min,w.max]:a=Te.limits(w,"e",x)}return O}return a},O.domain=function(x){if(!arguments.length)return i;d=x[0],f=x[x.length-1],o=[];const w=c.length;if(x.length===w&&d!==f)for(let R of Array.from(x))o.push((R-d)/(f-d));else{for(let R=0;R<w;R++)o.push(R/(w-1));if(x.length>2){const R=x.map((E,N)=>N/(x.length-1)),T=x.map(E=>(E-d)/(f-d));T.every((E,N)=>R[N]===E)||(A=E=>{if(E<=0||E>=1)return E;let N=0;for(;E>=T[N+1];)N++;const k=(E-T[N])/(T[N+1]-T[N]);return R[N]+k*(R[N+1]-R[N])})}}return i=[d,f],O},O.mode=function(x){return arguments.length?(e=x,C(),O):e},O.range=function(x,w){return v(x),O},O.out=function(x){return p=x,O},O.spread=function(x){return arguments.length?(r=x,O):r},O.correctLightness=function(x){return x==null&&(x=!0),u=x,C(),u?b=function(w){const R=y(0,!0).lab()[0],T=y(1,!0).lab()[0],E=R>T;let N=y(w,!0).lab()[0];const k=R+(T-R)*w;let j=N-k,V=0,H=1,$=20;for(;Math.abs(j)>.01&&$-- >0;)(function(){return E&&(j*=-1),j<0?(V=w,w+=(H-w)*.5):(H=w,w+=(V-w)*.5),N=y(w,!0).lab()[0],j=N-k})();return w}:b=w=>w,O},O.padding=function(x){return x!=null?(Ie(x)==="number"&&(x=[x,x]),s=x,O):s},O.colors=function(x,w){arguments.length<2&&(w="hex");let R=[];if(arguments.length===0)R=c.slice(0);else if(x===1)R=[O(.5)];else if(x>1){const T=i[0],E=i[1]-T;R=L_(0,x).map(N=>O(T+N/(x-1)*E))}else{n=[];let T=[];if(a&&a.length>2)for(let E=1,N=a.length,k=1<=N;k?E<N:E>N;k?E++:E--)T.push((a[E-1]+a[E])*.5);else T=i;R=T.map(E=>O(E))}return Te[w]&&(R=R.map(T=>T[w]())),R},O.cache=function(x){return x!=null?(_=x,O):_},O.gamma=function(x){return x!=null?(g=x,O):g},O.nodata=function(x){return x!=null?(t=Te(x),O):t},O}function L_(n,e,t){let r=[],i=n<e,o=e;for(let s=n;i?s<o:s>o;i?s++:s--)r.push(s);return r}const M_=function(n){let e=[1,1];for(let t=1;t<n;t++){let r=[1];for(let i=1;i<=e.length;i++)r[i]=(e[i]||0)+e[i-1];e=r}return e},D_=function(n){let e,t,r,i;if(n=n.map(o=>new se(o)),n.length===2)[t,r]=n.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(a=>t[a]+o*(r[a]-t[a]));return new se(s,"lab")};else if(n.length===3)[t,r,i]=n.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(a=>(1-o)*(1-o)*t[a]+2*(1-o)*o*r[a]+o*o*i[a]);return new se(s,"lab")};else if(n.length===4){let o;[t,r,i,o]=n.map(s=>s.lab()),e=function(s){const a=[0,1,2].map(c=>(1-s)*(1-s)*(1-s)*t[c]+3*(1-s)*(1-s)*s*r[c]+3*(1-s)*s*s*i[c]+s*s*s*o[c]);return new se(a,"lab")}}else if(n.length>=5){let o,s,a;o=n.map(c=>c.lab()),a=n.length-1,s=M_(a),e=function(c){const p=1-c,d=[0,1,2].map(f=>o.reduce((u,h,_)=>u+s[_]*p**(a-_)*c**_*h[f],0));return new se(d,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},V_=n=>{const e=D_(n);return e.scale=()=>Qi(e),e},{round:Am}=Math;se.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Am)};se.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?n===!1?e:Am(e):e)};const q_=(...n)=>new se(...n,"rgb");Object.assign(Te,{rgb:q_});_e.format.rgb=(...n)=>{const e=Ee(n,"rgba");return e[3]===void 0&&(e[3]=1),e};_e.autodetect.push({p:3,test:(...n)=>{if(n=Ee(n,"rgba"),Ie(n)==="array"&&(n.length===3||n.length===4&&Ie(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const Rt=(n,e,t)=>{if(!Rt[t])throw new Error("unknown blend mode "+t);return Rt[t](n,e)},dn=n=>(e,t)=>{const r=Te(t).rgb(),i=Te(e).rgb();return Te.rgb(n(r,i))},pn=n=>(e,t)=>{const r=[];return r[0]=n(e[0],t[0]),r[1]=n(e[1],t[1]),r[2]=n(e[2],t[2]),r},F_=n=>n,B_=(n,e)=>n*e/255,U_=(n,e)=>n>e?e:n,z_=(n,e)=>n>e?n:e,$_=(n,e)=>255*(1-(1-n/255)*(1-e/255)),H_=(n,e)=>e<128?2*n*e/255:255*(1-2*(1-n/255)*(1-e/255)),G_=(n,e)=>255*(1-(1-e/255)/(n/255)),K_=(n,e)=>n===255?255:(n=255*(e/255)/(1-n/255),n>255?255:n);Rt.normal=dn(pn(F_));Rt.multiply=dn(pn(B_));Rt.screen=dn(pn($_));Rt.overlay=dn(pn(H_));Rt.darken=dn(pn(U_));Rt.lighten=dn(pn(z_));Rt.dodge=dn(pn(K_));Rt.burn=dn(pn(G_));const{pow:W_,sin:Q_,cos:Y_}=Math;function X_(n=300,e=-1.5,t=1,r=1,i=[0,1]){let o=0,s;Ie(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const a=function(c){const p=Ut*((n+120)/360+e*c),d=W_(i[0]+s*c,r),u=(o!==0?t[0]+c*o:t)*d*(1-d)/2,h=Y_(p),_=Q_(p),g=d+u*(-.14861*h+1.78277*_),v=d+u*(-.29227*h-.90649*_),m=d+u*(1.97294*h);return Te(ru([g*255,v*255,m*255,1]))};return a.start=function(c){return c==null?n:(n=c,a)},a.rotations=function(c){return c==null?e:(e=c,a)},a.gamma=function(c){return c==null?r:(r=c,a)},a.hue=function(c){return c==null?t:(t=c,Ie(t)==="array"?(o=t[1]-t[0],o===0&&(t=t[1])):o=0,a)},a.lightness=function(c){return c==null?i:(Ie(c)==="array"?(i=c,s=c[1]-c[0]):(i=[c,c],s=0),a)},a.scale=()=>Te.scale(a),a.hue(t),a}const Z_="0123456789abcdef",{floor:J_,random:e2}=Math,t2=()=>{let n="#";for(let e=0;e<6;e++)n+=Z_.charAt(J_(e2()*16));return new se(n,"hex")},{log:vf,pow:n2,floor:r2,abs:i2}=Math;function km(n,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Ie(n)==="object"&&(n=Object.values(n)),n.forEach(r=>{e&&Ie(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(t.values.push(r),t.sum+=r,r<t.min&&(t.min=r),r>t.max&&(t.max=r),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(r,i)=>Nm(t,r,i),t}function Nm(n,e="equal",t=7){Ie(n)=="array"&&(n=km(n));const{min:r,max:i}=n,o=n.values.sort((a,c)=>a-c);if(t===1)return[r,i];const s=[];if(e.substr(0,1)==="c"&&(s.push(r),s.push(i)),e.substr(0,1)==="e"){s.push(r);for(let a=1;a<t;a++)s.push(r+a/t*(i-r));s.push(i)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*vf(r),c=Math.LOG10E*vf(i);s.push(r);for(let p=1;p<t;p++)s.push(n2(10,a+p/t*(c-a)));s.push(i)}else if(e.substr(0,1)==="q"){s.push(r);for(let a=1;a<t;a++){const c=(o.length-1)*a/t,p=r2(c);if(p===c)s.push(o[p]);else{const d=c-p;s.push(o[p]*(1-d)+o[p+1]*d)}}s.push(i)}else if(e.substr(0,1)==="k"){let a;const c=o.length,p=new Array(c),d=new Array(t);let f=!0,u=0,h=null;h=[],h.push(r);for(let v=1;v<t;v++)h.push(r+v/t*(i-r));for(h.push(i);f;){for(let m=0;m<t;m++)d[m]=0;for(let m=0;m<c;m++){const b=o[m];let A=Number.MAX_VALUE,y;for(let C=0;C<t;C++){const O=i2(h[C]-b);O<A&&(A=O,y=C),d[y]++,p[m]=y}}const v=new Array(t);for(let m=0;m<t;m++)v[m]=null;for(let m=0;m<c;m++)a=p[m],v[a]===null?v[a]=o[m]:v[a]+=o[m];for(let m=0;m<t;m++)v[m]*=1/d[m];f=!1;for(let m=0;m<t;m++)if(v[m]!==h[m]){f=!0;break}h=v,u++,u>200&&(f=!1)}const _={};for(let v=0;v<t;v++)_[v]=[];for(let v=0;v<c;v++)a=p[v],_[a].push(o[v]);let g=[];for(let v=0;v<t;v++)g.push(_[v][0]),g.push(_[v][_[v].length-1]);g=g.sort((v,m)=>v-m),s.push(g[0]);for(let v=1;v<g.length;v+=2){const m=g[v];!isNaN(m)&&s.indexOf(m)===-1&&s.push(m)}}return s}const o2=(n,e)=>{n=new se(n),e=new se(e);const t=n.luminance(),r=e.luminance();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const bf=.027,s2=5e-4,a2=.1,_f=1.14,wi=.022,xf=1.414,l2=(n,e)=>{n=new se(n),e=new se(e),n.alpha()<1&&(n=Qn(e,n,n.alpha(),"rgb"));const t=wf(...n.rgb()),r=wf(...e.rgb()),i=t>=wi?t:t+Math.pow(wi-t,xf),o=r>=wi?r:r+Math.pow(wi-r,xf),s=Math.pow(o,.56)-Math.pow(i,.57),a=Math.pow(o,.65)-Math.pow(i,.62),c=Math.abs(o-i)<s2?0:i<o?s*_f:a*_f;return(Math.abs(c)<a2?0:c>0?c-bf:c+bf)*100};function wf(n,e,t){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(t/255,2.4)}const{sqrt:Bt,pow:Ke,min:u2,max:c2,atan2:Ef,abs:Tf,cos:Ei,sin:Af,exp:f2,PI:kf}=Math;function h2(n,e,t=1,r=1,i=1){var o=function(F){return 360*F/(2*kf)},s=function(F){return 2*kf*F/360};n=new se(n),e=new se(e);const[a,c,p]=Array.from(n.lab()),[d,f,u]=Array.from(e.lab()),h=(a+d)/2,_=Bt(Ke(c,2)+Ke(p,2)),g=Bt(Ke(f,2)+Ke(u,2)),v=(_+g)/2,m=.5*(1-Bt(Ke(v,7)/(Ke(v,7)+Ke(25,7)))),b=c*(1+m),A=f*(1+m),y=Bt(Ke(b,2)+Ke(p,2)),C=Bt(Ke(A,2)+Ke(u,2)),O=(y+C)/2,x=o(Ef(p,b)),w=o(Ef(u,A)),R=x>=0?x:x+360,T=w>=0?w:w+360,E=Tf(R-T)>180?(R+T+360)/2:(R+T)/2,N=1-.17*Ei(s(E-30))+.24*Ei(s(2*E))+.32*Ei(s(3*E+6))-.2*Ei(s(4*E-63));let k=T-R;k=Tf(k)<=180?k:T<=R?k+360:k-360,k=2*Bt(y*C)*Af(s(k)/2);const j=d-a,V=C-y,H=1+.015*Ke(h-50,2)/Bt(20+Ke(h-50,2)),$=1+.045*O,ie=1+.015*O*N,G=30*f2(-Ke((E-275)/25,2)),L=-(2*Bt(Ke(O,7)/(Ke(O,7)+Ke(25,7))))*Af(2*s(G)),q=Bt(Ke(j/(t*H),2)+Ke(V/(r*$),2)+Ke(k/(i*ie),2)+L*(V/(r*$))*(k/(i*ie)));return c2(0,u2(100,q))}function d2(n,e,t="lab"){n=new se(n),e=new se(e);const r=n.get(t),i=e.get(t);let o=0;for(let s in r){const a=(r[s]||0)-(i[s]||0);o+=a*a}return Math.sqrt(o)}const p2=(...n)=>{try{return new se(...n),!0}catch{return!1}},m2={cool(){return Qi([Te.hsl(180,1,.9),Te.hsl(250,.7,.4)])},hot(){return Qi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},cl={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Im=Object.keys(cl),Nf=new Map(Im.map(n=>[n.toLowerCase(),n])),g2=typeof Proxy=="function"?new Proxy(cl,{get(n,e){const t=e.toLowerCase();if(Nf.has(t))return n[Nf.get(t)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Im)}}):cl,y2=(...n)=>{n=Ee(n,"cmyk");const[e,t,r,i]=n,o=n.length>4?n[4]:1;return i===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-i),t>=1?0:255*(1-t)*(1-i),r>=1?0:255*(1-r)*(1-i),o]},{max:If}=Math,v2=(...n)=>{let[e,t,r]=Ee(n,"rgb");e=e/255,t=t/255,r=r/255;const i=1-If(e,If(t,r)),o=i<1?1/(1-i):0,s=(1-e-i)*o,a=(1-t-i)*o,c=(1-r-i)*o;return[s,a,c,i]};se.prototype.cmyk=function(){return v2(this._rgb)};const b2=(...n)=>new se(...n,"cmyk");Object.assign(Te,{cmyk:b2});_e.format.cmyk=y2;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"cmyk"),Ie(n)==="array"&&n.length===4)return"cmyk"}});const _2=(...n)=>{const e=Ee(n,"hsla");let t=tr(n)||"lsa";return e[0]=wt(e[0]||0)+"deg",e[1]=wt(e[1]*100)+"%",e[2]=wt(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),t="hsla"):e.length=3,`${t.substr(0,3)}(${e.join(" ")})`},x2=(...n)=>{const e=Ee(n,"lab");let t=tr(n)||"lab";return e[0]=wt(e[0])+"%",e[1]=wt(e[1]),e[2]=wt(e[2]),t==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},w2=(...n)=>{const e=Ee(n,"lch");let t=tr(n)||"lab";return e[0]=wt(e[0])+"%",e[1]=wt(e[1]),e[2]=isNaN(e[2])?"none":wt(e[2])+"deg",t==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},E2=(...n)=>{const e=Ee(n,"lab");return e[0]=wt(e[0]*100)+"%",e[1]=ll(e[1]),e[2]=ll(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},Sm=(...n)=>{const[e,t,r,...i]=Ee(n,"rgb"),[o,s,a]=uu(e,t,r),[c,p,d]=wm(o,s,a);return[c,p,d,...i.length>0&&i[0]<1?[i[0]]:[]]},T2=(...n)=>{const e=Ee(n,"lch");return e[0]=wt(e[0]*100)+"%",e[1]=ll(e[1]),e[2]=isNaN(e[2])?"none":wt(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:rs}=Math,A2=(...n)=>{const e=Ee(n,"rgba");let t=tr(n)||"rgb";if(t.substr(0,3)==="hsl")return _2(Tm(e),t);if(t.substr(0,3)==="lab"){const r=Br();$t("d50");const i=x2(ou(e),t);return $t(r),i}if(t.substr(0,3)==="lch"){const r=Br();$t("d50");const i=w2(au(e),t);return $t(r),i}return t.substr(0,5)==="oklab"?E2(uu(e)):t.substr(0,5)==="oklch"?T2(Sm(e)):(e[0]=rs(e[0]),e[1]=rs(e[1]),e[2]=rs(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),t="rgba"),`${t.substr(0,3)}(${e.slice(0,t==="rgb"?3:4).join(" ")})`)},Rm=(...n)=>{n=Ee(n,"lch");const[e,t,r,...i]=n,[o,s,a]=xm(e,t,r),[c,p,d]=lu(o,s,a);return[c,p,d,...i.length>0&&i[0]<1?[i[0]]:[]]},Gt=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,It=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Yi=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Tt=/\s*/.source,rr=/\s+/.source,cu=/\s*,\s*/.source,bo=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ir=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Cm=new RegExp("^rgba?\\("+Tt+[Gt,Gt,Gt].join(rr)+ir+"\\)$"),Pm=new RegExp("^rgb\\("+Tt+[Gt,Gt,Gt].join(cu)+Tt+"\\)$"),Om=new RegExp("^rgba\\("+Tt+[Gt,Gt,Gt,It].join(cu)+Tt+"\\)$"),jm=new RegExp("^hsla?\\("+Tt+[bo,Yi,Yi].join(rr)+ir+"\\)$"),Lm=new RegExp("^hsl?\\("+Tt+[bo,Yi,Yi].join(cu)+Tt+"\\)$"),Mm=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Dm=new RegExp("^lab\\("+Tt+[It,It,It].join(rr)+ir+"\\)$"),Vm=new RegExp("^lch\\("+Tt+[It,It,bo].join(rr)+ir+"\\)$"),qm=new RegExp("^oklab\\("+Tt+[It,It,It].join(rr)+ir+"\\)$"),Fm=new RegExp("^oklch\\("+Tt+[It,It,bo].join(rr)+ir+"\\)$"),{round:Bm}=Math,On=n=>n.map((e,t)=>t<=2?xn(Bm(e),0,255):e),We=(n,e=0,t=100,r=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,r?n=e+(n+1)*.5*(t-e):n=e+n*(t-e)),+n),pt=(n,e)=>n==="none"?e:n,fu=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let e;if(_e.format.named)try{return _e.format.named(n)}catch{}if((e=n.match(Cm))||(e=n.match(Pm))){let t=e.slice(1,4);for(let i=0;i<3;i++)t[i]=+We(pt(t[i],0),0,255);t=On(t);const r=e[4]!==void 0?+We(e[4],0,1):1;return t[3]=r,t}if(e=n.match(Om)){const t=e.slice(1,5);for(let r=0;r<4;r++)t[r]=+We(t[r],0,255);return t}if((e=n.match(jm))||(e=n.match(Lm))){const t=e.slice(1,4);t[0]=+pt(t[0].replace("deg",""),0),t[1]=+We(pt(t[1],0),0,100)*.01,t[2]=+We(pt(t[2],0),0,100)*.01;const r=On(ul(t)),i=e[4]!==void 0?+We(e[4],0,1):1;return r[3]=i,r}if(e=n.match(Mm)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const r=ul(t);for(let i=0;i<3;i++)r[i]=Bm(r[i]);return r[3]=+e[4],r}if(e=n.match(Dm)){const t=e.slice(1,4);t[0]=We(pt(t[0],0),0,100),t[1]=We(pt(t[1],0),-125,125,!0),t[2]=We(pt(t[2],0),-125,125,!0);const r=Br();$t("d50");const i=On(iu(t));$t(r);const o=e[4]!==void 0?+We(e[4],0,1):1;return i[3]=o,i}if(e=n.match(Vm)){const t=e.slice(1,4);t[0]=We(t[0],0,100),t[1]=We(pt(t[1],0),0,150,!1),t[2]=+pt(t[2].replace("deg",""),0);const r=Br();$t("d50");const i=On(su(t));$t(r);const o=e[4]!==void 0?+We(e[4],0,1):1;return i[3]=o,i}if(e=n.match(qm)){const t=e.slice(1,4);t[0]=We(pt(t[0],0),0,1),t[1]=We(pt(t[1],0),-.4,.4,!0),t[2]=We(pt(t[2],0),-.4,.4,!0);const r=On(lu(t)),i=e[4]!==void 0?+We(e[4],0,1):1;return r[3]=i,r}if(e=n.match(Fm)){const t=e.slice(1,4);t[0]=We(pt(t[0],0),0,1),t[1]=We(pt(t[1],0),0,.4,!1),t[2]=+pt(t[2].replace("deg",""),0);const r=On(Rm(t)),i=e[4]!==void 0?+We(e[4],0,1):1;return r[3]=i,r}};fu.test=n=>Cm.test(n)||jm.test(n)||Dm.test(n)||Vm.test(n)||qm.test(n)||Fm.test(n)||Pm.test(n)||Om.test(n)||Lm.test(n)||Mm.test(n)||n==="transparent";se.prototype.css=function(n){return A2(this._rgb,n)};const k2=(...n)=>new se(...n,"css");Te.css=k2;_e.format.css=fu;_e.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Ie(n)==="string"&&fu.test(n))return"css"}});_e.format.gl=(...n)=>{const e=Ee(n,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const N2=(...n)=>new se(...n,"gl");Te.gl=N2;se.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};se.prototype.hex=function(n){return vm(this._rgb,n)};const I2=(...n)=>new se(...n,"hex");Te.hex=I2;_e.format.hex=ym;_e.autodetect.push({p:4,test:(n,...e)=>{if(!e.length&&Ie(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:Ti}=Math,Um=n=>{const e=n/100;let t,r,i;return e<66?(t=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*Ti(r),i=e<20?0:-254.76935184120902+.8274096064007395*(i=e-10)+115.67994401066147*Ti(i)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*Ti(t),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*Ti(r),i=255),[t,r,i,1]},{round:S2}=Math,R2=(...n)=>{const e=Ee(n,"rgb"),t=e[0],r=e[2];let i=1e3,o=4e4;const s=.4;let a;for(;o-i>s;){a=(o+i)*.5;const c=Um(a);c[2]/c[0]>=r/t?o=a:i=a}return S2(a)};se.prototype.temp=se.prototype.kelvin=se.prototype.temperature=function(){return R2(this._rgb)};const is=(...n)=>new se(...n,"temp");Object.assign(Te,{temp:is,kelvin:is,temperature:is});_e.format.temp=_e.format.kelvin=_e.format.temperature=Um;se.prototype.oklch=function(){return Sm(this._rgb)};const C2=(...n)=>new se(...n,"oklch");Object.assign(Te,{oklch:C2});_e.format.oklch=Rm;_e.autodetect.push({p:2,test:(...n)=>{if(n=Ee(n,"oklch"),Ie(n)==="array"&&n.length===3)return"oklch"}});Object.assign(Te,{analyze:km,average:P_,bezier:V_,blend:Rt,brewer:g2,Color:se,colors:Wn,contrast:o2,contrastAPCA:l2,cubehelix:X_,deltaE:h2,distance:d2,input:_e,interpolate:Qn,limits:Nm,mix:Qn,random:t2,scale:Qi,scales:m2,valid:p2});const Ce={primaryColor:"#377dc8",secondaryColor:"#0f3257",fontFamily:"'Noto Sans', sans-serif",titleColor:"#d7e3ee",h3TitleColor:"#d7e3ee",textColor:"#c6d3e2",backgroundFromColor:"#111827",backgroundToColor:"#1F2937",sectionBgColor:"#374151"},P2=()=>{const[n,e]=Y.useState(Ce.primaryColor),[t,r]=Y.useState(Ce.secondaryColor),[i,o]=Y.useState(Ce.fontFamily),[s,a]=Y.useState(Ce.titleColor),[c,p]=Y.useState(Ce.h3TitleColor),[d,f]=Y.useState(Ce.textColor),[u,h]=Y.useState(Ce.backgroundFromColor),[_,g]=Y.useState(Ce.backgroundToColor),[v,m]=Y.useState(Ce.sectionBgColor),[b,A]=Y.useState(!0),[y,C]=Y.useState(!1),[O,x]=Y.useState(0),[w,R]=Y.useState([]),[T,E]=Y.useState(""),[N,k]=Y.useState(!0),{showToast:j,requestConfirmation:V}=Vt(),H=Y.useCallback(U=>{const D={};return Object.entries(U).forEach(([z,K])=>{const X=typeof K=="string"?K:"";D[z]=X.match(/^#[0-9A-F]{6}$/i)?X:Ce[z]||"#000000"}),D},[]),$=Y.useCallback(()=>{const U=document.documentElement,D=H({primaryColor:n,secondaryColor:t,titleColor:s,h3TitleColor:c,textColor:d,backgroundFromColor:u,backgroundToColor:_,sectionBgColor:v});Object.entries(D).forEach(([z,K])=>{U.style.setProperty(`--${z.replace(/([A-Z])/g,"-$1").toLowerCase()}`,K)}),U.style.setProperty("--font-family",i)},[n,t,s,c,d,u,_,v,i,H]),ie=Y.useCallback(async()=>{if(!de){console.error("Firestore not available"),j("Error: Firestore connection lost.","error"),A(!1),k(!1);return}A(!0),k(!0);try{const U=await r1(Xe(de,"settings","styles"));if(U.exists()){const K=U.data();e(K.primaryColor||Ce.primaryColor),r(K.secondaryColor||Ce.secondaryColor),o(K.fontFamily||Ce.fontFamily),a(K.titleColor||Ce.titleColor||"#ffffff"),p(K.h3TitleColor||Ce.h3TitleColor||"#d7e3ee"),f(K.textColor||Ce.textColor||"#c6d3e2"),h(K.backgroundFromColor||Ce.backgroundFromColor||"#111827"),g(K.backgroundToColor||Ce.backgroundToColor||"#1F2937"),m(K.sectionBgColor||Ce.sectionBgColor||"#374151")}else e(Ce.primaryColor),r(Ce.secondaryColor),o(Ce.fontFamily),a(Ce.titleColor??"#ffffff"),p(Ce.h3TitleColor??"#d7e3ee"),f(Ce.textColor??"#c6d3e2"),h(Ce.backgroundFromColor??"#111827"),g(Ce.backgroundToColor??"#1F2937"),m(Ce.sectionBgColor??"#374151");const z=(await Yr(Hn(de,"themes"))).docs.map(K=>({id:K.id,...K.data()}));R(z)}catch(U){console.error("Error loading data:",U),j("Failed to load styles or themes. Check console.","error")}finally{A(!1),k(!1)}},[j]),G=Y.useCallback(async()=>{if(!de){j("Error: Firestore connection lost.","error");return}C(!0);try{const U={primaryColor:n,secondaryColor:t,fontFamily:i,titleColor:s,h3TitleColor:c,textColor:d,backgroundFromColor:u,backgroundToColor:_,sectionBgColor:v};await il(Xe(de,"settings","styles"),U),j("Styles saved successfully!","success")}catch(U){console.error("Error saving styles:",U),j("Failed to save styles. Check console.","error")}finally{C(!1)}},[de,j,n,t,i,s,c,d,u,_,v]),B=Y.useCallback(async()=>{if(!de){j("Error: Firestore connection lost.","error");return}if(!T.trim()){j("Please enter a name for the theme.","error");return}C(!0);try{const U={primaryColor:n,secondaryColor:t,fontFamily:i,titleColor:s,h3TitleColor:c,textColor:d,backgroundFromColor:u,backgroundToColor:_,sectionBgColor:v},D={name:T.trim(),style:U},z=await Jl(Hn(de,"themes"),D);R(K=>[...K,{id:z.id,...D}]),E(""),j("Theme saved successfully!","success")}catch(U){console.error("Error saving theme:",U),j("Failed to save theme. Check console.","error")}finally{C(!1)}},[de,j,T,n,t,i,s,c,d,u,_,v]),L=Y.useCallback(async U=>{const D=w.find(z=>z.id===U);!de||!D||V({message:`Are you sure you want to delete the theme "${D.name}"?`,onConfirm:async()=>{if(!de){j("Error: Firestore connection lost.","error");return}try{await Zl(Xe(de,"themes",U)),R(z=>z.filter(K=>K.id!==U)),j("Theme deleted successfully!","success")}catch(z){console.error("Error deleting theme:",z),j("Failed to delete theme. Check console.","error")}},confirmText:"Delete Theme",title:"Confirm Deletion"})},[de,V,j,w]),q=Y.useCallback(U=>{const{style:D}=U;e(D.primaryColor),r(D.secondaryColor),o(D.fontFamily),a(D.titleColor||Ce.titleColor),p(D.h3TitleColor||Ce.h3TitleColor),f(D.textColor||Ce.textColor),h(D.backgroundFromColor||Ce.backgroundFromColor),g(D.backgroundToColor||Ce.backgroundToColor),m(D.sectionBgColor||Ce.sectionBgColor),j(`Theme "${U.name}" applied!`,"success")},[j]),F=Y.useCallback(()=>{try{const U=Te.valid(n)?Te(n):Te(Ce.primaryColor),D=O%3;let z;switch(D){case 1:z=U.set("hsl.h","+30").hex();break;case 2:z=U.set("hsl.h","+120").hex();break;default:z=U.set("hsl.h","+180").hex();break}r(z);const K=Te.mix(u,_).luminance(),X=Te.contrast(n,K>.5?"#000000":"#ffffff"),ne=Te.contrast(z,K>.5?"#000000":"#ffffff");a(X>4.5?n:K>.5?"#333333":"#eeeeee"),p(ne>3?z:K>.5?"#555555":"#cccccc"),f(K>.5?"#666666":"#bbbbbb"),h(U.darken(2.2).desaturate(.5).hex()),g(U.darken(1.8).desaturate(.3).hex()),m(U.darken(1.5).desaturate(.4).hex()),x(ue=>ue+1),j(`AI colors generated (Mode ${D+1})!`,"success")}catch(U){console.error("Error generating AI colors:",U),j("Failed to generate colors. Check console.","error")}},[O,n,u,_,j]),W=Y.useCallback(U=>{e(U.primaryColor),r(U.secondaryColor),a(U.titleColor),p(U.h3TitleColor),f(U.textColor),h(U.backgroundFromColor),g(U.backgroundToColor),m(U.sectionBgColor)},[]);return Y.useEffect(()=>{ie()},[ie]),Y.useEffect(()=>{b||$()},[b,$]),{primaryColor:n,setPrimaryColor:e,secondaryColor:t,setSecondaryColor:r,fontFamily:i,setFontFamily:o,titleColor:s,setTitleColor:a,h3TitleColor:c,setH3TitleColor:p,textColor:d,setTextColor:f,backgroundFromColor:u,setBackgroundFromColor:h,backgroundToColor:_,setBackgroundToColor:g,sectionBgColor:v,setSectionBgColor:m,isLoading:b,isSaving:y,aiMode:O,savedThemes:w,newThemeName:T,setNewThemeName:E,isLoadingThemes:N,handleSaveStyles:G,handleSaveTheme:B,handleDeleteTheme:L,handleApplyTheme:q,handleGenerateAIColors:F,handleGlobalThemeSelect:W}},Jt=({label:n,value:e,onChange:t,description:r})=>{const{showToast:i}=Vt(),o=c=>{const p=c.target.value;p.match(/^#?[0-9A-Fa-f]{0,6}$/)&&t(p.startsWith("#")?p:`#${p}`)},s=c=>{let p=c.target.value;p.startsWith("#")||(p=`#${p}`),p.length>1&&p.length<7&&(p=p.padEnd(7,p.substring(p.length-1).repeat(7-p.length))),p.match(/^#[0-9A-Fa-f]{6}$/i)?t(p):(t(e),i("Invalid hex color format. Reverted.","error"))},a=()=>{navigator.clipboard.writeText(e),i("Color code copied!","success")};return I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),I.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 space-y-2 sm:space-y-0",children:[I.jsx("input",{type:"color",value:e,onChange:c=>t(c.target.value),className:"h-10 w-10 p-1 border border-gray-300 rounded cursor-pointer self-start sm:self-center bg-white"}),I.jsx("input",{type:"text",value:e,onChange:o,onBlur:s,className:"w-full sm:flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",maxLength:7,placeholder:"#rrggbb"}),I.jsx("button",{onClick:a,className:"p-2 text-gray-500 hover:text-gray-700 self-start sm:self-center",title:"Copy color code",type:"button",children:I.jsx(P1,{size:20})})]}),r&&I.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})},os={light:{primaryColor:"#3b82f6",secondaryColor:"#6b7280",titleColor:"#1f2937",h3TitleColor:"#1f2937",textColor:"#1f2937",backgroundFromColor:"#ffffff",backgroundToColor:"#f3f4f6",sectionBgColor:"#f3f4f6"},dark:{primaryColor:"#60a5fa",secondaryColor:"#9ca3af",titleColor:"#f9fafb",h3TitleColor:"#f9fafb",textColor:"#f9fafb",backgroundFromColor:"#111827",backgroundToColor:"#1f2937",sectionBgColor:"#111827"},forest:{primaryColor:"#34d399",secondaryColor:"#6b7280",titleColor:"#064e3b",h3TitleColor:"#064e3b",textColor:"#064e3b",backgroundFromColor:"#d1fae5",backgroundToColor:"#ecfdf5",sectionBgColor:"#d1fae5"},ocean:{primaryColor:"#38bdf8",secondaryColor:"#94a3b8",titleColor:"#0c4a6e",h3TitleColor:"#0c4a6e",textColor:"#0c4a6e",backgroundFromColor:"#e0f2fe",backgroundToColor:"#f0f9ff",sectionBgColor:"#e0f2fe"},sunset:{primaryColor:"#fb7185",secondaryColor:"#f97316",titleColor:"#881337",h3TitleColor:"#881337",textColor:"#881337",backgroundFromColor:"#ffe4e6",backgroundToColor:"#fff1f2",sectionBgColor:"#ffe4e6"}},O2=({onThemeSelect:n})=>{const e=[{name:"Light",value:"light",icon:""},{name:"Dark",value:"dark",icon:""},{name:"Forest",value:"forest",icon:""},{name:"Ocean",value:"ocean",icon:""},{name:"Sunset",value:"sunset",icon:""}],[t,r]=Y.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem("theme");return o&&os[o]?o:"light"}return"light"});Y.useEffect(()=>{if(typeof window<"u"){const o=Object.keys(os);document.documentElement.classList.remove(...o),document.documentElement.classList.add(t),localStorage.setItem("theme",t)}},[t]);const i=o=>{const s=os[o];s?(r(o),n(s)):console.warn(`Theme data not found for: ${o}`)};return I.jsx("div",{className:"theme-switcher",children:I.jsx("div",{className:"flex items-center space-x-1 sm:space-x-2 p-1 sm:p-2 bg-[var(--color-background-secondary)] rounded-lg border border-gray-300 dark:border-gray-700",children:I.jsx("div",{className:"flex space-x-1",children:e.map(o=>I.jsx("button",{onClick:()=>i(o.value),className:`p-1 sm:p-2 rounded-md text-xs sm:text-sm transition-colors duration-150 ${t===o.value?"bg-[var(--color-primary)] text-white shadow-md":"bg-[var(--color-background-secondary)] text-[var(--color-text)] hover:bg-[var(--color-secondary)] hover:text-white"}`,title:o.name,children:I.jsx("span",{className:"flex items-center",children:I.jsx("span",{className:"mr-1",children:o.icon})})},o.value))})})})},j2=[{id:"colors",label:"Colors",icon:I.jsx(fm,{size:20})},{id:"typography",label:"Typography",icon:I.jsx(gb,{size:20})}],L2=()=>{const[n,e]=Y.useState("colors"),{primaryColor:t,setPrimaryColor:r,secondaryColor:i,setSecondaryColor:o,fontFamily:s,setFontFamily:a,titleColor:c,setTitleColor:p,h3TitleColor:d,setH3TitleColor:f,textColor:u,setTextColor:h,backgroundFromColor:_,setBackgroundFromColor:g,backgroundToColor:v,setBackgroundToColor:m,sectionBgColor:b,setSectionBgColor:A,isLoading:y,isSaving:C,aiMode:O,savedThemes:x,newThemeName:w,setNewThemeName:R,isLoadingThemes:T,handleSaveStyles:E,handleSaveTheme:N,handleDeleteTheme:k,handleApplyTheme:j,handleGenerateAIColors:V,handleGlobalThemeSelect:H}=P2();return y?I.jsxs("div",{className:"flex items-center justify-center h-64 p-4 md:p-6",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),I.jsx("span",{className:"ml-3 text-gray-600",children:"Loading Styles..."})]}):I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-4 md:p-6",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[I.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:I.jsx("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 whitespace-nowrap",children:j2.map($=>I.jsxs("button",{onClick:()=>e($.id),className:`
                  flex items-center space-x-2 py-3 px-2 sm:py-4 sm:px-3 border-b-2 font-medium text-sm transition-colors duration-150 ease-in-out
                  ${n===$.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[$.icon,I.jsx("span",{className:"hidden sm:inline",children:$.label})]},$.id))})}),I.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[n==="colors"&&I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[I.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Color Settings"}),I.jsxs("button",{onClick:V,className:"flex items-center justify-center sm:justify-start space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors w-full sm:w-auto text-sm",title:`Generate colors (Mode ${O%3+1})`,children:[I.jsx(_b,{size:16}),I.jsx("span",{children:"Generate AI Colors"})]})]}),I.jsx(Jt,{label:"Primary Color",value:t,onChange:r,description:"Main brand color for buttons, links, etc."}),I.jsx(Jt,{label:"Secondary Color",value:i,onChange:o,description:"Supporting color for accents, secondary actions."}),I.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[I.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Text Colors"}),I.jsx(Jt,{label:"Title Color",value:c,onChange:p,description:"Color for main headings (h1, h2)."}),I.jsx(Jt,{label:"Subtitle Color",value:d,onChange:f,description:"Color for subheadings (h3, h4)."}),I.jsx(Jt,{label:"Body Text Color",value:u,onChange:h,description:"Default color for paragraphs and general text."})]}),I.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[I.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Background Colors"}),I.jsx(Jt,{label:"Background Start",value:_,onChange:g,description:"Starting color for main background gradient."}),I.jsx(Jt,{label:"Background End",value:v,onChange:m,description:"Ending color for main background gradient."}),I.jsx(Jt,{label:"Section Background",value:b,onChange:A,description:"Background for content cards/sections."})]})]}),n==="typography"&&I.jsxs("div",{className:"space-y-6",children:[I.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Typography Settings"}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:"fontFamilySelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Family"}),I.jsxs("select",{id:"fontFamilySelect",value:s,onChange:$=>a($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",children:[I.jsx("option",{value:"'Noto Sans', sans-serif",children:"Noto Sans"}),I.jsx("option",{value:"Arial, Helvetica, sans-serif",children:"Arial"})," ",I.jsx("option",{value:"Helvetica, Arial, sans-serif",children:"Helvetica"})," ",I.jsx("option",{value:"Georgia, serif",children:"Georgia"}),I.jsx("option",{value:"'Times New Roman', Times, serif",children:"Times New Roman"})]}),I.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select the primary font for the website."})]})]}),I.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:I.jsx("button",{onClick:E,disabled:C,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${C?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:C?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),I.jsx("span",{children:"Saving..."})]}):I.jsxs(I.Fragment,{children:[I.jsx(al,{size:16}),I.jsx("span",{children:"Save Current Styles"})]})})})]})]}),I.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[I.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[I.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Saved Themes"}),T?I.jsxs("div",{className:"flex items-center justify-center h-20",children:[I.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),I.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading themes..."})]}):x.length>0?I.jsx("ul",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:x.map($=>I.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors",children:[I.jsx("span",{className:"text-sm font-medium text-gray-800 truncate mr-2",title:$.name,children:$.name}),I.jsxs("div",{className:"flex space-x-2 flex-shrink-0",children:[I.jsx("button",{onClick:()=>j($),className:"p-1 text-blue-600 hover:text-blue-800",title:"Apply Theme",children:I.jsx(sb,{size:16})}),I.jsx("button",{onClick:()=>k($.id),className:"p-1 text-red-500 hover:text-red-700",title:"Delete Theme",children:I.jsx(Kn,{size:16})})]})]},$.id))}):I.jsx("p",{className:"text-sm text-gray-500",children:"No themes saved yet."}),I.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[I.jsx("label",{htmlFor:"newThemeName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Save Current as New Theme"}),I.jsxs("div",{className:"flex space-x-2",children:[I.jsx("input",{type:"text",id:"newThemeName",value:w,onChange:$=>R($.target.value),placeholder:"Enter theme name",className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 text-sm"}),I.jsx("button",{onClick:N,disabled:C||!w.trim(),className:`flex-shrink-0 px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${C||!w.trim()?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,title:"Save current settings as a new theme",children:I.jsx(al,{size:16})})]})]})]}),I.jsx(O2,{onThemeSelect:H})]})]})},Sf=["Github","Facebook","Mail","Instagram","Linkedin","Twitter"],zm={Github:am,Facebook:om,Mail:cm,Instagram:lm,Linkedin:um,Twitter:hm,HelpCircle:nu},M2=({initialData:n,isEditing:e,onSubmit:t,onCancel:r})=>{const i={name:"",url:"",icon:Sf[0]||"",order:0},[o,s]=Y.useState(n||i);Y.useEffect(()=>{s(n||i)},[n]);const a=d=>{const{name:f,value:u}=d.target;s(h=>({...h,[f]:f==="order"?parseInt(u,10)||0:u}))},c=d=>{if(d.preventDefault(),!o.name||!o.url||!o.icon){alert("Name, URL, and Icon are required.");return}t(o)},p=zm[o.icon]||nu;return I.jsxs("form",{onSubmit:c,className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg shadow-md",children:[I.jsx("h3",{className:"text-xl font-medium mb-4 text-gray-800",children:e?"Edit Link":"Add New Link"}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"link-name",className:"block text-sm font-medium text-gray-600 mb-1",children:"Name"}),I.jsx("input",{id:"link-name",type:"text",name:"name",placeholder:"Link Name (e.g., GitHub)",value:o.name,onChange:a,className:"w-full p-2 rounded bg-white text-gray-800 border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"link-url",className:"block text-sm font-medium text-gray-600 mb-1",children:"URL"}),I.jsx("input",{id:"link-url",type:"url",name:"url",placeholder:"Full URL (e.g., https://github.com/user)",value:o.url,onChange:a,className:"w-full p-2 rounded bg-white text-gray-800 border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"link-icon",className:"block text-sm font-medium text-gray-600 mb-1",children:"Icon"}),I.jsxs("div",{className:"flex items-center gap-2",children:[" ",I.jsxs("select",{id:"link-icon",name:"icon",value:o.icon,onChange:a,className:"flex-grow p-2 rounded bg-white text-gray-800 border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50",required:!0,children:[I.jsx("option",{value:"",disabled:!0,children:"Select Icon"}),Sf.map(d=>I.jsx("option",{value:d,children:d},d))]}),I.jsx(p,{size:24,className:"text-gray-500 flex-shrink-0"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"link-order",className:"block text-sm font-medium text-gray-600 mb-1",children:"Order"}),I.jsx("input",{id:"link-order",type:"number",name:"order",placeholder:"Order (e.g., 1)",value:o.order,onChange:a,className:"w-full p-2 rounded bg-white text-gray-800 border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50",required:!0,min:"0"})]})]}),I.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[I.jsxs("button",{type:"submit",className:"flex items-center gap-1.5 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out shadow hover:shadow-md",children:[I.jsx(al,{size:18})," ",e?"Save Changes":"Add Link"]}),I.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded transition duration-150 ease-in-out shadow hover:shadow-md border border-gray-300",children:[I.jsx(R1,{size:18})," Cancel"]})]})]})},D2=({link:n,index:e,isFirst:t,isLast:r,onEdit:i,onDelete:o,onMoveUp:s,onMoveDown:a})=>{const c=zm[n.icon]||nu;return I.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow p-4 md:grid md:grid-cols-12 md:gap-4 md:items-center md:bg-transparent md:hover:bg-gray-50 md:shadow-none md:rounded-none md:border-b md:border-gray-200 md:last:border-b-0 md:py-3 md:px-3 transition-colors duration-150",children:[I.jsxs("div",{className:"md:hidden space-y-3",children:[I.jsxs("div",{className:"flex justify-between items-start gap-2",children:[I.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[I.jsx(c,{size:20,className:"text-gray-500 flex-shrink-0"}),I.jsx("span",{className:"font-semibold text-lg text-gray-800 truncate",children:n.name})]}),I.jsxs("span",{className:"text-sm text-gray-500 flex-shrink-0",children:["(Order: ",n.order,")"]})]}),I.jsxs("div",{className:"text-sm break-words",children:[I.jsx("span",{className:"font-medium text-gray-500",children:"URL: "}),I.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:n.url})]}),I.jsxs("div",{className:"flex items-center justify-end gap-2 pt-3 border-t border-gray-200 mt-3",children:[I.jsx("button",{onClick:()=>s(e),disabled:t,className:`p-1 rounded ${t?"text-gray-400 cursor-not-allowed opacity-50":"text-blue-600 hover:text-blue-500 hover:bg-gray-100"}`,title:"Move Up",children:I.jsx(sl,{size:18})}),I.jsx("button",{onClick:()=>a(e),disabled:r,className:`p-1 rounded ${r?"text-gray-400 cursor-not-allowed opacity-50":"text-blue-600 hover:text-blue-500 hover:bg-gray-100"}`,title:"Move Down",children:I.jsx(ol,{size:18})}),I.jsx("button",{onClick:()=>i(n),className:"text-yellow-500 hover:text-yellow-400 hover:bg-gray-100 p-1 rounded",title:"Edit",children:I.jsx(Fr,{size:18})}),I.jsx("button",{onClick:()=>o(n.id),className:"text-red-600 hover:text-red-500 hover:bg-gray-100 p-1 rounded",title:"Delete",children:I.jsx(Kn,{size:18})})]})]}),I.jsxs("div",{className:"hidden md:contents",children:[" ",I.jsx("div",{className:"col-span-1 text-center text-gray-700",children:n.order}),I.jsx("div",{className:"col-span-1 flex items-center justify-center",children:I.jsx(c,{size:20,className:"text-gray-500"})}),I.jsx("div",{className:"col-span-3 truncate pr-2 text-gray-800",children:n.name}),I.jsx("div",{className:"col-span-4 truncate pr-2",children:I.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:n.url})}),I.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-1 pr-2",children:[" ",I.jsx("button",{onClick:()=>s(e),disabled:t,className:`p-1 rounded ${t?"text-gray-400 cursor-not-allowed opacity-50":"text-blue-600 hover:text-blue-500 hover:bg-gray-100"}`,title:"Move Up",children:I.jsx(sl,{size:18})}),I.jsx("button",{onClick:()=>a(e),disabled:r,className:`p-1 rounded ${r?"text-gray-400 cursor-not-allowed opacity-50":"text-blue-600 hover:text-blue-500 hover:bg-gray-100"}`,title:"Move Down",children:I.jsx(ol,{size:18})}),I.jsx("button",{onClick:()=>i(n),className:"text-yellow-500 hover:text-yellow-400 hover:bg-gray-100 p-1 rounded",title:"Edit",children:I.jsx(Fr,{size:18})}),I.jsx("button",{onClick:()=>o(n.id),className:"text-red-600 hover:text-red-500 hover:bg-gray-100 p-1 rounded",title:"Delete",children:I.jsx(Kn,{size:18})})]})]})]})},V2=()=>{const{showToast:n,requestConfirmation:e}=Vt(),[t,r]=Y.useState([]),[i,o]=Y.useState(!0),[s,a]=Y.useState(!1),[c,p]=Y.useState(null),[d,f]=Y.useState(null),u=Y.useMemo(()=>de?Hn(de,"socialLinks"):null,[]),h=Y.useCallback(async()=>{if(!de||!u){n("Error: Firestore is not initialized.","error"),o(!1);return}o(!0);try{const x=go(u,yo("order","asc")),R=(await Yr(x)).docs.map(T=>({...T.data(),id:T.id}));r(R)}catch(x){console.error("Error fetching social links:",x),n("Failed to load social links. Please try again.","error")}finally{o(!1)}},[u,n]);Y.useEffect(()=>{h()},[h]);const _=()=>{a(!1),p(null),f(null)},g=async x=>{if(!de||!u){n("Error: Firestore is not initialized.","error");return}try{const w=t.length>0?Math.max(...t.map(R=>R.order))+1:0;await Jl(u,{...x,order:w}),n("Link added successfully!","success"),_(),h()}catch(w){console.error("Error adding link:",w),n("Failed to add link. Please try again.","error")}},v=async x=>{if(!c||!de){n("Error: Cannot update link or Firestore is not initialized.","error");return}try{const w=Xe(de,"socialLinks",c);await Gi(w,x),n("Link updated successfully!","success"),_(),h()}catch(w){console.error("Error updating link:",w),n("Failed to update link. Please try again.","error")}},m=async(x,w)=>{if(!de){n("Error: Firestore is not initialized.","error");return}const R=w==="up"?x-1:x+1;if(R<0||R>=t.length)return;const T=t[x],E=t[R],N=em(de),k=Xe(de,"socialLinks",T.id),j=Xe(de,"socialLinks",E.id);N.update(k,{order:E.order}),N.update(j,{order:T.order});try{await N.commit(),n(`Link moved ${w} successfully.`,"success"),h()}catch(V){console.error(`Error moving link ${w}:`,V),n("Failed to reorder link. Please try again.","error")}},b=x=>m(x,"up"),A=x=>m(x,"down"),y=async x=>{const w=t.find(R=>R.id===x);w&&e({message:`Are you sure you want to delete the link "${w.name}"?`,onConfirm:async()=>{if(!de){n("Error: Firestore is not initialized.","error");return}try{const R=Xe(de,"socialLinks",x);await Zl(R),n("Link deleted successfully!","success"),h(),c===x&&_()}catch(R){console.error("Error deleting link:",R),n("Failed to delete link. Please try again.","error")}},confirmText:"Delete Link",title:"Confirm Deletion"})},C=x=>{p(x.id),f({name:x.name,url:x.url,icon:x.icon,order:x.order}),a(!1)},O=x=>{c?v(x):g(x)};return I.jsxs("div",{className:"p-4 md:p-6 bg-white rounded-lg shadow-lg text-gray-800",children:[I.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-900",children:"Manage Social Links"}),i&&I.jsx("p",{className:"text-center text-gray-500",children:"Loading links..."}),(s||c)&&I.jsx(M2,{initialData:d,isEditing:!!c,onSubmit:O,onCancel:_},c||"add-form"),!s&&!c&&!i&&I.jsxs("button",{onClick:()=>{a(!0),p(null),f(null)},className:"mb-6 flex items-center gap-1.5 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out shadow hover:shadow-md",children:[I.jsx(I1,{size:18})," Add New Link"]}),!i&&t.length>0&&I.jsxs("div",{className:"space-y-3",children:[I.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-4 bg-gray-100 border-b border-gray-300 rounded-t-lg p-3 font-semibold text-gray-600 items-center sticky top-0 z-10",children:[I.jsx("div",{className:"col-span-1 text-center",children:"Order"}),I.jsx("div",{className:"col-span-1 text-center",children:"Icon"}),I.jsx("div",{className:"col-span-3",children:"Name"}),I.jsx("div",{className:"col-span-4",children:"URL"}),I.jsx("div",{className:"col-span-3 text-right pr-2",children:"Actions"})]}),t.map((x,w)=>I.jsx(D2,{link:x,index:w,isFirst:w===0,isLast:w===t.length-1,onEdit:C,onDelete:y,onMoveUp:b,onMoveDown:A},x.id))]}),!i&&t.length===0&&!s&&I.jsxs("div",{className:"text-center text-gray-500 mt-6 p-6 border border-dashed border-gray-300 rounded-lg bg-gray-50",children:[I.jsx("p",{className:"font-medium",children:"No social links found."}),I.jsx("p",{className:"text-sm mt-1",children:'Click "Add New Link" above to get started.'})]})]})},Rf=({fieldKey:n,value:e,path:t,handleChange:r,editingPath:i,setEditingPath:o})=>{const s=t.join("."),a=i===s,c=n.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase()),p=/url|link/i.test(n);return I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:c}),a?p?I.jsx("input",{type:"url",id:s,name:s,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white transition-shadow duration-150 ease-in-out",value:e,onChange:d=>r(t,d.target.value),onBlur:()=>o(null),autoFocus:!0}):I.jsx("textarea",{id:s,name:s,rows:e.length>100?5:3,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white transition-shadow duration-150 ease-in-out",value:e,onChange:d=>r(t,d.target.value),onBlur:()=>o(null),autoFocus:!0}):I.jsx("div",{className:"block w-full flex-1 rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[40px] whitespace-pre-wrap text-gray-800 transition-colors duration-150 ease-in-out break-words",onClick:()=>o(s),children:e||I.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},s)},q2=({translations:n,handleInputChange:e,editingPath:t,setEditingPath:r,getStaticSectionName:i})=>{const o=n.en.generalInfo,s=n.en.about;return I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[I.jsxs("div",{className:"space-y-4",children:[" ",o?Object.entries(o).map(([a,c])=>typeof c=="string"?I.jsx(Rf,{fieldKey:a,value:c,path:["generalInfo",a],handleChange:e,editingPath:t,setEditingPath:r},a):null):I.jsx("p",{className:"text-gray-500 italic",children:"General Info data not available."})]}),I.jsxs("div",{className:"space-y-4",children:[" ",I.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize border-b border-gray-300 pb-2 mb-4",children:i("about")}),s?Object.entries(s).map(([a,c])=>typeof c=="string"?I.jsx(Rf,{fieldKey:a,value:c,path:["about",a],handleChange:e,editingPath:t,setEditingPath:r},a):null):I.jsx("p",{className:"text-gray-500 italic",children:"About section data not available."})]})]})},F2=()=>{const{showToast:n,requestConfirmation:e}=Vt(),[t,r]=Y.useState([]),[i,o]=Y.useState(!1),[s,a]=Y.useState(null),c=Y.useMemo(()=>de?Hn(de,"pages"):null,[]),p=Y.useCallback(async()=>{if(!de||!c){n("Error: Firestore database is not initialized.","error"),o(!1);return}o(!0);try{const m=go(c,yo("order","asc")),A=(await Yr(m)).docs.map(y=>({id:y.id,...y.data()}));r(A)}catch(m){console.error("Error fetching pages:",m),n("Failed to load pages. Check console for details.","error")}finally{o(!1)}},[c,n]);Y.useEffect(()=>{p()},[p]);const d=Y.useCallback(()=>{a(null)},[]),f=Y.useCallback(async m=>{if(o(!0),!de){n("Error: Firestore database is not initialized.","error"),o(!1);return}try{let b;if(s){const y=t.find(C=>C.id===s);b=(y==null?void 0:y.order)??0}else b=t.length>0?Math.max(...t.map(y=>y.order))+1:0;const A={...m,order:b};if(s){const y=Xe(de,"pages",s);await Gi(y,A),n("Page updated successfully!","success")}else{if(!c)throw new Error("Collection reference not available");await Jl(c,A),n("Page added successfully!","success")}d(),p()}catch(b){console.error("Error saving page:",b),n("Failed to save page. Check console for details.","error"),o(!1)}},[de,c,s,t,n,p,d]),u=Y.useCallback(m=>{var b;if(!m){n("Cannot delete page: Invalid ID.","error");return}e({message:`Are you sure you want to delete the page "${((b=t.find(A=>A.id===m))==null?void 0:b.title)||m}"?
This action cannot be undone.`,onConfirm:async()=>{if(!de){n("Error: Firestore database is not initialized.","error"),o(!1);return}o(!0);try{const A=Xe(de,"pages",m);await Zl(A),n("Page deleted successfully!","success"),s===m&&d(),p()}catch(A){console.error("Error deleting page:",A),n("Failed to delete page. Check console for details.","error"),o(!1)}},confirmText:"Delete Page",title:"Confirm Deletion"})},[de,t,s,n,e,p,d]),h=Y.useCallback(m=>{if(!m.id){n("Cannot edit page: Invalid ID.","error");return}a(m.id)},[n]),_=Y.useCallback(async(m,b)=>{const A=b==="up"?m-1:m+1;if(A<0||A>=t.length)return;if(!de||!c){n("Error: Firestore database or collection ref is not initialized.","error");return}o(!0);const y=t[m],C=t[A],O=em(de),x=Xe(c,y.id),w=Xe(c,C.id);O.update(x,{order:C.order}),O.update(w,{order:y.order});try{await O.commit(),n(`Page moved ${b} successfully.`,"success"),p()}catch(R){console.error(`Error moving page ${b}:`,R),n("Failed to reorder page. Please try again.","error"),o(!1)}},[de,c,t,n,p]),g=Y.useCallback(m=>_(m,"up"),[_]),v=Y.useCallback(m=>_(m,"down"),[_]);return{pages:t,isLoading:i,isEditing:s,handleFormSubmit:f,handleDelete:u,startEditing:h,resetForm:d,handleMoveUp:g,handleMoveDown:v}};var ss,Cf;function B2(){if(Cf)return ss;Cf=1;function n(){this.__data__=[],this.size=0}return ss=n,ss}var as,Pf;function $m(){if(Pf)return as;Pf=1;function n(e,t){return e===t||e!==e&&t!==t}return as=n,as}var ls,Of;function _o(){if(Of)return ls;Of=1;var n=$m();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return ls=e,ls}var us,jf;function U2(){if(jf)return us;jf=1;var n=_o(),e=Array.prototype,t=e.splice;function r(i){var o=this.__data__,s=n(o,i);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return us=r,us}var cs,Lf;function z2(){if(Lf)return cs;Lf=1;var n=_o();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return cs=e,cs}var fs,Mf;function $2(){if(Mf)return fs;Mf=1;var n=_o();function e(t){return n(this.__data__,t)>-1}return fs=e,fs}var hs,Df;function H2(){if(Df)return hs;Df=1;var n=_o();function e(t,r){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,r])):i[o][1]=r,this}return hs=e,hs}var ds,Vf;function xo(){if(Vf)return ds;Vf=1;var n=B2(),e=U2(),t=z2(),r=$2(),i=H2();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,ds=o,ds}var ps,qf;function G2(){if(qf)return ps;qf=1;var n=xo();function e(){this.__data__=new n,this.size=0}return ps=e,ps}var ms,Ff;function K2(){if(Ff)return ms;Ff=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return ms=n,ms}var gs,Bf;function W2(){if(Bf)return gs;Bf=1;function n(e){return this.__data__.get(e)}return gs=n,gs}var ys,Uf;function Q2(){if(Uf)return ys;Uf=1;function n(e){return this.__data__.has(e)}return ys=n,ys}var vs,zf;function Hm(){if(zf)return vs;zf=1;var n=typeof pi=="object"&&pi&&pi.Object===Object&&pi;return vs=n,vs}var bs,$f;function Qt(){if($f)return bs;$f=1;var n=Hm(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return bs=t,bs}var _s,Hf;function hu(){if(Hf)return _s;Hf=1;var n=Qt(),e=n.Symbol;return _s=e,_s}var xs,Gf;function Y2(){if(Gf)return xs;Gf=1;var n=hu(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function o(s){var a=t.call(s,i),c=s[i];try{s[i]=void 0;var p=!0}catch{}var d=r.call(s);return p&&(a?s[i]=c:delete s[i]),d}return xs=o,xs}var ws,Kf;function X2(){if(Kf)return ws;Kf=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return ws=t,ws}var Es,Wf;function wo(){if(Wf)return Es;Wf=1;var n=hu(),e=Y2(),t=X2(),r="[object Null]",i="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?e(a):t(a)}return Es=s,Es}var Ts,Qf;function Gm(){if(Qf)return Ts;Qf=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ts=n,Ts}var As,Yf;function Km(){if(Yf)return As;Yf=1;var n=wo(),e=Gm(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==r||c==i||c==t||c==o}return As=s,As}var ks,Xf;function Z2(){if(Xf)return ks;Xf=1;var n=Qt(),e=n["__core-js_shared__"];return ks=e,ks}var Ns,Zf;function J2(){if(Zf)return Ns;Zf=1;var n=Z2(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Ns=t,Ns}var Is,Jf;function Wm(){if(Jf)return Is;Jf=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Is=t,Is}var Ss,eh;function ex(){if(eh)return Ss;eh=1;var n=Km(),e=J2(),t=Gm(),r=Wm(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,p=a.hasOwnProperty,d=RegExp("^"+c.call(p).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(u){if(!t(u)||e(u))return!1;var h=n(u)?d:o;return h.test(r(u))}return Ss=f,Ss}var Rs,th;function tx(){if(th)return Rs;th=1;function n(e,t){return e==null?void 0:e[t]}return Rs=n,Rs}var Cs,nh;function or(){if(nh)return Cs;nh=1;var n=ex(),e=tx();function t(r,i){var o=e(r,i);return n(o)?o:void 0}return Cs=t,Cs}var Ps,rh;function du(){if(rh)return Ps;rh=1;var n=or(),e=Qt(),t=n(e,"Map");return Ps=t,Ps}var Os,ih;function Eo(){if(ih)return Os;ih=1;var n=or(),e=n(Object,"create");return Os=e,Os}var js,oh;function nx(){if(oh)return js;oh=1;var n=Eo();function e(){this.__data__=n?n(null):{},this.size=0}return js=e,js}var Ls,sh;function rx(){if(sh)return Ls;sh=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Ls=n,Ls}var Ms,ah;function ix(){if(ah)return Ms;ah=1;var n=Eo(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return r.call(s,o)?s[o]:void 0}return Ms=i,Ms}var Ds,lh;function ox(){if(lh)return Ds;lh=1;var n=Eo(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var o=this.__data__;return n?o[i]!==void 0:t.call(o,i)}return Ds=r,Ds}var Vs,uh;function sx(){if(uh)return Vs;uh=1;var n=Eo(),e="__lodash_hash_undefined__";function t(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=n&&i===void 0?e:i,this}return Vs=t,Vs}var qs,ch;function ax(){if(ch)return qs;ch=1;var n=nx(),e=rx(),t=ix(),r=ox(),i=sx();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,qs=o,qs}var Fs,fh;function lx(){if(fh)return Fs;fh=1;var n=ax(),e=xo(),t=du();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Fs=r,Fs}var Bs,hh;function ux(){if(hh)return Bs;hh=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Bs=n,Bs}var Us,dh;function To(){if(dh)return Us;dh=1;var n=ux();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Us=e,Us}var zs,ph;function cx(){if(ph)return zs;ph=1;var n=To();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return zs=e,zs}var $s,mh;function fx(){if(mh)return $s;mh=1;var n=To();function e(t){return n(this,t).get(t)}return $s=e,$s}var Hs,gh;function hx(){if(gh)return Hs;gh=1;var n=To();function e(t){return n(this,t).has(t)}return Hs=e,Hs}var Gs,yh;function dx(){if(yh)return Gs;yh=1;var n=To();function e(t,r){var i=n(this,t),o=i.size;return i.set(t,r),this.size+=i.size==o?0:1,this}return Gs=e,Gs}var Ks,vh;function Qm(){if(vh)return Ks;vh=1;var n=lx(),e=cx(),t=fx(),r=hx(),i=dx();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,Ks=o,Ks}var Ws,bh;function px(){if(bh)return Ws;bh=1;var n=xo(),e=du(),t=Qm(),r=200;function i(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<r-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return Ws=i,Ws}var Qs,_h;function mx(){if(_h)return Qs;_h=1;var n=xo(),e=G2(),t=K2(),r=W2(),i=Q2(),o=px();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,Qs=s,Qs}var Ys,xh;function gx(){if(xh)return Ys;xh=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Ys=e,Ys}var Xs,wh;function yx(){if(wh)return Xs;wh=1;function n(e){return this.__data__.has(e)}return Xs=n,Xs}var Zs,Eh;function vx(){if(Eh)return Zs;Eh=1;var n=Qm(),e=gx(),t=yx();function r(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new n;++o<s;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,Zs=r,Zs}var Js,Th;function bx(){if(Th)return Js;Th=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return Js=n,Js}var ea,Ah;function _x(){if(Ah)return ea;Ah=1;function n(e,t){return e.has(t)}return ea=n,ea}var ta,kh;function Ym(){if(kh)return ta;kh=1;var n=vx(),e=bx(),t=_x(),r=1,i=2;function o(s,a,c,p,d,f){var u=c&r,h=s.length,_=a.length;if(h!=_&&!(u&&_>h))return!1;var g=f.get(s),v=f.get(a);if(g&&v)return g==a&&v==s;var m=-1,b=!0,A=c&i?new n:void 0;for(f.set(s,a),f.set(a,s);++m<h;){var y=s[m],C=a[m];if(p)var O=u?p(C,y,m,a,s,f):p(y,C,m,s,a,f);if(O!==void 0){if(O)continue;b=!1;break}if(A){if(!e(a,function(x,w){if(!t(A,w)&&(y===x||d(y,x,c,p,f)))return A.push(w)})){b=!1;break}}else if(!(y===C||d(y,C,c,p,f))){b=!1;break}}return f.delete(s),f.delete(a),b}return ta=o,ta}var na,Nh;function xx(){if(Nh)return na;Nh=1;var n=Qt(),e=n.Uint8Array;return na=e,na}var ra,Ih;function wx(){if(Ih)return ra;Ih=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,o){r[++t]=[o,i]}),r}return ra=n,ra}var ia,Sh;function Ex(){if(Sh)return ia;Sh=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return ia=n,ia}var oa,Rh;function Tx(){if(Rh)return oa;Rh=1;var n=hu(),e=xx(),t=$m(),r=Ym(),i=wx(),o=Ex(),s=1,a=2,c="[object Boolean]",p="[object Date]",d="[object Error]",f="[object Map]",u="[object Number]",h="[object RegExp]",_="[object Set]",g="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",A=n?n.prototype:void 0,y=A?A.valueOf:void 0;function C(O,x,w,R,T,E,N){switch(w){case b:if(O.byteLength!=x.byteLength||O.byteOffset!=x.byteOffset)return!1;O=O.buffer,x=x.buffer;case m:return!(O.byteLength!=x.byteLength||!E(new e(O),new e(x)));case c:case p:case u:return t(+O,+x);case d:return O.name==x.name&&O.message==x.message;case h:case g:return O==x+"";case f:var k=i;case _:var j=R&s;if(k||(k=o),O.size!=x.size&&!j)return!1;var V=N.get(O);if(V)return V==x;R|=a,N.set(O,x);var H=r(k(O),k(x),R,T,E,N);return N.delete(O),H;case v:if(y)return y.call(O)==y.call(x)}return!1}return oa=C,oa}var sa,Ch;function Ax(){if(Ch)return sa;Ch=1;function n(e,t){for(var r=-1,i=t.length,o=e.length;++r<i;)e[o+r]=t[r];return e}return sa=n,sa}var aa,Ph;function pu(){if(Ph)return aa;Ph=1;var n=Array.isArray;return aa=n,aa}var la,Oh;function kx(){if(Oh)return la;Oh=1;var n=Ax(),e=pu();function t(r,i,o){var s=i(r);return e(r)?s:n(s,o(r))}return la=t,la}var ua,jh;function Nx(){if(jh)return ua;jh=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[o++]=a)}return s}return ua=n,ua}var ca,Lh;function Ix(){if(Lh)return ca;Lh=1;function n(){return[]}return ca=n,ca}var fa,Mh;function Sx(){if(Mh)return fa;Mh=1;var n=Nx(),e=Ix(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),n(i(s),function(a){return r.call(s,a)}))}:e;return fa=o,fa}var ha,Dh;function Rx(){if(Dh)return ha;Dh=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return ha=n,ha}var da,Vh;function Ao(){if(Vh)return da;Vh=1;function n(e){return e!=null&&typeof e=="object"}return da=n,da}var pa,qh;function Cx(){if(qh)return pa;qh=1;var n=wo(),e=Ao(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return pa=r,pa}var ma,Fh;function Px(){if(Fh)return ma;Fh=1;var n=Cx(),e=Ao(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,o=n(function(){return arguments}())?n:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return ma=o,ma}var kr={exports:{}},ga,Bh;function Ox(){if(Bh)return ga;Bh=1;function n(){return!1}return ga=n,ga}kr.exports;var Uh;function Xm(){return Uh||(Uh=1,function(n,e){var t=Qt(),r=Ox(),i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===i,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,p=c||r;n.exports=p}(kr,kr.exports)),kr.exports}var ya,zh;function jx(){if(zh)return ya;zh=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var o=typeof r;return i=i??n,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return ya=t,ya}var va,$h;function Zm(){if($h)return va;$h=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return va=e,va}var ba,Hh;function Lx(){if(Hh)return ba;Hh=1;var n=wo(),e=Zm(),t=Ao(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",p="[object Map]",d="[object Number]",f="[object Object]",u="[object RegExp]",h="[object Set]",_="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",A="[object Float64Array]",y="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",R="[object Uint16Array]",T="[object Uint32Array]",E={};E[b]=E[A]=E[y]=E[C]=E[O]=E[x]=E[w]=E[R]=E[T]=!0,E[r]=E[i]=E[v]=E[o]=E[m]=E[s]=E[a]=E[c]=E[p]=E[d]=E[f]=E[u]=E[h]=E[_]=E[g]=!1;function N(k){return t(k)&&e(k.length)&&!!E[n(k)]}return ba=N,ba}var _a,Gh;function Mx(){if(Gh)return _a;Gh=1;function n(e){return function(t){return e(t)}}return _a=n,_a}var Nr={exports:{}};Nr.exports;var Kh;function Dx(){return Kh||(Kh=1,function(n,e){var t=Hm(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,s=o&&t.process,a=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();n.exports=a}(Nr,Nr.exports)),Nr.exports}var xa,Wh;function Jm(){if(Wh)return xa;Wh=1;var n=Lx(),e=Mx(),t=Dx(),r=t&&t.isTypedArray,i=r?e(r):n;return xa=i,xa}var wa,Qh;function Vx(){if(Qh)return wa;Qh=1;var n=Rx(),e=Px(),t=pu(),r=Xm(),i=jx(),o=Jm(),s=Object.prototype,a=s.hasOwnProperty;function c(p,d){var f=t(p),u=!f&&e(p),h=!f&&!u&&r(p),_=!f&&!u&&!h&&o(p),g=f||u||h||_,v=g?n(p.length,String):[],m=v.length;for(var b in p)(d||a.call(p,b))&&!(g&&(b=="length"||h&&(b=="offset"||b=="parent")||_&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,m)))&&v.push(b);return v}return wa=c,wa}var Ea,Yh;function qx(){if(Yh)return Ea;Yh=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return Ea=e,Ea}var Ta,Xh;function Fx(){if(Xh)return Ta;Xh=1;function n(e,t){return function(r){return e(t(r))}}return Ta=n,Ta}var Aa,Zh;function Bx(){if(Zh)return Aa;Zh=1;var n=Fx(),e=n(Object.keys,Object);return Aa=e,Aa}var ka,Jh;function Ux(){if(Jh)return ka;Jh=1;var n=qx(),e=Bx(),t=Object.prototype,r=t.hasOwnProperty;function i(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))r.call(o,a)&&a!="constructor"&&s.push(a);return s}return ka=i,ka}var Na,ed;function zx(){if(ed)return Na;ed=1;var n=Km(),e=Zm();function t(r){return r!=null&&e(r.length)&&!n(r)}return Na=t,Na}var Ia,td;function $x(){if(td)return Ia;td=1;var n=Vx(),e=Ux(),t=zx();function r(i){return t(i)?n(i):e(i)}return Ia=r,Ia}var Sa,nd;function Hx(){if(nd)return Sa;nd=1;var n=kx(),e=Sx(),t=$x();function r(i){return n(i,t,e)}return Sa=r,Sa}var Ra,rd;function Gx(){if(rd)return Ra;rd=1;var n=Hx(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(o,s,a,c,p,d){var f=a&e,u=n(o),h=u.length,_=n(s),g=_.length;if(h!=g&&!f)return!1;for(var v=h;v--;){var m=u[v];if(!(f?m in s:r.call(s,m)))return!1}var b=d.get(o),A=d.get(s);if(b&&A)return b==s&&A==o;var y=!0;d.set(o,s),d.set(s,o);for(var C=f;++v<h;){m=u[v];var O=o[m],x=s[m];if(c)var w=f?c(x,O,m,s,o,d):c(O,x,m,o,s,d);if(!(w===void 0?O===x||p(O,x,a,c,d):w)){y=!1;break}C||(C=m=="constructor")}if(y&&!C){var R=o.constructor,T=s.constructor;R!=T&&"constructor"in o&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof T=="function"&&T instanceof T)&&(y=!1)}return d.delete(o),d.delete(s),y}return Ra=i,Ra}var Ca,id;function Kx(){if(id)return Ca;id=1;var n=or(),e=Qt(),t=n(e,"DataView");return Ca=t,Ca}var Pa,od;function Wx(){if(od)return Pa;od=1;var n=or(),e=Qt(),t=n(e,"Promise");return Pa=t,Pa}var Oa,sd;function Qx(){if(sd)return Oa;sd=1;var n=or(),e=Qt(),t=n(e,"Set");return Oa=t,Oa}var ja,ad;function Yx(){if(ad)return ja;ad=1;var n=or(),e=Qt(),t=n(e,"WeakMap");return ja=t,ja}var La,ld;function Xx(){if(ld)return La;ld=1;var n=Kx(),e=du(),t=Wx(),r=Qx(),i=Yx(),o=wo(),s=Wm(),a="[object Map]",c="[object Object]",p="[object Promise]",d="[object Set]",f="[object WeakMap]",u="[object DataView]",h=s(n),_=s(e),g=s(t),v=s(r),m=s(i),b=o;return(n&&b(new n(new ArrayBuffer(1)))!=u||e&&b(new e)!=a||t&&b(t.resolve())!=p||r&&b(new r)!=d||i&&b(new i)!=f)&&(b=function(A){var y=o(A),C=y==c?A.constructor:void 0,O=C?s(C):"";if(O)switch(O){case h:return u;case _:return a;case g:return p;case v:return d;case m:return f}return y}),La=b,La}var Ma,ud;function Zx(){if(ud)return Ma;ud=1;var n=mx(),e=Ym(),t=Tx(),r=Gx(),i=Xx(),o=pu(),s=Xm(),a=Jm(),c=1,p="[object Arguments]",d="[object Array]",f="[object Object]",u=Object.prototype,h=u.hasOwnProperty;function _(g,v,m,b,A,y){var C=o(g),O=o(v),x=C?d:i(g),w=O?d:i(v);x=x==p?f:x,w=w==p?f:w;var R=x==f,T=w==f,E=x==w;if(E&&s(g)){if(!s(v))return!1;C=!0,R=!1}if(E&&!R)return y||(y=new n),C||a(g)?e(g,v,m,b,A,y):t(g,v,x,m,b,A,y);if(!(m&c)){var N=R&&h.call(g,"__wrapped__"),k=T&&h.call(v,"__wrapped__");if(N||k){var j=N?g.value():g,V=k?v.value():v;return y||(y=new n),A(j,V,m,b,y)}}return E?(y||(y=new n),r(g,v,m,b,A,y)):!1}return Ma=_,Ma}var Da,cd;function Jx(){if(cd)return Da;cd=1;var n=Zx(),e=Ao();function t(r,i,o,s,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,o,s,t,a)}return Da=t,Da}var Va,fd;function ew(){if(fd)return Va;fd=1;var n=Jx();function e(t,r){return n(t,r)}return Va=e,Va}var Pi={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var tw=Pi.exports,hd;function nw(){return hd||(hd=1,function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:tw,function(){return function(t){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),c=i(45),p=i(46),d=i(47),f=i(48),u=i(49),h=i(12),_=i(32),g=i(33),v=i(31),m=i(1),b={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:f.default,Scroll:c.default,Block:d.default,Inline:p.default,Text:u.default,Attributor:{Attribute:h.default,Class:_.default,Style:g.default,Store:v.default}};r.default=b},function(t,r,i){var o=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var A in b)b.hasOwnProperty(A)&&(m[A]=b[A])};return function(m,b){v(m,b);function A(){this.constructor=m}m.prototype=b===null?Object.create(b):(A.prototype=b.prototype,new A)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(v){o(m,v);function m(b){var A=this;return b="[Parchment] "+b,A=v.call(this,b)||this,A.message=b,A.name=A.constructor.name,A}return m}(Error);r.ParchmentError=s;var a={},c={},p={},d={};r.DATA_KEY="__blot";var f;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(f=r.Scope||(r.Scope={}));function u(v,m){var b=_(v);if(b==null)throw new s("Unable to create "+v+" blot");var A=b,y=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:A.create(m);return new A(y,m)}r.create=u;function h(v,m){return m===void 0&&(m=!1),v==null?null:v[r.DATA_KEY]!=null?v[r.DATA_KEY].blot:m?h(v.parentNode,m):null}r.find=h;function _(v,m){m===void 0&&(m=f.ANY);var b;if(typeof v=="string")b=d[v]||a[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)b=d.text;else if(typeof v=="number")v&f.LEVEL&f.BLOCK?b=d.block:v&f.LEVEL&f.INLINE&&(b=d.inline);else if(v instanceof HTMLElement){var A=(v.getAttribute("class")||"").split(/\s+/);for(var y in A)if(b=c[A[y]],b)break;b=b||p[v.tagName]}return b==null?null:m&f.LEVEL&b.scope&&m&f.TYPE&b.scope?b:null}r.query=_;function g(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];if(v.length>1)return v.map(function(y){return g(y)});var b=v[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new s("Invalid definition");if(b.blotName==="abstract")throw new s("Cannot register abstract class");if(d[b.blotName||b.attrName]=b,typeof b.keyName=="string")a[b.keyName]=b;else if(b.className!=null&&(c[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(y){return y.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var A=Array.isArray(b.tagName)?b.tagName:[b.tagName];A.forEach(function(y){(p[y]==null||b.className==null)&&(p[y]=b)})}return b}r.register=g},function(t,r,i){var o=i(51),s=i(11),a=i(3),c=i(20),p="\0",d=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};d.prototype.insert=function(f,u){var h={};return f.length===0?this:(h.insert=f,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(h.attributes=u),this.push(h))},d.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},d.prototype.retain=function(f,u){if(f<=0)return this;var h={retain:f};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(h.attributes=u),this.push(h)},d.prototype.push=function(f){var u=this.ops.length,h=this.ops[u-1];if(f=a(!0,{},f),typeof h=="object"){if(typeof f.delete=="number"&&typeof h.delete=="number")return this.ops[u-1]={delete:h.delete+f.delete},this;if(typeof h.delete=="number"&&f.insert!=null&&(u-=1,h=this.ops[u-1],typeof h!="object"))return this.ops.unshift(f),this;if(s(f.attributes,h.attributes)){if(typeof f.insert=="string"&&typeof h.insert=="string")return this.ops[u-1]={insert:h.insert+f.insert},typeof f.attributes=="object"&&(this.ops[u-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof h.retain=="number")return this.ops[u-1]={retain:h.retain+f.retain},typeof f.attributes=="object"&&(this.ops[u-1].attributes=f.attributes),this}}return u===this.ops.length?this.ops.push(f):this.ops.splice(u,0,f),this},d.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},d.prototype.filter=function(f){return this.ops.filter(f)},d.prototype.forEach=function(f){this.ops.forEach(f)},d.prototype.map=function(f){return this.ops.map(f)},d.prototype.partition=function(f){var u=[],h=[];return this.forEach(function(_){var g=f(_)?u:h;g.push(_)}),[u,h]},d.prototype.reduce=function(f,u){return this.ops.reduce(f,u)},d.prototype.changeLength=function(){return this.reduce(function(f,u){return u.insert?f+c.length(u):u.delete?f-u.delete:f},0)},d.prototype.length=function(){return this.reduce(function(f,u){return f+c.length(u)},0)},d.prototype.slice=function(f,u){f=f||0,typeof u!="number"&&(u=1/0);for(var h=[],_=c.iterator(this.ops),g=0;g<u&&_.hasNext();){var v;g<f?v=_.next(f-g):(v=_.next(u-g),h.push(v)),g+=c.length(v)}return new d(h)},d.prototype.compose=function(f){var u=c.iterator(this.ops),h=c.iterator(f.ops),_=[],g=h.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var v=g.retain;u.peekType()==="insert"&&u.peekLength()<=v;)v-=u.peekLength(),_.push(u.next());g.retain-v>0&&h.next(g.retain-v)}for(var m=new d(_);u.hasNext()||h.hasNext();)if(h.peekType()==="insert")m.push(h.next());else if(u.peekType()==="delete")m.push(u.next());else{var b=Math.min(u.peekLength(),h.peekLength()),A=u.next(b),y=h.next(b);if(typeof y.retain=="number"){var C={};typeof A.retain=="number"?C.retain=b:C.insert=A.insert;var O=c.attributes.compose(A.attributes,y.attributes,typeof A.retain=="number");if(O&&(C.attributes=O),m.push(C),!h.hasNext()&&s(m.ops[m.ops.length-1],C)){var x=new d(u.rest());return m.concat(x).chop()}}else typeof y.delete=="number"&&typeof A.retain=="number"&&m.push(y)}return m.chop()},d.prototype.concat=function(f){var u=new d(this.ops.slice());return f.ops.length>0&&(u.push(f.ops[0]),u.ops=u.ops.concat(f.ops.slice(1))),u},d.prototype.diff=function(f,u){if(this.ops===f.ops)return new d;var h=[this,f].map(function(b){return b.map(function(A){if(A.insert!=null)return typeof A.insert=="string"?A.insert:p;var y=b===f?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),_=new d,g=o(h[0],h[1],u),v=c.iterator(this.ops),m=c.iterator(f.ops);return g.forEach(function(b){for(var A=b[1].length;A>0;){var y=0;switch(b[0]){case o.INSERT:y=Math.min(m.peekLength(),A),_.push(m.next(y));break;case o.DELETE:y=Math.min(A,v.peekLength()),v.next(y),_.delete(y);break;case o.EQUAL:y=Math.min(v.peekLength(),m.peekLength(),A);var C=v.next(y),O=m.next(y);s(C.insert,O.insert)?_.retain(y,c.attributes.diff(C.attributes,O.attributes)):_.push(O).delete(y);break}A-=y}}),_.chop()},d.prototype.eachLine=function(f,u){u=u||`
`;for(var h=c.iterator(this.ops),_=new d,g=0;h.hasNext();){if(h.peekType()!=="insert")return;var v=h.peek(),m=c.length(v)-h.peekLength(),b=typeof v.insert=="string"?v.insert.indexOf(u,m)-m:-1;if(b<0)_.push(h.next());else if(b>0)_.push(h.next(b));else{if(f(_,h.next(1).attributes||{},g)===!1)return;g+=1,_=new d}}_.length()>0&&f(_,{},g)},d.prototype.transform=function(f,u){if(u=!!u,typeof f=="number")return this.transformPosition(f,u);for(var h=c.iterator(this.ops),_=c.iterator(f.ops),g=new d;h.hasNext()||_.hasNext();)if(h.peekType()==="insert"&&(u||_.peekType()!=="insert"))g.retain(c.length(h.next()));else if(_.peekType()==="insert")g.push(_.next());else{var v=Math.min(h.peekLength(),_.peekLength()),m=h.next(v),b=_.next(v);if(m.delete)continue;b.delete?g.push(b):g.retain(v,c.attributes.transform(m.attributes,b.attributes,u))}return g.chop()},d.prototype.transformPosition=function(f,u){u=!!u;for(var h=c.iterator(this.ops),_=0;h.hasNext()&&_<=f;){var g=h.peekLength(),v=h.peekType();if(h.next(),v==="delete"){f-=Math.min(g,f-_);continue}else v==="insert"&&(_<f||!u)&&(f+=g);_+=g}return f},t.exports=d},function(t,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=function(h){return typeof Array.isArray=="function"?Array.isArray(h):o.call(h)==="[object Array]"},p=function(h){if(!h||o.call(h)!=="[object Object]")return!1;var _=i.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&i.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!_&&!g)return!1;var v;for(v in h);return typeof v>"u"||i.call(h,v)},d=function(h,_){s&&_.name==="__proto__"?s(h,_.name,{enumerable:!0,configurable:!0,value:_.newValue,writable:!0}):h[_.name]=_.newValue},f=function(h,_){if(_==="__proto__")if(i.call(h,_)){if(a)return a(h,_).value}else return;return h[_]};t.exports=function u(){var h,_,g,v,m,b,A=arguments[0],y=1,C=arguments.length,O=!1;for(typeof A=="boolean"&&(O=A,A=arguments[1]||{},y=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});y<C;++y)if(h=arguments[y],h!=null)for(_ in h)g=f(A,_),v=f(h,_),A!==v&&(O&&v&&(p(v)||(m=c(v)))?(m?(m=!1,b=g&&c(g)?g:[]):b=g&&p(g)?g:{},d(A,{name:_,newValue:u(O,b,v)})):typeof v<"u"&&d(A,{name:_,newValue:v}));return A}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function E(N,k){for(var j=0;j<k.length;j++){var V=k[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(N,V.key,V)}}return function(N,k,j){return k&&E(N.prototype,k),j&&E(N,j),N}}(),s=function E(N,k,j){N===null&&(N=Function.prototype);var V=Object.getOwnPropertyDescriptor(N,k);if(V===void 0){var H=Object.getPrototypeOf(N);return H===null?void 0:E(H,k,j)}else{if("value"in V)return V.value;var $=V.get;return $===void 0?void 0:$.call(j)}},a=i(3),c=A(a),p=i(2),d=A(p),f=i(0),u=A(f),h=i(16),_=A(h),g=i(6),v=A(g),m=i(7),b=A(m);function A(E){return E&&E.__esModule?E:{default:E}}function y(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}function C(E,N){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:E}function O(E,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);E.prototype=Object.create(N&&N.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(E,N):E.__proto__=N)}var x=1,w=function(E){O(N,E);function N(){return y(this,N),C(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"attach",value:function(){s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(j,V){var H=u.default.query(j,u.default.Scope.BLOCK_ATTRIBUTE);H!=null&&this.attributes.attribute(H,V)}},{key:"formatAt",value:function(j,V,H,$){this.format(H,$)}},{key:"insertAt",value:function(j,V,H){if(typeof V=="string"&&V.endsWith(`
`)){var $=u.default.create(R.blotName);this.parent.insertBefore($,j===0?this:this.next),$.insertAt(0,V.slice(0,-1))}else s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,j,V,H)}}]),N}(u.default.Embed);w.scope=u.default.Scope.BLOCK_BLOT;var R=function(E){O(N,E);function N(k){y(this,N);var j=C(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k));return j.cache={},j}return o(N,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(j,V){return V.length()===0?j:j.insert(V.value(),T(V))},new d.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(j,V){s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,j,V),this.cache={}}},{key:"formatAt",value:function(j,V,H,$){V<=0||(u.default.query(H,u.default.Scope.BLOCK)?j+V===this.length()&&this.format(H,$):s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,j,Math.min(V,this.length()-j-1),H,$),this.cache={})}},{key:"insertAt",value:function(j,V,H){if(H!=null)return s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,j,V,H);if(V.length!==0){var $=V.split(`
`),ie=$.shift();ie.length>0&&(j<this.length()-1||this.children.tail==null?s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,Math.min(j,this.length()-1),ie):this.children.tail.insertAt(this.children.tail.length(),ie),this.cache={});var G=this;$.reduce(function(B,L){return G=G.split(B,!0),G.insertAt(0,L),L.length},j+ie.length)}}},{key:"insertBefore",value:function(j,V){var H=this.children.head;s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,j,V),H instanceof _.default&&H.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"length",this).call(this)+x),this.cache.length}},{key:"moveChildren",value:function(j,V){s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"moveChildren",this).call(this,j,V),this.cache={}}},{key:"optimize",value:function(j){s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,j),this.cache={}}},{key:"path",value:function(j){return s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,j,!0)}},{key:"removeChild",value:function(j){s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"removeChild",this).call(this,j),this.cache={}}},{key:"split",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V&&(j===0||j>=this.length()-x)){var H=this.clone();return j===0?(this.parent.insertBefore(H,this),this):(this.parent.insertBefore(H,this.next),H)}else{var $=s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"split",this).call(this,j,V);return this.cache={},$}}}]),N}(u.default.Block);R.blotName="block",R.tagName="P",R.defaultChild="break",R.allowedChildren=[v.default,u.default.Embed,b.default];function T(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(N=(0,c.default)(N,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?N:T(E.parent,N)}r.bubbleFormats=T,r.BlockEmbed=w,r.default=R},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},s=function(){function G(B,L){var q=[],F=!0,W=!1,U=void 0;try{for(var D=B[Symbol.iterator](),z;!(F=(z=D.next()).done)&&(q.push(z.value),!(L&&q.length===L));F=!0);}catch(K){W=!0,U=K}finally{try{!F&&D.return&&D.return()}finally{if(W)throw U}}return q}return function(B,L){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return G(B,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function G(B,L){for(var q=0;q<L.length;q++){var F=L[q];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(B,F.key,F)}}return function(B,L,q){return L&&G(B.prototype,L),q&&G(B,q),B}}();i(50);var c=i(2),p=T(c),d=i(14),f=T(d),u=i(8),h=T(u),_=i(9),g=T(_),v=i(0),m=T(v),b=i(15),A=T(b),y=i(3),C=T(y),O=i(10),x=T(O),w=i(34),R=T(w);function T(G){return G&&G.__esModule?G:{default:G}}function E(G,B,L){return B in G?Object.defineProperty(G,B,{value:L,enumerable:!0,configurable:!0,writable:!0}):G[B]=L,G}function N(G,B){if(!(G instanceof B))throw new TypeError("Cannot call a class as a function")}var k=(0,x.default)("quill"),j=function(){a(G,null,[{key:"debug",value:function(L){L===!0&&(L="log"),x.default.level(L)}},{key:"find",value:function(L){return L.__quill||m.default.find(L)}},{key:"import",value:function(L){return this.imports[L]==null&&k.error("Cannot import "+L+". Are you sure it was registered?"),this.imports[L]}},{key:"register",value:function(L,q){var F=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof L!="string"){var U=L.attrName||L.blotName;typeof U=="string"?this.register("formats/"+U,L,q):Object.keys(L).forEach(function(D){F.register(D,L[D],q)})}else this.imports[L]!=null&&!W&&k.warn("Overwriting "+L+" with",q),this.imports[L]=q,(L.startsWith("blots/")||L.startsWith("formats/"))&&q.blotName!=="abstract"?m.default.register(q):L.startsWith("modules")&&typeof q.register=="function"&&q.register()}}]);function G(B){var L=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,G),this.options=V(B,q),this.container=this.options.container,this.container==null)return k.error("Invalid Quill container",B);this.options.debug&&G.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new h.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new A.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(h.default.events.EDITOR_CHANGE,function(U){U===h.default.events.TEXT_CHANGE&&L.root.classList.toggle("ql-blank",L.editor.isBlank())}),this.emitter.on(h.default.events.SCROLL_UPDATE,function(U,D){var z=L.selection.lastRange,K=z&&z.length===0?z.index:void 0;H.call(L,function(){return L.editor.update(null,D,K)},U)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(G,[{key:"addContainer",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof L=="string"){var F=L;L=document.createElement("div"),L.classList.add(F)}return this.container.insertBefore(L,q),L}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(L,q,F){var W=this,U=$(L,q,F),D=s(U,4);return L=D[0],q=D[1],F=D[3],H.call(this,function(){return W.editor.deleteText(L,q)},F,L,-1*q)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(L),this.container.classList.toggle("ql-disabled",!L)}},{key:"focus",value:function(){var L=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=L,this.scrollIntoView()}},{key:"format",value:function(L,q){var F=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;return H.call(this,function(){var U=F.getSelection(!0),D=new p.default;if(U==null)return D;if(m.default.query(L,m.default.Scope.BLOCK))D=F.editor.formatLine(U.index,U.length,E({},L,q));else{if(U.length===0)return F.selection.format(L,q),D;D=F.editor.formatText(U.index,U.length,E({},L,q))}return F.setSelection(U,h.default.sources.SILENT),D},W)}},{key:"formatLine",value:function(L,q,F,W,U){var D=this,z=void 0,K=$(L,q,F,W,U),X=s(K,4);return L=X[0],q=X[1],z=X[2],U=X[3],H.call(this,function(){return D.editor.formatLine(L,q,z)},U,L,0)}},{key:"formatText",value:function(L,q,F,W,U){var D=this,z=void 0,K=$(L,q,F,W,U),X=s(K,4);return L=X[0],q=X[1],z=X[2],U=X[3],H.call(this,function(){return D.editor.formatText(L,q,z)},U,L,0)}},{key:"getBounds",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof L=="number"?F=this.selection.getBounds(L,q):F=this.selection.getBounds(L.index,L.length);var W=this.container.getBoundingClientRect();return{bottom:F.bottom-W.top,height:F.height,left:F.left-W.left,right:F.right-W.left,top:F.top-W.top,width:F.width}}},{key:"getContents",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,F=$(L,q),W=s(F,2);return L=W[0],q=W[1],this.editor.getContents(L,q)}},{key:"getFormat",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof L=="number"?this.editor.getFormat(L,q):this.editor.getFormat(L.index,L.length)}},{key:"getIndex",value:function(L){return L.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(L){return this.scroll.leaf(L)}},{key:"getLine",value:function(L){return this.scroll.line(L)}},{key:"getLines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof L!="number"?this.scroll.lines(L.index,L.length):this.scroll.lines(L,q)}},{key:"getModule",value:function(L){return this.theme.modules[L]}},{key:"getSelection",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return L&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,F=$(L,q),W=s(F,2);return L=W[0],q=W[1],this.editor.getText(L,q)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(L,q,F){var W=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return H.call(this,function(){return W.editor.insertEmbed(L,q,F)},U,L)}},{key:"insertText",value:function(L,q,F,W,U){var D=this,z=void 0,K=$(L,0,F,W,U),X=s(K,4);return L=X[0],z=X[2],U=X[3],H.call(this,function(){return D.editor.insertText(L,q,z)},U,L,q.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(L,q,F){this.clipboard.dangerouslyPasteHTML(L,q,F)}},{key:"removeFormat",value:function(L,q,F){var W=this,U=$(L,q,F),D=s(U,4);return L=D[0],q=D[1],F=D[3],H.call(this,function(){return W.editor.removeFormat(L,q)},F,L)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(L){var q=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return H.call(this,function(){L=new p.default(L);var W=q.getLength(),U=q.editor.deleteText(0,W),D=q.editor.applyDelta(L),z=D.ops[D.ops.length-1];z!=null&&typeof z.insert=="string"&&z.insert[z.insert.length-1]===`
`&&(q.editor.deleteText(q.getLength()-1,1),D.delete(1));var K=U.compose(D);return K},F)}},{key:"setSelection",value:function(L,q,F){if(L==null)this.selection.setRange(null,q||G.sources.API);else{var W=$(L,q,F),U=s(W,4);L=U[0],q=U[1],F=U[3],this.selection.setRange(new b.Range(L,q),F),F!==h.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API,F=new p.default().insert(L);return this.setContents(F,q)}},{key:"update",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,q=this.scroll.update(L);return this.selection.update(L),q}},{key:"updateContents",value:function(L){var q=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return H.call(this,function(){return L=new p.default(L),q.editor.applyDelta(L,F)},F,!0)}}]),G}();j.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},j.events=h.default.events,j.sources=h.default.sources,j.version="1.3.7",j.imports={delta:p.default,parchment:m.default,"core/module":g.default,"core/theme":R.default};function V(G,B){if(B=(0,C.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===j.DEFAULTS.theme)B.theme=R.default;else if(B.theme=j.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var L=(0,C.default)(!0,{},B.theme.DEFAULTS);[L,B].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(U){W.modules[U]===!0&&(W.modules[U]={})})});var q=Object.keys(L.modules).concat(Object.keys(B.modules)),F=q.reduce(function(W,U){var D=j.import("modules/"+U);return D==null?k.error("Cannot load "+U+" module. Are you sure you registered it?"):W[U]=D.DEFAULTS||{},W},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,C.default)(!0,{},j.DEFAULTS,{modules:F},L,B),["bounds","container","scrollingContainer"].forEach(function(W){typeof B[W]=="string"&&(B[W]=document.querySelector(B[W]))}),B.modules=Object.keys(B.modules).reduce(function(W,U){return B.modules[U]&&(W[U]=B.modules[U]),W},{}),B}function H(G,B,L,q){if(this.options.strict&&!this.isEnabled()&&B===h.default.sources.USER)return new p.default;var F=L==null?null:this.getSelection(),W=this.editor.delta,U=G();if(F!=null&&(L===!0&&(L=F.index),q==null?F=ie(F,U,B):q!==0&&(F=ie(F,L,q,B)),this.setSelection(F,h.default.sources.SILENT)),U.length()>0){var D,z=[h.default.events.TEXT_CHANGE,U,W,B];if((D=this.emitter).emit.apply(D,[h.default.events.EDITOR_CHANGE].concat(z)),B!==h.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,z)}}return U}function $(G,B,L,q,F){var W={};return typeof G.index=="number"&&typeof G.length=="number"?typeof B!="number"?(F=q,q=L,L=B,B=G.length,G=G.index):(B=G.length,G=G.index):typeof B!="number"&&(F=q,q=L,L=B,B=0),(typeof L>"u"?"undefined":o(L))==="object"?(W=L,F=q):typeof L=="string"&&(q!=null?W[L]=q:F=L),F=F||h.default.sources.API,[G,B,W,F]}function ie(G,B,L,q){if(G==null)return null;var F=void 0,W=void 0;if(B instanceof p.default){var U=[G.index,G.index+G.length].map(function(X){return B.transformPosition(X,q!==h.default.sources.USER)}),D=s(U,2);F=D[0],W=D[1]}else{var z=[G.index,G.index+G.length].map(function(X){return X<B||X===B&&q===h.default.sources.USER?X:L>=0?X+L:Math.max(B,X+L)}),K=s(z,2);F=K[0],W=K[1]}return new b.Range(F,W-F)}r.expandConfig=V,r.overload=$,r.default=j},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function v(m,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,b,A){return b&&v(m.prototype,b),A&&v(m,A),m}}(),s=function v(m,b,A){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,b);if(y===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:v(C,b,A)}else{if("value"in y)return y.value;var O=y.get;return O===void 0?void 0:O.call(A)}},a=i(7),c=f(a),p=i(0),d=f(p);function f(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function h(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function _(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var g=function(v){_(m,v);function m(){return u(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"formatAt",value:function(A,y,C,O){if(m.compare(this.statics.blotName,C)<0&&d.default.query(C,d.default.Scope.BLOT)){var x=this.isolate(A,y);O&&x.wrap(C,O)}else s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,A,y,C,O)}},{key:"optimize",value:function(A){if(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,A),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(A,y){var C=m.order.indexOf(A),O=m.order.indexOf(y);return C>=0||O>=0?C-O:A===y?0:A<y?-1:1}}]),m}(d.default.Inline);g.allowedChildren=[g,d.default.Embed,c.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function c(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function p(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function d(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var f=function(u){d(h,u);function h(){return c(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default.Text);r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(A,y){for(var C=0;C<y.length;C++){var O=y[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,y,C){return y&&b(A.prototype,y),C&&b(A,C),A}}(),s=function b(A,y,C){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,y);if(O===void 0){var x=Object.getPrototypeOf(A);return x===null?void 0:b(x,y,C)}else{if("value"in O)return O.value;var w=O.get;return w===void 0?void 0:w.call(C)}},a=i(54),c=f(a),p=i(10),d=f(p);function f(b){return b&&b.__esModule?b:{default:b}}function u(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function h(b,A){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:b}function _(b,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);b.prototype=Object.create(A&&A.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(b,A):b.__proto__=A)}var g=(0,d.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(b){document.addEventListener(b,function(){for(var A=arguments.length,y=Array(A),C=0;C<A;C++)y[C]=arguments[C];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(O){if(O.__quill&&O.__quill.emitter){var x;(x=O.__quill.emitter).handleDOM.apply(x,y)}})})});var m=function(b){_(A,b);function A(){u(this,A);var y=h(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return y.listeners={},y.on("error",g.error),y}return o(A,[{key:"emit",value:function(){g.log.apply(g,arguments),s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(C){for(var O=arguments.length,x=Array(O>1?O-1:0),w=1;w<O;w++)x[w-1]=arguments[w];(this.listeners[C.type]||[]).forEach(function(R){var T=R.node,E=R.handler;(C.target===T||T.contains(C.target))&&E.apply(void 0,[C].concat(x))})}},{key:"listenDOM",value:function(C,O,x){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push({node:O,handler:x})}}]),A}(c.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function a(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=c,this.options=p};s.DEFAULTS={},r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(p){if(o.indexOf(p)<=o.indexOf(s)){for(var d,f=arguments.length,u=Array(f>1?f-1:0),h=1;h<f;h++)u[h-1]=arguments[h];(d=console)[p].apply(d,u)}}function c(p){return o.reduce(function(d,f){return d[f]=a.bind(console,f,p),d},{})}a.level=c.level=function(p){s=p},r.default=c},function(t,r,i){var o=Array.prototype.slice,s=i(52),a=i(53),c=t.exports=function(u,h,_){return _||(_={}),u===h?!0:u instanceof Date&&h instanceof Date?u.getTime()===h.getTime():!u||!h||typeof u!="object"&&typeof h!="object"?_.strict?u===h:u==h:f(u,h,_)};function p(u){return u==null}function d(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function f(u,h,_){var g,v;if(p(u)||p(h)||u.prototype!==h.prototype)return!1;if(a(u))return a(h)?(u=o.call(u),h=o.call(h),c(u,h,_)):!1;if(d(u)){if(!d(h)||u.length!==h.length)return!1;for(g=0;g<u.length;g++)if(u[g]!==h[g])return!1;return!0}try{var m=s(u),b=s(h)}catch{return!1}if(m.length!=b.length)return!1;for(m.sort(),b.sort(),g=m.length-1;g>=0;g--)if(m[g]!=b[g])return!1;for(g=m.length-1;g>=0;g--)if(v=m[g],!c(u[v],h[v],_))return!1;return typeof u==typeof h}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(c,p,d){d===void 0&&(d={}),this.attrName=c,this.keyName=p;var f=o.Scope.TYPE&o.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&o.Scope.LEVEL|f:this.scope=o.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return a.keys=function(c){return[].map.call(c.attributes,function(p){return p.name})},a.prototype.add=function(c,p){return this.canAdd(c,p)?(c.setAttribute(this.keyName,p),!0):!1},a.prototype.canAdd=function(c,p){var d=o.query(c,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof p=="string"?this.whitelist.indexOf(p.replace(/["']/g,""))>-1:this.whitelist.indexOf(p)>-1},a.prototype.remove=function(c){c.removeAttribute(this.keyName)},a.prototype.value=function(c){var p=c.getAttribute(this.keyName);return this.canAdd(c,p)&&p?p:""},a}();r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function w(R,T){var E=[],N=!0,k=!1,j=void 0;try{for(var V=R[Symbol.iterator](),H;!(N=(H=V.next()).done)&&(E.push(H.value),!(T&&E.length===T));N=!0);}catch($){k=!0,j=$}finally{try{!N&&V.return&&V.return()}finally{if(k)throw j}}return E}return function(R,T){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return w(R,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function w(R,T){for(var E=0;E<T.length;E++){var N=T[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,T,E){return T&&w(R.prototype,T),E&&w(R,E),R}}(),a=function w(R,T,E){R===null&&(R=Function.prototype);var N=Object.getOwnPropertyDescriptor(R,T);if(N===void 0){var k=Object.getPrototypeOf(R);return k===null?void 0:w(k,T,E)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(E)}},c=i(2),p=b(c),d=i(0),f=b(d),u=i(4),h=b(u),_=i(6),g=b(_),v=i(7),m=b(v);function b(w){return w&&w.__esModule?w:{default:w}}function A(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}function y(w,R){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:w}function C(w,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);w.prototype=Object.create(R&&R.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(w,R):w.__proto__=R)}var O=function(w){C(R,w);function R(){return A(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return R}(g.default);O.blotName="code",O.tagName="CODE";var x=function(w){C(R,w);function R(){return A(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"delta",value:function(){var E=this,N=this.domNode.textContent;return N.endsWith(`
`)&&(N=N.slice(0,-1)),N.split(`
`).reduce(function(k,j){return k.insert(j).insert(`
`,E.formats())},new p.default)}},{key:"format",value:function(E,N){if(!(E===this.statics.blotName&&N)){var k=this.descendant(m.default,this.length()-1),j=o(k,1),V=j[0];V!=null&&V.deleteAt(V.length()-1,1),a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,E,N)}}},{key:"formatAt",value:function(E,N,k,j){if(N!==0&&!(f.default.query(k,f.default.Scope.BLOCK)==null||k===this.statics.blotName&&j===this.statics.formats(this.domNode))){var V=this.newlineIndex(E);if(!(V<0||V>=E+N)){var H=this.newlineIndex(E,!0)+1,$=V-H+1,ie=this.isolate(H,$),G=ie.next;ie.format(k,j),G instanceof R&&G.formatAt(0,E-H+N-$,k,j)}}}},{key:"insertAt",value:function(E,N,k){if(k==null){var j=this.descendant(m.default,E),V=o(j,2),H=V[0],$=V[1];H.insertAt($,N)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var k=this.domNode.textContent.slice(E).indexOf(`
`);return k>-1?E+k:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,E);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===N.statics.formats(N.domNode)&&(N.optimize(E),N.moveChildren(this),N.remove())}},{key:"replace",value:function(E){a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(N){var k=f.default.find(N);k==null?N.parentNode.removeChild(N):k instanceof f.default.Embed?k.remove():k.unwrap()})}}],[{key:"create",value:function(E){var N=a(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,E);return N.setAttribute("spellcheck",!1),N}},{key:"formats",value:function(){return!0}}]),R}(h.default);x.blotName="code-block",x.tagName="PRE",x.TAB="  ",r.Code=O,r.default=x},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},s=function(){function G(B,L){var q=[],F=!0,W=!1,U=void 0;try{for(var D=B[Symbol.iterator](),z;!(F=(z=D.next()).done)&&(q.push(z.value),!(L&&q.length===L));F=!0);}catch(K){W=!0,U=K}finally{try{!F&&D.return&&D.return()}finally{if(W)throw U}}return q}return function(B,L){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return G(B,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function G(B,L){for(var q=0;q<L.length;q++){var F=L[q];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(B,F.key,F)}}return function(B,L,q){return L&&G(B.prototype,L),q&&G(B,q),B}}(),c=i(2),p=N(c),d=i(20),f=N(d),u=i(0),h=N(u),_=i(13),g=N(_),v=i(24),m=N(v),b=i(4),A=N(b),y=i(16),C=N(y),O=i(21),x=N(O),w=i(11),R=N(w),T=i(3),E=N(T);function N(G){return G&&G.__esModule?G:{default:G}}function k(G,B,L){return B in G?Object.defineProperty(G,B,{value:L,enumerable:!0,configurable:!0,writable:!0}):G[B]=L,G}function j(G,B){if(!(G instanceof B))throw new TypeError("Cannot call a class as a function")}var V=/^[ -~]*$/,H=function(){function G(B){j(this,G),this.scroll=B,this.delta=this.getDelta()}return a(G,[{key:"applyDelta",value:function(L){var q=this,F=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),L=ie(L),L.reduce(function(U,D){var z=D.retain||D.delete||D.insert.length||1,K=D.attributes||{};if(D.insert!=null){if(typeof D.insert=="string"){var X=D.insert;X.endsWith(`
`)&&F&&(F=!1,X=X.slice(0,-1)),U>=W&&!X.endsWith(`
`)&&(F=!0),q.scroll.insertAt(U,X);var ne=q.scroll.line(U),ue=s(ne,2),me=ue[0],ye=ue[1],ke=(0,E.default)({},(0,b.bubbleFormats)(me));if(me instanceof A.default){var Oe=me.descendant(h.default.Leaf,ye),tt=s(Oe,1),He=tt[0];ke=(0,E.default)(ke,(0,b.bubbleFormats)(He))}K=f.default.attributes.diff(ke,K)||{}}else if(o(D.insert)==="object"){var J=Object.keys(D.insert)[0];if(J==null)return U;q.scroll.insertAt(U,J,D.insert[J])}W+=z}return Object.keys(K).forEach(function(ee){q.scroll.formatAt(U,z,ee,K[ee])}),U+z},0),L.reduce(function(U,D){return typeof D.delete=="number"?(q.scroll.deleteAt(U,D.delete),U):U+(D.retain||D.insert.length||1)},0),this.scroll.batchEnd(),this.update(L)}},{key:"deleteText",value:function(L,q){return this.scroll.deleteAt(L,q),this.update(new p.default().retain(L).delete(q))}},{key:"formatLine",value:function(L,q){var F=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(U){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[U])){var D=F.scroll.lines(L,Math.max(q,1)),z=q;D.forEach(function(K){var X=K.length();if(!(K instanceof g.default))K.format(U,W[U]);else{var ne=L-K.offset(F.scroll),ue=K.newlineIndex(ne+z)-ne+1;K.formatAt(ne,ue,U,W[U])}z-=X})}}),this.scroll.optimize(),this.update(new p.default().retain(L).retain(q,(0,x.default)(W)))}},{key:"formatText",value:function(L,q){var F=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(U){F.scroll.formatAt(L,q,U,W[U])}),this.update(new p.default().retain(L).retain(q,(0,x.default)(W)))}},{key:"getContents",value:function(L,q){return this.delta.slice(L,L+q)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(L,q){return L.concat(q.delta())},new p.default)}},{key:"getFormat",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],W=[];q===0?this.scroll.path(L).forEach(function(D){var z=s(D,1),K=z[0];K instanceof A.default?F.push(K):K instanceof h.default.Leaf&&W.push(K)}):(F=this.scroll.lines(L,q),W=this.scroll.descendants(h.default.Leaf,L,q));var U=[F,W].map(function(D){if(D.length===0)return{};for(var z=(0,b.bubbleFormats)(D.shift());Object.keys(z).length>0;){var K=D.shift();if(K==null)return z;z=$((0,b.bubbleFormats)(K),z)}return z});return E.default.apply(E.default,U)}},{key:"getText",value:function(L,q){return this.getContents(L,q).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(L,q,F){return this.scroll.insertAt(L,q,F),this.update(new p.default().retain(L).insert(k({},q,F)))}},{key:"insertText",value:function(L,q){var F=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q=q.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(L,q),Object.keys(W).forEach(function(U){F.scroll.formatAt(L,q.length,U,W[U])}),this.update(new p.default().retain(L).insert(q,(0,x.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var L=this.scroll.children.head;return L.statics.blotName!==A.default.blotName||L.children.length>1?!1:L.children.head instanceof C.default}},{key:"removeFormat",value:function(L,q){var F=this.getText(L,q),W=this.scroll.line(L+q),U=s(W,2),D=U[0],z=U[1],K=0,X=new p.default;D!=null&&(D instanceof g.default?K=D.newlineIndex(z)-z+1:K=D.length()-z,X=D.delta().slice(z,z+K-1).insert(`
`));var ne=this.getContents(L,q+K),ue=ne.diff(new p.default().insert(F).concat(X)),me=new p.default().retain(L).concat(ue);return this.applyDelta(me)}},{key:"update",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(q.length===1&&q[0].type==="characterData"&&q[0].target.data.match(V)&&h.default.find(q[0].target)){var U=h.default.find(q[0].target),D=(0,b.bubbleFormats)(U),z=U.offset(this.scroll),K=q[0].oldValue.replace(m.default.CONTENTS,""),X=new p.default().insert(K),ne=new p.default().insert(U.value()),ue=new p.default().retain(z).concat(X.diff(ne,F));L=ue.reduce(function(me,ye){return ye.insert?me.insert(ye.insert,D):me.push(ye)},new p.default),this.delta=W.compose(L)}else this.delta=this.getDelta(),(!L||!(0,R.default)(W.compose(L),this.delta))&&(L=W.diff(this.delta,F));return L}}]),G}();function $(G,B){return Object.keys(B).reduce(function(L,q){return G[q]==null||(B[q]===G[q]?L[q]=B[q]:Array.isArray(B[q])?B[q].indexOf(G[q])<0&&(L[q]=B[q].concat([G[q]])):L[q]=[B[q],G[q]]),L},{})}function ie(G){return G.reduce(function(B,L){if(L.insert===1){var q=(0,x.default)(L.attributes);return delete q.image,B.insert({image:L.attributes.image},q)}if(L.attributes!=null&&(L.attributes.list===!0||L.attributes.bullet===!0)&&(L=(0,x.default)(L),L.attributes.list?L.attributes.list="ordered":(L.attributes.list="bullet",delete L.attributes.bullet)),typeof L.insert=="string"){var F=L.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(F,L.attributes)}return B.push(L)},new p.default)}r.default=H},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function w(R,T){var E=[],N=!0,k=!1,j=void 0;try{for(var V=R[Symbol.iterator](),H;!(N=(H=V.next()).done)&&(E.push(H.value),!(T&&E.length===T));N=!0);}catch($){k=!0,j=$}finally{try{!N&&V.return&&V.return()}finally{if(k)throw j}}return E}return function(R,T){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return w(R,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function w(R,T){for(var E=0;E<T.length;E++){var N=T[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,T,E){return T&&w(R.prototype,T),E&&w(R,E),R}}(),a=i(0),c=m(a),p=i(21),d=m(p),f=i(11),u=m(f),h=i(8),_=m(h),g=i(10),v=m(g);function m(w){return w&&w.__esModule?w:{default:w}}function b(w){if(Array.isArray(w)){for(var R=0,T=Array(w.length);R<w.length;R++)T[R]=w[R];return T}else return Array.from(w)}function A(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}var y=(0,v.default)("quill:selection"),C=function w(R){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;A(this,w),this.index=R,this.length=T},O=function(){function w(R,T){var E=this;A(this,w),this.emitter=T,this.scroll=R,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new C(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,_.default.sources.USER),1)}),this.emitter.on(_.default.events.EDITOR_CHANGE,function(N,k){N===_.default.events.TEXT_CHANGE&&k.length()>0&&E.update(_.default.sources.SILENT)}),this.emitter.on(_.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var N=E.getNativeRange();N!=null&&N.start.node!==E.cursor.textNode&&E.emitter.once(_.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(N.start.node,N.start.offset,N.end.node,N.end.offset)}catch{}})}}),this.emitter.on(_.default.events.SCROLL_OPTIMIZE,function(N,k){if(k.range){var j=k.range,V=j.startNode,H=j.startOffset,$=j.endNode,ie=j.endOffset;E.setNativeRange(V,H,$,ie)}}),this.update(_.default.sources.SILENT)}return s(w,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var E=T.cursor.restore();if(!E)return;setTimeout(function(){T.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(_.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var N=this.getNativeRange();if(!(N==null||!N.native.collapsed||c.default.query(T,c.default.Scope.BLOCK))){if(N.start.node!==this.cursor.textNode){var k=c.default.find(N.start.node,!1);if(k==null)return;if(k instanceof c.default.Leaf){var j=k.split(N.start.offset);k.parent.insertBefore(this.cursor,j)}else k.insertBefore(this.cursor,N.start.node);this.cursor.attach()}this.cursor.format(T,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=this.scroll.length();T=Math.min(T,N-1),E=Math.min(T+E,N-1)-T;var k=void 0,j=this.scroll.leaf(T),V=o(j,2),H=V[0],$=V[1];if(H==null)return null;var ie=H.position($,!0),G=o(ie,2);k=G[0],$=G[1];var B=document.createRange();if(E>0){B.setStart(k,$);var L=this.scroll.leaf(T+E),q=o(L,2);if(H=q[0],$=q[1],H==null)return null;var F=H.position($,!0),W=o(F,2);return k=W[0],$=W[1],B.setEnd(k,$),B.getBoundingClientRect()}else{var U="left",D=void 0;return k instanceof Text?($<k.data.length?(B.setStart(k,$),B.setEnd(k,$+1)):(B.setStart(k,$-1),B.setEnd(k,$),U="right"),D=B.getBoundingClientRect()):(D=H.domNode.getBoundingClientRect(),$>0&&(U="right")),{bottom:D.top+D.height,height:D.height,left:D[U],right:D[U],top:D.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var E=T.getRangeAt(0);if(E==null)return null;var N=this.normalizeNative(E);return y.info("getNativeRange",N),N}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var E=this.normalizedToRange(T);return[E,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var E=this,N=[[T.start.node,T.start.offset]];T.native.collapsed||N.push([T.end.node,T.end.offset]);var k=N.map(function(H){var $=o(H,2),ie=$[0],G=$[1],B=c.default.find(ie,!0),L=B.offset(E.scroll);return G===0?L:B instanceof c.default.Container?L+B.length():L+B.index(ie,G)}),j=Math.min(Math.max.apply(Math,b(k)),this.scroll.length()-1),V=Math.min.apply(Math,[j].concat(b(k)));return new C(V,j-V)}},{key:"normalizeNative",value:function(T){if(!x(this.root,T.startContainer)||!T.collapsed&&!x(this.root,T.endContainer))return null;var E={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[E.start,E.end].forEach(function(N){for(var k=N.node,j=N.offset;!(k instanceof Text)&&k.childNodes.length>0;)if(k.childNodes.length>j)k=k.childNodes[j],j=0;else if(k.childNodes.length===j)k=k.lastChild,j=k instanceof Text?k.data.length:k.childNodes.length+1;else break;N.node=k,N.offset=j}),E}},{key:"rangeToNative",value:function(T){var E=this,N=T.collapsed?[T.index]:[T.index,T.index+T.length],k=[],j=this.scroll.length();return N.forEach(function(V,H){V=Math.min(j-1,V);var $=void 0,ie=E.scroll.leaf(V),G=o(ie,2),B=G[0],L=G[1],q=B.position(L,H!==0),F=o(q,2);$=F[0],L=F[1],k.push($,L)}),k.length<2&&(k=k.concat(k)),k}},{key:"scrollIntoView",value:function(T){var E=this.lastRange;if(E!=null){var N=this.getBounds(E.index,E.length);if(N!=null){var k=this.scroll.length()-1,j=this.scroll.line(Math.min(E.index,k)),V=o(j,1),H=V[0],$=H;if(E.length>0){var ie=this.scroll.line(Math.min(E.index+E.length,k)),G=o(ie,1);$=G[0]}if(!(H==null||$==null)){var B=T.getBoundingClientRect();N.top<B.top?T.scrollTop-=B.top-N.top:N.bottom>B.bottom&&(T.scrollTop+=N.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(T,E){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,j=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",T,E,N,k),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||N.parentNode==null))){var V=document.getSelection();if(V!=null)if(T!=null){this.hasFocus()||this.root.focus();var H=(this.getNativeRange()||{}).native;if(H==null||j||T!==H.startContainer||E!==H.startOffset||N!==H.endContainer||k!==H.endOffset){T.tagName=="BR"&&(E=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),N.tagName=="BR"&&(k=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode);var $=document.createRange();$.setStart(T,E),$.setEnd(N,k),V.removeAllRanges(),V.addRange($)}}else V.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof E=="string"&&(N=E,E=!1),y.info("setRange",T),T!=null){var k=this.rangeToNative(T);this.setNativeRange.apply(this,b(k).concat([E]))}else this.setNativeRange(null);this.update(N)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_.default.sources.USER,E=this.lastRange,N=this.getRange(),k=o(N,2),j=k[0],V=k[1];if(this.lastRange=j,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(E,this.lastRange)){var H;!this.composing&&V!=null&&V.native.collapsed&&V.start.node!==this.cursor.textNode&&this.cursor.restore();var $=[_.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(E),T];if((H=this.emitter).emit.apply(H,[_.default.events.EDITOR_CHANGE].concat($)),T!==_.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,$)}}}}]),w}();function x(w,R){try{R.parentNode}catch{return!1}return R instanceof Text&&(R=R.parentNode),w.contains(R)}r.Range=C,r.default=O},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(g,v){for(var m=0;m<v.length;m++){var b=v[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,m){return v&&_(g.prototype,v),m&&_(g,m),g}}(),s=function _(g,v,m){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,v);if(b===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:_(A,v,m)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(m)}},a=i(0),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"insertInto",value:function(m,b){m.children.length===0?s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,m,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(c.default.Embed);h.blotName="break",h.tagName="BR",r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var _ in h)h.hasOwnProperty(_)&&(u[_]=h[_])};return function(u,h){f(u,h);function _(){this.constructor=u}u.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),a=i(30),c=i(1),p=function(f){o(u,f);function u(h){var _=f.call(this,h)||this;return _.build(),_}return u.prototype.appendChild=function(h){this.insertBefore(h)},u.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(h){h.attach()})},u.prototype.build=function(){var h=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(_){try{var g=d(_);h.insertBefore(g,h.children.head||void 0)}catch(v){if(v instanceof c.ParchmentError)return;throw v}})},u.prototype.deleteAt=function(h,_){if(h===0&&_===this.length())return this.remove();this.children.forEachAt(h,_,function(g,v,m){g.deleteAt(v,m)})},u.prototype.descendant=function(h,_){var g=this.children.find(_),v=g[0],m=g[1];return h.blotName==null&&h(v)||h.blotName!=null&&v instanceof h?[v,m]:v instanceof u?v.descendant(h,m):[null,-1]},u.prototype.descendants=function(h,_,g){_===void 0&&(_=0),g===void 0&&(g=Number.MAX_VALUE);var v=[],m=g;return this.children.forEachAt(_,g,function(b,A,y){(h.blotName==null&&h(b)||h.blotName!=null&&b instanceof h)&&v.push(b),b instanceof u&&(v=v.concat(b.descendants(h,A,m))),m-=y}),v},u.prototype.detach=function(){this.children.forEach(function(h){h.detach()}),f.prototype.detach.call(this)},u.prototype.formatAt=function(h,_,g,v){this.children.forEachAt(h,_,function(m,b,A){m.formatAt(b,A,g,v)})},u.prototype.insertAt=function(h,_,g){var v=this.children.find(h),m=v[0],b=v[1];if(m)m.insertAt(b,_,g);else{var A=g==null?c.create("text",_):c.create(_,g);this.appendChild(A)}},u.prototype.insertBefore=function(h,_){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return h instanceof g}))throw new c.ParchmentError("Cannot insert "+h.statics.blotName+" into "+this.statics.blotName);h.insertInto(this,_)},u.prototype.length=function(){return this.children.reduce(function(h,_){return h+_.length()},0)},u.prototype.moveChildren=function(h,_){this.children.forEach(function(g){h.insertBefore(g,_)})},u.prototype.optimize=function(h){if(f.prototype.optimize.call(this,h),this.children.length===0)if(this.statics.defaultChild!=null){var _=c.create(this.statics.defaultChild);this.appendChild(_),_.optimize(h)}else this.remove()},u.prototype.path=function(h,_){_===void 0&&(_=!1);var g=this.children.find(h,_),v=g[0],m=g[1],b=[[this,h]];return v instanceof u?b.concat(v.path(m,_)):(v!=null&&b.push([v,m]),b)},u.prototype.removeChild=function(h){this.children.remove(h)},u.prototype.replace=function(h){h instanceof u&&h.moveChildren(this),f.prototype.replace.call(this,h)},u.prototype.split=function(h,_){if(_===void 0&&(_=!1),!_){if(h===0)return this;if(h===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(h,this.length(),function(v,m,b){v=v.split(m,_),g.appendChild(v)}),g},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(h,_){var g=this,v=[],m=[];h.forEach(function(b){b.target===g.domNode&&b.type==="childList"&&(v.push.apply(v,b.addedNodes),m.push.apply(m,b.removedNodes))}),m.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var A=c.find(b);A!=null&&(A.domNode.parentNode==null||A.domNode.parentNode===g.domNode)&&A.detach()}}),v.filter(function(b){return b.parentNode==g.domNode}).sort(function(b,A){return b===A?0:b.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var A=null;b.nextSibling!=null&&(A=c.find(b.nextSibling));var y=d(b);(y.next!=A||y.next==null)&&(y.parent!=null&&y.parent.removeChild(g),g.insertBefore(y,A||void 0))})},u}(a.default);function d(f){var u=c.find(f);if(u==null)try{u=c.create(f)}catch{u=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(_){u.domNode.appendChild(_)}),f.parentNode&&f.parentNode.replaceChild(u.domNode,f),u.attach()}return u}r.default=p},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var _ in h)h.hasOwnProperty(_)&&(u[_]=h[_])};return function(u,h){f(u,h);function _(){this.constructor=u}u.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(31),c=i(17),p=i(1),d=function(f){o(u,f);function u(h){var _=f.call(this,h)||this;return _.attributes=new a.default(_.domNode),_}return u.formats=function(h){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return h.tagName.toLowerCase()},u.prototype.format=function(h,_){var g=p.query(h);g instanceof s.default?this.attributes.attribute(g,_):_&&g!=null&&(h!==this.statics.blotName||this.formats()[h]!==_)&&this.replaceWith(h,_)},u.prototype.formats=function(){var h=this.attributes.values(),_=this.statics.formats(this.domNode);return _!=null&&(h[this.statics.blotName]=_),h},u.prototype.replaceWith=function(h,_){var g=f.prototype.replaceWith.call(this,h,_);return this.attributes.copy(g),g},u.prototype.update=function(h,_){var g=this;f.prototype.update.call(this,h,_),h.some(function(v){return v.target===g.domNode&&v.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(h,_){var g=f.prototype.wrap.call(this,h,_);return g instanceof u&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},u}(c.default);r.default=d},function(t,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),a=i(1),c=function(p){o(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.value=function(f){return!0},d.prototype.index=function(f,u){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},d.prototype.position=function(f,u){var h=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(h+=1),[this.parent.domNode,h]},d.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},d.scope=a.Scope.INLINE_BLOT,d}(s.default);r.default=c},function(t,r,i){var o=i(11),s=i(3),a={attributes:{compose:function(p,d,f){typeof p!="object"&&(p={}),typeof d!="object"&&(d={});var u=s(!0,{},d);f||(u=Object.keys(u).reduce(function(_,g){return u[g]!=null&&(_[g]=u[g]),_},{}));for(var h in p)p[h]!==void 0&&d[h]===void 0&&(u[h]=p[h]);return Object.keys(u).length>0?u:void 0},diff:function(p,d){typeof p!="object"&&(p={}),typeof d!="object"&&(d={});var f=Object.keys(p).concat(Object.keys(d)).reduce(function(u,h){return o(p[h],d[h])||(u[h]=d[h]===void 0?null:d[h]),u},{});return Object.keys(f).length>0?f:void 0},transform:function(p,d,f){if(typeof p!="object")return d;if(typeof d=="object"){if(!f)return d;var u=Object.keys(d).reduce(function(h,_){return p[_]===void 0&&(h[_]=d[_]),h},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(p){return new c(p)},length:function(p){return typeof p.delete=="number"?p.delete:typeof p.retain=="number"?p.retain:typeof p.insert=="string"?p.insert.length:1}};function c(p){this.ops=p,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(p){p||(p=1/0);var d=this.ops[this.index];if(d){var f=this.offset,u=a.length(d);if(p>=u-f?(p=u-f,this.index+=1,this.offset=0):this.offset+=p,typeof d.delete=="number")return{delete:p};var h={};return d.attributes&&(h.attributes=d.attributes),typeof d.retain=="number"?h.retain=p:typeof d.insert=="string"?h.insert=d.insert.substr(f,p):h.insert=d.insert,h}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var p=this.offset,d=this.index,f=this.next(),u=this.ops.slice(this.index);return this.offset=p,this.index=d,[f].concat(u)}else return[]},t.exports=a},function(t,r){var i=function(){function o(g,v){return v!=null&&g instanceof v}var s;try{s=Map}catch{s=function(){}}var a;try{a=Set}catch{a=function(){}}var c;try{c=Promise}catch{c=function(){}}function p(g,v,m,b,A){typeof v=="object"&&(m=v.depth,b=v.prototype,A=v.includeNonEnumerable,v=v.circular);var y=[],C=[],O=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof m>"u"&&(m=1/0);function x(w,R){if(w===null)return null;if(R===0)return w;var T,E;if(typeof w!="object")return w;if(o(w,s))T=new s;else if(o(w,a))T=new a;else if(o(w,c))T=new c(function(B,L){w.then(function(q){B(x(q,R-1))},function(q){L(x(q,R-1))})});else if(p.__isArray(w))T=[];else if(p.__isRegExp(w))T=new RegExp(w.source,_(w)),w.lastIndex&&(T.lastIndex=w.lastIndex);else if(p.__isDate(w))T=new Date(w.getTime());else{if(O&&Buffer.isBuffer(w))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(w.length):T=new Buffer(w.length),w.copy(T),T;o(w,Error)?T=Object.create(w):typeof b>"u"?(E=Object.getPrototypeOf(w),T=Object.create(E)):(T=Object.create(b),E=b)}if(v){var N=y.indexOf(w);if(N!=-1)return C[N];y.push(w),C.push(T)}o(w,s)&&w.forEach(function(B,L){var q=x(L,R-1),F=x(B,R-1);T.set(q,F)}),o(w,a)&&w.forEach(function(B){var L=x(B,R-1);T.add(L)});for(var k in w){var j;E&&(j=Object.getOwnPropertyDescriptor(E,k)),!(j&&j.set==null)&&(T[k]=x(w[k],R-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(w),k=0;k<V.length;k++){var H=V[k],$=Object.getOwnPropertyDescriptor(w,H);$&&!$.enumerable&&!A||(T[H]=x(w[H],R-1),$.enumerable||Object.defineProperty(T,H,{enumerable:!1}))}if(A)for(var ie=Object.getOwnPropertyNames(w),k=0;k<ie.length;k++){var G=ie[k],$=Object.getOwnPropertyDescriptor(w,G);$&&$.enumerable||(T[G]=x(w[G],R-1),Object.defineProperty(T,G,{enumerable:!1}))}return T}return x(g,m)}p.clonePrototype=function(v){if(v===null)return null;var m=function(){};return m.prototype=v,new m};function d(g){return Object.prototype.toString.call(g)}p.__objToStr=d;function f(g){return typeof g=="object"&&d(g)==="[object Date]"}p.__isDate=f;function u(g){return typeof g=="object"&&d(g)==="[object Array]"}p.__isArray=u;function h(g){return typeof g=="object"&&d(g)==="[object RegExp]"}p.__isRegExp=h;function _(g){var v="";return g.global&&(v+="g"),g.ignoreCase&&(v+="i"),g.multiline&&(v+="m"),v}return p.__getRegExpFlags=_,p}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function T(E,N){var k=[],j=!0,V=!1,H=void 0;try{for(var $=E[Symbol.iterator](),ie;!(j=(ie=$.next()).done)&&(k.push(ie.value),!(N&&k.length===N));j=!0);}catch(G){V=!0,H=G}finally{try{!j&&$.return&&$.return()}finally{if(V)throw H}}return k}return function(E,N){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return T(E,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(E,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(E,j.key,j)}}return function(E,N,k){return N&&T(E.prototype,N),k&&T(E,k),E}}(),a=function T(E,N,k){E===null&&(E=Function.prototype);var j=Object.getOwnPropertyDescriptor(E,N);if(j===void 0){var V=Object.getPrototypeOf(E);return V===null?void 0:T(V,N,k)}else{if("value"in j)return j.value;var H=j.get;return H===void 0?void 0:H.call(k)}},c=i(0),p=y(c),d=i(8),f=y(d),u=i(4),h=y(u),_=i(16),g=y(_),v=i(13),m=y(v),b=i(25),A=y(b);function y(T){return T&&T.__esModule?T:{default:T}}function C(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function O(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function x(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}function w(T){return T instanceof h.default||T instanceof u.BlockEmbed}var R=function(T){x(E,T);function E(N,k){C(this,E);var j=O(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N));return j.emitter=k.emitter,Array.isArray(k.whitelist)&&(j.whitelist=k.whitelist.reduce(function(V,H){return V[H]=!0,V},{})),j.domNode.addEventListener("DOMNodeInserted",function(){}),j.optimize(),j.enable(),j}return s(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(k,j){var V=this.line(k),H=o(V,2),$=H[0],ie=H[1],G=this.line(k+j),B=o(G,1),L=B[0];if(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,k,j),L!=null&&$!==L&&ie>0){if($ instanceof u.BlockEmbed||L instanceof u.BlockEmbed){this.optimize();return}if($ instanceof m.default){var q=$.newlineIndex($.length(),!0);if(q>-1&&($=$.split(q+1),$===L)){this.optimize();return}}else if(L instanceof m.default){var F=L.newlineIndex(0);F>-1&&L.split(F+1)}var W=L.children.head instanceof g.default?null:L.children.head;$.moveChildren(L,W),$.remove()}this.optimize()}},{key:"enable",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",k)}},{key:"formatAt",value:function(k,j,V,H){this.whitelist!=null&&!this.whitelist[V]||(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,k,j,V,H),this.optimize())}},{key:"insertAt",value:function(k,j,V){if(!(V!=null&&this.whitelist!=null&&!this.whitelist[j])){if(k>=this.length())if(V==null||p.default.query(j,p.default.Scope.BLOCK)==null){var H=p.default.create(this.statics.defaultChild);this.appendChild(H),V==null&&j.endsWith(`
`)&&(j=j.slice(0,-1)),H.insertAt(0,j,V)}else{var $=p.default.create(j,V);this.appendChild($)}else a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,k,j,V);this.optimize()}}},{key:"insertBefore",value:function(k,j){if(k.statics.scope===p.default.Scope.INLINE_BLOT){var V=p.default.create(this.statics.defaultChild);V.appendChild(k),k=V}a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,k,j)}},{key:"leaf",value:function(k){return this.path(k).pop()||[null,-1]}},{key:"line",value:function(k){return k===this.length()?this.line(k-1):this.descendant(w,k)}},{key:"lines",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,V=function H($,ie,G){var B=[],L=G;return $.children.forEachAt(ie,G,function(q,F,W){w(q)?B.push(q):q instanceof p.default.Container&&(B=B.concat(H(q,F,L))),L-=W}),B};return V(this,k,j)}},{key:"optimize",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,k,j),k.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,k,j))}},{key:"path",value:function(k){return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,k).slice(1)}},{key:"update",value:function(k){if(this.batch!==!0){var j=f.default.sources.USER;typeof k=="string"&&(j=k),Array.isArray(k)||(k=this.observer.takeRecords()),k.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,j,k),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,k.concat([])),k.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,j,k)}}}]),E}(p.default.Scroll);R.blotName="scroll",R.className="ql-editor",R.tagName="DIV",R.defaultChild="block",R.allowedChildren=[h.default,u.BlockEmbed,A.default],r.default=R},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},s=function(){function D(z,K){var X=[],ne=!0,ue=!1,me=void 0;try{for(var ye=z[Symbol.iterator](),ke;!(ne=(ke=ye.next()).done)&&(X.push(ke.value),!(K&&X.length===K));ne=!0);}catch(Oe){ue=!0,me=Oe}finally{try{!ne&&ye.return&&ye.return()}finally{if(ue)throw me}}return X}return function(z,K){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return D(z,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function D(z,K){for(var X=0;X<K.length;X++){var ne=K[X];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(z,ne.key,ne)}}return function(z,K,X){return K&&D(z.prototype,K),X&&D(z,X),z}}(),c=i(21),p=T(c),d=i(11),f=T(d),u=i(3),h=T(u),_=i(2),g=T(_),v=i(20),m=T(v),b=i(0),A=T(b),y=i(5),C=T(y),O=i(10),x=T(O),w=i(9),R=T(w);function T(D){return D&&D.__esModule?D:{default:D}}function E(D,z,K){return z in D?Object.defineProperty(D,z,{value:K,enumerable:!0,configurable:!0,writable:!0}):D[z]=K,D}function N(D,z){if(!(D instanceof z))throw new TypeError("Cannot call a class as a function")}function k(D,z){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:D}function j(D,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);D.prototype=Object.create(z&&z.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(D,z):D.__proto__=z)}var V=(0,x.default)("quill:keyboard"),H=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",$=function(D){j(z,D),a(z,null,[{key:"match",value:function(X,ne){return ne=U(ne),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ue){return!!ne[ue]!==X[ue]&&ne[ue]!==null})?!1:ne.key===(X.which||X.keyCode)}}]);function z(K,X){N(this,z);var ne=k(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,K,X));return ne.bindings={},Object.keys(ne.options.bindings).forEach(function(ue){ue==="list autofill"&&K.scroll.whitelist!=null&&!K.scroll.whitelist.list||ne.options.bindings[ue]&&ne.addBinding(ne.options.bindings[ue])}),ne.addBinding({key:z.keys.ENTER,shiftKey:null},q),ne.addBinding({key:z.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ne.addBinding({key:z.keys.BACKSPACE},{collapsed:!0},G),ne.addBinding({key:z.keys.DELETE},{collapsed:!0},B)):(ne.addBinding({key:z.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),ne.addBinding({key:z.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),ne.addBinding({key:z.keys.BACKSPACE},{collapsed:!1},L),ne.addBinding({key:z.keys.DELETE},{collapsed:!1},L),ne.addBinding({key:z.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),ne.listen(),ne}return a(z,[{key:"addBinding",value:function(X){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=U(X);if(me==null||me.key==null)return V.warn("Attempted to add invalid keyboard binding",me);typeof ne=="function"&&(ne={handler:ne}),typeof ue=="function"&&(ue={handler:ue}),me=(0,h.default)(me,ne,ue),this.bindings[me.key]=this.bindings[me.key]||[],this.bindings[me.key].push(me)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(ne){if(!ne.defaultPrevented){var ue=ne.which||ne.keyCode,me=(X.bindings[ue]||[]).filter(function(Ue){return z.match(ne,Ue)});if(me.length!==0){var ye=X.quill.getSelection();if(!(ye==null||!X.quill.hasFocus())){var ke=X.quill.getLine(ye.index),Oe=s(ke,2),tt=Oe[0],He=Oe[1],J=X.quill.getLeaf(ye.index),ee=s(J,2),le=ee[0],ce=ee[1],oe=ye.length===0?[le,ce]:X.quill.getLeaf(ye.index+ye.length),xe=s(oe,2),we=xe[0],Ae=xe[1],Me=le instanceof A.default.Text?le.value().slice(0,ce):"",qe=we instanceof A.default.Text?we.value().slice(Ae):"",De={collapsed:ye.length===0,empty:ye.length===0&&tt.length()<=1,format:X.quill.getFormat(ye),offset:He,prefix:Me,suffix:qe},Zr=me.some(function(Ue){if(Ue.collapsed!=null&&Ue.collapsed!==De.collapsed||Ue.empty!=null&&Ue.empty!==De.empty||Ue.offset!=null&&Ue.offset!==De.offset)return!1;if(Array.isArray(Ue.format)){if(Ue.format.every(function(Ct){return De.format[Ct]==null}))return!1}else if(o(Ue.format)==="object"&&!Object.keys(Ue.format).every(function(Ct){return Ue.format[Ct]===!0?De.format[Ct]!=null:Ue.format[Ct]===!1?De.format[Ct]==null:(0,f.default)(Ue.format[Ct],De.format[Ct])}))return!1;return Ue.prefix!=null&&!Ue.prefix.test(De.prefix)||Ue.suffix!=null&&!Ue.suffix.test(De.suffix)?!1:Ue.handler.call(X,ye,De)!==!0});Zr&&ne.preventDefault()}}}})}}]),z}(R.default);$.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},$.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:$.keys.TAB,format:["blockquote","indent","list"],handler:function(z,K){if(K.collapsed&&K.offset!==0)return!0;this.quill.format("indent","+1",C.default.sources.USER)}},outdent:{key:$.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(z,K){if(K.collapsed&&K.offset!==0)return!0;this.quill.format("indent","-1",C.default.sources.USER)}},"outdent backspace":{key:$.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(z,K){K.format.indent!=null?this.quill.format("indent","-1",C.default.sources.USER):K.format.list!=null&&this.quill.format("list",!1,C.default.sources.USER)}},"indent code-block":F(!0),"outdent code-block":F(!1),"remove tab":{key:$.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(z){this.quill.deleteText(z.index-1,1,C.default.sources.USER)}},tab:{key:$.keys.TAB,handler:function(z){this.quill.history.cutoff();var K=new g.default().retain(z.index).delete(z.length).insert("	");this.quill.updateContents(K,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(z.index+1,C.default.sources.SILENT)}},"list empty enter":{key:$.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(z,K){this.quill.format("list",!1,C.default.sources.USER),K.format.indent&&this.quill.format("indent",!1,C.default.sources.USER)}},"checklist enter":{key:$.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(z){var K=this.quill.getLine(z.index),X=s(K,2),ne=X[0],ue=X[1],me=(0,h.default)({},ne.formats(),{list:"checked"}),ye=new g.default().retain(z.index).insert(`
`,me).retain(ne.length()-ue-1).retain(1,{list:"unchecked"});this.quill.updateContents(ye,C.default.sources.USER),this.quill.setSelection(z.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:$.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(z,K){var X=this.quill.getLine(z.index),ne=s(X,2),ue=ne[0],me=ne[1],ye=new g.default().retain(z.index).insert(`
`,K.format).retain(ue.length()-me-1).retain(1,{header:null});this.quill.updateContents(ye,C.default.sources.USER),this.quill.setSelection(z.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(z,K){var X=K.prefix.length,ne=this.quill.getLine(z.index),ue=s(ne,2),me=ue[0],ye=ue[1];if(ye>X)return!0;var ke=void 0;switch(K.prefix.trim()){case"[]":case"[ ]":ke="unchecked";break;case"[x]":ke="checked";break;case"-":case"*":ke="bullet";break;default:ke="ordered"}this.quill.insertText(z.index," ",C.default.sources.USER),this.quill.history.cutoff();var Oe=new g.default().retain(z.index-ye).delete(X+1).retain(me.length()-2-ye).retain(1,{list:ke});this.quill.updateContents(Oe,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(z.index-X,C.default.sources.SILENT)}},"code exit":{key:$.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(z){var K=this.quill.getLine(z.index),X=s(K,2),ne=X[0],ue=X[1],me=new g.default().retain(z.index+ne.length()-ue-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(me,C.default.sources.USER)}},"embed left":ie($.keys.LEFT,!1),"embed left shift":ie($.keys.LEFT,!0),"embed right":ie($.keys.RIGHT,!1),"embed right shift":ie($.keys.RIGHT,!0)}};function ie(D,z){var K,X=D===$.keys.LEFT?"prefix":"suffix";return K={key:D,shiftKey:z,altKey:null},E(K,X,/^$/),E(K,"handler",function(ue){var me=ue.index;D===$.keys.RIGHT&&(me+=ue.length+1);var ye=this.quill.getLeaf(me),ke=s(ye,1),Oe=ke[0];return Oe instanceof A.default.Embed?(D===$.keys.LEFT?z?this.quill.setSelection(ue.index-1,ue.length+1,C.default.sources.USER):this.quill.setSelection(ue.index-1,C.default.sources.USER):z?this.quill.setSelection(ue.index,ue.length+1,C.default.sources.USER):this.quill.setSelection(ue.index+ue.length+1,C.default.sources.USER),!1):!0}),K}function G(D,z){if(!(D.index===0||this.quill.getLength()<=1)){var K=this.quill.getLine(D.index),X=s(K,1),ne=X[0],ue={};if(z.offset===0){var me=this.quill.getLine(D.index-1),ye=s(me,1),ke=ye[0];if(ke!=null&&ke.length()>1){var Oe=ne.formats(),tt=this.quill.getFormat(D.index-1,1);ue=m.default.attributes.diff(Oe,tt)||{}}}var He=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(z.prefix)?2:1;this.quill.deleteText(D.index-He,He,C.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(D.index-He,He,ue,C.default.sources.USER),this.quill.focus()}}function B(D,z){var K=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(z.suffix)?2:1;if(!(D.index>=this.quill.getLength()-K)){var X={},ne=0,ue=this.quill.getLine(D.index),me=s(ue,1),ye=me[0];if(z.offset>=ye.length()-1){var ke=this.quill.getLine(D.index+1),Oe=s(ke,1),tt=Oe[0];if(tt){var He=ye.formats(),J=this.quill.getFormat(D.index,1);X=m.default.attributes.diff(He,J)||{},ne=tt.length()}}this.quill.deleteText(D.index,K,C.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(D.index+ne-1,K,X,C.default.sources.USER)}}function L(D){var z=this.quill.getLines(D),K={};if(z.length>1){var X=z[0].formats(),ne=z[z.length-1].formats();K=m.default.attributes.diff(ne,X)||{}}this.quill.deleteText(D,C.default.sources.USER),Object.keys(K).length>0&&this.quill.formatLine(D.index,1,K,C.default.sources.USER),this.quill.setSelection(D.index,C.default.sources.SILENT),this.quill.focus()}function q(D,z){var K=this;D.length>0&&this.quill.scroll.deleteAt(D.index,D.length);var X=Object.keys(z.format).reduce(function(ne,ue){return A.default.query(ue,A.default.Scope.BLOCK)&&!Array.isArray(z.format[ue])&&(ne[ue]=z.format[ue]),ne},{});this.quill.insertText(D.index,`
`,X,C.default.sources.USER),this.quill.setSelection(D.index+1,C.default.sources.SILENT),this.quill.focus(),Object.keys(z.format).forEach(function(ne){X[ne]==null&&(Array.isArray(z.format[ne])||ne!=="link"&&K.quill.format(ne,z.format[ne],C.default.sources.USER))})}function F(D){return{key:$.keys.TAB,shiftKey:!D,format:{"code-block":!0},handler:function(K){var X=A.default.query("code-block"),ne=K.index,ue=K.length,me=this.quill.scroll.descendant(X,ne),ye=s(me,2),ke=ye[0],Oe=ye[1];if(ke!=null){var tt=this.quill.getIndex(ke),He=ke.newlineIndex(Oe,!0)+1,J=ke.newlineIndex(tt+Oe+ue),ee=ke.domNode.textContent.slice(He,J).split(`
`);Oe=0,ee.forEach(function(le,ce){D?(ke.insertAt(He+Oe,X.TAB),Oe+=X.TAB.length,ce===0?ne+=X.TAB.length:ue+=X.TAB.length):le.startsWith(X.TAB)&&(ke.deleteAt(He+Oe,X.TAB.length),Oe-=X.TAB.length,ce===0?ne-=X.TAB.length:ue-=X.TAB.length),Oe+=le.length+1}),this.quill.update(C.default.sources.USER),this.quill.setSelection(ne,ue,C.default.sources.SILENT)}}}}function W(D){return{key:D[0].toUpperCase(),shortKey:!0,handler:function(K,X){this.quill.format(D,!X.format[D],C.default.sources.USER)}}}function U(D){if(typeof D=="string"||typeof D=="number")return U({key:D});if((typeof D>"u"?"undefined":o(D))==="object"&&(D=(0,p.default)(D,!1)),typeof D.key=="string")if($.keys[D.key.toUpperCase()]!=null)D.key=$.keys[D.key.toUpperCase()];else if(D.key.length===1)D.key=D.key.toUpperCase().charCodeAt(0);else return null;return D.shortKey&&(D[H]=D.shortKey,delete D.shortKey),D}r.default=$,r.SHORTKEY=H},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(b,A){var y=[],C=!0,O=!1,x=void 0;try{for(var w=b[Symbol.iterator](),R;!(C=(R=w.next()).done)&&(y.push(R.value),!(A&&y.length===A));C=!0);}catch(T){O=!0,x=T}finally{try{!C&&w.return&&w.return()}finally{if(O)throw x}}return y}return function(b,A){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return m(b,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function m(b,A,y){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,A);if(C===void 0){var O=Object.getPrototypeOf(b);return O===null?void 0:m(O,A,y)}else{if("value"in C)return C.value;var x=C.get;return x===void 0?void 0:x.call(y)}},a=function(){function m(b,A){for(var y=0;y<A.length;y++){var C=A[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,A,y){return A&&m(b.prototype,A),y&&m(b,y),b}}(),c=i(0),p=u(c),d=i(7),f=u(d);function u(m){return m&&m.__esModule?m:{default:m}}function h(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function _(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function g(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var v=function(m){g(b,m),a(b,null,[{key:"value",value:function(){}}]);function b(A,y){h(this,b);var C=_(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,A));return C.selection=y,C.textNode=document.createTextNode(b.CONTENTS),C.domNode.appendChild(C.textNode),C._length=0,C}return a(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,C){if(this._length!==0)return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,y,C);for(var O=this,x=0;O!=null&&O.statics.scope!==p.default.Scope.BLOCK_BLOT;)x+=O.offset(O.parent),O=O.parent;O!=null&&(this._length=b.CONTENTS.length,O.optimize(),O.formatAt(x,b.CONTENTS.length,y,C),this._length=0)}},{key:"index",value:function(y,C){return y===this.textNode?0:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,C)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,C=this.selection.getNativeRange(),O=void 0,x=void 0,w=void 0;if(C!=null&&C.start.node===y&&C.end.node===y){var R=[y,C.start.offset,C.end.offset];O=R[0],x=R[1],w=R[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var T=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof f.default?(O=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=b.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(p.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),x!=null){var E=[x,w].map(function(k){return Math.max(0,Math.min(O.data.length,k-1))}),N=o(E,2);return x=N[0],w=N[1],{startNode:O,startOffset:x,endNode:O,endOffset:w}}}}},{key:"update",value:function(y,C){var O=this;if(y.some(function(w){return w.type==="characterData"&&w.target===O.textNode})){var x=this.restore();x&&(C.range=x)}}},{key:"value",value:function(){return""}}]),b}(p.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",r.default=v},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=p(o),a=i(4),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default.Container);h.allowedChildren=[c.default,a.BlockEmbed,h],r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function v(m,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,b,A){return b&&v(m.prototype,b),A&&v(m,A),m}}(),s=function v(m,b,A){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,b);if(y===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:v(C,b,A)}else{if("value"in y)return y.value;var O=y.get;return O===void 0?void 0:O.call(A)}},a=i(0),c=p(a);function p(v){return v&&v.__esModule?v:{default:v}}function d(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function f(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function u(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var h=function(v){u(m,v);function m(){return d(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(A){var y=s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,A);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(C){return("00"+parseInt(C).toString(16)).slice(-2)}).join("")):y}}]),m}(c.default.Attributor.Style),_=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),g=new h("color","color",{scope:c.default.Scope.INLINE});r.ColorAttributor=h,r.ColorClass=_,r.ColorStyle=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function g(v,m){for(var b=0;b<m.length;b++){var A=m[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,m,b){return m&&g(v.prototype,m),b&&g(v,b),v}}(),s=function g(v,m,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,m);if(A===void 0){var y=Object.getPrototypeOf(v);return y===null?void 0:g(y,m,b)}else{if("value"in A)return A.value;var C=A.get;return C===void 0?void 0:C.call(b)}},a=i(6),c=p(a);function p(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function u(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var h=function(g){u(v,g);function v(){return d(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"format",value:function(b,A){if(b!==this.statics.blotName||!A)return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,A);A=this.constructor.sanitize(A),this.domNode.setAttribute("href",A)}}],[{key:"create",value:function(b){var A=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b);return b=this.sanitize(b),A.setAttribute("href",b),A.setAttribute("rel","noopener noreferrer"),A.setAttribute("target","_blank"),A}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return _(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),v}(c.default);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function _(g,v){var m=document.createElement("a");m.href=g;var b=m.href.slice(0,m.href.indexOf(":"));return v.indexOf(b)>-1}r.default=h,r.sanitize=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s=function(){function v(m,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,b,A){return b&&v(m.prototype,b),A&&v(m,A),m}}(),a=i(23),c=f(a),p=i(107),d=f(p);function f(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}var h=0;function _(v,m){v.setAttribute(m,v.getAttribute(m)!=="true")}var g=function(){function v(m){var b=this;u(this,v),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(A){switch(A.keyCode){case c.default.keys.ENTER:b.togglePicker();break;case c.default.keys.ESCAPE:b.escape(),A.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),_(this.label,"aria-expanded"),_(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var A=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),b.hasAttribute("value")&&y.setAttribute("data-value",b.getAttribute("value")),b.textContent&&y.setAttribute("data-label",b.textContent),y.addEventListener("click",function(){A.selectItem(y,!0)}),y.addEventListener("keydown",function(C){switch(C.keyCode){case c.default.keys.ENTER:A.selectItem(y,!0),C.preventDefault();break;case c.default.keys.ESCAPE:A.escape(),C.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=d.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,A=document.createElement("span");A.classList.add("ql-picker-options"),A.setAttribute("aria-hidden","true"),A.tabIndex="-1",A.id="ql-picker-options-"+h,h+=1,this.label.setAttribute("aria-controls",A.id),this.options=A,[].slice.call(this.select.options).forEach(function(y){var C=b.buildItem(y);A.appendChild(C),y.selected===!0&&b.selectItem(C)}),this.container.appendChild(A)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(A){b.container.setAttribute(A.name,A.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(b!==y&&(y!=null&&y.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),A))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var C=document.createEvent("Event");C.initEvent("change",!0,!0),this.select.dispatchEvent(C)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var A=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(A)}else this.selectItem(null);var y=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),v}();r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=V(o),a=i(5),c=V(a),p=i(4),d=V(p),f=i(16),u=V(f),h=i(25),_=V(h),g=i(24),v=V(g),m=i(35),b=V(m),A=i(6),y=V(A),C=i(22),O=V(C),x=i(7),w=V(x),R=i(55),T=V(R),E=i(42),N=V(E),k=i(23),j=V(k);function V(H){return H&&H.__esModule?H:{default:H}}c.default.register({"blots/block":d.default,"blots/block/embed":p.BlockEmbed,"blots/break":u.default,"blots/container":_.default,"blots/cursor":v.default,"blots/embed":b.default,"blots/inline":y.default,"blots/scroll":O.default,"blots/text":w.default,"modules/clipboard":T.default,"modules/history":N.default,"modules/keyboard":j.default}),s.default.register(d.default,u.default,v.default,y.default,O.default,w.default),r.default=c.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(c){this.domNode=c,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(c){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var p;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?p=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?p=document.createElement(c):p=document.createElement(this.tagName[0])):p=document.createElement(this.tagName),this.className&&p.classList.add(this.className),p},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return o.create(c)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(c,p){var d=this.isolate(c,p);d.remove()},a.prototype.formatAt=function(c,p,d,f){var u=this.isolate(c,p);if(o.query(d,o.Scope.BLOT)!=null&&f)u.wrap(d,f);else if(o.query(d,o.Scope.ATTRIBUTE)!=null){var h=o.create(this.statics.scope);u.wrap(h),h.format(d,f)}},a.prototype.insertAt=function(c,p,d){var f=d==null?o.create("text",p):o.create(p,d),u=this.split(c);this.parent.insertBefore(f,u)},a.prototype.insertInto=function(c,p){p===void 0&&(p=null),this.parent!=null&&this.parent.children.remove(this);var d=null;c.children.insertBefore(this,p),p!=null&&(d=p.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=d)&&c.domNode.insertBefore(this.domNode,d),this.parent=c,this.attach()},a.prototype.isolate=function(c,p){var d=this.split(c);return d.split(p),d},a.prototype.length=function(){return 1},a.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},a.prototype.optimize=function(c){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},a.prototype.replaceWith=function(c,p){var d=typeof c=="string"?o.create(c,p):c;return d.replace(this),d},a.prototype.split=function(c,p){return c===0?this:this.next},a.prototype.update=function(c,p){},a.prototype.wrap=function(c,p){var d=typeof c=="string"?o.create(c,p):c;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},a.blotName="abstract",a}();r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),c=i(1),p=function(){function d(f){this.attributes={},this.domNode=f,this.build()}return d.prototype.attribute=function(f,u){u?f.add(this.domNode,u)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},d.prototype.build=function(){var f=this;this.attributes={};var u=o.default.keys(this.domNode),h=s.default.keys(this.domNode),_=a.default.keys(this.domNode);u.concat(h).concat(_).forEach(function(g){var v=c.query(g,c.Scope.ATTRIBUTE);v instanceof o.default&&(f.attributes[v.attrName]=v)})},d.prototype.copy=function(f){var u=this;Object.keys(this.attributes).forEach(function(h){var _=u.attributes[h].value(u.domNode);f.format(h,_)})},d.prototype.move=function(f){var u=this;this.copy(f),Object.keys(this.attributes).forEach(function(h){u.attributes[h].remove(u.domNode)}),this.attributes={}},d.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(u,h){return u[h]=f.attributes[h].value(f.domNode),u},{})},d}();r.default=p},function(t,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(p,d){var f=p.getAttribute("class")||"";return f.split(/\s+/).filter(function(u){return u.indexOf(d+"-")===0})}var c=function(p){o(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},d.prototype.add=function(f,u){return this.canAdd(f,u)?(this.remove(f),f.classList.add(this.keyName+"-"+u),!0):!1},d.prototype.remove=function(f){var u=a(f,this.keyName);u.forEach(function(h){f.classList.remove(h)}),f.classList.length===0&&f.removeAttribute("class")},d.prototype.value=function(f){var u=a(f,this.keyName)[0]||"",h=u.slice(this.keyName.length+1);return this.canAdd(f,h)?h:""},d}(s.default);r.default=c},function(t,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(p){var d=p.split("-"),f=d.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return d[0]+f}var c=function(p){o(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(u){var h=u.split(":");return h[0].trim()})},d.prototype.add=function(f,u){return this.canAdd(f,u)?(f.style[a(this.keyName)]=u,!0):!1},d.prototype.remove=function(f){f.style[a(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},d.prototype.value=function(f){var u=f.style[a(this.keyName)];return this.canAdd(f,u)?u:""},d}(s.default);r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function c(p,d){for(var f=0;f<d.length;f++){var u=d[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,d,f){return d&&c(p.prototype,d),f&&c(p,f),p}}();function s(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}var a=function(){function c(p,d){s(this,c),this.quill=p,this.options=d,this.modules={}}return o(c,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(f){d.modules[f]==null&&d.addModule(f)})}},{key:"addModule",value:function(d){var f=this.quill.constructor.import("modules/"+d);return this.modules[d]=new f(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),c}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(b,A){for(var y=0;y<A.length;y++){var C=A[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,A,y){return A&&m(b.prototype,A),y&&m(b,y),b}}(),s=function m(b,A,y){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,A);if(C===void 0){var O=Object.getPrototypeOf(b);return O===null?void 0:m(O,A,y)}else{if("value"in C)return C.value;var x=C.get;return x===void 0?void 0:x.call(y)}},a=i(0),c=f(a),p=i(7),d=f(p);function f(m){return m&&m.__esModule?m:{default:m}}function u(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function h(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function _(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var g="\uFEFF",v=function(m){_(b,m);function b(A){u(this,b);var y=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,A));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(C){y.contentNode.appendChild(C)}),y.leftGuard=document.createTextNode(g),y.rightGuard=document.createTextNode(g),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return o(b,[{key:"index",value:function(y,C){return y===this.leftGuard?0:y===this.rightGuard?1:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,C)}},{key:"restore",value:function(y){var C=void 0,O=void 0,x=y.data.split(g).join("");if(y===this.leftGuard)if(this.prev instanceof d.default){var w=this.prev.length();this.prev.insertAt(w,x),C={startNode:this.prev.domNode,startOffset:w+x.length}}else O=document.createTextNode(x),this.parent.insertBefore(c.default.create(O),this),C={startNode:O,startOffset:x.length};else y===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,x),C={startNode:this.next.domNode,startOffset:x.length}):(O=document.createTextNode(x),this.parent.insertBefore(c.default.create(O),this.next),C={startNode:O,startOffset:x.length}));return y.data=g,C}},{key:"update",value:function(y,C){var O=this;y.forEach(function(x){if(x.type==="characterData"&&(x.target===O.leftGuard||x.target===O.rightGuard)){var w=O.restore(x.target);w&&(C.range=w)}})}}]),b}(c.default.Embed);r.default=v},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var c={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},p=new s.default.Attributor.Attribute("align","align",c),d=new s.default.Attributor.Class("align","ql-align",c),f=new s.default.Attributor.Style("align","text-align",c);r.AlignAttribute=p,r.AlignClass=d,r.AlignStyle=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=c(o),a=i(26);function c(f){return f&&f.__esModule?f:{default:f}}var p=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),d=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=p,r.BackgroundStyle=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var c={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},p=new s.default.Attributor.Attribute("direction","dir",c),d=new s.default.Attributor.Class("direction","ql-direction",c),f=new s.default.Attributor.Style("direction","direction",c);r.DirectionAttribute=p,r.DirectionClass=d,r.DirectionStyle=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function m(b,A){for(var y=0;y<A.length;y++){var C=A[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,A,y){return A&&m(b.prototype,A),y&&m(b,y),b}}(),s=function m(b,A,y){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,A);if(C===void 0){var O=Object.getPrototypeOf(b);return O===null?void 0:m(O,A,y)}else{if("value"in C)return C.value;var x=C.get;return x===void 0?void 0:x.call(y)}},a=i(0),c=p(a);function p(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function f(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function u(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var h={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},_=new c.default.Attributor.Class("font","ql-font",h),g=function(m){u(b,m);function b(){return d(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"value",value:function(y){return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),b}(c.default.Attributor.Style),v=new g("font","font-family",h);r.FontStyle=v,r.FontClass=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}var c=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),p=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=c,r.SizeStyle=p},function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function A(y,C){for(var O=0;O<C.length;O++){var x=C[O];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,C,O){return C&&A(y.prototype,C),O&&A(y,O),y}}(),s=i(0),a=u(s),c=i(5),p=u(c),d=i(9),f=u(d);function u(A){return A&&A.__esModule?A:{default:A}}function h(A,y){if(!(A instanceof y))throw new TypeError("Cannot call a class as a function")}function _(A,y){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:A}function g(A,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);A.prototype=Object.create(y&&y.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(A,y):A.__proto__=y)}var v=function(A){g(y,A);function y(C,O){h(this,y);var x=_(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,C,O));return x.lastRecorded=0,x.ignoreChange=!1,x.clear(),x.quill.on(p.default.events.EDITOR_CHANGE,function(w,R,T,E){w!==p.default.events.TEXT_CHANGE||x.ignoreChange||(!x.options.userOnly||E===p.default.sources.USER?x.record(R,T):x.transform(R))}),x.quill.keyboard.addBinding({key:"Z",shortKey:!0},x.undo.bind(x)),x.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},x.redo.bind(x)),/Win/i.test(navigator.platform)&&x.quill.keyboard.addBinding({key:"Y",shortKey:!0},x.redo.bind(x)),x}return o(y,[{key:"change",value:function(O,x){if(this.stack[O].length!==0){var w=this.stack[O].pop();this.stack[x].push(w),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(w[O],p.default.sources.USER),this.ignoreChange=!1;var R=b(w[O]);this.quill.setSelection(R)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(O,x){if(O.ops.length!==0){this.stack.redo=[];var w=this.quill.getContents().diff(x),R=Date.now();if(this.lastRecorded+this.options.delay>R&&this.stack.undo.length>0){var T=this.stack.undo.pop();w=w.compose(T.undo),O=T.redo.compose(O)}else this.lastRecorded=R;this.stack.undo.push({redo:O,undo:w}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(O){this.stack.undo.forEach(function(x){x.undo=O.transform(x.undo,!0),x.redo=O.transform(x.redo,!0)}),this.stack.redo.forEach(function(x){x.undo=O.transform(x.undo,!0),x.redo=O.transform(x.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(f.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(A){var y=A.ops[A.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(C){return a.default.query(C,a.default.Scope.BLOCK)!=null}):!1}function b(A){var y=A.reduce(function(O,x){return O+=x.delete||0,O},0),C=A.length()-y;return m(A)&&(C-=1),C}r.default=v,r.getLastChangeIndex=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function q(F,W){for(var U=0;U<W.length;U++){var D=W[U];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(F,D.key,D)}}return function(F,W,U){return W&&q(F.prototype,W),U&&q(F,U),F}}(),s=function q(F,W,U){F===null&&(F=Function.prototype);var D=Object.getOwnPropertyDescriptor(F,W);if(D===void 0){var z=Object.getPrototypeOf(F);return z===null?void 0:q(z,W,U)}else{if("value"in D)return D.value;var K=D.get;return K===void 0?void 0:K.call(U)}},a=i(3),c=R(a),p=i(2),d=R(p),f=i(8),u=R(f),h=i(23),_=R(h),g=i(34),v=R(g),m=i(59),b=R(m),A=i(60),y=R(A),C=i(28),O=R(C),x=i(61),w=R(x);function R(q){return q&&q.__esModule?q:{default:q}}function T(q,F){if(!(q instanceof F))throw new TypeError("Cannot call a class as a function")}function E(q,F){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:q}function N(q,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);q.prototype=Object.create(F&&F.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(q,F):q.__proto__=F)}var k=[!1,"center","right","justify"],j=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],V=[!1,"serif","monospace"],H=["1","2","3",!1],$=["small",!1,"large","huge"],ie=function(q){N(F,q);function F(W,U){T(this,F);var D=E(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,W,U)),z=function K(X){if(!document.body.contains(W.root))return document.body.removeEventListener("click",K);D.tooltip!=null&&!D.tooltip.root.contains(X.target)&&document.activeElement!==D.tooltip.textbox&&!D.quill.hasFocus()&&D.tooltip.hide(),D.pickers!=null&&D.pickers.forEach(function(ne){ne.container.contains(X.target)||ne.close()})};return W.emitter.listenDOM("click",document.body,z),D}return o(F,[{key:"addModule",value:function(U){var D=s(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(D),D}},{key:"buildButtons",value:function(U,D){U.forEach(function(z){var K=z.getAttribute("class")||"";K.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),D[X]!=null))if(X==="direction")z.innerHTML=D[X][""]+D[X].rtl;else if(typeof D[X]=="string")z.innerHTML=D[X];else{var ne=z.value||"";ne!=null&&D[X][ne]&&(z.innerHTML=D[X][ne])}})})}},{key:"buildPickers",value:function(U,D){var z=this;this.pickers=U.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&L(X,k),new y.default(X,D.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var ne=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&L(X,j,ne==="background"?"#ffffff":"#000000"),new b.default(X,D[ne])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?L(X,V):X.classList.contains("ql-header")?L(X,H):X.classList.contains("ql-size")&&L(X,$)),new O.default(X)});var K=function(){z.pickers.forEach(function(ne){ne.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,K)}}]),F}(v.default);ie.DEFAULTS=(0,c.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var U=new FileReader;U.onload=function(D){var z=F.quill.getSelection(!0);F.quill.updateContents(new d.default().retain(z.index).delete(z.length).insert({image:D.target.result}),u.default.sources.USER),F.quill.setSelection(z.index+1,u.default.sources.SILENT),W.value=""},U.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(q){N(F,q);function F(W,U){T(this,F);var D=E(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,W,U));return D.textbox=D.root.querySelector('input[type="text"]'),D.listen(),D}return o(F,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(D){_.default.match(D,"enter")?(U.save(),D.preventDefault()):_.default.match(D,"escape")&&(U.cancel(),D.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),D!=null?this.textbox.value=D:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var D=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,u.default.sources.USER)),this.quill.root.scrollTop=D;break}case"video":U=B(U);case"formula":{if(!U)break;var z=this.quill.getSelection(!0);if(z!=null){var K=z.index+z.length;this.quill.insertEmbed(K,this.root.getAttribute("data-mode"),U,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(K+1," ",u.default.sources.USER),this.quill.setSelection(K+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(w.default);function B(q){var F=q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=q.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":q}function L(q,F){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(U){var D=document.createElement("option");U===W?D.setAttribute("selected","selected"):D.setAttribute("value",U),q.appendChild(D)})}r.BaseTooltip=G,r.default=ie},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var c,p=this.iterator();c=p();)if(c===a)return!0;return!1},s.prototype.insertBefore=function(a,c){a&&(a.next=c,c!=null?(a.prev=c.prev,c.prev!=null&&(c.prev.next=a),c.prev=a,c===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var c=0,p=this.head;p!=null;){if(p===a)return c;c+=p.length(),p=p.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var c=a;return a!=null&&(a=a.next),c}},s.prototype.find=function(a,c){c===void 0&&(c=!1);for(var p,d=this.iterator();p=d();){var f=p.length();if(a<f||c&&a===f&&(p.next==null||p.next.length()!==0))return[p,a];a-=f}return[null,0]},s.prototype.forEach=function(a){for(var c,p=this.iterator();c=p();)a(c)},s.prototype.forEachAt=function(a,c,p){if(!(c<=0))for(var d=this.find(a),f=d[0],u=d[1],h,_=a-u,g=this.iterator(f);(h=g())&&_<a+c;){var v=h.length();a>_?p(h,a-_,Math.min(c,_+v-a)):p(h,0,Math.min(v,a+c-_)),_+=v}},s.prototype.map=function(a){return this.reduce(function(c,p){return c.push(a(p)),c},[])},s.prototype.reduce=function(a,c){for(var p,d=this.iterator();p=d();)c=a(c,p);return c},s}();r.default=o},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var _ in h)h.hasOwnProperty(_)&&(u[_]=h[_])};return function(u,h){f(u,h);function _(){this.constructor=u}u.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},p=100,d=function(f){o(u,f);function u(h){var _=f.call(this,h)||this;return _.scroll=_,_.observer=new MutationObserver(function(g){_.update(g)}),_.observer.observe(_.domNode,c),_.attach(),_}return u.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(h,_){this.update(),h===0&&_===this.length()?this.children.forEach(function(g){g.remove()}):f.prototype.deleteAt.call(this,h,_)},u.prototype.formatAt=function(h,_,g,v){this.update(),f.prototype.formatAt.call(this,h,_,g,v)},u.prototype.insertAt=function(h,_,g){this.update(),f.prototype.insertAt.call(this,h,_,g)},u.prototype.optimize=function(h,_){var g=this;h===void 0&&(h=[]),_===void 0&&(_={}),f.prototype.optimize.call(this,_);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)h.push(v.pop());for(var m=function(C,O){O===void 0&&(O=!0),!(C==null||C===g)&&C.domNode.parentNode!=null&&(C.domNode[a.DATA_KEY].mutations==null&&(C.domNode[a.DATA_KEY].mutations=[]),O&&m(C.parent))},b=function(C){C.domNode[a.DATA_KEY]==null||C.domNode[a.DATA_KEY].mutations==null||(C instanceof s.default&&C.children.forEach(b),C.optimize(_))},A=h,y=0;A.length>0;y+=1){if(y>=p)throw new Error("[Parchment] Maximum optimize iterations reached");for(A.forEach(function(C){var O=a.find(C.target,!0);O!=null&&(O.domNode===C.target&&(C.type==="childList"?(m(a.find(C.previousSibling,!1)),[].forEach.call(C.addedNodes,function(x){var w=a.find(x,!1);m(w,!1),w instanceof s.default&&w.children.forEach(function(R){m(R,!1)})})):C.type==="attributes"&&m(O.prev)),m(O))}),this.children.forEach(b),A=[].slice.call(this.observer.takeRecords()),v=A.slice();v.length>0;)h.push(v.pop())}},u.prototype.update=function(h,_){var g=this;_===void 0&&(_={}),h=h||this.observer.takeRecords(),h.map(function(v){var m=a.find(v.target,!0);return m==null?null:m.domNode[a.DATA_KEY].mutations==null?(m.domNode[a.DATA_KEY].mutations=[v],m):(m.domNode[a.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===g||v.domNode[a.DATA_KEY]==null||v.update(v.domNode[a.DATA_KEY].mutations||[],_)}),this.domNode[a.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,_),this.optimize(h,_)},u.blotName="scroll",u.defaultChild="block",u.scope=a.Scope.BLOCK_BLOT,u.tagName="DIV",u}(s.default);r.default=d},function(t,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var h in u)u.hasOwnProperty(h)&&(f[h]=u[h])};return function(f,u){d(f,u);function h(){this.constructor=f}f.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1);function c(d,f){if(Object.keys(d).length!==Object.keys(f).length)return!1;for(var u in d)if(d[u]!==f[u])return!1;return!0}var p=function(d){o(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.formats=function(u){if(u.tagName!==f.tagName)return d.formats.call(this,u)},f.prototype.format=function(u,h){var _=this;u===this.statics.blotName&&!h?(this.children.forEach(function(g){g instanceof s.default||(g=g.wrap(f.blotName,!0)),_.attributes.copy(g)}),this.unwrap()):d.prototype.format.call(this,u,h)},f.prototype.formatAt=function(u,h,_,g){if(this.formats()[_]!=null||a.query(_,a.Scope.ATTRIBUTE)){var v=this.isolate(u,h);v.format(_,g)}else d.prototype.formatAt.call(this,u,h,_,g)},f.prototype.optimize=function(u){d.prototype.optimize.call(this,u);var h=this.formats();if(Object.keys(h).length===0)return this.unwrap();var _=this.next;_ instanceof f&&_.prev===this&&c(h,_.formats())&&(_.moveChildren(this),_.remove())},f.blotName="inline",f.scope=a.Scope.INLINE_BLOT,f.tagName="SPAN",f}(s.default);r.default=p},function(t,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1),c=function(p){o(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.formats=function(f){var u=a.query(d.blotName).tagName;if(f.tagName!==u)return p.formats.call(this,f)},d.prototype.format=function(f,u){a.query(f,a.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!u?this.replaceWith(d.blotName):p.prototype.format.call(this,f,u))},d.prototype.formatAt=function(f,u,h,_){a.query(h,a.Scope.BLOCK)!=null?this.format(h,_):p.prototype.formatAt.call(this,f,u,h,_)},d.prototype.insertAt=function(f,u,h){if(h==null||a.query(u,a.Scope.INLINE)!=null)p.prototype.insertAt.call(this,f,u,h);else{var _=this.split(f),g=a.create(u,h);_.parent.insertBefore(g,_)}},d.prototype.update=function(f,u){navigator.userAgent.match(/Trident/)?this.build():p.prototype.update.call(this,f,u)},d.blotName="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="P",d}(s.default);r.default=c},function(t,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){c(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.formats=function(d){},p.prototype.format=function(d,f){c.prototype.formatAt.call(this,0,this.length(),d,f)},p.prototype.formatAt=function(d,f,u,h){d===0&&f===this.length()?this.format(u,h):c.prototype.formatAt.call(this,d,f,u,h)},p.prototype.formats=function(){return this.statics.formats(this.domNode)},p}(s.default);r.default=a},function(t,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){p(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=i(1),c=function(p){o(d,p);function d(f){var u=p.call(this,f)||this;return u.text=u.statics.value(u.domNode),u}return d.create=function(f){return document.createTextNode(f)},d.value=function(f){var u=f.data;return u.normalize&&(u=u.normalize()),u},d.prototype.deleteAt=function(f,u){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+u)},d.prototype.index=function(f,u){return this.domNode===f?u:-1},d.prototype.insertAt=function(f,u,h){h==null?(this.text=this.text.slice(0,f)+u+this.text.slice(f),this.domNode.data=this.text):p.prototype.insertAt.call(this,f,u,h)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(f){p.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(f,u){return[this.domNode,f]},d.prototype.split=function(f,u){if(u===void 0&&(u=!1),!u){if(f===0)return this;if(f===this.length())return this.next}var h=a.create(this.domNode.splitText(f));return this.parent.insertBefore(h,this.next),this.text=this.statics.value(this.domNode),h},d.prototype.update=function(f,u){var h=this;f.some(function(_){return _.type==="characterData"&&_.target===h.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=a.Scope.INLINE_BLOT,d}(s.default);r.default=c},function(t,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,c){return arguments.length>1&&!this.contains(a)==!c?c:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,c){return c=c||0,this.substr(c,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,c){var p=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>p.length)&&(c=p.length),c-=a.length;var d=p.indexOf(a,c);return d!==-1&&d===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var p=Object(this),d=p.length>>>0,f=arguments[1],u,h=0;h<d;h++)if(u=p[h],c.call(f,u,h,p))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var i=-1,o=1,s=0;function a(y,C,O){if(y==C)return y?[[s,y]]:[];(O<0||y.length<O)&&(O=null);var x=f(y,C),w=y.substring(0,x);y=y.substring(x),C=C.substring(x),x=u(y,C);var R=y.substring(y.length-x);y=y.substring(0,y.length-x),C=C.substring(0,C.length-x);var T=c(y,C);return w&&T.unshift([s,w]),R&&T.push([s,R]),_(T),O!=null&&(T=m(T,O)),T=b(T),T}function c(y,C){var O;if(!y)return[[o,C]];if(!C)return[[i,y]];var x=y.length>C.length?y:C,w=y.length>C.length?C:y,R=x.indexOf(w);if(R!=-1)return O=[[o,x.substring(0,R)],[s,w],[o,x.substring(R+w.length)]],y.length>C.length&&(O[0][0]=O[2][0]=i),O;if(w.length==1)return[[i,y],[o,C]];var T=h(y,C);if(T){var E=T[0],N=T[1],k=T[2],j=T[3],V=T[4],H=a(E,k),$=a(N,j);return H.concat([[s,V]],$)}return p(y,C)}function p(y,C){for(var O=y.length,x=C.length,w=Math.ceil((O+x)/2),R=w,T=2*w,E=new Array(T),N=new Array(T),k=0;k<T;k++)E[k]=-1,N[k]=-1;E[R+1]=0,N[R+1]=0;for(var j=O-x,V=j%2!=0,H=0,$=0,ie=0,G=0,B=0;B<w;B++){for(var L=-B+H;L<=B-$;L+=2){var q=R+L,F;L==-B||L!=B&&E[q-1]<E[q+1]?F=E[q+1]:F=E[q-1]+1;for(var W=F-L;F<O&&W<x&&y.charAt(F)==C.charAt(W);)F++,W++;if(E[q]=F,F>O)$+=2;else if(W>x)H+=2;else if(V){var U=R+j-L;if(U>=0&&U<T&&N[U]!=-1){var D=O-N[U];if(F>=D)return d(y,C,F,W)}}}for(var z=-B+ie;z<=B-G;z+=2){var U=R+z,D;z==-B||z!=B&&N[U-1]<N[U+1]?D=N[U+1]:D=N[U-1]+1;for(var K=D-z;D<O&&K<x&&y.charAt(O-D-1)==C.charAt(x-K-1);)D++,K++;if(N[U]=D,D>O)G+=2;else if(K>x)ie+=2;else if(!V){var q=R+j-z;if(q>=0&&q<T&&E[q]!=-1){var F=E[q],W=R+F-q;if(D=O-D,F>=D)return d(y,C,F,W)}}}}return[[i,y],[o,C]]}function d(y,C,O,x){var w=y.substring(0,O),R=C.substring(0,x),T=y.substring(O),E=C.substring(x),N=a(w,R),k=a(T,E);return N.concat(k)}function f(y,C){if(!y||!C||y.charAt(0)!=C.charAt(0))return 0;for(var O=0,x=Math.min(y.length,C.length),w=x,R=0;O<w;)y.substring(R,w)==C.substring(R,w)?(O=w,R=O):x=w,w=Math.floor((x-O)/2+O);return w}function u(y,C){if(!y||!C||y.charAt(y.length-1)!=C.charAt(C.length-1))return 0;for(var O=0,x=Math.min(y.length,C.length),w=x,R=0;O<w;)y.substring(y.length-w,y.length-R)==C.substring(C.length-w,C.length-R)?(O=w,R=O):x=w,w=Math.floor((x-O)/2+O);return w}function h(y,C){var O=y.length>C.length?y:C,x=y.length>C.length?C:y;if(O.length<4||x.length*2<O.length)return null;function w($,ie,G){for(var B=$.substring(G,G+Math.floor($.length/4)),L=-1,q="",F,W,U,D;(L=ie.indexOf(B,L+1))!=-1;){var z=f($.substring(G),ie.substring(L)),K=u($.substring(0,G),ie.substring(0,L));q.length<K+z&&(q=ie.substring(L-K,L)+ie.substring(L,L+z),F=$.substring(0,G-K),W=$.substring(G+z),U=ie.substring(0,L-K),D=ie.substring(L+z))}return q.length*2>=$.length?[F,W,U,D,q]:null}var R=w(O,x,Math.ceil(O.length/4)),T=w(O,x,Math.ceil(O.length/2)),E;if(!R&&!T)return null;T?R?E=R[4].length>T[4].length?R:T:E=T:E=R;var N,k,j,V;y.length>C.length?(N=E[0],k=E[1],j=E[2],V=E[3]):(j=E[0],V=E[1],N=E[2],k=E[3]);var H=E[4];return[N,k,j,V,H]}function _(y){y.push([s,""]);for(var C=0,O=0,x=0,w="",R="",T;C<y.length;)switch(y[C][0]){case o:x++,R+=y[C][1],C++;break;case i:O++,w+=y[C][1],C++;break;case s:O+x>1?(O!==0&&x!==0&&(T=f(R,w),T!==0&&(C-O-x>0&&y[C-O-x-1][0]==s?y[C-O-x-1][1]+=R.substring(0,T):(y.splice(0,0,[s,R.substring(0,T)]),C++),R=R.substring(T),w=w.substring(T)),T=u(R,w),T!==0&&(y[C][1]=R.substring(R.length-T)+y[C][1],R=R.substring(0,R.length-T),w=w.substring(0,w.length-T))),O===0?y.splice(C-x,O+x,[o,R]):x===0?y.splice(C-O,O+x,[i,w]):y.splice(C-O-x,O+x,[i,w],[o,R]),C=C-O-x+(O?1:0)+(x?1:0)+1):C!==0&&y[C-1][0]==s?(y[C-1][1]+=y[C][1],y.splice(C,1)):C++,x=0,O=0,w="",R="";break}y[y.length-1][1]===""&&y.pop();var E=!1;for(C=1;C<y.length-1;)y[C-1][0]==s&&y[C+1][0]==s&&(y[C][1].substring(y[C][1].length-y[C-1][1].length)==y[C-1][1]?(y[C][1]=y[C-1][1]+y[C][1].substring(0,y[C][1].length-y[C-1][1].length),y[C+1][1]=y[C-1][1]+y[C+1][1],y.splice(C-1,1),E=!0):y[C][1].substring(0,y[C+1][1].length)==y[C+1][1]&&(y[C-1][1]+=y[C+1][1],y[C][1]=y[C][1].substring(y[C+1][1].length)+y[C+1][1],y.splice(C+1,1),E=!0)),C++;E&&_(y)}var g=a;g.INSERT=o,g.DELETE=i,g.EQUAL=s,t.exports=g;function v(y,C){if(C===0)return[s,y];for(var O=0,x=0;x<y.length;x++){var w=y[x];if(w[0]===i||w[0]===s){var R=O+w[1].length;if(C===R)return[x+1,y];if(C<R){y=y.slice();var T=C-O,E=[w[0],w[1].slice(0,T)],N=[w[0],w[1].slice(T)];return y.splice(x,1,E,N),[x+1,y]}else O=R}}throw new Error("cursor_pos is out of bounds!")}function m(y,C){var O=v(y,C),x=O[1],w=O[0],R=x[w],T=x[w+1];if(R==null)return y;if(R[0]!==s)return y;if(T!=null&&R[1]+T[1]===T[1]+R[1])return x.splice(w,2,T,R),A(x,w,2);if(T!=null&&T[1].indexOf(R[1])===0){x.splice(w,2,[T[0],R[1]],[0,R[1]]);var E=T[1].slice(R[1].length);return E.length>0&&x.splice(w+2,0,[T[0],E]),A(x,w,3)}else return y}function b(y){for(var C=!1,O=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},x=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},w=2;w<y.length;w+=1)y[w-2][0]===s&&x(y[w-2][1])&&y[w-1][0]===i&&O(y[w-1][1])&&y[w][0]===o&&O(y[w][1])&&(C=!0,y[w-1][1]=y[w-2][1].slice(-1)+y[w-1][1],y[w][1]=y[w-2][1].slice(-1)+y[w][1],y[w-2][1]=y[w-2][1].slice(0,-1));if(!C)return y;for(var R=[],w=0;w<y.length;w+=1)y[w][1].length>0&&R.push(y[w]);return R}function A(y,C,O){for(var x=C+O-1;x>=0&&x>=C-1;x--)if(x+1<y.length){var w=y[x],R=y[x+1];w[0]===R[1]&&y.splice(x,2,[w[0],w[1]+R[1]])}return y}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(t,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=i?o:s,r.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(t,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(p,d,f){this.fn=p,this.context=d,this.once=f||!1}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)i.call(f,u)&&d.push(o?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},c.prototype.listeners=function(d,f){var u=o?o+d:d,h=this._events[u];if(f)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var _=0,g=h.length,v=new Array(g);_<g;_++)v[_]=h[_].fn;return v},c.prototype.emit=function(d,f,u,h,_,g){var v=o?o+d:d;if(!this._events[v])return!1;var m=this._events[v],b=arguments.length,A,y;if(m.fn){switch(m.once&&this.removeListener(d,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,u),!0;case 4:return m.fn.call(m.context,f,u,h),!0;case 5:return m.fn.call(m.context,f,u,h,_),!0;case 6:return m.fn.call(m.context,f,u,h,_,g),!0}for(y=1,A=new Array(b-1);y<b;y++)A[y-1]=arguments[y];m.fn.apply(m.context,A)}else{var C=m.length,O;for(y=0;y<C;y++)switch(m[y].once&&this.removeListener(d,m[y].fn,void 0,!0),b){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,f);break;case 3:m[y].fn.call(m[y].context,f,u);break;case 4:m[y].fn.call(m[y].context,f,u,h);break;default:if(!A)for(O=1,A=new Array(b-1);O<b;O++)A[O-1]=arguments[O];m[y].fn.apply(m[y].context,A)}}return!0},c.prototype.on=function(d,f,u){var h=new a(f,u||this),_=o?o+d:d;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],h]:this._events[_].push(h):(this._events[_]=h,this._eventsCount++),this},c.prototype.once=function(d,f,u){var h=new a(f,u||this,!0),_=o?o+d:d;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],h]:this._events[_].push(h):(this._events[_]=h,this._eventsCount++),this},c.prototype.removeListener=function(d,f,u,h){var _=o?o+d:d;if(!this._events[_])return this;if(!f)return--this._eventsCount===0?this._events=new s:delete this._events[_],this;var g=this._events[_];if(g.fn)g.fn===f&&(!h||g.once)&&(!u||g.context===u)&&(--this._eventsCount===0?this._events=new s:delete this._events[_]);else{for(var v=0,m=[],b=g.length;v<b;v++)(g[v].fn!==f||h&&!g[v].once||u&&g[v].context!==u)&&m.push(g[v]);m.length?this._events[_]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new s:delete this._events[_]}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=o?o+d:d,this._events[f]&&(--this._eventsCount===0?this._events=new s:delete this._events[f])):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=o,c.EventEmitter=c,typeof t<"u"&&(t.exports=c)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},s=function(){function J(ee,le){var ce=[],oe=!0,xe=!1,we=void 0;try{for(var Ae=ee[Symbol.iterator](),Me;!(oe=(Me=Ae.next()).done)&&(ce.push(Me.value),!(le&&ce.length===le));oe=!0);}catch(qe){xe=!0,we=qe}finally{try{!oe&&Ae.return&&Ae.return()}finally{if(xe)throw we}}return ce}return function(ee,le){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return J(ee,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function J(ee,le){for(var ce=0;ce<le.length;ce++){var oe=le[ce];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ee,oe.key,oe)}}return function(ee,le,ce){return le&&J(ee.prototype,le),ce&&J(ee,ce),ee}}(),c=i(3),p=N(c),d=i(2),f=N(d),u=i(0),h=N(u),_=i(5),g=N(_),v=i(10),m=N(v),b=i(9),A=N(b),y=i(36),C=i(37),O=i(13),x=N(O),w=i(26),R=i(38),T=i(39),E=i(40);function N(J){return J&&J.__esModule?J:{default:J}}function k(J,ee,le){return ee in J?Object.defineProperty(J,ee,{value:le,enumerable:!0,configurable:!0,writable:!0}):J[ee]=le,J}function j(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")}function V(J,ee){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:J}function H(J,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);J.prototype=Object.create(ee&&ee.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(J,ee):J.__proto__=ee)}var $=(0,m.default)("quill:clipboard"),ie="__ql-matcher",G=[[Node.TEXT_NODE,He],[Node.TEXT_NODE,ke],["br",ue],[Node.ELEMENT_NODE,ke],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,tt],["li",ye],["b",K.bind(K,"bold")],["i",K.bind(K,"italic")],["style",me]],B=[y.AlignAttribute,R.DirectionAttribute].reduce(function(J,ee){return J[ee.keyName]=ee,J},{}),L=[y.AlignStyle,C.BackgroundStyle,w.ColorStyle,R.DirectionStyle,T.FontStyle,E.SizeStyle].reduce(function(J,ee){return J[ee.keyName]=ee,J},{}),q=function(J){H(ee,J);function ee(le,ce){j(this,ee);var oe=V(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,le,ce));return oe.quill.root.addEventListener("paste",oe.onPaste.bind(oe)),oe.container=oe.quill.addContainer("ql-clipboard"),oe.container.setAttribute("contenteditable",!0),oe.container.setAttribute("tabindex",-1),oe.matchers=[],G.concat(oe.options.matchers).forEach(function(xe){var we=s(xe,2),Ae=we[0],Me=we[1];!ce.matchVisual&&Me===Oe||oe.addMatcher(Ae,Me)}),oe}return a(ee,[{key:"addMatcher",value:function(ce,oe){this.matchers.push([ce,oe])}},{key:"convert",value:function(ce){if(typeof ce=="string")return this.container.innerHTML=ce.replace(/\>\r?\n +\</g,"><"),this.convert();var oe=this.quill.getFormat(this.quill.selection.savedRange.index);if(oe[x.default.blotName]){var xe=this.container.innerText;return this.container.innerHTML="",new f.default().insert(xe,k({},x.default.blotName,oe[x.default.blotName]))}var we=this.prepareMatching(),Ae=s(we,2),Me=Ae[0],qe=Ae[1],De=z(this.container,Me,qe);return U(De,`
`)&&De.ops[De.ops.length-1].attributes==null&&(De=De.compose(new f.default().retain(De.length()-1).delete(1))),$.log("convert",this.container.innerHTML,De),this.container.innerHTML="",De}},{key:"dangerouslyPasteHTML",value:function(ce,oe){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof ce=="string")this.quill.setContents(this.convert(ce),oe),this.quill.setSelection(0,g.default.sources.SILENT);else{var we=this.convert(oe);this.quill.updateContents(new f.default().retain(ce).concat(we),xe),this.quill.setSelection(ce+we.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(ce){var oe=this;if(!(ce.defaultPrevented||!this.quill.isEnabled())){var xe=this.quill.getSelection(),we=new f.default().retain(xe.index),Ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){we=we.concat(oe.convert()).delete(xe.length),oe.quill.updateContents(we,g.default.sources.USER),oe.quill.setSelection(we.length()-xe.length,g.default.sources.SILENT),oe.quill.scrollingContainer.scrollTop=Ae,oe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ce=this,oe=[],xe=[];return this.matchers.forEach(function(we){var Ae=s(we,2),Me=Ae[0],qe=Ae[1];switch(Me){case Node.TEXT_NODE:xe.push(qe);break;case Node.ELEMENT_NODE:oe.push(qe);break;default:[].forEach.call(ce.container.querySelectorAll(Me),function(De){De[ie]=De[ie]||[],De[ie].push(qe)});break}}),[oe,xe]}}]),ee}(A.default);q.DEFAULTS={matchers:[],matchVisual:!0};function F(J,ee,le){return(typeof ee>"u"?"undefined":o(ee))==="object"?Object.keys(ee).reduce(function(ce,oe){return F(ce,oe,ee[oe])},J):J.reduce(function(ce,oe){return oe.attributes&&oe.attributes[ee]?ce.push(oe):ce.insert(oe.insert,(0,p.default)({},k({},ee,le),oe.attributes))},new f.default)}function W(J){if(J.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return J[ee]||(J[ee]=window.getComputedStyle(J))}function U(J,ee){for(var le="",ce=J.ops.length-1;ce>=0&&le.length<ee.length;--ce){var oe=J.ops[ce];if(typeof oe.insert!="string")break;le=oe.insert+le}return le.slice(-1*ee.length)===ee}function D(J){if(J.childNodes.length===0)return!1;var ee=W(J);return["block","list-item"].indexOf(ee.display)>-1}function z(J,ee,le){return J.nodeType===J.TEXT_NODE?le.reduce(function(ce,oe){return oe(J,ce)},new f.default):J.nodeType===J.ELEMENT_NODE?[].reduce.call(J.childNodes||[],function(ce,oe){var xe=z(oe,ee,le);return oe.nodeType===J.ELEMENT_NODE&&(xe=ee.reduce(function(we,Ae){return Ae(oe,we)},xe),xe=(oe[ie]||[]).reduce(function(we,Ae){return Ae(oe,we)},xe)),ce.concat(xe)},new f.default):new f.default}function K(J,ee,le){return F(le,J,!0)}function X(J,ee){var le=h.default.Attributor.Attribute.keys(J),ce=h.default.Attributor.Class.keys(J),oe=h.default.Attributor.Style.keys(J),xe={};return le.concat(ce).concat(oe).forEach(function(we){var Ae=h.default.query(we,h.default.Scope.ATTRIBUTE);Ae!=null&&(xe[Ae.attrName]=Ae.value(J),xe[Ae.attrName])||(Ae=B[we],Ae!=null&&(Ae.attrName===we||Ae.keyName===we)&&(xe[Ae.attrName]=Ae.value(J)||void 0),Ae=L[we],Ae!=null&&(Ae.attrName===we||Ae.keyName===we)&&(Ae=L[we],xe[Ae.attrName]=Ae.value(J)||void 0))}),Object.keys(xe).length>0&&(ee=F(ee,xe)),ee}function ne(J,ee){var le=h.default.query(J);if(le==null)return ee;if(le.prototype instanceof h.default.Embed){var ce={},oe=le.value(J);oe!=null&&(ce[le.blotName]=oe,ee=new f.default().insert(ce,le.formats(J)))}else typeof le.formats=="function"&&(ee=F(ee,le.blotName,le.formats(J)));return ee}function ue(J,ee){return U(ee,`
`)||ee.insert(`
`),ee}function me(){return new f.default}function ye(J,ee){var le=h.default.query(J);if(le==null||le.blotName!=="list-item"||!U(ee,`
`))return ee;for(var ce=-1,oe=J.parentNode;!oe.classList.contains("ql-clipboard");)(h.default.query(oe)||{}).blotName==="list"&&(ce+=1),oe=oe.parentNode;return ce<=0?ee:ee.compose(new f.default().retain(ee.length()-1).retain(1,{indent:ce}))}function ke(J,ee){return U(ee,`
`)||(D(J)||ee.length()>0&&J.nextSibling&&D(J.nextSibling))&&ee.insert(`
`),ee}function Oe(J,ee){if(D(J)&&J.nextElementSibling!=null&&!U(ee,`

`)){var le=J.offsetHeight+parseFloat(W(J).marginTop)+parseFloat(W(J).marginBottom);J.nextElementSibling.offsetTop>J.offsetTop+le*1.5&&ee.insert(`
`)}return ee}function tt(J,ee){var le={},ce=J.style||{};return ce.fontStyle&&W(J).fontStyle==="italic"&&(le.italic=!0),ce.fontWeight&&(W(J).fontWeight.startsWith("bold")||parseInt(W(J).fontWeight)>=700)&&(le.bold=!0),Object.keys(le).length>0&&(ee=F(ee,le)),parseFloat(ce.textIndent||0)>0&&(ee=new f.default().insert("	").concat(ee)),ee}function He(J,ee){var le=J.data;if(J.parentNode.tagName==="O:P")return ee.insert(le.trim());if(le.trim().length===0&&J.parentNode.classList.contains("ql-clipboard"))return ee;if(!W(J.parentNode).whiteSpace.startsWith("pre")){var ce=function(xe,we){return we=we.replace(/[^\u00a0]/g,""),we.length<1&&xe?" ":we};le=le.replace(/\r\n/g," ").replace(/\n/g," "),le=le.replace(/\s\s+/g,ce.bind(ce,!0)),(J.previousSibling==null&&D(J.parentNode)||J.previousSibling!=null&&D(J.previousSibling))&&(le=le.replace(/^\s+/,ce.bind(ce,!1))),(J.nextSibling==null&&D(J.parentNode)||J.nextSibling!=null&&D(J.nextSibling))&&(le=le.replace(/\s+$/,ce.bind(ce,!1)))}return ee.insert(le)}r.default=q,r.matchAttributor=X,r.matchBlot=ne,r.matchNewline=ke,r.matchSpacing=Oe,r.matchText=He},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(g,v){for(var m=0;m<v.length;m++){var b=v[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,m){return v&&_(g.prototype,v),m&&_(g,m),g}}(),s=function _(g,v,m){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,v);if(b===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:_(A,v,m)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(m)}},a=i(6),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"optimize",value:function(m){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(c.default);h.blotName="bold",h.tagName=["STRONG","B"],r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function E(N,k){var j=[],V=!0,H=!1,$=void 0;try{for(var ie=N[Symbol.iterator](),G;!(V=(G=ie.next()).done)&&(j.push(G.value),!(k&&j.length===k));V=!0);}catch(B){H=!0,$=B}finally{try{!V&&ie.return&&ie.return()}finally{if(H)throw $}}return j}return function(N,k){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return E(N,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(N,k){for(var j=0;j<k.length;j++){var V=k[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(N,V.key,V)}}return function(N,k,j){return k&&E(N.prototype,k),j&&E(N,j),N}}(),a=i(2),c=m(a),p=i(0),d=m(p),f=i(5),u=m(f),h=i(10),_=m(h),g=i(9),v=m(g);function m(E){return E&&E.__esModule?E:{default:E}}function b(E,N,k){return N in E?Object.defineProperty(E,N,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[N]=k,E}function A(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}function y(E,N){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:E}function C(E,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);E.prototype=Object.create(N&&N.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(E,N):E.__proto__=N)}var O=(0,_.default)("quill:toolbar"),x=function(E){C(N,E);function N(k,j){A(this,N);var V=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k,j));if(Array.isArray(V.options.container)){var H=document.createElement("div");R(H,V.options.container),k.container.parentNode.insertBefore(H,k.container),V.container=H}else typeof V.options.container=="string"?V.container=document.querySelector(V.options.container):V.container=V.options.container;if(!(V.container instanceof HTMLElement)){var $;return $=O.error("Container required for toolbar",V.options),y(V,$)}return V.container.classList.add("ql-toolbar"),V.controls=[],V.handlers={},Object.keys(V.options.handlers).forEach(function(ie){V.addHandler(ie,V.options.handlers[ie])}),[].forEach.call(V.container.querySelectorAll("button, select"),function(ie){V.attach(ie)}),V.quill.on(u.default.events.EDITOR_CHANGE,function(ie,G){ie===u.default.events.SELECTION_CHANGE&&V.update(G)}),V.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var ie=V.quill.selection.getRange(),G=o(ie,1),B=G[0];V.update(B)}),V}return s(N,[{key:"addHandler",value:function(j,V){this.handlers[j]=V}},{key:"attach",value:function(j){var V=this,H=[].find.call(j.classList,function(ie){return ie.indexOf("ql-")===0});if(H){if(H=H.slice(3),j.tagName==="BUTTON"&&j.setAttribute("type","button"),this.handlers[H]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[H]==null){O.warn("ignoring attaching to disabled format",H,j);return}if(d.default.query(H)==null){O.warn("ignoring attaching to nonexistent format",H,j);return}}var $=j.tagName==="SELECT"?"change":"click";j.addEventListener($,function(ie){var G=void 0;if(j.tagName==="SELECT"){if(j.selectedIndex<0)return;var B=j.options[j.selectedIndex];B.hasAttribute("selected")?G=!1:G=B.value||!1}else j.classList.contains("ql-active")?G=!1:G=j.value||!j.hasAttribute("value"),ie.preventDefault();V.quill.focus();var L=V.quill.selection.getRange(),q=o(L,1),F=q[0];if(V.handlers[H]!=null)V.handlers[H].call(V,G);else if(d.default.query(H).prototype instanceof d.default.Embed){if(G=prompt("Enter "+H),!G)return;V.quill.updateContents(new c.default().retain(F.index).delete(F.length).insert(b({},H,G)),u.default.sources.USER)}else V.quill.format(H,G,u.default.sources.USER);V.update(F)}),this.controls.push([H,j])}}},{key:"update",value:function(j){var V=j==null?{}:this.quill.getFormat(j);this.controls.forEach(function(H){var $=o(H,2),ie=$[0],G=$[1];if(G.tagName==="SELECT"){var B=void 0;if(j==null)B=null;else if(V[ie]==null)B=G.querySelector("option[selected]");else if(!Array.isArray(V[ie])){var L=V[ie];typeof L=="string"&&(L=L.replace(/\"/g,'\\"')),B=G.querySelector('option[value="'+L+'"]')}B==null?(G.value="",G.selectedIndex=-1):B.selected=!0}else if(j==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var q=V[ie]===G.getAttribute("value")||V[ie]!=null&&V[ie].toString()===G.getAttribute("value")||V[ie]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",q)}else G.classList.toggle("ql-active",V[ie]!=null)})}}]),N}(v.default);x.DEFAULTS={};function w(E,N,k){var j=document.createElement("button");j.setAttribute("type","button"),j.classList.add("ql-"+N),k!=null&&(j.value=k),E.appendChild(j)}function R(E,N){Array.isArray(N[0])||(N=[N]),N.forEach(function(k){var j=document.createElement("span");j.classList.add("ql-formats"),k.forEach(function(V){if(typeof V=="string")w(j,V);else{var H=Object.keys(V)[0],$=V[H];Array.isArray($)?T(j,H,$):w(j,H,$)}}),E.appendChild(j)})}function T(E,N,k){var j=document.createElement("select");j.classList.add("ql-"+N),k.forEach(function(V){var H=document.createElement("option");V!==!1?H.setAttribute("value",V):H.setAttribute("selected","selected"),j.appendChild(H)}),E.appendChild(j)}x.DEFAULTS={container:null,handlers:{clean:function(){var N=this,k=this.quill.getSelection();if(k!=null)if(k.length==0){var j=this.quill.getFormat();Object.keys(j).forEach(function(V){d.default.query(V,d.default.Scope.INLINE)!=null&&N.quill.format(V,!1)})}else this.quill.removeFormat(k,u.default.sources.USER)},direction:function(N){var k=this.quill.getFormat().align;N==="rtl"&&k==null?this.quill.format("align","right",u.default.sources.USER):!N&&k==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",N,u.default.sources.USER)},indent:function(N){var k=this.quill.getSelection(),j=this.quill.getFormat(k),V=parseInt(j.indent||0);if(N==="+1"||N==="-1"){var H=N==="+1"?1:-1;j.direction==="rtl"&&(H*=-1),this.quill.format("indent",V+H,u.default.sources.USER)}},link:function(N){N===!0&&(N=prompt("Enter link URL:")),this.quill.format("link",N,u.default.sources.USER)},list:function(N){var k=this.quill.getSelection(),j=this.quill.getFormat(k);N==="check"?j.list==="checked"||j.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",N,u.default.sources.USER)}}},r.default=x,r.addControls=R},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(g,v){for(var m=0;m<v.length;m++){var b=v[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,m){return v&&_(g.prototype,v),m&&_(g,m),g}}(),s=function _(g,v,m){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,v);if(b===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:_(A,v,m)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(m)}},a=i(28),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(v,m){d(this,g);var b=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v));return b.label.innerHTML=m,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(A){A.classList.add("ql-primary")}),b}return o(g,[{key:"buildItem",value:function(m){var b=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,m);return b.style.backgroundColor=m.getAttribute("value")||"",b}},{key:"selectItem",value:function(m,b){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,b);var A=this.label.querySelector(".ql-color-label"),y=m&&m.getAttribute("data-value")||"";A&&(A.tagName==="line"?A.style.stroke=y:A.style.fill=y)}}]),g}(c.default);r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(g,v){for(var m=0;m<v.length;m++){var b=v[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,m){return v&&_(g.prototype,v),m&&_(g,m),g}}(),s=function _(g,v,m){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,v);if(b===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:_(A,v,m)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(m)}},a=i(28),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(v,m){d(this,g);var b=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(A){A.innerHTML=m[A.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return o(g,[{key:"selectItem",value:function(m,b){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,b),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),g}(c.default);r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function c(p,d){for(var f=0;f<d.length;f++){var u=d[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,d,f){return d&&c(p.prototype,d),f&&c(p,f),p}}();function s(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}var a=function(){function c(p,d){var f=this;s(this,c),this.quill=p,this.boundsContainer=d||document.body,this.root=p.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return o(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var f=d.left+d.width/2-this.root.offsetWidth/2,u=d.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var h=this.boundsContainer.getBoundingClientRect(),_=this.root.getBoundingClientRect(),g=0;if(_.right>h.right&&(g=h.right-_.right,this.root.style.left=f+g+"px"),_.left<h.left&&(g=h.left-_.left,this.root.style.left=f+g+"px"),_.bottom>h.bottom){var v=_.bottom-_.top,m=d.bottom-d.top+v;this.root.style.top=u-m+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();r.default=a},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function T(E,N){var k=[],j=!0,V=!1,H=void 0;try{for(var $=E[Symbol.iterator](),ie;!(j=(ie=$.next()).done)&&(k.push(ie.value),!(N&&k.length===N));j=!0);}catch(G){V=!0,H=G}finally{try{!j&&$.return&&$.return()}finally{if(V)throw H}}return k}return function(E,N){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return T(E,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function T(E,N,k){E===null&&(E=Function.prototype);var j=Object.getOwnPropertyDescriptor(E,N);if(j===void 0){var V=Object.getPrototypeOf(E);return V===null?void 0:T(V,N,k)}else{if("value"in j)return j.value;var H=j.get;return H===void 0?void 0:H.call(k)}},a=function(){function T(E,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(E,j.key,j)}}return function(E,N,k){return N&&T(E.prototype,N),k&&T(E,k),E}}(),c=i(3),p=A(c),d=i(8),f=A(d),u=i(43),h=A(u),_=i(27),g=A(_),v=i(15),m=i(41),b=A(m);function A(T){return T&&T.__esModule?T:{default:T}}function y(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function C(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function O(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var x=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],w=function(T){O(E,T);function E(N,k){y(this,E),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=x);var j=C(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N,k));return j.quill.container.classList.add("ql-snow"),j}return a(E,[{key:"extendToolbar",value:function(k){k.container.classList.add("ql-snow"),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),b.default),this.tooltip=new R(this.quill,this.options.bounds),k.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(j,V){k.handlers.link.call(k,!V.format.link)})}}]),E}(h.default);w.DEFAULTS=(0,p.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var N=this.quill.getSelection();if(N==null||N.length==0)return;var k=this.quill.getText(N);/^\S+@\S+\.\S+$/.test(k)&&k.indexOf("mailto:")!==0&&(k="mailto:"+k);var j=this.quill.theme.tooltip;j.edit("link",k)}else this.quill.format("link",!1)}}}}});var R=function(T){O(E,T);function E(N,k){y(this,E);var j=C(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N,k));return j.preview=j.root.querySelector("a.ql-preview"),j}return a(E,[{key:"listen",value:function(){var k=this;s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(j){k.root.classList.contains("ql-editing")?k.save():k.edit("link",k.preview.textContent),j.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(j){if(k.linkRange!=null){var V=k.linkRange;k.restoreFocus(),k.quill.formatText(V,"link",!1,f.default.sources.USER),delete k.linkRange}j.preventDefault(),k.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(j,V,H){if(j!=null){if(j.length===0&&H===f.default.sources.USER){var $=k.quill.scroll.descendant(g.default,j.index),ie=o($,2),G=ie[0],B=ie[1];if(G!=null){k.linkRange=new v.Range(j.index-B,G.length());var L=g.default.formats(G.domNode);k.preview.textContent=L,k.preview.setAttribute("href",L),k.show(),k.position(k.quill.getBounds(k.linkRange));return}}else delete k.linkRange;k.hide()}})}},{key:"show",value:function(){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(u.BaseTooltip);R.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=oe(o),a=i(36),c=i(38),p=i(64),d=i(65),f=oe(d),u=i(66),h=oe(u),_=i(67),g=oe(_),v=i(37),m=i(26),b=i(39),A=i(40),y=i(56),C=oe(y),O=i(68),x=oe(O),w=i(27),R=oe(w),T=i(69),E=oe(T),N=i(70),k=oe(N),j=i(71),V=oe(j),H=i(72),$=oe(H),ie=i(73),G=oe(ie),B=i(13),L=oe(B),q=i(74),F=oe(q),W=i(75),U=oe(W),D=i(57),z=oe(D),K=i(41),X=oe(K),ne=i(28),ue=oe(ne),me=i(59),ye=oe(me),ke=i(60),Oe=oe(ke),tt=i(61),He=oe(tt),J=i(108),ee=oe(J),le=i(62),ce=oe(le);function oe(xe){return xe&&xe.__esModule?xe:{default:xe}}s.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":A.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":A.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":p.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":b.FontClass,"formats/size":A.SizeClass,"formats/blockquote":f.default,"formats/code-block":L.default,"formats/header":h.default,"formats/list":g.default,"formats/bold":C.default,"formats/code":B.Code,"formats/italic":x.default,"formats/link":R.default,"formats/script":E.default,"formats/strike":k.default,"formats/underline":V.default,"formats/image":$.default,"formats/video":G.default,"formats/list/item":_.ListItem,"modules/formula":F.default,"modules/syntax":U.default,"modules/toolbar":z.default,"themes/bubble":ee.default,"themes/snow":ce.default,"ui/icons":X.default,"ui/picker":ue.default,"ui/icon-picker":Oe.default,"ui/color-picker":ye.default,"ui/tooltip":He.default},!0),r.default=s.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function g(v,m){for(var b=0;b<m.length;b++){var A=m[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,m,b){return m&&g(v.prototype,m),b&&g(v,b),v}}(),s=function g(v,m,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,m);if(A===void 0){var y=Object.getPrototypeOf(v);return y===null?void 0:g(y,m,b)}else{if("value"in A)return A.value;var C=A.get;return C===void 0?void 0:C.call(b)}},a=i(0),c=p(a);function p(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function u(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var h=function(g){u(v,g);function v(){return d(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"add",value:function(b,A){if(A==="+1"||A==="-1"){var y=this.value(b)||0;A=A==="+1"?y+1:y-1}return A===0?(this.remove(b),!0):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,b,A)}},{key:"canAdd",value:function(b,A){return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,b,A)||s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,b,parseInt(A))}},{key:"value",value:function(b){return parseInt(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,b))||void 0}}]),v}(c.default.Attributor.Class),_=new h("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function c(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function p(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function d(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var f=function(u){d(h,u);function h(){return c(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="blockquote",f.tagName="blockquote",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function h(_,g){for(var v=0;v<g.length;v++){var m=g[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(_,m.key,m)}}return function(_,g,v){return g&&h(_.prototype,g),v&&h(_,v),_}}(),s=i(4),a=c(s);function c(h){return h&&h.__esModule?h:{default:h}}function p(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function d(h,_){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:h}function f(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);h.prototype=Object.create(_&&_.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(h,_):h.__proto__=_)}var u=function(h){f(_,h);function _(){return p(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),_}(a.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],r.default=u},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function y(C,O){for(var x=0;x<O.length;x++){var w=O[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(C,w.key,w)}}return function(C,O,x){return O&&y(C.prototype,O),x&&y(C,x),C}}(),s=function y(C,O,x){C===null&&(C=Function.prototype);var w=Object.getOwnPropertyDescriptor(C,O);if(w===void 0){var R=Object.getPrototypeOf(C);return R===null?void 0:y(R,O,x)}else{if("value"in w)return w.value;var T=w.get;return T===void 0?void 0:T.call(x)}},a=i(0),c=h(a),p=i(4),d=h(p),f=i(25),u=h(f);function h(y){return y&&y.__esModule?y:{default:y}}function _(y,C,O){return C in y?Object.defineProperty(y,C,{value:O,enumerable:!0,configurable:!0,writable:!0}):y[C]=O,y}function g(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}function v(y,C){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:y}function m(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(y,C):y.__proto__=C)}var b=function(y){m(C,y);function C(){return g(this,C),v(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return o(C,[{key:"format",value:function(x,w){x===A.blotName&&!w?this.replaceWith(c.default.create(this.statics.scope)):s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,x,w)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(x,w){return this.parent.isolate(this.offset(this.parent),this.length()),x===this.parent.statics.blotName?(this.parent.replaceWith(x,w),this):(this.parent.unwrap(),s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,x,w))}}],[{key:"formats",value:function(x){return x.tagName===this.tagName?void 0:s(C.__proto__||Object.getPrototypeOf(C),"formats",this).call(this,x)}}]),C}(d.default);b.blotName="list-item",b.tagName="LI";var A=function(y){m(C,y),o(C,null,[{key:"create",value:function(x){var w=x==="ordered"?"OL":"UL",R=s(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,w);return(x==="checked"||x==="unchecked")&&R.setAttribute("data-checked",x==="checked"),R}},{key:"formats",value:function(x){if(x.tagName==="OL")return"ordered";if(x.tagName==="UL")return x.hasAttribute("data-checked")?x.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function C(O){g(this,C);var x=v(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O)),w=function(T){if(T.target.parentNode===O){var E=x.statics.formats(O),N=c.default.find(T.target);E==="checked"?N.format("list","unchecked"):E==="unchecked"&&N.format("list","checked")}};return O.addEventListener("touchstart",w),O.addEventListener("mousedown",w),x}return o(C,[{key:"format",value:function(x,w){this.children.length>0&&this.children.tail.format(x,w)}},{key:"formats",value:function(){return _({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(x,w){if(x instanceof b)s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,x,w);else{var R=w==null?this.length():w.offset(this),T=this.split(R);T.parent.insertBefore(x,T)}}},{key:"optimize",value:function(x){s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,x);var w=this.next;w!=null&&w.prev===this&&w.statics.blotName===this.statics.blotName&&w.domNode.tagName===this.domNode.tagName&&w.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(w.moveChildren(this),w.remove())}},{key:"replace",value:function(x){if(x.statics.blotName!==this.statics.blotName){var w=c.default.create(this.statics.defaultChild);x.moveChildren(w),this.appendChild(w)}s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,x)}}]),C}(u.default);A.blotName="list",A.scope=c.default.Scope.BLOCK_BLOT,A.tagName=["OL","UL"],A.defaultChild="list-item",A.allowedChildren=[b],r.ListItem=b,r.default=A},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function c(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function p(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function d(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var f=function(u){d(h,u);function h(){return c(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="italic",f.tagName=["EM","I"],r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(g,v){for(var m=0;m<v.length;m++){var b=v[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,v,m){return v&&_(g.prototype,v),m&&_(g,m),g}}(),s=function _(g,v,m){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,v);if(b===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:_(A,v,m)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(m)}},a=i(6),c=p(a);function p(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function u(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var h=function(_){u(g,_);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),g}(c.default);h.blotName="script",h.tagName=["SUB","SUP"],r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function c(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function p(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function d(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var f=function(u){d(h,u);function h(){return c(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="strike",f.tagName="S",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}function c(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function p(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:u}function d(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var f=function(u){d(h,u);function h(){return c(this,h),p(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="underline",f.tagName="U",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function v(m,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,b,A){return b&&v(m.prototype,b),A&&v(m,A),m}}(),s=function v(m,b,A){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,b);if(y===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:v(C,b,A)}else{if("value"in y)return y.value;var O=y.get;return O===void 0?void 0:O.call(A)}},a=i(0),c=d(a),p=i(27);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function u(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function h(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var _=["alt","height","width"],g=function(v){h(m,v);function m(){return f(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(A,y){_.indexOf(A)>-1?y?this.domNode.setAttribute(A,y):this.domNode.removeAttribute(A):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,A,y)}}],[{key:"create",value:function(A){var y=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,A);return typeof A=="string"&&y.setAttribute("src",this.sanitize(A)),y}},{key:"formats",value:function(A){return _.reduce(function(y,C){return A.hasAttribute(C)&&(y[C]=A.getAttribute(C)),y},{})}},{key:"match",value:function(A){return/\.(jpe?g|gif|png)$/.test(A)||/^data:image\/.+;base64/.test(A)}},{key:"sanitize",value:function(A){return(0,p.sanitize)(A,["http","https","data"])?A:"//:0"}},{key:"value",value:function(A){return A.getAttribute("src")}}]),m}(c.default.Embed);g.blotName="image",g.tagName="IMG",r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function v(m,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,b,A){return b&&v(m.prototype,b),A&&v(m,A),m}}(),s=function v(m,b,A){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,b);if(y===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:v(C,b,A)}else{if("value"in y)return y.value;var O=y.get;return O===void 0?void 0:O.call(A)}},a=i(4),c=i(27),p=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function u(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function h(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var _=["height","width"],g=function(v){h(m,v);function m(){return f(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(A,y){_.indexOf(A)>-1?y?this.domNode.setAttribute(A,y):this.domNode.removeAttribute(A):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,A,y)}}],[{key:"create",value:function(A){var y=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,A);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(A)),y}},{key:"formats",value:function(A){return _.reduce(function(y,C){return A.hasAttribute(C)&&(y[C]=A.getAttribute(C)),y},{})}},{key:"sanitize",value:function(A){return p.default.sanitize(A)}},{key:"value",value:function(A){return A.getAttribute("src")}}]),m}(a.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function A(y,C){for(var O=0;O<C.length;O++){var x=C[O];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,C,O){return C&&A(y.prototype,C),O&&A(y,O),y}}(),s=function A(y,C,O){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,C);if(x===void 0){var w=Object.getPrototypeOf(y);return w===null?void 0:A(w,C,O)}else{if("value"in x)return x.value;var R=x.get;return R===void 0?void 0:R.call(O)}},a=i(35),c=h(a),p=i(5),d=h(p),f=i(9),u=h(f);function h(A){return A&&A.__esModule?A:{default:A}}function _(A,y){if(!(A instanceof y))throw new TypeError("Cannot call a class as a function")}function g(A,y){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:A}function v(A,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);A.prototype=Object.create(y&&y.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(A,y):A.__proto__=y)}var m=function(A){v(y,A);function y(){return _(this,y),g(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"create",value:function(O){var x=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,O);return typeof O=="string"&&(window.katex.render(O,x,{throwOnError:!1,errorColor:"#f00"}),x.setAttribute("data-value",O)),x}},{key:"value",value:function(O){return O.getAttribute("data-value")}}]),y}(c.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var b=function(A){v(y,A),o(y,null,[{key:"register",value:function(){d.default.register(m,!0)}}]);function y(){_(this,y);var C=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return C}return y}(u.default);r.FormulaBlot=m,r.default=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function O(x,w){for(var R=0;R<w.length;R++){var T=w[R];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}return function(x,w,R){return w&&O(x.prototype,w),R&&O(x,R),x}}(),s=function O(x,w,R){x===null&&(x=Function.prototype);var T=Object.getOwnPropertyDescriptor(x,w);if(T===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:O(E,w,R)}else{if("value"in T)return T.value;var N=T.get;return N===void 0?void 0:N.call(R)}},a=i(0),c=g(a),p=i(5),d=g(p),f=i(9),u=g(f),h=i(13),_=g(h);function g(O){return O&&O.__esModule?O:{default:O}}function v(O,x){if(!(O instanceof x))throw new TypeError("Cannot call a class as a function")}function m(O,x){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:O}function b(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);O.prototype=Object.create(x&&x.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(O,x):O.__proto__=x)}var A=function(O){b(x,O);function x(){return v(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"replaceWith",value:function(R){this.domNode.textContent=this.domNode.textContent,this.attach(),s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replaceWith",this).call(this,R)}},{key:"highlight",value:function(R){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=R(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),x}(_.default);A.className="ql-syntax";var y=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),C=function(O){b(x,O),o(x,null,[{key:"register",value:function(){d.default.register(y,!0),d.default.register(A,!0)}}]);function x(w,R){v(this,x);var T=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w,R));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return T.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){T.highlight(),E=null},T.options.interval)}),T.highlight(),T}return o(x,[{key:"highlight",value:function(){var R=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(A).forEach(function(E){E.highlight(R.options.highlight)}),this.quill.update(d.default.sources.SILENT),T!=null&&this.quill.setSelection(T,d.default.sources.SILENT)}}}]),x}(u.default);C.DEFAULTS={highlight:function(){return window.hljs==null?null:function(O){var x=window.hljs.highlightAuto(O);return x.value}}(),interval:1e3},r.CodeBlock=A,r.CodeToken=y,r.default=C},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function x(w,R,T){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,R);if(E===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:x(N,R,T)}else{if("value"in E)return E.value;var k=E.get;return k===void 0?void 0:k.call(T)}},s=function(){function x(w,R){for(var T=0;T<R.length;T++){var E=R[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,R,T){return R&&x(w.prototype,R),T&&x(w,T),w}}(),a=i(3),c=v(a),p=i(8),d=v(p),f=i(43),u=v(f),h=i(15),_=i(41),g=v(_);function v(x){return x&&x.__esModule?x:{default:x}}function m(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function b(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function A(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],C=function(x){A(w,x);function w(R,T){m(this,w),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=y);var E=b(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,R,T));return E.quill.container.classList.add("ql-bubble"),E}return s(w,[{key:"extendToolbar",value:function(T){this.tooltip=new O(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),g.default)}}]),w}(u.default);C.DEFAULTS=(0,c.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(w){w?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var O=function(x){A(w,x);function w(R,T){m(this,w);var E=b(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,R,T));return E.quill.on(d.default.events.EDITOR_CHANGE,function(N,k,j,V){if(N===d.default.events.SELECTION_CHANGE)if(k!=null&&k.length>0&&V===d.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var H=E.quill.getLines(k.index,k.length);if(H.length===1)E.position(E.quill.getBounds(k));else{var $=H[H.length-1],ie=E.quill.getIndex($),G=Math.min($.length()-1,k.index+k.length-ie),B=E.quill.getBounds(new h.Range(ie,G));E.position(B)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return s(w,[{key:"listen",value:function(){var T=this;o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var E=T.quill.getSelection();E!=null&&T.position(T.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var E=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"position",this).call(this,T),N=this.root.querySelector(".ql-tooltip-arrow");if(N.style.marginLeft="",E===0)return E;N.style.marginLeft=-1*E-N.offsetWidth/2+"px"}}]),w}(f.BaseTooltip);O.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=O,r.default=C},function(t,r,i){t.exports=i(63)}]).default})}(Pi)),Pi.exports}var kt,dd;function rw(){if(dd)return kt;dd=1;var n=kt&&kt.__extends||function(){var d=function(f,u){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var g in _)_.hasOwnProperty(g)&&(h[g]=_[g])},d(f,u)};return function(f,u){d(f,u);function h(){this.constructor=f}f.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),e=kt&&kt.__assign||function(){return e=Object.assign||function(d){for(var f,u=1,h=arguments.length;u<h;u++){f=arguments[u];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},e.apply(this,arguments)},t=kt&&kt.__spreadArrays||function(){for(var d=0,f=0,u=arguments.length;f<u;f++)d+=arguments[f].length;for(var h=Array(d),_=0,f=0;f<u;f++)for(var g=arguments[f],v=0,m=g.length;v<m;v++,_++)h[_]=g[v];return h},r=kt&&kt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},i=r(yd()),o=r(vd()),s=r(ew()),a=r(nw()),c=function(d){n(f,d);function f(u){var h=d.call(this,u)||this;h.dirtyProps=["modules","formats","bounds","theme","children"],h.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],h.state={generation:0},h.selection=null,h.onEditorChange=function(g,v,m,b){var A,y,C,O;g==="text-change"?(y=(A=h).onEditorChangeText)===null||y===void 0||y.call(A,h.editor.root.innerHTML,v,b,h.unprivilegedEditor):g==="selection-change"&&((O=(C=h).onEditorChangeSelection)===null||O===void 0||O.call(C,v,b,h.unprivilegedEditor))};var _=h.isControlled()?u.value:u.defaultValue;return h.value=_??"",h}return f.prototype.validateProps=function(u){var h;if(i.default.Children.count(u.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(u.children)){var _=i.default.Children.only(u.children);if(((h=_)===null||h===void 0?void 0:h.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&u.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(u,h){var _=this,g;if(this.validateProps(u),!this.editor||this.state.generation!==h.generation)return!0;if("value"in u){var v=this.getEditorContents(),m=(g=u.value,g??"");this.isEqualValue(m,v)||this.setEditorContents(this.editor,m)}return u.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,u.readOnly),t(this.cleanProps,this.dirtyProps).some(function(b){return!s.default(u[b],_.props[b])})},f.prototype.shouldComponentRegenerate=function(u){var h=this;return this.dirtyProps.some(function(_){return!s.default(u[_],h.props[_])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(u,h){var _=this;if(this.editor&&this.shouldComponentRegenerate(u)){var g=this.editor.getContents(),v=this.editor.getSelection();this.regenerationSnapshot={delta:g,selection:v},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==h.generation){var m=this.regenerationSnapshot,g=m.delta,b=m.selection;delete this.regenerationSnapshot,this.instantiateEditor();var A=this.editor;A.setContents(g),p(function(){return _.setEditorSelection(A,b)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(u,h){var _=new a.default(u,h);return h.tabIndex!=null&&this.setEditorTabIndex(_,h.tabIndex),this.hookEditor(_),_},f.prototype.hookEditor=function(u){this.unprivilegedEditor=this.makeUnprivilegedEditor(u),u.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(u){u.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(u){return u&&u.ops},f.prototype.isEqualValue=function(u,h){return this.isDelta(u)&&this.isDelta(h)?s.default(u.ops,h.ops):s.default(u,h)},f.prototype.setEditorContents=function(u,h){var _=this;this.value=h;var g=this.getEditorSelection();typeof h=="string"?u.setContents(u.clipboard.convert(h)):u.setContents(h),p(function(){return _.setEditorSelection(u,g)})},f.prototype.setEditorSelection=function(u,h){if(this.selection=h,h){var _=u.getLength();h.index=Math.max(0,Math.min(h.index,_-1)),h.length=Math.max(0,Math.min(h.length,_-1-h.index)),u.setSelection(h)}},f.prototype.setEditorTabIndex=function(u,h){var _,g;!((g=(_=u)===null||_===void 0?void 0:_.scroll)===null||g===void 0)&&g.domNode&&(u.scroll.domNode.tabIndex=h)},f.prototype.setEditorReadOnly=function(u,h){h?u.disable():u.enable()},f.prototype.makeUnprivilegedEditor=function(u){var h=u;return{getHTML:function(){return h.root.innerHTML},getLength:h.getLength.bind(h),getText:h.getText.bind(h),getContents:h.getContents.bind(h),getSelection:h.getSelection.bind(h),getBounds:h.getBounds.bind(h)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var u=o.default.findDOMNode(this.editingArea);if(!u)throw new Error("Cannot find element for editing area");if(u.nodeType===3)throw new Error("Editing area cannot be a text node");return u},f.prototype.renderEditingArea=function(){var u=this,h=this.props,_=h.children,g=h.preserveWhitespace,v=this.state.generation,m={key:v,ref:function(b){u.editingArea=b}};return i.default.Children.count(_)?i.default.cloneElement(i.default.Children.only(_),m):g?i.default.createElement("pre",e({},m)):i.default.createElement("div",e({},m))},f.prototype.render=function(){var u;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(u=this.props.className,u??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(u,h,_,g){var v,m;if(this.editor){var b=this.isDelta(this.value)?g.getContents():g.getHTML();b!==this.getEditorContents()&&(this.lastDeltaChangeSet=h,this.value=b,(m=(v=this.props).onChange)===null||m===void 0||m.call(v,u,h,_,g))}},f.prototype.onEditorChangeSelection=function(u,h,_){var g,v,m,b,A,y;if(this.editor){var C=this.getEditorSelection(),O=!C&&u,x=C&&!u;s.default(u,C)||(this.selection=u,(v=(g=this.props).onChangeSelection)===null||v===void 0||v.call(g,u,h,_),O?(b=(m=this.props).onFocus)===null||b===void 0||b.call(m,u,h,_):x&&((y=(A=this.props).onBlur)===null||y===void 0||y.call(A,C,h,_)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=a.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f}(i.default.Component);function p(d){Promise.resolve().then(d)}return kt=c,kt}var iw=rw();const ow=Ig(iw),sw=100,aw=800,lw=200,uw=({value:n,onChange:e,placeholder:t="Enter content here...",style:r={},className:i="mt-1"})=>{const o=Y.useRef(null),[s,a]=Y.useState(lw);Y.useEffect(()=>{var g,v;const d=(g=o.current)==null?void 0:g.getEditor(),f=(v=d==null?void 0:d.getModule("toolbar"))==null?void 0:v.container;if(!f)return;let u=0;const h=m=>{m.target.closest(".ql-picker")&&(u=window.scrollY)},_=m=>{m.target.closest(".ql-picker")&&setTimeout(()=>{window.scrollY!==u&&window.scrollTo(window.scrollX,u)},0)};return f.addEventListener("mousedown",h),f.addEventListener("mouseup",_),()=>{f.removeEventListener("mousedown",h),f.removeEventListener("mouseup",_)}},[]);const c=Y.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{align:[]}],[{color:[]},{background:[]}],["link","image","video"],["clean"]],handlers:{image:function(){var A;const d=(A=o.current)==null?void 0:A.getEditor();if(!d){console.error("Quill editor instance not found.");return}const f=d.getSelection(!0);if(!f)return;const u=d.theme.tooltip,h=u.save,_=u.action;u.edit();const g=u.textbox;if(!g){console.error("Tooltip input element not found."),u.hide();return}g.value="",g.setAttribute("placeholder","Enter image URL"),g.setAttribute("data-mode","image");const v=()=>{var C;const y=g.value;y&&d.insertEmbed(f.index,"image",y,"user"),u.hide(),u.save=h,u.action=_,g.removeEventListener("keydown",m),(C=u.root.querySelector("a.ql-action"))==null||C.removeEventListener("click",v)},m=y=>{var C;y.key==="Enter"?(y.preventDefault(),v()):y.key==="Escape"&&(y.preventDefault(),u.hide(),u.save=h,u.action=_,g.removeEventListener("keydown",m),(C=u.root.querySelector("a.ql-action"))==null||C.removeEventListener("click",v))};u.save=v,g.removeEventListener("keydown",m),g.addEventListener("keydown",m);const b=u.root.querySelector("a.ql-action");b?(b.removeEventListener("click",v),b.addEventListener("click",v)):console.warn("Tooltip save button (a.ql-action) not found."),g.focus()}}}}),[]),p=Y.useMemo(()=>["header","font","size","bold","italic","underline","strike","blockquote","code-block","list","bullet","script","indent","direction","align","color","background","link","image","video"],[]);return I.jsxs("div",{className:`quill-editor-container ${i}`,children:[I.jsx("div",{className:"quill-editor-wrapper border border-gray-300 rounded-md overflow-hidden",style:{...r,height:`${s}px`,display:"flex",flexDirection:"column"},children:I.jsx(ow,{theme:"snow",value:n,onChange:e,ref:o,modules:c,formats:p,className:"bg-white flex-grow",placeholder:t,style:{height:"calc(100% - 42px)"}})}),I.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-gray-600",children:[I.jsx(rb,{size:16}),I.jsx("input",{type:"range",min:sw,max:aw,value:s,onChange:d=>a(Number(d.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700","aria-label":"Adjust editor height"}),I.jsx(Z1,{size:16}),I.jsxs("span",{className:"text-xs w-12 text-right",children:[s,"px"]})]})]})},cw=({initialData:n,onSubmit:e,onCancel:t,isLoading:r})=>{const[i,o]=Y.useState((n==null?void 0:n.title)||""),[s,a]=Y.useState((n==null?void 0:n.slug)||""),[c,p]=Y.useState((n==null?void 0:n.content)||""),{showToast:d}=Vt();Y.useEffect(()=>{o((n==null?void 0:n.title)||""),a((n==null?void 0:n.slug)||""),p((n==null?void 0:n.content)||"")},[n]);const f=h=>{a(h.target.value.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""))},u=h=>{if(h.preventDefault(),!i||!s||!c){d("Title, Slug, and Content are required.","error");return}e({title:i,slug:s,content:c})};return I.jsxs("form",{onSubmit:u,className:"p-4 border rounded shadow-sm bg-white space-y-4",children:[I.jsx("h3",{className:"text-lg font-medium",children:n!=null&&n.id?"Edit Page":"Add New Page"}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"pageTitle",className:"block text-sm font-medium text-gray-700",children:"Title"}),I.jsx("input",{type:"text",id:"pageTitle",value:i,onChange:h=>o(h.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"pageSlug",className:"block text-sm font-medium text-gray-700",children:"Slug (URL Path, e.g., 'about-us')"}),I.jsx("input",{type:"text",id:"pageSlug",value:s,onChange:f,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",pattern:"^[a-z0-9-]+$",title:"Slug can only contain lowercase letters, numbers, and hyphens."})]}),I.jsxs("div",{className:"relative quill-editor-wrapper",children:[I.jsx("label",{htmlFor:"pageContent",className:"block text-sm font-medium text-gray-700",children:"Content"}),I.jsx(uw,{value:c,onChange:p,placeholder:"Enter page content here..."})]}),I.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[(n==null?void 0:n.id)&&t&&I.jsx("button",{type:"button",onClick:t,disabled:r,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Cancel Edit"}),I.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:r?"Saving...":n!=null&&n.id?"Update Page":"Add Page"})]})]})},fw=({page:n,index:e,pageCount:t,isLoading:r,onEdit:i,onDelete:o,onMoveUp:s,onMoveDown:a})=>I.jsxs("li",{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("span",{className:"text-xs font-mono text-gray-400 w-6 text-right",children:n.order}),I.jsxs("div",{children:[I.jsx("p",{className:"font-medium text-gray-900",children:n.title}),I.jsxs("p",{className:"text-sm text-gray-500",children:["/",n.slug]})]})]}),I.jsxs("div",{className:"flex items-center space-x-1",children:[I.jsx("button",{onClick:()=>s(e),disabled:r||e===0,className:`p-1 rounded ${r||e===0?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Up",children:I.jsx(sl,{size:18})}),I.jsx("button",{onClick:()=>a(e),disabled:r||e===t-1,className:`p-1 rounded ${r||e===t-1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Down",children:I.jsx(ol,{size:18})}),I.jsx("button",{onClick:()=>i(n),disabled:r,className:"p-1 rounded text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 disabled:opacity-50",title:"Edit",children:I.jsx(Fr,{size:18})}),n.id&&I.jsx("button",{onClick:()=>o(n.id),disabled:r,className:"p-1 rounded text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50",title:"Delete",children:I.jsx(Kn,{size:18})})]})]},n.id),hw=()=>{const{pages:n,isLoading:e,isEditing:t,handleFormSubmit:r,handleDelete:i,startEditing:o,resetForm:s,handleMoveUp:a,handleMoveDown:c}=F2();return I.jsxs("div",{className:"space-y-6",children:[I.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manage Pages"}),I.jsx(cw,{initialData:t?n.find(p=>p.id===t):void 0,onSubmit:r,onCancel:s,isLoading:e},t||"add"),I.jsxs("div",{className:"mt-6 border rounded shadow-sm bg-white",children:[I.jsx("h3",{className:"text-lg font-medium p-4 border-b",children:"Existing Pages"}),e&&!n.length?I.jsx("p",{className:"p-4 text-gray-500",children:"Loading pages..."}):n.length===0?I.jsx("p",{className:"p-4 text-gray-500",children:"No pages found."}):I.jsx("ul",{className:"divide-y divide-gray-200",children:n.map((p,d)=>I.jsx(fw,{page:p,index:d,pageCount:n.length,isLoading:e,onEdit:o,onDelete:i,onMoveUp:a,onMoveDown:c},p.id))})]})]})},dw="modulepreload",pw=function(n){return"/"+n},pd={},mu=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=pw(c),c in pd)return;pd[c]=!0;const p=c.endsWith(".css"),d=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":dw,p||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),p)return new Promise((u,h)=>{f.addEventListener("load",u),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};let qa=null;console.error("Supabase URL or Anon Key is missing. Cannot initialize client.");const mw=({onUploadSuccess:n,onUploadComplete:e})=>{const[t,r]=Y.useState("idle"),[i,o]=Y.useState(null),[s,a]=Y.useState(null),[c,p]=Y.useState(null),[d,f]=Y.useState(null),[u,h]=Y.useState(!1),[_,g]=Y.useState("Copy Link"),v=Y.useRef(null),{showToast:m}=Vt(),b=()=>{r("idle"),o(null),a(null),p(null),f(null),h(!1),g("Copy Link"),v.current&&(v.current.value="")},A=N=>{if(N&&N.type.startsWith("image/")){o(N),f(null),r("idle"),p(null);const k=URL.createObjectURL(N);a(k),R()}else o(null),a(null),N&&(f("Please select an image file."),m("Please select an image file.","error"))},y=N=>{var k;A(((k=N.target.files)==null?void 0:k[0])??null),N.target&&(N.target.value="")},C=N=>{var k;N.preventDefault(),N.stopPropagation(),h(!1),A(((k=N.dataTransfer.files)==null?void 0:k[0])??null)},O=N=>{N.preventDefault(),N.stopPropagation(),h(!0)},x=N=>{N.preventDefault(),N.stopPropagation(),N.currentTarget.contains(N.relatedTarget)||h(!1)},w=()=>{var N;(N=v.current)==null||N.click()},R=async N=>{{f("Supabase client is not initialized."),r("error"),m("Supabase client not initialized.","error"),e==null||e();return}};return{status:t,selectedFile:i,previewUrl:s,uploadedUrl:c,error:d,isDragging:u,copyButtonText:_,fileInputRef:v,handleInputChange:y,handleDrop:C,handleDragOver:O,handleDragLeave:x,triggerFileInput:w,handleCopyLink:async()=>{if(c)try{await navigator.clipboard.writeText(c),g("Copied!"),setTimeout(()=>g("Copy Link"),2e3)}catch(N){console.error("Failed to copy:",N);const k="Failed to copy link to clipboard.";f(k),m(k,"error")}},resetState:b,handleUrlUpload:async N=>{{f("Supabase client is not initialized."),r("error"),m("Supabase client not initialized.","error"),e==null||e();return}}}},gw=({onFileSelect:n})=>{const[e,t]=Y.useState([]),[r,i]=Y.useState(!0),[o,s]=Y.useState(null),[a,c]=Y.useState(null),[p,d]=Y.useState(null),[f,u]=Y.useState(""),[h,_]=Y.useState(null),[g,v]=Y.useState([]),{showToast:m,requestConfirmation:b}=Vt(),A=Y.useCallback(k=>null,[]),y=Y.useCallback(async()=>{i(!0),s(null);{s("Supabase client not initialized."),i(!1);return}},[m]);Y.useEffect(()=>{y()},[y]);const C=(k,j)=>{v(V=>j?V.includes(k)?V:[...V,k]:V.filter(H=>H!==k))},O=()=>{if(!n||g.length===0)return;let k=[],j=[];g.forEach(V=>{const H=A(V);H?(n(H),k.push(H)):(j.push(V),console.error("Could not get public URL for selected file:",V))}),j.length>0&&m(`Failed to get URLs for: ${j.map(V=>V.split("/").pop()).join(", ")}`,"error"),k.length>0&&(m(`${k.length} URL(s) selected successfully.`,"success"),v([]))},x=Y.useCallback(async k=>{{m("Supabase client not initialized.","error");return}},[qa,m,b,y]),w=Y.useCallback(async()=>{},[qa,g,m,b,y]),R=Y.useCallback(async k=>{const j=A(k),V=k;if(!j){c({fileId:V,message:"Error!"}),setTimeout(()=>c(null),2e3),m("Could not get public URL.","error");return}try{await navigator.clipboard.writeText(j),c({fileId:V,message:"Copied!"}),setTimeout(()=>c(null),2e3)}catch(H){console.error("Failed to copy history link:",H),c({fileId:V,message:"Failed!"}),setTimeout(()=>c(null),2e3),m("Failed to copy link.","error")}},[A,m]),T=(k,j)=>{d(k);const V=j.substring(0,j.lastIndexOf("."));u(V),_(null)},E=()=>{d(null),u(""),_(null)},N=Y.useCallback(async k=>{{_("Supabase client not initialized."),m("Supabase client not initialized.","error");return}},[qa,f,y,m]);return{fileHistory:e,historyLoading:r,historyError:o,historyCopyStatus:a,editingFileId:p,newName:f,renameError:h,selectedHistoryFiles:g,fetchHistory:y,handleHistorySelectionChange:C,handleUseSelected:O,handleDeleteFile:x,handleDeleteSelected:w,handleCopyHistoryLink:R,handleEditClick:T,handleCancelEdit:E,handleSaveRename:N,setNewName:u,getPublicUrl:A}},yw=({isDragging:n,error:e,previewUrl:t,fileInputRef:r,handleDrop:i,handleDragOver:o,handleDragLeave:s,triggerFileInput:a,handleInputChange:c,handleUrlUpload:p})=>{const[d,f]=Y.useState(""),u=()=>{d.trim()&&(p(d.trim()),f(""))};return I.jsxs("div",{className:`w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center transition-all duration-300 ${n?"border-blue-500 border-2":"border-gray-200 border"}`,onDrop:i,onDragOver:o,onDragLeave:s,children:[I.jsx("h2",{className:"text-lg font-medium text-gray-700 mb-2",children:"Upload your image"}),I.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"File should be Jpeg, Png,..."}),I.jsx("div",{className:`relative bg-gray-50 border-2 border-dashed rounded-xl p-4 mb-6 transition-colors duration-300 min-h-[150px] flex flex-col items-center justify-center ${e?"border-red-500":n?"border-blue-400":"border-gray-300"} ${n?"bg-blue-50":""}`,children:t?I.jsx("img",{src:t,alt:"Image preview",className:"max-h-36 max-w-full object-contain rounded"}):I.jsxs(I.Fragment,{children:[I.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:I.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),I.jsx("p",{className:"text-sm text-gray-500",children:"Drag & Drop your image here"})]})}),I.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Or"}),I.jsx("button",{onClick:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300",children:"Choose a file"}),I.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:c,className:"hidden","aria-label":"File input"}),e&&I.jsx("p",{className:"text-red-500 text-sm mt-4",children:e}),I.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[I.jsx("p",{className:"text-sm text-gray-500 mb-3 text-center",children:"Or paste image URL"}),I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsx("input",{type:"text",value:d,onChange:h=>f(h.target.value),placeholder:"https://example.com/image.png",className:`flex-grow px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent text-sm ${e?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,"aria-label":"Image URL input"}),I.jsx("button",{onClick:u,disabled:!d.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Upload URL"})]})]})]})},vw=({status:n,previewUrl:e,uploadedUrl:t,error:r,copyButtonText:i,handleCopyLink:o,resetState:s})=>{const a=d=>I.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center relative",children:[e&&I.jsx("div",{className:"mb-4 rounded-xl overflow-hidden border border-gray-200 opacity-50",children:I.jsx("img",{src:e,alt:"Processing preview",className:"max-w-full max-h-48 object-contain mx-auto"})}),I.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center bg-white bg-opacity-75 rounded-xl ${e?"":"relative"}`,children:[I.jsxs("svg",{className:"animate-spin mx-auto h-10 w-10 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I.jsx("h2",{className:"text-lg font-medium text-gray-700",children:d})]})]}),c=()=>I.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center",children:[I.jsx("svg",{className:"mx-auto h-10 w-10 text-green-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),I.jsx("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Uploaded Successfully!"}),e&&I.jsx("div",{className:"mb-6 rounded-xl overflow-hidden border border-gray-200",children:I.jsx("img",{src:e,alt:"Uploaded preview",className:"max-w-full max-h-64 object-contain mx-auto"})}),I.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg p-2 bg-gray-50 mb-4",children:[I.jsx("input",{type:"text",value:t??"",readOnly:!0,className:"flex-grow text-xs text-gray-700 bg-transparent border-none focus:ring-0 p-1 truncate","aria-label":"Uploaded image link"}),I.jsx("button",{onClick:o,className:"ml-2 px-4 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors duration-300 flex-shrink-0",children:i})]}),I.jsx("button",{onClick:s,className:"text-sm text-blue-600 hover:underline",children:"Upload another image"})]}),p=()=>I.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center",children:[I.jsx("svg",{className:"mx-auto h-10 w-10 text-red-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),I.jsx("h2",{className:"text-lg font-medium text-gray-700 mb-2",children:"Upload Failed"}),I.jsx("p",{className:"text-red-500 text-sm mb-6",children:r||"An unknown error occurred."}),e&&I.jsx("div",{className:"mb-4 rounded-xl overflow-hidden border border-gray-200 opacity-70",children:I.jsx("img",{src:e,alt:"Upload failed preview",className:"max-w-full max-h-48 object-contain mx-auto"})}),I.jsx("button",{onClick:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300",children:"Try Again"})]});switch(n){case"fetching_url":return a("Fetching image from URL...");case"uploading":return a("Uploading...");case"success":return c();case"error":return p();default:return null}},bw=(n,e=2)=>{if(n===0)return"0 Bytes";const t=1024,r=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,o)).toFixed(r))+" "+i[o]},_w=({fileHistory:n,historyLoading:e,historyError:t,selectedHistoryFiles:r,editingFileId:i,newName:o,renameError:s,historyCopyStatus:a,getPublicUrl:c,handleHistorySelectionChange:p,handleUseSelected:d,handleDeleteSelected:f,handleCopyHistoryLink:u,handleEditClick:h,handleCancelEdit:_,handleSaveRename:g,handleDeleteFile:v,setNewName:m})=>{if(e)return I.jsx("div",{className:"text-center p-4",children:"Loading history..."});if(t)return I.jsxs("div",{className:"text-center p-4 text-red-600",children:["Error loading history: ",t]});const b=A=>`public/${A.name}`;return I.jsxs("div",{className:"mt-8 border-t pt-6",children:[I.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Image History"}),r.length>0&&I.jsxs("div",{className:"mb-4 p-3 bg-gray-100 rounded-md flex items-center justify-between",children:[I.jsxs("span",{className:"text-sm text-gray-700",children:[r.length," file(s) selected"]}),I.jsxs("div",{children:[I.jsx("button",{onClick:d,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors mr-2",title:"Use selected image URL(s)",children:"Use Selected"}),I.jsx("button",{onClick:f,className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",title:"Delete selected files",children:"Delete Selected"})]})]}),n.length===0?I.jsx("p",{className:"text-gray-500 text-sm text-center",children:"No images uploaded yet."}):I.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 max-h-[500px] overflow-y-auto p-1",children:[n.map(A=>{var R;const y=b(A),C=c(y),O=r.includes(y),x=i===y,w=(a==null?void 0:a.fileId)===y?a.message:"Copy Link";return I.jsxs("div",{className:`relative group bg-white rounded-lg shadow-sm border transition-colors flex flex-col overflow-hidden ${O?"border-blue-500 ring-2 ring-blue-300":"border-gray-200 hover:border-gray-300"}`,children:[I.jsx("input",{type:"checkbox",checked:O,onChange:T=>p(y,T.target.checked),className:"absolute top-2 left-2 z-10 form-checkbox h-4 w-4 text-blue-600 bg-white border-gray-400 rounded focus:ring-blue-500 focus:ring-offset-0 checked:border-transparent","aria-label":`Select ${A.name}`,onClick:T=>T.stopPropagation()}),I.jsx("div",{className:"relative w-full aspect-square bg-gray-100 flex items-center justify-center overflow-hidden",children:C?I.jsx("img",{src:C,alt:A.name,className:"absolute inset-0 h-full w-full object-cover transition-transform group-hover:scale-105"}):I.jsx("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center text-gray-400",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),I.jsx("div",{className:"p-2 flex flex-col flex-grow",children:x?I.jsxs("div",{className:"flex flex-col space-y-1 flex-grow",children:[I.jsx("input",{type:"text",value:o,onChange:T=>m(T.target.value),className:"text-xs p-1 border border-gray-300 rounded w-full focus:ring-1 focus:ring-blue-500 focus:border-blue-500","aria-label":"New file name",onClick:T=>T.stopPropagation()}),s&&I.jsx("p",{className:"text-red-500 text-xs mt-1",children:s}),I.jsxs("div",{className:"flex justify-end space-x-1 mt-auto pt-1",children:[I.jsx("button",{onClick:T=>{T.stopPropagation(),g(y)},className:"text-xs text-green-600 hover:text-green-800 p-0.5",title:"Save",children:""}),I.jsx("button",{onClick:T=>{T.stopPropagation(),_()},className:"text-xs text-red-600 hover:text-red-800 p-0.5",title:"Cancel",children:""})]})]}):I.jsxs(I.Fragment,{children:[I.jsx("p",{className:"text-xs font-medium text-gray-700 truncate mb-0.5",title:A.name,children:A.name}),I.jsxs("p",{className:"text-xxs text-gray-500 mb-1",children:[" ",bw(((R=A.metadata)==null?void 0:R.size)??0)," - ",A.created_at?new Date(A.created_at).toLocaleDateString():"Invalid Date"]}),I.jsxs("div",{className:"mt-auto pt-1 flex items-center justify-between space-x-1",children:[I.jsxs("button",{onClick:T=>{T.stopPropagation(),u(y)},className:`text-xxs px-1.5 py-0.5 rounded transition-colors flex-grow text-center ${w==="Copied!"?"bg-green-100 text-green-700":w==="Failed!"||w==="Error!"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:w!=="Copy Link",title:"Copy image URL",children:[w==="Copy Link"?"Copy":w," "]}),I.jsx("button",{onClick:T=>{T.stopPropagation(),h(y,A.name)},className:"text-gray-500 hover:text-gray-700 p-0.5",title:"Rename file",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),I.jsx("button",{onClick:T=>{T.stopPropagation(),v(y)},className:"text-red-500 hover:text-red-700 p-0.5",title:"Delete file",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})]},y)})," "]})]})},xw=({onUploadSuccess:n})=>{const e=gw({onFileSelect:n}),t=mw({onUploadSuccess:r=>{n==null||n(r),e.fetchHistory()}});return I.jsxs("div",{className:"space-y-6",children:[t.status==="idle"?I.jsx(yw,{isDragging:t.isDragging,error:t.error,previewUrl:t.previewUrl,fileInputRef:t.fileInputRef,handleDrop:t.handleDrop,handleDragOver:t.handleDragOver,handleDragLeave:t.handleDragLeave,triggerFileInput:t.triggerFileInput,handleInputChange:t.handleInputChange,handleUrlUpload:t.handleUrlUpload}):I.jsx(vw,{status:t.status,previewUrl:t.previewUrl,uploadedUrl:t.uploadedUrl,error:t.error,copyButtonText:t.copyButtonText,handleCopyLink:t.handleCopyLink,resetState:t.resetState}),I.jsx(_w,{fileHistory:e.fileHistory,historyLoading:e.historyLoading,historyError:e.historyError,selectedHistoryFiles:e.selectedHistoryFiles,editingFileId:e.editingFileId,newName:e.newName,renameError:e.renameError,historyCopyStatus:e.historyCopyStatus,getPublicUrl:e.getPublicUrl,handleHistorySelectionChange:e.handleHistorySelectionChange,handleUseSelected:e.handleUseSelected,handleDeleteSelected:e.handleDeleteSelected,handleCopyHistoryLink:e.handleCopyHistoryLink,handleEditClick:e.handleEditClick,handleCancelEdit:e.handleCancelEdit,handleSaveRename:e.handleSaveRename,handleDeleteFile:e.handleDeleteFile,setNewName:e.setNewName})]})},Oi=(n,e,t,r,i,o,s)=>e.length===1&&e[0]==="projects"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?I.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[I.jsxs("div",{className:"flex justify-between items-center mb-3",children:[I.jsx("h4",{className:"text-lg font-semibold capitalize",children:String(e[0]).replace(/([A-Z])/g," $1")}),o]}),Object.entries(n).map(([a,c])=>{if(a!=="title"&&typeof c=="object"&&c!==null&&!Array.isArray(c)){const p=[...e,a];return I.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm relative",children:[I.jsxs("div",{className:"flex justify-between items-start mb-3",children:[" ",I.jsxs("h5",{className:"text-lg font-semibold text-gray-700 mr-4",children:["Project: ",I.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:a})]}),s&&I.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete project "${a}"?`)&&s(p)},className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete project ${a}`,children:"Delete Project"})]}),I.jsxs("div",{className:"space-y-4",children:[" ",Oi(c,p,t,r,i,void 0,s)]})]},p.join("."))}else if(a==="title"&&typeof c=="string"){const p=[...e,a],d=p.join("."),f=r===d;return I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:a.replace(/([A-Z])/g," $1")}),f?I.jsx("input",{type:"text",id:d,name:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2",value:c,onChange:u=>t(p,u.target.value),onBlur:()=>i(null),autoFocus:!0}):I.jsx("div",{className:"mt-1 block w-full rounded-md border border-transparent p-2 cursor-pointer hover:bg-gray-100 min-h-[38px]",onClick:()=>i(d),children:c||I.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},d)}return null})]},e.join(".")):Object.entries(n).map(([a,c])=>{const p=[...e,a],d=p.map(String).join("."),f=r===d;return typeof c=="string"?I.jsxs("div",{className:"mb-4 px-1 sm:px-0",children:[I.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:a.replace(/([A-Z])/g," $1")}),f?I.jsx("textarea",{id:d,name:d,rows:c.length>100?4:2,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:c,onChange:u=>t(p,u.target.value),onBlur:()=>i(null),autoFocus:!0}):I.jsx("div",{className:"block w-full flex-1 rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[50px] whitespace-pre-wrap text-gray-800",onClick:()=>i(d),children:c||I.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},d):typeof c=="object"&&c!==null&&!Array.isArray(c)?I.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[I.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize",children:String(a).replace(/([A-Z])/g," $1")}),Oi(c,p,t,r,i,void 0,s)]},d):Array.isArray(c)?I.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-sm",children:[I.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize text-gray-700",children:String(a).replace(/([A-Z])/g," $1")}),I.jsxs("div",{className:"space-y-3",children:[" ",c.map((u,h)=>{const _=[...p,h],g=_.map(String).join("."),v=r===g;return typeof u=="string"?I.jsxs("div",{className:"flex items-center space-x-2",children:[v?I.jsx("input",{type:"text",id:g,name:g,className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:u,onChange:m=>t(_,m.target.value),onBlur:()=>i(null),autoFocus:!0}):I.jsx("div",{className:"flex-grow rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[38px] text-gray-800",onClick:()=>i(g),children:u||I.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})}),s&&I.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this item?")&&s(_)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete item ${h+1}`,children:"Delete"})]},g):typeof u=="object"&&u!==null?I.jsxs("div",{className:"mb-4 p-3 border border-gray-100 rounded relative",children:[" ",I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[" ",I.jsxs("h5",{className:"text-md font-medium",children:["Item ",h+1]}),s&&I.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete Item ${h+1}?`)&&s(_)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-0.5 px-1.5 rounded focus:outline-none focus:shadow-outline","aria-label":`Delete item ${h+1}`,children:"Delete"})]}),Oi(u,_,t,r,i,void 0,s)]},g):null})]})," "]},d):null}),ww=n=>n===null?!1:n in xt.en,Ai={pageViews:"1,234",totalPages:"12",comments:"45",averageRating:"4.8"},Ew=()=>I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h3",{className:"text-gray-700 font-semibold",children:"Page Views"}),I.jsx(j1,{className:"text-blue-500",size:20})]}),I.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ai.pageViews}),I.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Last 30 days"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h3",{className:"text-gray-700 font-semibold",children:"Total Pages"}),I.jsx(sm,{className:"text-green-500",size:20})]}),I.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ai.totalPages}),I.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Published content"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h3",{className:"text-gray-700 font-semibold",children:"Comments"}),I.jsx(tb,{className:"text-purple-500",size:20})]}),I.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ai.comments}),I.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Awaiting response"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h3",{className:"text-gray-700 font-semibold",children:"Average Rating"}),I.jsx(hb,{className:"text-yellow-500",size:20})]}),I.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ai.averageRating}),I.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Based on feedback"})]})]}),Tw=({activeTab:n,isLoading:e,translations:t,editingPath:r,setEditingPath:i,handleInputChange:o,handleAddNewProject:s,handleAddNewService:a,handleDeleteItem:c})=>{if(e)return I.jsx("div",{className:"flex items-center justify-center py-10",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(!n||n==="dashboard")return Ew();if(n==="styleEditor")return I.jsx(L2,{});if(n==="socialLinks")return I.jsx(V2,{});if(n==="pages")return I.jsx(hw,{});if(n==="media")return I.jsx(xw,{});if(ww(n)){const p=Ki(n);return I.jsxs(I.Fragment,{children:[I.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700 capitalize",children:p}),n==="projects"?I.jsx(Nb,{data:t.en.projects,path:n?[n]:[],handleChange:o,handleAddProject:s,handleDelete:c}):n==="services"?I.jsx(Ib,{data:t.en.services,path:n?[n]:[],handleChange:o,handleAddService:a,handleDelete:c}):n==="generalInfo"?I.jsx(q2,{translations:t,handleInputChange:o,editingPath:r,setEditingPath:i,getStaticSectionName:Ki}):Oi(t.en[n],[n],o,r,i,void 0,c)]})}return I.jsxs("p",{className:"text-red-500",children:["Error: Invalid tab '",n,"' selected."]})},Aw=[{icon:I.jsx($1,{size:20}),label:"Dashboard",tab:"dashboard"},{icon:I.jsx(sm,{size:20}),label:"Pages",tab:"pages"},{icon:I.jsx(D1,{size:20}),label:"Projects",tab:"projects"},{icon:I.jsx(E1,{size:20}),label:"Services",tab:"services"},{icon:I.jsx(B1,{size:20}),label:"Media",tab:"media"},{icon:I.jsx(fm,{size:20}),label:"Appearance",tab:"styleEditor"},{icon:I.jsx(G1,{size:20}),label:"Social Links",tab:"socialLinks"},{icon:I.jsx(ub,{size:20}),label:"Settings",tab:"generalInfo"}],kw=()=>{const n=_d(),[e,t]=Y.useState(!1),[r,i]=Y.useState(()=>{const y=localStorage.getItem("desktopSidebarCollapsed");return y?JSON.parse(y):!1}),[o,s]=Y.useState(window.innerWidth<768);Y.useEffect(()=>{const y=()=>{const C=window.innerWidth<768;s(C),C||t(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),Y.useEffect(()=>{o||localStorage.setItem("desktopSidebarCollapsed",JSON.stringify(r))},[r,o]);const{translations:a,isLoading:c,saveStatus:p,handleInputChange:d,handleAddNewProject:f,handleAddNewService:u,saveChanges:h,handleDeleteItem:_}=Tb(),[g,v]=Y.useState("dashboard"),[m,b]=Y.useState(null),A=async()=>{if(!Nt){console.error("Firebase auth instance is not available."),alert("Logout service unavailable. Please try again later.");return}try{await Wg(Nt),n("/admin/login")}catch(y){console.error("Logout failed:",y),alert("Failed to log out. Please try again.")}};return I.jsx(nm,{children:I.jsxs("div",{className:"min-h-screen bg-gray-100",children:[I.jsx(Ab,{isMobile:o,isSidebarOpen:e,isDesktopSidebarCollapsed:r,onToggleMobileSidebar:()=>t(!e),onToggleDesktopSidebar:()=>i(!r),onLogout:A}),I.jsxs("div",{className:"flex pt-16",children:[I.jsx(kb,{isMobile:o,isSidebarOpen:e,isDesktopSidebarCollapsed:r,activeTab:g,navItems:Aw,onTabClick:y=>{v(y),o&&t(!1)},onCloseMobileSidebar:()=>t(!1)}),I.jsx("main",{className:`flex-1 transition-all duration-300 ${o?"ml-0":r?"md:ml-20":"md:ml-64"}`,children:I.jsxs("div",{className:"p-4 md:p-8",children:[I.jsxs("div",{className:"mb-4 md:mb-6",children:[I.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:g?Ki(g):"Dashboard"}),I.jsxs("p",{className:"text-sm text-gray-500",children:["Home / ",g?Ki(g):"Dashboard"]})]}),I.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:I.jsx(Tw,{activeTab:g,isLoading:c,translations:a,editingPath:m,setEditingPath:b,handleInputChange:d,handleAddNewProject:f,handleAddNewService:u,handleDeleteItem:_})}),g&&g!=="styleEditor"&&g!=="socialLinks"&&g!=="pages"&&I.jsxs("div",{className:"mt-6 flex justify-end items-center gap-4",children:[p&&I.jsx("span",{className:"text-green-600 text-sm",children:p}),I.jsx("button",{onClick:()=>h(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",disabled:c,children:"Save Changes"})]})]})})]})]})})};function eg(n="en"){const[e,t]=Y.useState(xt[n]),[r,i]=Y.useState(!0),[o,s]=Y.useState(null);return Y.useEffect(()=>{if(!de){console.error("useTranslations: Firestore instance is not available."),s(new Error("Firestore not available")),i(!1),t(xt[n]);return}i(!0),s(null);const c=Xe(de,"translations",n),p=eu(c,d=>{if(d.exists()){const f=d.data();t(()=>({...xt[n],...f}))}else t(xt[n]);i(!1)},d=>{console.error(`useTranslations: Firestore snapshot error for ${n}:`,d),s(d),t(xt[n]),i(!1)});return()=>{p()}},[n]),{t:Y.useMemo(()=>e,[e]),isLoading:r,error:o}}const Nw=({page:n})=>{const e=Sg(),{t,isLoading:r,error:i}=eg("en");return Y.useEffect(()=>{i&&console.error("DynamicPage: Error loading translations:",i)},[i]),n?r?I.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):I.jsxs("div",{className:"flex flex-col min-h-screen text-text ltr bg-gradient-to-br from-background to-background-secondary pb-20",children:[I.jsxs("div",{className:"flex-grow container mx-auto px-4 py-16 backdrop-blur-sm relative text-center",children:[I.jsx(Pr,{to:"/",className:"absolute top-6 left-6 text-secondary hover:text-primary text-2xl","aria-label":"Back to Home",children:""}),I.jsx("h1",{className:"text-4xl bg-section font-bold container mx-auto px-4 py-16  backdrop-blur-sm text-title","text-titel":!0,children:n.title}),I.jsxs("div",{className:"p-6 prose bg-section prose-invert max-w-none text-text",children:[" ",I.jsx("div",{className:"ql-snow",children:I.jsx("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:n.content}})})]})]}),I.jsxs("footer",{className:"container mx-auto px-4 py-8 text-center",children:[" ",I.jsx("p",{className:"text-secondary mb-4",children:t.generalInfo.footerText})]})]}):I.jsxs("div",{className:"container mx-auto px-4 py-16 text-center text-text  min-h-screen flex flex-col items-center justify-center",children:[I.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Page Not Found"}),I.jsxs("p",{className:"text-xl",children:["The page you requested (",e.pathname,") could not be found."]}),I.jsx(Pr,{to:"/",className:"mt-6 inline-block  hover:bg-secondary text-text font-bold py-2 px-4 ",children:"Go Home"})]})};var tg={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},md=_n.createContext&&_n.createContext(tg),Iw=["attr","size","title"];function Sw(n,e){if(n==null)return{};var t=Rw(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Rw(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Xi(){return Xi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xi.apply(this,arguments)}function gd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gd(Object(t),!0).forEach(function(r){Cw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gd(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cw(n,e,t){return e=Pw(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pw(n){var e=Ow(n,"string");return typeof e=="symbol"?e:e+""}function Ow(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ng(n){return n&&n.map((e,t)=>_n.createElement(e.tag,Zi({key:t},e.attr),ng(e.child)))}function sr(n){return e=>_n.createElement(jw,Xi({attr:Zi({},n.attr)},e),ng(n.child))}function jw(n){var e=t=>{var{attr:r,size:i,title:o}=n,s=Sw(n,Iw),a=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),_n.createElement("svg",Xi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:c,style:Zi(Zi({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&_n.createElement("title",null,o),n.children)};return md!==void 0?_n.createElement(md.Consumer,null,t=>e(t)):e(tg)}function Lw(n){return sr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M172.2 226.8c-14.6-2.9-28.2 8.9-28.2 23.8V301c0 10.2 7.1 18.4 16.7 22 18.2 6.8 31.3 24.4 31.3 45 0 26.5-21.5 48-48 48s-48-21.5-48-48V120c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v248c0 89.5 82.1 160.2 175 140.7 54.4-11.4 98.3-55.4 109.7-109.7 17.4-82.9-37-157.2-112.5-172.2zM209 0c-9.2-.5-17 6.8-17 16v31.6c0 8.5 6.6 15.5 15 15.9 129.4 7 233.4 112 240.9 241.5.5 8.4 7.5 15 15.9 15h32.1c9.2 0 16.5-7.8 16-17C503.4 139.8 372.2 8.6 209 0zm.3 96c-9.3-.7-17.3 6.7-17.3 16.1v32.1c0 8.4 6.5 15.3 14.8 15.9 76.8 6.3 138 68.2 144.9 145.2.8 8.3 7.6 14.7 15.9 14.7h32.2c9.3 0 16.8-8 16.1-17.3-8.4-110.1-96.5-198.2-206.6-206.7z"},child:[]}]})(n)}function Mw(n){return sr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 130.54V112h16c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v18.54C115.49 146.11 32 239.18 32 352h448c0-112.82-83.49-205.89-192-221.46zM496 384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(n)}function Dw(n){return sr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function Vw(n){return sr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function qw(n){return sr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function Fw(n){return sr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const Bw=()=>{const n=(t,r)=>{t.preventDefault();const i=r.substring(1),o=document.getElementById(i);o&&o.scrollIntoView({behavior:"smooth"})},e=[{href:"#home",text:"Home",icon:I.jsx(Vw,{})},{href:"#projects",text:"Featured Projects",icon:I.jsx(qw,{})},{href:"#blog",text:"Blog",icon:I.jsx(Lw,{})},{href:"#about",text:"About Me",icon:I.jsx(Fw,{})},{href:"#services",text:"Services",icon:I.jsx(Mw,{})},{href:"#contact",text:"Contact Me",icon:I.jsx(Dw,{})}];return I.jsxs("nav",{className:"nav-container md:backdrop-blur-md md:shadow-lg flex items-center justify-center max-w-screen-xl mx-auto px-6 py-4 sticky top-0 z-50",children:[I.jsx("ul",{className:"hidden md:flex md:items-center md:gap-x-8",children:e.map(t=>I.jsx("li",{children:I.jsxs("a",{className:"text-text hover:underline underline-offset-4 decoration-2 transition-colors font-medium py-2 flex items-center",href:t.href,onClick:r=>n(r,t.href),children:[I.jsx("span",{className:"mr-2",children:t.icon})," ",t.text," "]})},t.href))}),I.jsxs("ul",{className:"md:hidden flex items-center gap-x-4",children:[" ",e.map(t=>I.jsx("li",{children:I.jsx("a",{className:"text-primary text-xl md:gap-x-8",href:t.href,onClick:r=>n(r,t.href),"aria-label":t.text,children:t.icon})},t.href))]})]})},Uw=({dynamicPages:n})=>I.jsx("section",{id:"blog",className:"container mx-auto px-4 py-16 shadow-xl backdrop-blur-sm",children:I.jsxs("div",{className:"max-w-3xl mx-auto",children:[I.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-title",children:"Blog"}),n&&n.length>0&&I.jsx("div",{className:"flex justify-center flex-wrap gap-x-4 gap-y-2 mt-4",children:n.map(e=>I.jsx(Pr,{to:`/${e.slug}`,className:"block p-6 shadow-lg hover:bg-gray-700 transition-colors bg-section",children:e.title},e.id))})]})}),zw=(n=xt)=>{const e=n.en,t=e==null?void 0:e.projects,r=t?Object.entries(t).filter(([i,o])=>i!=="title"&&typeof o=="object"&&o!==null).map(([i,o])=>({title:(o==null?void 0:o.title)??`Project ${i}`,description:(o==null?void 0:o.description)??"Description missing.",tags:(o==null?void 0:o.tags)??[],link:(o==null?void 0:o.link)??""})):[];return{title:(t==null?void 0:t.title)??"Featured Projects",projects:r}},$w="/logo.png",Hw=({logoUrl:n,altText:e="Site Logo",className:t=""})=>{const r=n||$w,i=`block mx-auto h-[25rem] w-auto mb-6 ${t}`.trim();return I.jsx("img",{src:r,alt:e,className:i})},Gw={Github:am,Facebook:om,Mail:cm,Instagram:lm,Linkedin:um,Twitter:hm};function Kw(){const[n,e]=Y.useState([]),[t,r]=Y.useState(!0),[i,o]=Y.useState(null);return Y.useEffect(()=>{(async()=>{if(!de){console.error("useSocialLinks: Firestore instance is not available."),o(new Error("Firestore not available")),r(!1);return}r(!0),o(null);try{const a=Hn(de,"socialLinks"),c=go(a,yo("order","asc")),d=(await Yr(c)).docs.map(f=>({id:f.id,...f.data()}));e(d)}catch(a){console.error("useSocialLinks: Error fetching social links:",a),o(a instanceof Error?a:new Error(String(a)))}finally{r(!1)}})()},[]),{socialLinks:n,iconComponents:Gw,isLoading:t,error:i}}const Ww=Y.lazy(()=>mu(()=>import("./ServicesSection-zqQxw2rJ.js"),__vite__mapDeps([0,1,2]))),Qw=Y.lazy(()=>mu(()=>import("./ProjectsSection-qJ9LjP-w.js"),__vite__mapDeps([3,1,2]))),Yw=Y.lazy(()=>mu(()=>import("./ContactSection-86qSucva.js"),__vite__mapDeps([4,1,2]))),Xw=({dynamicPages:n})=>{const{t:e,isLoading:t,error:r}=eg("en"),[i,o]=Y.useState(!1),{socialLinks:s,iconComponents:a,isLoading:c,error:p}=Kw();Y.useEffect(()=>{r&&console.error("MainSite: Error loading translations:",r)},[r]),Y.useEffect(()=>{p&&console.error("MainSite: Error loading social links:",p)},[p]),Y.useEffect(()=>{const u=h=>{h.ctrlKey&&h.altKey&&h.key==="a"&&(h.preventDefault(),o(_=>!_))};return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[]);const d=Y.useMemo(()=>zw({en:e}),[e]),f=I.jsx("div",{className:"flex items-center justify-center p-8",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});return t?I.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):I.jsxs("div",{className:"min-h-screen text-text ltr bg-gradient-to-br from-background to-background-secondary pb-20",children:[I.jsxs("div",{className:" container sticky top-0 z-10 ",children:[" ",I.jsx(Bw,{})," "]}),I.jsx("header",{id:"home",className:"container mx-auto",children:I.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[I.jsx(Hw,{logoUrl:e.generalInfo.logoUrl}),I.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 text-primary pointer-events-none select-none",children:e.generalInfo.siteTitle}),I.jsx("p",{className:"text-xl md:text-2xl text-secondary mb-8",children:e.generalInfo.siteRole}),I.jsx("div",{className:"flex justify-center space-x-6",children:c?I.jsx("div",{className:"text-secondary",children:"Loading links..."}):s.map(u=>{const h=a[u.icon];return h?I.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer","aria-label":u.name,className:"text-primary hover:text-text transition-colors transform hover:scale-110",children:I.jsx(h,{size:24})},u.id):null})})]})}),I.jsx(Y.Suspense,{fallback:f,children:I.jsx(Qw,{title:d.title,projects:d.projects})}),I.jsx(Y.Suspense,{fallback:f,children:I.jsx(Uw,{dynamicPages:n})}),I.jsx("section",{id:"about",className:"container mx-auto px-4 py-16 bg-gray-800/50 backdrop-blur-sm",children:I.jsxs("div",{className:"max-w-3xl mx-auto",children:[I.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-title",children:e.about.title}),I.jsx("p",{className:"text-lg leading-relaxed text-text",children:e.about.description})]})}),I.jsx(Y.Suspense,{fallback:f,children:I.jsx(Ww,{title:e.services.title,services:e.services.list})}),I.jsx(Y.Suspense,{fallback:f,children:I.jsx(Yw,{t:e.contact})}),I.jsxs("footer",{className:"container mx-auto px-4 py-8 text-center relative",children:[I.jsx("p",{className:"text-secondary mb-4",children:e.generalInfo.footerText}),I.jsx(Pr,{to:"/admin/dashboard",className:`absolute bottom-2 left-1/2 -translate-x-1/2 text-sm text-primary hover:text-text underline transition-opacity duration-300 ${i?"opacity-100":"opacity-0 pointer-events-none"}`,children:"Admin Dashboard"})]})]})},Zw=()=>I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center px-4min-h-screen text-text ltr bg-gradient-to-br from-background to-background-secondary",children:[I.jsx("h1",{className:"text-6xl font-bold mb-4 text-primary",children:"404"}),I.jsx("h2",{className:"text-2xl font-semibold mb-6 text-primary",children:"Page Not Found"}),I.jsx("p",{className:"mb-8 max-w-md text-secondary",children:"Sorry, the page you are looking for does not exist. It might have been moved or deleted."}),I.jsx(Pr,{to:"/",className:"px-6 py-2 text-secondary bg-primary hover:bg-gradient-to-br from-background to-background-secondary transition",children:"Go Back Home"})]});function Jw(){l1();const{dynamicPages:n,loadingPages:e,errorPages:t}=u1();return e?I.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):t?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 text-center",children:[I.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Application Data"}),I.jsx("p",{children:"We encountered an issue fetching necessary data. Please try refreshing the page."}),I.jsxs("p",{className:"text-sm mt-2",children:["Details: ",t.message]})]}):I.jsx(nm,{children:I.jsxs(Rg,{children:[I.jsxs(Cg,{children:[I.jsx(Rn,{path:"/",element:I.jsx(Xw,{dynamicPages:n})}),n.map(r=>I.jsx(Rn,{path:`/${r.slug}`,element:I.jsx(Nw,{page:r})},r.id)),I.jsx(Rn,{path:"/admin/login",element:I.jsx(m1,{})}),I.jsx(Rn,{path:"/admin/dashboard",element:I.jsx(h1,{children:I.jsx(kw,{})})}),I.jsx(Rn,{path:"/admin",element:I.jsx(bd,{to:"/admin/login",replace:!0})}),I.jsx(Rn,{path:"*",element:I.jsx(Zw,{})})]}),I.jsx(d1,{})]})})}Zg.createRoot(document.getElementById("root")).render(I.jsx(Jw,{}));export{Re as c,I as j,Vt as u};
//# sourceMappingURL=index-DdJGDZBk.js.map
