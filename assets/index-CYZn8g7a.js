const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browser-CKC9vik6.js","./react-vendor-ByTr29QW.js","./ServicesSection-B9OkB41F.js","./firebase-vendor-CAk-8R_y.js","./ProjectsSection-kyYgr1Hk.js","./ContactSection-PomfU9fZ.js"])))=>i.map(i=>d[i]);
import{r as re,a as ff,u as df,c as Ke,g as zg,b as Hg,d as Kg,L as ws,B as Gg,R as Wg,e as Jr,N as pf}from"./react-vendor-ByTr29QW.js";import{L as Qg,_ as Yg,C as Jg,r as Zu,F as Xg,a as Zg,g as em,b as tm,c as nm,d as en,e as rm,f as im,h as Nt,S as sm,i as om,j as am,k as lm,l as um,o as gf,s as cm,m as hm}from"./firebase-vendor-CAk-8R_y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var mf={exports:{}},zs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=re,dm=Symbol.for("react.element"),pm=Symbol.for("react.fragment"),gm=Object.prototype.hasOwnProperty,mm=fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ym={key:!0,ref:!0,__self:!0,__source:!0};function yf(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)gm.call(e,n)&&!ym.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:dm,type:r,key:s,ref:o,props:i,_owner:mm.current}}zs.Fragment=pm;zs.jsx=yf;zs.jsxs=yf;mf.exports=zs;var R=mf.exports,vf,ec=ff;vf=ec.createRoot,ec.hydrateRoot;const vm="modulepreload",_m=function(r,e){return new URL(r,e).href},tc={},sn=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(h=>{if(h=_m(h,n),h in tc)return;tc[h]=!0;const c=h.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!n)for(let v=o.length-1;v>=0;v--){const y=o[v];if(y.href===h&&(!c||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":vm,c||(p.as="script"),p.crossOrigin="",p.href=h,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((v,y)=>{p.addEventListener("load",v),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wm=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),nc=r=>{const e=wm(r);return e.charAt(0).toUpperCase()+e.slice(1)},_f=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Em={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=re.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},l)=>re.createElement("svg",{ref:l,...Em,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:_f("lucide",i),...a},[...o.map(([h,c])=>re.createElement(h,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(r,e)=>{const t=re.forwardRef(({className:n,...i},s)=>re.createElement(Tm,{ref:s,iconNode:e,className:_f(`lucide-${bm(nc(r))}`,`lucide-${r}`,n),...i}));return t.displayName=nc(r),t};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],pa=Ne("arrow-down",xm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ga=Ne("arrow-up",Am);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sm=Ne("chevron-down",km);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Om=Ne("circle-plus",Im);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nm=Ne("circle-x",Pm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Cm=Ne("copy",Rm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Lm=Ne("download",jm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mm=Ne("eye",Dm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],$m=Ne("facebook",Vm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],Fm=Ne("file-pen",qm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rc=Ne("file-text",Um);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],zm=Ne("github",Bm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Km=Ne("image",Hm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Wm=Ne("instagram",Gm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ym=Ne("layout-dashboard",Qm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Xm=Ne("link-2",Jm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],ey=Ne("linkedin",Zm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ny=Ne("log-out",ty);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],iy=Ne("mail",ry);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],oy=Ne("maximize-2",sy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ic=Ne("menu",ay);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],uy=Ne("message-square",ly);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],hy=Ne("minimize-2",cy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],bf=Ne("palette",fy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],py=Ne("panels-top-left",dy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],my=Ne("refresh-cw",gy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wf=Ne("save",yy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_y=Ne("settings",vy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],wy=Ne("sliders-vertical",by);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ma=Ne("square-pen",Ey);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xy=Ne("star",Ty);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Es=Ne("trash-2",Ay);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Sy=Ne("twitter",ky);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Oy=Ne("type",Iy);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ny=Ne("upload",Py);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cy=Ne("user",Ry);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Ly=Ne("wand-sparkles",jy),pi={_origin:"https://api.emailjs.com"},Dy=(r,e="https://api.emailjs.com")=>{pi._userID=r,pi._origin=e},Ef=(r,e,t)=>{if(!r)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class sc{constructor(e){this.status=e.status,this.text=e.responseText}}const Tf=(r,e,t={})=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new sc(o);a.status===200||a.text==="OK"?n(a):i(a)}),s.addEventListener("error",({target:o})=>{i(new sc(o))}),s.open("POST",pi._origin+r,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),My=(r,e,t,n)=>{const i=n||pi._userID;return Ef(i,r,e),Tf("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"})},Vy=r=>{let e;if(typeof r=="string"?e=document.querySelector(r):e=r,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},$y=(r,e,t,n)=>{const i=n||pi._userID,s=Vy(t);Ef(i,r,e);const o=new FormData(s);return o.append("lib_version","3.2.0"),o.append("service_id",r),o.append("template_id",e),o.append("user_id",i),Tf("/api/v1.0/email/send-form",o)},oc={init:Dy,send:My,sendForm:$y};var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yn,xf;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,E){function S(){}S.prototype=E.prototype,w.D=E.prototype,w.prototype=new S,w.prototype.constructor=w,w.C=function(T,x,A){for(var O=Array(arguments.length-2),D=2;D<arguments.length;D++)O[D-2]=arguments[D];return E.prototype[x].apply(T,O)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,E,S){S||(S=0);var T=Array(16);if(typeof E=="string")for(var x=0;16>x;++x)T[x]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(x=0;16>x;++x)T[x]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=w.g[0],S=w.g[1],x=w.g[2];var A=w.g[3],O=E+(A^S&(x^A))+T[0]+3614090360&4294967295;E=S+(O<<7&4294967295|O>>>25),O=A+(x^E&(S^x))+T[1]+3905402710&4294967295,A=E+(O<<12&4294967295|O>>>20),O=x+(S^A&(E^S))+T[2]+606105819&4294967295,x=A+(O<<17&4294967295|O>>>15),O=S+(E^x&(A^E))+T[3]+3250441966&4294967295,S=x+(O<<22&4294967295|O>>>10),O=E+(A^S&(x^A))+T[4]+4118548399&4294967295,E=S+(O<<7&4294967295|O>>>25),O=A+(x^E&(S^x))+T[5]+1200080426&4294967295,A=E+(O<<12&4294967295|O>>>20),O=x+(S^A&(E^S))+T[6]+2821735955&4294967295,x=A+(O<<17&4294967295|O>>>15),O=S+(E^x&(A^E))+T[7]+4249261313&4294967295,S=x+(O<<22&4294967295|O>>>10),O=E+(A^S&(x^A))+T[8]+1770035416&4294967295,E=S+(O<<7&4294967295|O>>>25),O=A+(x^E&(S^x))+T[9]+2336552879&4294967295,A=E+(O<<12&4294967295|O>>>20),O=x+(S^A&(E^S))+T[10]+4294925233&4294967295,x=A+(O<<17&4294967295|O>>>15),O=S+(E^x&(A^E))+T[11]+2304563134&4294967295,S=x+(O<<22&4294967295|O>>>10),O=E+(A^S&(x^A))+T[12]+1804603682&4294967295,E=S+(O<<7&4294967295|O>>>25),O=A+(x^E&(S^x))+T[13]+4254626195&4294967295,A=E+(O<<12&4294967295|O>>>20),O=x+(S^A&(E^S))+T[14]+2792965006&4294967295,x=A+(O<<17&4294967295|O>>>15),O=S+(E^x&(A^E))+T[15]+1236535329&4294967295,S=x+(O<<22&4294967295|O>>>10),O=E+(x^A&(S^x))+T[1]+4129170786&4294967295,E=S+(O<<5&4294967295|O>>>27),O=A+(S^x&(E^S))+T[6]+3225465664&4294967295,A=E+(O<<9&4294967295|O>>>23),O=x+(E^S&(A^E))+T[11]+643717713&4294967295,x=A+(O<<14&4294967295|O>>>18),O=S+(A^E&(x^A))+T[0]+3921069994&4294967295,S=x+(O<<20&4294967295|O>>>12),O=E+(x^A&(S^x))+T[5]+3593408605&4294967295,E=S+(O<<5&4294967295|O>>>27),O=A+(S^x&(E^S))+T[10]+38016083&4294967295,A=E+(O<<9&4294967295|O>>>23),O=x+(E^S&(A^E))+T[15]+3634488961&4294967295,x=A+(O<<14&4294967295|O>>>18),O=S+(A^E&(x^A))+T[4]+3889429448&4294967295,S=x+(O<<20&4294967295|O>>>12),O=E+(x^A&(S^x))+T[9]+568446438&4294967295,E=S+(O<<5&4294967295|O>>>27),O=A+(S^x&(E^S))+T[14]+3275163606&4294967295,A=E+(O<<9&4294967295|O>>>23),O=x+(E^S&(A^E))+T[3]+4107603335&4294967295,x=A+(O<<14&4294967295|O>>>18),O=S+(A^E&(x^A))+T[8]+1163531501&4294967295,S=x+(O<<20&4294967295|O>>>12),O=E+(x^A&(S^x))+T[13]+2850285829&4294967295,E=S+(O<<5&4294967295|O>>>27),O=A+(S^x&(E^S))+T[2]+4243563512&4294967295,A=E+(O<<9&4294967295|O>>>23),O=x+(E^S&(A^E))+T[7]+1735328473&4294967295,x=A+(O<<14&4294967295|O>>>18),O=S+(A^E&(x^A))+T[12]+2368359562&4294967295,S=x+(O<<20&4294967295|O>>>12),O=E+(S^x^A)+T[5]+4294588738&4294967295,E=S+(O<<4&4294967295|O>>>28),O=A+(E^S^x)+T[8]+2272392833&4294967295,A=E+(O<<11&4294967295|O>>>21),O=x+(A^E^S)+T[11]+1839030562&4294967295,x=A+(O<<16&4294967295|O>>>16),O=S+(x^A^E)+T[14]+4259657740&4294967295,S=x+(O<<23&4294967295|O>>>9),O=E+(S^x^A)+T[1]+2763975236&4294967295,E=S+(O<<4&4294967295|O>>>28),O=A+(E^S^x)+T[4]+1272893353&4294967295,A=E+(O<<11&4294967295|O>>>21),O=x+(A^E^S)+T[7]+4139469664&4294967295,x=A+(O<<16&4294967295|O>>>16),O=S+(x^A^E)+T[10]+3200236656&4294967295,S=x+(O<<23&4294967295|O>>>9),O=E+(S^x^A)+T[13]+681279174&4294967295,E=S+(O<<4&4294967295|O>>>28),O=A+(E^S^x)+T[0]+3936430074&4294967295,A=E+(O<<11&4294967295|O>>>21),O=x+(A^E^S)+T[3]+3572445317&4294967295,x=A+(O<<16&4294967295|O>>>16),O=S+(x^A^E)+T[6]+76029189&4294967295,S=x+(O<<23&4294967295|O>>>9),O=E+(S^x^A)+T[9]+3654602809&4294967295,E=S+(O<<4&4294967295|O>>>28),O=A+(E^S^x)+T[12]+3873151461&4294967295,A=E+(O<<11&4294967295|O>>>21),O=x+(A^E^S)+T[15]+530742520&4294967295,x=A+(O<<16&4294967295|O>>>16),O=S+(x^A^E)+T[2]+3299628645&4294967295,S=x+(O<<23&4294967295|O>>>9),O=E+(x^(S|~A))+T[0]+4096336452&4294967295,E=S+(O<<6&4294967295|O>>>26),O=A+(S^(E|~x))+T[7]+1126891415&4294967295,A=E+(O<<10&4294967295|O>>>22),O=x+(E^(A|~S))+T[14]+2878612391&4294967295,x=A+(O<<15&4294967295|O>>>17),O=S+(A^(x|~E))+T[5]+4237533241&4294967295,S=x+(O<<21&4294967295|O>>>11),O=E+(x^(S|~A))+T[12]+1700485571&4294967295,E=S+(O<<6&4294967295|O>>>26),O=A+(S^(E|~x))+T[3]+2399980690&4294967295,A=E+(O<<10&4294967295|O>>>22),O=x+(E^(A|~S))+T[10]+4293915773&4294967295,x=A+(O<<15&4294967295|O>>>17),O=S+(A^(x|~E))+T[1]+2240044497&4294967295,S=x+(O<<21&4294967295|O>>>11),O=E+(x^(S|~A))+T[8]+1873313359&4294967295,E=S+(O<<6&4294967295|O>>>26),O=A+(S^(E|~x))+T[15]+4264355552&4294967295,A=E+(O<<10&4294967295|O>>>22),O=x+(E^(A|~S))+T[6]+2734768916&4294967295,x=A+(O<<15&4294967295|O>>>17),O=S+(A^(x|~E))+T[13]+1309151649&4294967295,S=x+(O<<21&4294967295|O>>>11),O=E+(x^(S|~A))+T[4]+4149444226&4294967295,E=S+(O<<6&4294967295|O>>>26),O=A+(S^(E|~x))+T[11]+3174756917&4294967295,A=E+(O<<10&4294967295|O>>>22),O=x+(E^(A|~S))+T[2]+718787259&4294967295,x=A+(O<<15&4294967295|O>>>17),O=S+(A^(x|~E))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,w.g[2]=w.g[2]+x&4294967295,w.g[3]=w.g[3]+A&4294967295}n.prototype.u=function(w,E){E===void 0&&(E=w.length);for(var S=E-this.blockSize,T=this.B,x=this.h,A=0;A<E;){if(x==0)for(;A<=S;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<E;)if(T[x++]=w.charCodeAt(A++),x==this.blockSize){i(this,T),x=0;break}}else for(;A<E;)if(T[x++]=w[A++],x==this.blockSize){i(this,T),x=0;break}}this.h=x,this.o+=E},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;var S=8*this.o;for(E=w.length-8;E<w.length;++E)w[E]=S&255,S/=256;for(this.u(w),w=Array(16),E=S=0;4>E;++E)for(var T=0;32>T;T+=8)w[S++]=this.g[E]>>>T&255;return w};function s(w,E){var S=a;return Object.prototype.hasOwnProperty.call(S,w)?S[w]:S[w]=E(w)}function o(w,E){this.h=E;for(var S=[],T=!0,x=w.length-1;0<=x;x--){var A=w[x]|0;T&&A==E||(S[x]=A,T=!1)}this.g=S}var a={};function l(w){return-128<=w&&128>w?s(w,function(E){return new o([E|0],0>E?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return g(h(-w));for(var E=[],S=1,T=0;w>=S;T++)E[T]=w/S|0,S*=4294967296;return new o(E,0)}function c(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return g(c(w.substring(1),E));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(E,8)),T=d,x=0;x<w.length;x+=8){var A=Math.min(8,w.length-x),O=parseInt(w.substring(x,x+A),E);8>A?(A=h(Math.pow(E,A)),T=T.j(A).add(h(O))):(T=T.j(S),T=T.add(h(O)))}return T}var d=l(0),f=l(1),p=l(16777216);r=o.prototype,r.m=function(){if(y(this))return-g(this).m();for(var w=0,E=1,S=0;S<this.g.length;S++){var T=this.i(S);w+=(0<=T?T:4294967296+T)*E,E*=4294967296}return w},r.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(v(this))return"0";if(y(this))return"-"+g(this).toString(w);for(var E=h(Math.pow(w,6)),S=this,T="";;){var x=_(S,E).g;S=m(S,x.j(E));var A=((0<S.g.length?S.g[0]:S.h)>>>0).toString(w);if(S=x,v(S))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},r.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function v(w){if(w.h!=0)return!1;for(var E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function y(w){return w.h==-1}r.l=function(w){return w=m(this,w),y(w)?-1:v(w)?0:1};function g(w){for(var E=w.g.length,S=[],T=0;T<E;T++)S[T]=~w.g[T];return new o(S,~w.h).add(f)}r.abs=function(){return y(this)?g(this):this},r.add=function(w){for(var E=Math.max(this.g.length,w.g.length),S=[],T=0,x=0;x<=E;x++){var A=T+(this.i(x)&65535)+(w.i(x)&65535),O=(A>>>16)+(this.i(x)>>>16)+(w.i(x)>>>16);T=O>>>16,A&=65535,O&=65535,S[x]=O<<16|A}return new o(S,S[S.length-1]&-2147483648?-1:0)};function m(w,E){return w.add(g(E))}r.j=function(w){if(v(this)||v(w))return d;if(y(this))return y(w)?g(this).j(g(w)):g(g(this).j(w));if(y(w))return g(this.j(g(w)));if(0>this.l(p)&&0>w.l(p))return h(this.m()*w.m());for(var E=this.g.length+w.g.length,S=[],T=0;T<2*E;T++)S[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<w.g.length;x++){var A=this.i(T)>>>16,O=this.i(T)&65535,D=w.i(x)>>>16,q=w.i(x)&65535;S[2*T+2*x]+=O*q,b(S,2*T+2*x),S[2*T+2*x+1]+=A*q,b(S,2*T+2*x+1),S[2*T+2*x+1]+=O*D,b(S,2*T+2*x+1),S[2*T+2*x+2]+=A*D,b(S,2*T+2*x+2)}for(T=0;T<E;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=E;T<2*E;T++)S[T]=0;return new o(S,0)};function b(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function I(w,E){this.g=w,this.h=E}function _(w,E){if(v(E))throw Error("division by zero");if(v(w))return new I(d,d);if(y(w))return E=_(g(w),E),new I(g(E.g),g(E.h));if(y(E))return E=_(w,g(E)),new I(g(E.g),E.h);if(30<w.g.length){if(y(w)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var S=f,T=E;0>=T.l(w);)S=P(S),T=P(T);var x=C(S,1),A=C(T,1);for(T=C(T,2),S=C(S,2);!v(T);){var O=A.add(T);0>=O.l(w)&&(x=x.add(S),A=O),T=C(T,1),S=C(S,1)}return E=m(w,x.j(E)),new I(x,E)}for(x=d;0<=w.l(E);){for(S=Math.max(1,Math.floor(w.m()/E.m())),T=Math.ceil(Math.log(S)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=h(S),O=A.j(E);y(O)||0<O.l(w);)S-=T,A=h(S),O=A.j(E);v(A)&&(A=f),x=x.add(A),w=m(w,O)}return new I(x,w)}r.A=function(w){return _(this,w).h},r.and=function(w){for(var E=Math.max(this.g.length,w.g.length),S=[],T=0;T<E;T++)S[T]=this.i(T)&w.i(T);return new o(S,this.h&w.h)},r.or=function(w){for(var E=Math.max(this.g.length,w.g.length),S=[],T=0;T<E;T++)S[T]=this.i(T)|w.i(T);return new o(S,this.h|w.h)},r.xor=function(w){for(var E=Math.max(this.g.length,w.g.length),S=[],T=0;T<E;T++)S[T]=this.i(T)^w.i(T);return new o(S,this.h^w.h)};function P(w){for(var E=w.g.length+1,S=[],T=0;T<E;T++)S[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(S,w.h)}function C(w,E){var S=E>>5;E%=32;for(var T=w.g.length-S,x=[],A=0;A<T;A++)x[A]=0<E?w.i(A+S)>>>E|w.i(A+S+1)<<32-E:w.i(A+S);return new o(x,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,xf=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=c,yn=o}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});var Zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Af,ni,kf,gs,ya,Sf,If,Of;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,k,N){return u==Array.prototype||u==Object.prototype||(u[k]=N.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zi=="object"&&Zi];for(var k=0;k<u.length;++k){var N=u[k];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var n=t(this);function i(u,k){if(k)e:{var N=n;u=u.split(".");for(var L=0;L<u.length-1;L++){var Q=u[L];if(!(Q in N))break e;N=N[Q]}u=u[u.length-1],L=N[u],k=k(L),k!=L&&k!=null&&e(N,u,{configurable:!0,writable:!0,value:k})}}function s(u,k){u instanceof String&&(u+="");var N=0,L=!1,Q={next:function(){if(!L&&N<u.length){var X=N++;return{value:k(X,u[X]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(u){return u||function(){return s(this,function(k,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var k=typeof u;return k=k!="object"?k:u?Array.isArray(u)?"array":k:"null",k=="array"||k=="object"&&typeof u.length=="number"}function h(u){var k=typeof u;return k=="object"&&u!=null||k=="function"}function c(u,k,N){return u.call.apply(u.bind,arguments)}function d(u,k,N){if(!u)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,L),u.apply(k,Q)}}return function(){return u.apply(k,arguments)}}function f(u,k,N){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function p(u,k){var N=Array.prototype.slice.call(arguments,1);return function(){var L=N.slice();return L.push.apply(L,arguments),u.apply(this,L)}}function v(u,k){function N(){}N.prototype=k.prototype,u.aa=k.prototype,u.prototype=new N,u.prototype.constructor=u,u.Qb=function(L,Q,X){for(var ue=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ue[$e-2]=arguments[$e];return k.prototype[Q].apply(L,ue)}}function y(u){const k=u.length;if(0<k){const N=Array(k);for(let L=0;L<k;L++)N[L]=u[L];return N}return[]}function g(u,k){for(let N=1;N<arguments.length;N++){const L=arguments[N];if(l(L)){const Q=u.length||0,X=L.length||0;u.length=Q+X;for(let ue=0;ue<X;ue++)u[Q+ue]=L[ue]}else u.push(L)}}class m{constructor(k,N){this.i=k,this.j=N,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function b(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function _(u){return _[" "](u),u}_[" "]=function(){};var P=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function C(u,k,N){for(const L in u)k.call(N,u[L],L,u)}function w(u,k){for(const N in u)k.call(void 0,u[N],N,u)}function E(u){const k={};for(const N in u)k[N]=u[N];return k}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,k){let N,L;for(let Q=1;Q<arguments.length;Q++){L=arguments[Q];for(N in L)u[N]=L[N];for(let X=0;X<S.length;X++)N=S[X],Object.prototype.hasOwnProperty.call(L,N)&&(u[N]=L[N])}}function x(u){var k=1;u=u.split(":");const N=[];for(;0<k&&u.length;)N.push(u.shift()),k--;return u.length&&N.push(u.join(":")),N}function A(u){a.setTimeout(()=>{throw u},0)}function O(){var u=z;let k=null;return u.g&&(k=u.g,u.g=u.g.next,u.g||(u.h=null),k.next=null),k}class D{constructor(){this.h=this.g=null}add(k,N){const L=q.get();L.set(k,N),this.h?this.h.next=L:this.g=L,this.h=L}}var q=new m(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(k,N){this.h=k,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let K,te=!1,z=new D,F=()=>{const u=a.Promise.resolve(void 0);K=()=>{u.then(j)}};var j=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(N){A(N)}var k=q;k.j(u),100>k.h&&(k.h++,u.next=k.g,k.g=u)}te=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,k){this.type=u,this.g=this.target=k,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,k=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const N=()=>{};a.addEventListener("test",N,k),a.removeEventListener("test",N,k)}catch{}return u}();function G(u,k){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var N=this.type=u.type,L=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=k,k=u.relatedTarget){if(P){e:{try{_(k.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(k=null)}}else N=="mouseover"?k=u.fromElement:N=="mouseout"&&(k=u.toElement);this.relatedTarget=k,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:M[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&G.aa.h.call(this)}}v(G,$);var M={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),Y=0;function U(u,k,N,L,Q){this.listener=u,this.proxy=null,this.src=k,this.type=N,this.capture=!!L,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,k,N,L,Q){var X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);var ue=ge(u,k,L,Q);return-1<ue?(k=u[ue],N||(k.fa=!1)):(k=new U(k,this.src,X,!!L,Q),k.fa=N,u.push(k)),k};function le(u,k){var N=k.type;if(N in u.g){var L=u.g[N],Q=Array.prototype.indexOf.call(L,k,void 0),X;(X=0<=Q)&&Array.prototype.splice.call(L,Q,1),X&&(J(k),u.g[N].length==0&&(delete u.g[N],u.h--))}}function ge(u,k,N,L){for(var Q=0;Q<u.length;++Q){var X=u[Q];if(!X.da&&X.listener==k&&X.capture==!!N&&X.ha==L)return Q}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),Ie={};function rt(u,k,N,L,Q){if(Array.isArray(k)){for(var X=0;X<k.length;X++)rt(u,k[X],N,L,Q);return null}return N=Se(N),u&&u[B]?u.K(k,N,h(L)?!!L.capture:!!L,Q):Ye(u,k,N,!1,L,Q)}function Ye(u,k,N,L,Q,X){if(!k)throw Error("Invalid event type");var ue=h(Q)?!!Q.capture:!!Q,$e=Ee(u);if($e||(u[_e]=$e=new oe(u)),N=$e.add(k,N,L,ue,X),N.proxy)return N;if(L=Z(),N.proxy=L,L.src=u,L.listener=N,u.addEventListener)W||(Q=ue),Q===void 0&&(Q=!1),u.addEventListener(k.toString(),L,Q);else if(u.attachEvent)u.attachEvent(he(k.toString()),L);else if(u.addListener&&u.removeListener)u.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Z(){function u(N){return k.call(u.src,u.listener,N)}const k=se;return u}function ee(u,k,N,L,Q){if(Array.isArray(k))for(var X=0;X<k.length;X++)ee(u,k[X],N,L,Q);else L=h(L)?!!L.capture:!!L,N=Se(N),u&&u[B]?(u=u.i,k=String(k).toString(),k in u.g&&(X=u.g[k],N=ge(X,N,L,Q),-1<N&&(J(X[N]),Array.prototype.splice.call(X,N,1),X.length==0&&(delete u.g[k],u.h--)))):u&&(u=Ee(u))&&(k=u.g[k.toString()],u=-1,k&&(u=ge(k,N,L,Q)),(N=-1<u?k[u]:null)&&ce(N))}function ce(u){if(typeof u!="number"&&u&&!u.da){var k=u.src;if(k&&k[B])le(k.i,u);else{var N=u.type,L=u.proxy;k.removeEventListener?k.removeEventListener(N,L,u.capture):k.detachEvent?k.detachEvent(he(N),L):k.addListener&&k.removeListener&&k.removeListener(L),(N=Ee(k))?(le(N,u),N.h==0&&(N.src=null,k[_e]=null)):J(u)}}}function he(u){return u in Ie?Ie[u]:Ie[u]="on"+u}function se(u,k){if(u.da)u=!0;else{k=new G(k,this);var N=u.listener,L=u.ha||u.src;u.fa&&ce(u),u=N.call(L,k)}return u}function Ee(u){return u=u[_e],u instanceof oe?u:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(u){return typeof u=="function"?u:(u[Te]||(u[Te]=function(k){return u.handleEvent(k)}),u[Te])}function Me(){V.call(this),this.i=new oe(this),this.M=this,this.F=null}v(Me,V),Me.prototype[B]=!0,Me.prototype.removeEventListener=function(u,k,N,L){ee(this,u,k,N,L)};function Ue(u,k){var N,L=u.F;if(L)for(N=[];L;L=L.F)N.push(L);if(u=u.M,L=k.type||k,typeof k=="string")k=new $(k,u);else if(k instanceof $)k.target=k.target||u;else{var Q=k;k=new $(L,u),T(k,Q)}if(Q=!0,N)for(var X=N.length-1;0<=X;X--){var ue=k.g=N[X];Q=Ve(ue,L,!0,k)&&Q}if(ue=k.g=u,Q=Ve(ue,L,!0,k)&&Q,Q=Ve(ue,L,!1,k)&&Q,N)for(X=0;X<N.length;X++)ue=k.g=N[X],Q=Ve(ue,L,!1,k)&&Q}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,k;for(k in u.g){for(var N=u.g[k],L=0;L<N.length;L++)J(N[L]);delete u.g[k],u.h--}}this.F=null},Me.prototype.K=function(u,k,N,L){return this.i.add(String(u),k,!1,N,L)},Me.prototype.L=function(u,k,N,L){return this.i.add(String(u),k,!0,N,L)};function Ve(u,k,N,L){if(k=u.i.g[String(k)],!k)return!0;k=k.concat();for(var Q=!0,X=0;X<k.length;++X){var ue=k[X];if(ue&&!ue.da&&ue.capture==N){var $e=ue.listener,lt=ue.ha||ue.src;ue.fa&&le(u.i,ue),Q=$e.call(lt,L)!==!1&&Q}}return Q&&!L.defaultPrevented}function Mi(u,k,N){if(typeof u=="function")N&&(u=f(u,N));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:a.setTimeout(u,k||0)}function Ge(u){u.g=Mi(()=>{u.g=null,u.i&&(u.i=!1,Ge(u))},u.l);const k=u.h;u.h=null,u.m.apply(null,k)}class qt extends V{constructor(k,N){super(),this.m=k,this.l=N,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(u){V.call(this),this.h=u,this.g={}}v(Vr,V);var ou=[];function au(u){C(u.g,function(k,N){this.g.hasOwnProperty(N)&&ce(k)},u),u.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),au(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=a.JSON.stringify,_g=a.JSON.parse,bg=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ko(){}ko.prototype.h=null;function lu(u){return u.h||(u.h=u.i())}function uu(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function So(){$.call(this,"d")}v(So,$);function Io(){$.call(this,"c")}v(Io,$);var Nn={},cu=null;function Vi(){return cu=cu||new Me}Nn.La="serverreachability";function hu(u){$.call(this,Nn.La,u)}v(hu,$);function qr(u){const k=Vi();Ue(k,new hu(k))}Nn.STAT_EVENT="statevent";function fu(u,k){$.call(this,Nn.STAT_EVENT,u),this.stat=k}v(fu,$);function _t(u){const k=Vi();Ue(k,new fu(k,u))}Nn.Ma="timingevent";function du(u,k){$.call(this,Nn.Ma,u),this.size=k}v(du,$);function Fr(u,k){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},k)}function Ur(){this.g=!0}Ur.prototype.xa=function(){this.g=!1};function wg(u,k,N,L,Q,X){u.info(function(){if(u.g)if(X)for(var ue="",$e=X.split("&"),lt=0;lt<$e.length;lt++){var Le=$e[lt].split("=");if(1<Le.length){var ft=Le[0];Le=Le[1];var dt=ft.split("_");ue=2<=dt.length&&dt[1]=="type"?ue+(ft+"="+Le+"&"):ue+(ft+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+L+") [attempt "+Q+"]: "+k+`
`+N+`
`+ue})}function Eg(u,k,N,L,Q,X,ue){u.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Q+"]: "+k+`
`+N+`
`+X+" "+ue})}function Kn(u,k,N,L){u.info(function(){return"XMLHTTP TEXT ("+k+"): "+xg(u,N)+(L?" "+L:"")})}function Tg(u,k){u.info(function(){return"TIMEOUT: "+k})}Ur.prototype.info=function(){};function xg(u,k){if(!u.g)return k;if(!k)return null;try{var N=JSON.parse(k);if(N){for(u=0;u<N.length;u++)if(Array.isArray(N[u])){var L=N[u];if(!(2>L.length)){var Q=L[1];if(Array.isArray(Q)&&!(1>Q.length)){var X=Q[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<Q.length;ue++)Q[ue]=""}}}}return Ao(N)}catch{return k}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oo;function qi(){}v(qi,ko),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},Oo=new qi;function un(u,k,N,L){this.j=u,this.i=k,this.l=N,this.R=L||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var mu={},Po={};function No(u,k,N){u.L=1,u.v=zi(Qt(k)),u.m=N,u.P=!0,yu(u,null)}function yu(u,k){u.F=Date.now(),Fi(u),u.A=Qt(u.v);var N=u.A,L=u.R;Array.isArray(L)||(L=[String(L)]),Nu(N.i,"t",L),u.C=0,N=u.j.J,u.h=new gu,u.g=Qu(u.j,N?k:null,!u.m),0<u.O&&(u.M=new qt(f(u.Y,u,u.g),u.O)),k=u.U,N=u.g,L=u.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(ou[0]=Q.toString()),Q=ou);for(var X=0;X<Q.length;X++){var ue=rt(N,Q[X],L||k.handleEvent,!1,k.h||k);if(!ue)break;k.g[ue.key]=ue}k=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,k)):(u.u="GET",u.g.ea(u.A,u.u,null,k)),qr(),wg(u.i,u.u,u.A,u.l,u.R,u.m)}un.prototype.ca=function(u){u=u.target;const k=this.M;k&&Yt(u)==3?k.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Yt(this.g);var k=this.g.Ba();const Qn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||dt!=4||k==7||(k==8||0>=Qn?qr(3):qr(2)),Ro(this);var N=this.g.Z();this.X=N;t:if(vu(this)){var L=Vu(this.g);u="";var Q=L.length,X=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),Br(this);var ue="";break t}this.h.i=new a.TextDecoder}for(k=0;k<Q;k++)this.h.h=!0,u+=this.h.i.decode(L[k],{stream:!(X&&k==Q-1)});L.length=0,this.h.g+=u,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=N==200,Eg(this.i,this.u,this.A,this.l,this.R,dt,N),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,lt=this.g;if(($e=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b($e)){var Le=$e;break t}}Le=null}if(N=Le)Kn(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,N);else{this.o=!1,this.s=3,_t(12),Rn(this),Br(this);break e}}if(this.P){N=!0;let Ct;for(;!this.J&&this.C<ue.length;)if(Ct=Ag(this,ue),Ct==Po){dt==4&&(this.s=4,_t(14),N=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==mu){this.s=4,_t(15),Kn(this.i,this.l,ue,"[Invalid Chunk]"),N=!1;break}else Kn(this.i,this.l,Ct,null),Co(this,Ct);if(vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||ue.length!=0||this.h.h||(this.s=1,_t(16),N=!1),this.o=this.o&&N,!N)Kn(this.i,this.l,ue,"[Invalid Chunked Response]"),Rn(this),Br(this);else if(0<ue.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),$o(ft),ft.M=!0,_t(11))}}else Kn(this.i,this.l,ue,null),Co(this,ue);dt==4&&Rn(this),this.o&&!this.J&&(dt==4?Hu(this.j,this):(this.o=!1,Fi(this)))}else Ug(this.g),N==400&&0<ue.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Rn(this),Br(this)}}}catch{}finally{}};function vu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ag(u,k){var N=u.C,L=k.indexOf(`
`,N);return L==-1?Po:(N=Number(k.substring(N,L)),isNaN(N)?mu:(L+=1,L+N>k.length?Po:(k=k.slice(L,L+N),u.C=L+N,k)))}un.prototype.cancel=function(){this.J=!0,Rn(this)};function Fi(u){u.S=Date.now()+u.I,_u(u,u.I)}function _u(u,k){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Fr(f(u.ba,u),k)}function Ro(u){u.B&&(a.clearTimeout(u.B),u.B=null)}un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Tg(this.i,this.A),this.L!=2&&(qr(),_t(17)),Rn(this),this.s=2,Br(this)):_u(this,this.S-u)};function Br(u){u.j.G==0||u.J||Hu(u.j,u)}function Rn(u){Ro(u);var k=u.M;k&&typeof k.ma=="function"&&k.ma(),u.M=null,au(u.U),u.g&&(k=u.g,u.g=null,k.abort(),k.ma())}function Co(u,k){try{var N=u.j;if(N.G!=0&&(N.g==u||jo(N.h,u))){if(!u.K&&jo(N.h,u)&&N.G==3){try{var L=N.Da.g.parse(k)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Q=L;if(Q[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<u.F)Yi(N),Wi(N);else break e;Vo(N),_t(18)}}else N.za=Q[1],0<N.za-N.T&&37500>Q[2]&&N.F&&N.v==0&&!N.C&&(N.C=Fr(f(N.Za,N),6e3));if(1>=Eu(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else jn(N,11)}else if((u.K||N.g==u)&&Yi(N),!b(k))for(Q=N.Da.g.parse(k),k=0;k<Q.length;k++){let Le=Q[k];if(N.T=Le[0],Le=Le[1],N.G==2)if(Le[0]=="c"){N.K=Le[1],N.ia=Le[2];const ft=Le[3];ft!=null&&(N.la=ft,N.j.info("VER="+N.la));const dt=Le[4];dt!=null&&(N.Aa=dt,N.j.info("SVER="+N.Aa));const Qn=Le[5];Qn!=null&&typeof Qn=="number"&&0<Qn&&(L=1.5*Qn,N.L=L,N.j.info("backChannelRequestTimeoutMs_="+L)),L=N;const Ct=u.g;if(Ct){const Xi=Ct.g?Ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var X=L.h;X.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Lo(X,X.h),X.h=null))}if(L.D){const qo=Ct.g?Ct.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(L.ya=qo,Be(L.I,L.D,qo))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-u.F,N.j.info("Handshake RTT: "+N.R+"ms")),L=N;var ue=u;if(L.qa=Wu(L,L.J?L.ia:null,L.W),ue.K){Tu(L.h,ue);var $e=ue,lt=L.L;lt&&($e.I=lt),$e.B&&(Ro($e),Fi($e)),L.g=ue}else Bu(L);0<N.i.length&&Qi(N)}else Le[0]!="stop"&&Le[0]!="close"||jn(N,7);else N.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?jn(N,7):Mo(N):Le[0]!="noop"&&N.l&&N.l.ta(Le),N.v=0)}}qr(4)}catch{}}var kg=class{constructor(u,k){this.g=u,this.map=k}};function bu(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Eu(u){return u.h?1:u.g?u.g.size:0}function jo(u,k){return u.h?u.h==k:u.g?u.g.has(k):!1}function Lo(u,k){u.g?u.g.add(k):u.h=k}function Tu(u,k){u.h&&u.h==k?u.h=null:u.g&&u.g.has(k)&&u.g.delete(k)}bu.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function xu(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let k=u.i;for(const N of u.g.values())k=k.concat(N.D);return k}return y(u.i)}function Sg(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var k=[],N=u.length,L=0;L<N;L++)k.push(u[L]);return k}k=[],N=0;for(L in u)k[N++]=u[L];return k}function Ig(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var k=[];u=u.length;for(var N=0;N<u;N++)k.push(N);return k}k=[],N=0;for(const L in u)k[N++]=L;return k}}}function Au(u,k){if(u.forEach&&typeof u.forEach=="function")u.forEach(k,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,k,void 0);else for(var N=Ig(u),L=Sg(u),Q=L.length,X=0;X<Q;X++)k.call(void 0,L[X],N&&N[X],u)}var ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Og(u,k){if(u){u=u.split("&");for(var N=0;N<u.length;N++){var L=u[N].indexOf("="),Q=null;if(0<=L){var X=u[N].substring(0,L);Q=u[N].substring(L+1)}else X=u[N];k(X,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Cn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cn){this.h=u.h,Ui(this,u.j),this.o=u.o,this.g=u.g,Bi(this,u.s),this.l=u.l;var k=u.i,N=new Kr;N.i=k.i,k.g&&(N.g=new Map(k.g),N.h=k.h),Su(this,N),this.m=u.m}else u&&(k=String(u).match(ku))?(this.h=!1,Ui(this,k[1]||"",!0),this.o=zr(k[2]||""),this.g=zr(k[3]||"",!0),Bi(this,k[4]),this.l=zr(k[5]||"",!0),Su(this,k[6]||"",!0),this.m=zr(k[7]||"")):(this.h=!1,this.i=new Kr(null,this.h))}Cn.prototype.toString=function(){var u=[],k=this.j;k&&u.push(Hr(k,Iu,!0),":");var N=this.g;return(N||k=="file")&&(u.push("//"),(k=this.o)&&u.push(Hr(k,Iu,!0),"@"),u.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&u.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&u.push("/"),u.push(Hr(N,N.charAt(0)=="/"?Rg:Ng,!0))),(N=this.i.toString())&&u.push("?",N),(N=this.m)&&u.push("#",Hr(N,jg)),u.join("")};function Qt(u){return new Cn(u)}function Ui(u,k,N){u.j=N?zr(k,!0):k,u.j&&(u.j=u.j.replace(/:$/,""))}function Bi(u,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);u.s=k}else u.s=null}function Su(u,k,N){k instanceof Kr?(u.i=k,Lg(u.i,u.h)):(N||(k=Hr(k,Cg)),u.i=new Kr(k,u.h))}function Be(u,k,N){u.i.set(k,N)}function zi(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function zr(u,k){return u?k?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,k,N){return typeof u=="string"?(u=encodeURI(u).replace(k,Pg),N&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pg(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Iu=/[#\/\?@]/g,Ng=/[#\?:]/g,Rg=/[#\?]/g,Cg=/[#\?@]/g,jg=/#/g;function Kr(u,k){this.h=this.g=null,this.i=u||null,this.j=!!k}function cn(u){u.g||(u.g=new Map,u.h=0,u.i&&Og(u.i,function(k,N){u.add(decodeURIComponent(k.replace(/\+/g," ")),N)}))}r=Kr.prototype,r.add=function(u,k){cn(this),this.i=null,u=Gn(this,u);var N=this.g.get(u);return N||this.g.set(u,N=[]),N.push(k),this.h+=1,this};function Ou(u,k){cn(u),k=Gn(u,k),u.g.has(k)&&(u.i=null,u.h-=u.g.get(k).length,u.g.delete(k))}function Pu(u,k){return cn(u),k=Gn(u,k),u.g.has(k)}r.forEach=function(u,k){cn(this),this.g.forEach(function(N,L){N.forEach(function(Q){u.call(k,Q,L,this)},this)},this)},r.na=function(){cn(this);const u=Array.from(this.g.values()),k=Array.from(this.g.keys()),N=[];for(let L=0;L<k.length;L++){const Q=u[L];for(let X=0;X<Q.length;X++)N.push(k[L])}return N},r.V=function(u){cn(this);let k=[];if(typeof u=="string")Pu(this,u)&&(k=k.concat(this.g.get(Gn(this,u))));else{u=Array.from(this.g.values());for(let N=0;N<u.length;N++)k=k.concat(u[N])}return k},r.set=function(u,k){return cn(this),this.i=null,u=Gn(this,u),Pu(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[k]),this.h+=1,this},r.get=function(u,k){return u?(u=this.V(u),0<u.length?String(u[0]):k):k};function Nu(u,k,N){Ou(u,k),0<N.length&&(u.i=null,u.g.set(Gn(u,k),y(N)),u.h+=N.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],k=Array.from(this.g.keys());for(var N=0;N<k.length;N++){var L=k[N];const X=encodeURIComponent(String(L)),ue=this.V(L);for(L=0;L<ue.length;L++){var Q=X;ue[L]!==""&&(Q+="="+encodeURIComponent(String(ue[L]))),u.push(Q)}}return this.i=u.join("&")};function Gn(u,k){return k=String(k),u.j&&(k=k.toLowerCase()),k}function Lg(u,k){k&&!u.j&&(cn(u),u.i=null,u.g.forEach(function(N,L){var Q=L.toLowerCase();L!=Q&&(Ou(this,L),Nu(this,Q,N))},u)),u.j=k}function Dg(u,k){const N=new Ur;if(a.Image){const L=new Image;L.onload=p(hn,N,"TestLoadImage: loaded",!0,k,L),L.onerror=p(hn,N,"TestLoadImage: error",!1,k,L),L.onabort=p(hn,N,"TestLoadImage: abort",!1,k,L),L.ontimeout=p(hn,N,"TestLoadImage: timeout",!1,k,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=u}else k(!1)}function Mg(u,k){const N=new Ur,L=new AbortController,Q=setTimeout(()=>{L.abort(),hn(N,"TestPingServer: timeout",!1,k)},1e4);fetch(u,{signal:L.signal}).then(X=>{clearTimeout(Q),X.ok?hn(N,"TestPingServer: ok",!0,k):hn(N,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(Q),hn(N,"TestPingServer: error",!1,k)})}function hn(u,k,N,L,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),L(N)}catch{}}function Vg(){this.g=new bg}function $g(u,k,N){const L=N||"";try{Au(u,function(Q,X){let ue=Q;h(Q)&&(ue=Ao(Q)),k.push(L+X+"="+encodeURIComponent(ue))})}catch(Q){throw k.push(L+"type="+encodeURIComponent("_badmap")),Q}}function Hi(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Hi,ko),Hi.prototype.g=function(){return new Ki(this.l,this.j)},Hi.prototype.i=function(u){return function(){return u}}({});function Ki(u,k){Me.call(this),this.D=u,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ki,Me),r=Ki.prototype,r.open=function(u,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=k,this.readyState=1,Wr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(k.body=u),(this.D||a).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ru(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ru(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var k=u.value?u.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!u.done}))&&(this.response=this.responseText+=k)}u.done?Gr(this):Wr(this),this.readyState==3&&Ru(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Gr(this))},r.Qa=function(u){this.g&&(this.response=u,Gr(this))},r.ga=function(){this.g&&Gr(this)};function Gr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wr(u)}r.setRequestHeader=function(u,k){this.u.append(u,k)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],k=this.h.entries();for(var N=k.next();!N.done;)N=N.value,u.push(N[0]+": "+N[1]),N=k.next();return u.join(`\r
`)};function Wr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cu(u){let k="";return C(u,function(N,L){k+=L,k+=":",k+=N,k+=`\r
`}),k}function Do(u,k,N){e:{for(L in N){var L=!1;break e}L=!0}L||(N=Cu(N),typeof u=="string"?N!=null&&encodeURIComponent(String(N)):Be(u,k,N))}function Qe(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Qe,Me);var qg=/^https?$/i,Fg=["POST","PUT"];r=Qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,k,N,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);k=k?k.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oo.g(),this.v=this.o?lu(this.o):lu(Oo),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(k,String(u),!0),this.B=!1}catch(X){ju(this,X);return}if(u=N||"",N=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Q in L)N.set(Q,L[Q]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const X of L.keys())N.set(X,L.get(X));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(N.keys()).find(X=>X.toLowerCase()=="content-type"),Q=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fg,k,void 0))||L||Q||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of N)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mu(this),this.u=!0,this.g.send(u),this.u=!1}catch(X){ju(this,X)}};function ju(u,k){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=k,u.m=5,Lu(u),Gi(u)}function Lu(u){u.A||(u.A=!0,Ue(u,"complete"),Ue(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ue(this,"complete"),Ue(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Du(this):this.bb())},r.bb=function(){Du(this)};function Du(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)Mi(u.Ea,0,u);else if(Ue(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const ue=u.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var N;if(!(N=k)){var L;if(L=ue===0){var Q=String(u.D).match(ku)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),L=!qg.test(Q?Q.toLowerCase():"")}N=L}if(N)Ue(u,"complete"),Ue(u,"success");else{u.m=6;try{var X=2<Yt(u)?u.g.statusText:""}catch{X=""}u.l=X+" ["+u.Z()+"]",Lu(u)}}finally{Gi(u)}}}}function Gi(u,k){if(u.g){Mu(u);const N=u.g,L=u.v[0]?()=>{}:null;u.g=null,u.v=null,k||Ue(u,"ready");try{N.onreadystatechange=L}catch{}}}function Mu(u){u.I&&(a.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var k=this.g.responseText;return u&&k.indexOf(u)==0&&(k=k.substring(u.length)),_g(k)}};function Vu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ug(u){const k={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<u.length;L++){if(b(u[L]))continue;var N=x(u[L]);const Q=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const X=k[Q]||[];k[Q]=X,X.push(N)}w(k,function(L){return L.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(u,k,N){return N&&N.internalChannelParams&&N.internalChannelParams[u]||k}function $u(u){this.Aa=0,this.i=[],this.j=new Ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,u),this.cb=Qr("retryDelaySeedMs",1e4,u),this.Wa=Qr("forwardChannelMaxRetries",2,u),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bu(u&&u.concurrentRequestLimit),this.Da=new Vg,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=$u.prototype,r.la=8,r.G=1,r.connect=function(u,k,N,L){_t(0),this.W=u,this.H=k||{},N&&L!==void 0&&(this.H.OSID=N,this.H.OAID=L),this.F=this.X,this.I=Wu(this,null,this.W),Qi(this)};function Mo(u){if(qu(u),u.G==3){var k=u.U++,N=Qt(u.I);if(Be(N,"SID",u.K),Be(N,"RID",k),Be(N,"TYPE","terminate"),Yr(u,N),k=new un(u,u.j,k),k.L=2,k.v=zi(Qt(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(k.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=k.v,N=!0),N||(k.g=Qu(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Fi(k)}Gu(u)}function Wi(u){u.g&&($o(u),u.g.cancel(),u.g=null)}function qu(u){Wi(u),u.u&&(a.clearTimeout(u.u),u.u=null),Yi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Qi(u){if(!wu(u.h)&&!u.s){u.s=!0;var k=u.Ga;K||F(),te||(K(),te=!0),z.add(k,u),u.B=0}}function Bg(u,k){return Eu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=k.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Fr(f(u.Ga,u,k),Ku(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const Q=new un(this,this.j,u);let X=this.o;if(this.S&&(X?(X=E(X),T(X,this.S)):X=this.S),this.m!==null||this.O||(Q.H=X,X=null),this.P)e:{for(var k=0,N=0;N<this.i.length;N++){t:{var L=this.i[N];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(k+=L,4096<k){k=N;break e}if(k===4096||N===this.i.length-1){k=N+1;break e}}k=1e3}else k=1e3;k=Uu(this,Q,k),N=Qt(this.I),Be(N,"RID",u),Be(N,"CVER",22),this.D&&Be(N,"X-HTTP-Session-Id",this.D),Yr(this,N),X&&(this.O?k="headers="+encodeURIComponent(String(Cu(X)))+"&"+k:this.m&&Do(N,this.m,X)),Lo(this.h,Q),this.Ua&&Be(N,"TYPE","init"),this.P?(Be(N,"$req",k),Be(N,"SID","null"),Q.T=!0,No(Q,N,null)):No(Q,N,k),this.G=2}}else this.G==3&&(u?Fu(this,u):this.i.length==0||wu(this.h)||Fu(this))};function Fu(u,k){var N;k?N=k.l:N=u.U++;const L=Qt(u.I);Be(L,"SID",u.K),Be(L,"RID",N),Be(L,"AID",u.T),Yr(u,L),u.m&&u.o&&Do(L,u.m,u.o),N=new un(u,u.j,N,u.B+1),u.m===null&&(N.H=u.o),k&&(u.i=k.D.concat(u.i)),k=Uu(u,N,1e3),N.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Lo(u.h,N),No(N,L,k)}function Yr(u,k){u.H&&C(u.H,function(N,L){Be(k,L,N)}),u.l&&Au({},function(N,L){Be(k,L,N)})}function Uu(u,k,N){N=Math.min(u.i.length,N);var L=u.l?f(u.l.Na,u.l,u):null;e:{var Q=u.i;let X=-1;for(;;){const ue=["count="+N];X==-1?0<N?(X=Q[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let $e=!0;for(let lt=0;lt<N;lt++){let Le=Q[lt].g;const ft=Q[lt].map;if(Le-=X,0>Le)X=Math.max(0,Q[lt].g-100),$e=!1;else try{$g(ft,ue,"req"+Le+"_")}catch{L&&L(ft)}}if($e){L=ue.join("&");break e}}}return u=u.i.splice(0,N),k.D=u,L}function Bu(u){if(!u.g&&!u.u){u.Y=1;var k=u.Fa;K||F(),te||(K(),te=!0),z.add(k,u),u.v=0}}function Vo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Fr(f(u.Fa,u),Ku(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Fr(f(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Wi(this),zu(this))};function $o(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zu(u){u.g=new un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var k=Qt(u.qa);Be(k,"RID","rpc"),Be(k,"SID",u.K),Be(k,"AID",u.T),Be(k,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(k,"TO",u.ja),Be(k,"TYPE","xmlhttp"),Yr(u,k),u.m&&u.o&&Do(k,u.m,u.o),u.L&&(u.g.I=u.L);var N=u.g;u=u.ia,N.L=1,N.v=zi(Qt(k)),N.m=null,N.P=!0,yu(N,u)}r.Za=function(){this.C!=null&&(this.C=null,Wi(this),Vo(this),_t(19))};function Yi(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hu(u,k){var N=null;if(u.g==k){Yi(u),$o(u),u.g=null;var L=2}else if(jo(u.h,k))N=k.D,Tu(u.h,k),L=1;else return;if(u.G!=0){if(k.o)if(L==1){N=k.m?k.m.length:0,k=Date.now()-k.F;var Q=u.B;L=Vi(),Ue(L,new du(L,N)),Qi(u)}else Bu(u);else if(Q=k.s,Q==3||Q==0&&0<k.X||!(L==1&&Bg(u,k)||L==2&&Vo(u)))switch(N&&0<N.length&&(k=u.h,k.i=k.i.concat(N)),Q){case 1:jn(u,5);break;case 4:jn(u,10);break;case 3:jn(u,6);break;default:jn(u,2)}}}function Ku(u,k){let N=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(N*=2),N*k}function jn(u,k){if(u.j.info("Error code "+k),k==2){var N=f(u.fb,u),L=u.Xa;const Q=!L;L=new Cn(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ui(L,"https"),zi(L),Q?Dg(L.toString(),N):Mg(L.toString(),N)}else _t(2);u.G=0,u.l&&u.l.sa(k),Gu(u),qu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Gu(u){if(u.G=0,u.ka=[],u.l){const k=xu(u.h);(k.length!=0||u.i.length!=0)&&(g(u.ka,k),g(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function Wu(u,k,N){var L=N instanceof Cn?Qt(N):new Cn(N);if(L.g!="")k&&(L.g=k+"."+L.g),Bi(L,L.s);else{var Q=a.location;L=Q.protocol,k=k?k+"."+Q.hostname:Q.hostname,Q=+Q.port;var X=new Cn(null);L&&Ui(X,L),k&&(X.g=k),Q&&Bi(X,Q),N&&(X.l=N),L=X}return N=u.D,k=u.ya,N&&k&&Be(L,N,k),Be(L,"VER",u.la),Yr(u,L),L}function Qu(u,k,N){if(k&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=u.Ca&&!u.pa?new Qe(new Hi({eb:N})):new Qe(u.pa),k.Ha(u.J),k}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yu(){}r=Yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ji(){}Ji.prototype.g=function(u,k){return new St(u,k)};function St(u,k){Me.call(this),this.g=new $u(k),this.l=u,this.h=k&&k.messageUrlParams||null,u=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(u?u["X-WebChannel-Content-Type"]=k.messageContentType:u={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(u?u["X-WebChannel-Client-Profile"]=k.va:u={"X-WebChannel-Client-Profile":k.va}),this.g.S=u,(u=k&&k.Sb)&&!b(u)&&(this.g.m=u),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!b(k)&&(this.g.D=k,u=this.h,u!==null&&k in u&&(u=this.h,k in u&&delete u[k])),this.j=new Wn(this)}v(St,Me),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Mo(this.g)},St.prototype.o=function(u){var k=this.g;if(typeof u=="string"){var N={};N.__data__=u,u=N}else this.u&&(N={},N.__data__=Ao(u),u=N);k.i.push(new kg(k.Ya++,u)),k.G==3&&Qi(k)},St.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,St.aa.N.call(this)};function Ju(u){So.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var k=u.__sm__;if(k){e:{for(const N in k){u=N;break e}u=void 0}(this.i=u)&&(u=this.i,k=k!==null&&u in k?k[u]:void 0),this.data=k}else this.data=u}v(Ju,So);function Xu(){Io.call(this),this.status=1}v(Xu,Io);function Wn(u){this.g=u}v(Wn,Yu),Wn.prototype.ua=function(){Ue(this.g,"a")},Wn.prototype.ta=function(u){Ue(this.g,new Ju(u))},Wn.prototype.sa=function(u){Ue(this.g,new Xu)},Wn.prototype.ra=function(){Ue(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Of=function(){return new Ji},If=function(){return Vi()},Sf=Nn,ya={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,gs=$i,pu.COMPLETE="complete",kf=pu,uu.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",Me.prototype.listen=Me.prototype.K,ni=uu,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Af=Qe}).apply(typeof Zi<"u"?Zi:typeof self<"u"?self:typeof window<"u"?window:{});const lc="@firebase/firestore",uc="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wr="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Qg("@firebase/firestore");function nr(){return Fn.logLevel}function de(r,...e){if(Fn.logLevel<=en.DEBUG){const t=e.map(Za);Fn.debug(`Firestore (${wr}): ${r}`,...t)}}function on(r,...e){if(Fn.logLevel<=en.ERROR){const t=e.map(Za);Fn.error(`Firestore (${wr}): ${r}`,...t)}}function cr(r,...e){if(Fn.logLevel<=en.WARN){const t=e.map(Za);Fn.warn(`Firestore (${wr}): ${r}`,...t)}}function Za(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(r="Unexpected state"){const e=`FIRESTORE (${wr}) INTERNAL ASSERTION FAILED: `+r;throw on(e),new Error(e)}function De(r,e){r||ye()}function be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Xg{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gt.UNAUTHENTICATED))}shutdown(){}}class Fy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Uy{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(De(typeof n.accessToken=="string"),new Pf(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new gt(e)}}class By{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zy{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new By(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hy{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Zg(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){De(this.o===void 0);const n=s=>{s.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new cc(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new cc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Ky(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Oe(r,e){return r<e?-1:r>e?1:0}function va(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return Oe(n,i);{const s=Nf(),o=Gy(s.encode(hc(r,t)),s.encode(hc(e,t)));return o!==0?o:Oe(n,i)}}t+=n>65535?2:1}return Oe(r.length,e.length)}function hc(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Gy(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Oe(r[t],e[t]);return Oe(r.length,e.length)}function hr(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-62135596800,dc=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*dc);return new it(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fc)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dc}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-fc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new it(0,0))}static max(){return new ve(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="__name__";class Bt{constructor(e,t,n){t===void 0?t=0:t>e.length&&ye(),n===void 0?n=e.length-t:n>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Bt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bt?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=Bt.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Oe(e.length,t.length)}static compareSegments(e,t){const n=Bt.isNumericId(e),i=Bt.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Bt.extractNumericId(e).compare(Bt.extractNumericId(t)):va(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yn.fromString(e.substring(4,e.length-2))}}class He extends Bt{construct(e,t,n){return new He(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new He(t)}static emptyPath(){return new He([])}}const Wy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Bt{construct(e,t,n){return new ct(e,t,n)}static isValidIdentifier(e){return Wy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pc}static keyField(){return new ct([pc])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(n+=a,i++):(s(),i++)}if(s(),o)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(t)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(He.fromString(e))}static fromName(e){return new me(He.fromString(e).popFirst(5))}static empty(){return new me(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new He(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function Qy(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(n===1e9?new it(t+1,0):new it(t,n));return new _n(i,me.empty(),e)}function Yy(r){return new _n(r.readTime,r.key,gi)}class _n{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _n(ve.min(),me.empty(),gi)}static max(){return new _n(ve.max(),me.empty(),gi)}}function Jy(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(r.documentKey,e.documentKey),t!==0?t:Oe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==Xy)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,n)=>{t(e)})}static reject(e){return new ie((t,n)=>{n(e)})}static waitFor(e){return new ie((t,n)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>n(l))}),o=!0,s===i&&t()})}static or(e){let t=ie.resolve(!1);for(const n of e)t=t.next(i=>i?ie.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new ie((n,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;t(e[h]).next(c=>{o[h]=c,++a,a===s&&n(o)},c=>i(c))}})}static doWhile(e,t){return new ie((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function e0(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Tr(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Hs.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=-1;function Ks(r){return r==null}function Ts(r){return r===0&&1/r==-1/0}function t0(r){return typeof r=="number"&&Number.isInteger(r)&&!Ts(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="";function n0(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=gc(e)),e=r0(r.get(t),e);return gc(e)}function r0(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case Cf:t+="";break;default:t+=s}}return t}function gc(r){return r+Cf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function An(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function jf(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,t){this.comparator=e,this.root=t||ut.EMPTY}insert(e,t){return new We(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new es(this.root,e,this.comparator,!1)}getReverseIterator(){return new es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new es(this.root,e,this.comparator,!0)}}class es{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??ut.RED,this.left=i??ut.EMPTY,this.right=s??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new ut(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ut.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,n,i,s){return this}insert(e,t,n){return new ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yc(this.data.getIterator())}getIteratorFrom(e){return new yc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class yc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Ot([])}unionWith(e){let t=new st(ct.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hr(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lf("Invalid base64 string: "+s):s}}(e);return new ht(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const i0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(r){if(De(!!r),typeof r=="string"){let e=0;const t=i0.exec(r);if(De(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Je(r.seconds),nanos:Je(r.nanos)}}function Je(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function wn(r){return typeof r=="string"?ht.fromBase64String(r):ht.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="server_timestamp",Mf="__type__",Vf="__previous_value__",$f="__local_write_time__";function tl(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mf])===null||t===void 0?void 0:t.stringValue)===Df}function Gs(r){const e=r.mapValue.fields[Vf];return tl(e)?Gs(e):e}function mi(r){const e=bn(r.mapValue.fields[$f].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,t,n,i,s,o,a,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h}}const xs="(default)";class yi{constructor(e,t){this.projectId=e,this.database=t||xs}static empty(){return new yi("","")}get isDefaultDatabase(){return this.database===xs}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="__type__",Ff="__max__",ts={mapValue:{fields:{__type__:{stringValue:Ff}}}},Uf="__vector__",As="value";function En(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?tl(r)?4:a0(r)?9007199254740991:o0(r)?10:11:ye()}function Gt(r,e){if(r===e)return!0;const t=En(r);if(t!==En(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return mi(r).isEqual(mi(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bn(i.timestampValue),a=bn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return wn(i.bytesValue).isEqual(wn(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?Ts(o)===Ts(a):isNaN(o)&&isNaN(a)}return!1}(r,e);case 9:return hr(r.arrayValue.values||[],e.arrayValue.values||[],Gt);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(mc(o)!==mc(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Gt(o[l],a[l])))return!1;return!0}(r,e);default:return ye()}}function vi(r,e){return(r.values||[]).find(t=>Gt(t,e))!==void 0}function fr(r,e){if(r===e)return 0;const t=En(r),n=En(e);if(t!==n)return Oe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(r,e);case 3:return vc(r.timestampValue,e.timestampValue);case 4:return vc(mi(r),mi(e));case 5:return va(r.stringValue,e.stringValue);case 6:return function(s,o){const a=wn(s),l=wn(o);return a.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const c=Oe(a[h],l[h]);if(c!==0)return c}return Oe(a.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Oe(Je(s.latitude),Je(o.latitude));return a!==0?a:Oe(Je(s.longitude),Je(o.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return _c(r.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,h,c;const d=s.fields||{},f=o.fields||{},p=(a=d[As])===null||a===void 0?void 0:a.arrayValue,v=(l=f[As])===null||l===void 0?void 0:l.arrayValue,y=Oe(((h=p==null?void 0:p.values)===null||h===void 0?void 0:h.length)||0,((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0);return y!==0?y:_c(p,v)}(r.mapValue,e.mapValue);case 11:return function(s,o){if(s===ts.mapValue&&o===ts.mapValue)return 0;if(s===ts.mapValue)return 1;if(o===ts.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),h=o.fields||{},c=Object.keys(h);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=va(l[d],c[d]);if(f!==0)return f;const p=fr(a[l[d]],h[c[d]]);if(p!==0)return p}return Oe(l.length,c.length)}(r.mapValue,e.mapValue);default:throw ye()}}function vc(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const t=bn(r),n=bn(e),i=Oe(t.seconds,n.seconds);return i!==0?i:Oe(t.nanos,n.nanos)}function _c(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=fr(t[i],n[i]);if(s)return s}return Oe(t.length,n.length)}function dr(r){return _a(r)}function _a(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=bn(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return wn(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return me.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=_a(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of n)s?s=!1:i+=",",i+=`${o}:${_a(t.fields[o])}`;return i+"}"}(r.mapValue):ye()}function ms(r){switch(En(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gs(r);return e?16+ms(e):16;case 5:return 2*r.stringValue.length;case 6:return wn(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+ms(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return An(n.fields,(s,o)=>{i+=s.length+ms(o)}),i}(r.mapValue);default:throw ye()}}function bc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ba(r){return!!r&&"integerValue"in r}function nl(r){return!!r&&"arrayValue"in r}function wc(r){return!!r&&"nullValue"in r}function Ec(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ys(r){return!!r&&"mapValue"in r}function o0(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[qf])===null||t===void 0?void 0:t.stringValue)===Uf}function ai(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return An(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=ai(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ai(r.arrayValue.values[t]);return e}return Object.assign({},r)}function a0(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ff}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ys(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ai(t)}setAll(e){let t=ct.emptyPath(),n={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,n,i),n={},i=[],t=a.popLast()}o?n[a.lastSegment()]=ai(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());ys(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];ys(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){An(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new kt(ai(this.value))}}function Bf(r){const e=[];return An(r.fields,(t,n)=>{const i=new ct([t]);if(ys(n)){const s=Bf(n.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,n,i,s,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ve.min(),ve.min(),ve.min(),kt.empty(),0)}static newFoundDocument(e,t,n,i){return new mt(e,1,t,ve.min(),n,i,0)}static newNoDocument(e,t){return new mt(e,2,t,ve.min(),ve.min(),kt.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,ve.min(),ve.min(),kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.position=e,this.inclusive=t}}function Tc(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],o=r.position[i];if(s.field.isKeyField()?n=me.comparator(me.fromName(o.referenceValue),t.key):n=fr(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function xc(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Gt(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t="asc"){this.field=e,this.dir=t}}function l0(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{}class nt extends zf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new c0(e,t,n):t==="array-contains"?new d0(e,n):t==="in"?new p0(e,n):t==="not-in"?new g0(e,n):t==="array-contains-any"?new m0(e,n):new nt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new h0(e,n):new f0(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fr(t,this.value)):t!==null&&En(this.value)===En(t)&&this.matchesComparison(fr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vt extends zf{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Vt(e,t)}matches(e){return Hf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Hf(r){return r.op==="and"}function Kf(r){return u0(r)&&Hf(r)}function u0(r){for(const e of r.filters)if(e instanceof Vt)return!1;return!0}function wa(r){if(r instanceof nt)return r.field.canonicalString()+r.op.toString()+dr(r.value);if(Kf(r))return r.filters.map(e=>wa(e)).join(",");{const e=r.filters.map(t=>wa(t)).join(",");return`${r.op}(${e})`}}function Gf(r,e){return r instanceof nt?function(n,i){return i instanceof nt&&n.op===i.op&&n.field.isEqual(i.field)&&Gt(n.value,i.value)}(r,e):r instanceof Vt?function(n,i){return i instanceof Vt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,a)=>s&&Gf(o,i.filters[a]),!0):!1}(r,e):void ye()}function Wf(r){return r instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${dr(t.value)}`}(r):r instanceof Vt?function(t){return t.op.toString()+" {"+t.getFilters().map(Wf).join(" ,")+"}"}(r):"Filter"}class c0 extends nt{constructor(e,t,n){super(e,t,n),this.key=me.fromName(n.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class h0 extends nt{constructor(e,t){super(e,"in",t),this.keys=Qf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class f0 extends nt{constructor(e,t){super(e,"not-in",t),this.keys=Qf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qf(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>me.fromName(n.referenceValue))}class d0 extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nl(t)&&vi(t.arrayValue,this.value)}}class p0 extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vi(this.value.arrayValue,t)}}class g0 extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!vi(this.value.arrayValue,t)}}class m0 extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>vi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t=null,n=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function Ac(r,e=null,t=[],n=[],i=null,s=null,o=null){return new y0(r,e,t,n,i,s,o)}function rl(r){const e=be(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>wa(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Ks(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>dr(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>dr(n)).join(",")),e.le=t}return e.le}function il(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!l0(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Gf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!xc(r.startAt,e.startAt)&&xc(r.endAt,e.endAt)}function Ea(r){return me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t=null,n=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function v0(r,e,t,n,i,s,o,a){return new xr(r,e,t,n,i,s,o,a)}function Ws(r){return new xr(r)}function kc(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Yf(r){return r.collectionGroup!==null}function li(r){const e=be(r);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new _i(s,n))}),t.has(ct.keyField().canonicalString())||e.he.push(new _i(ct.keyField(),n))}return e.he}function zt(r){const e=be(r);return e.Pe||(e.Pe=_0(e,li(r))),e.Pe}function _0(r,e){if(r.limitType==="F")return Ac(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new _i(i.field,s)});const t=r.endAt?new ks(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new ks(r.startAt.position,r.startAt.inclusive):null;return Ac(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Ta(r,e){const t=r.filters.concat([e]);return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function xa(r,e,t){return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Qs(r,e){return il(zt(r),zt(e))&&r.limitType===e.limitType}function Jf(r){return`${rl(zt(r))}|lt:${r.limitType}`}function rr(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>Wf(i)).join(", ")}]`),Ks(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>dr(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>dr(i)).join(",")),`Target(${n})`}(zt(r))}; limitType=${r.limitType})`}function Ys(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):me.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of li(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(o,a,l){const h=Tc(o,a,l);return o.inclusive?h<=0:h<0}(n.startAt,li(n),i)||n.endAt&&!function(o,a,l){const h=Tc(o,a,l);return o.inclusive?h>=0:h>0}(n.endAt,li(n),i))}(r,e)}function b0(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Xf(r){return(e,t)=>{let n=!1;for(const i of li(r)){const s=w0(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function w0(r,e,t){const n=r.field.isKeyField()?me.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),h=a.data.field(s);return l!==null&&h!==null?fr(l,h):ye()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){An(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return jf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new We(me.comparator);function an(){return E0}const Zf=new We(me.comparator);function ri(...r){let e=Zf;for(const t of r)e=e.insert(t.key,t);return e}function ed(r){let e=Zf;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function $n(){return ui()}function td(){return ui()}function ui(){return new Bn(r=>r.toString(),(r,e)=>r.isEqual(e))}const T0=new We(me.comparator),x0=new st(me.comparator);function Ce(...r){let e=x0;for(const t of r)e=e.add(t);return e}const A0=new st(Oe);function k0(){return A0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ts(e)?"-0":e}}function nd(r){return{integerValue:""+r}}function S0(r,e){return t0(e)?nd(e):sl(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this._=void 0}}function I0(r,e,t){return r instanceof Ss?function(i,s){const o={fields:{[Mf]:{stringValue:Df},[$f]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tl(s)&&(s=Gs(s)),s&&(o.fields[Vf]=s),{mapValue:o}}(t,e):r instanceof bi?id(r,e):r instanceof wi?sd(r,e):function(i,s){const o=rd(i,s),a=Sc(o)+Sc(i.Ie);return ba(o)&&ba(i.Ie)?nd(a):sl(i.serializer,a)}(r,e)}function O0(r,e,t){return r instanceof bi?id(r,e):r instanceof wi?sd(r,e):t}function rd(r,e){return r instanceof Is?function(n){return ba(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Ss extends Js{}class bi extends Js{constructor(e){super(),this.elements=e}}function id(r,e){const t=od(e);for(const n of r.elements)t.some(i=>Gt(i,n))||t.push(n);return{arrayValue:{values:t}}}class wi extends Js{constructor(e){super(),this.elements=e}}function sd(r,e){let t=od(e);for(const n of r.elements)t=t.filter(i=>!Gt(i,n));return{arrayValue:{values:t}}}class Is extends Js{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Sc(r){return Je(r.integerValue||r.doubleValue)}function od(r){return nl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function P0(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof bi&&i instanceof bi||n instanceof wi&&i instanceof wi?hr(n.elements,i.elements,Gt):n instanceof Is&&i instanceof Is?Gt(n.Ie,i.Ie):n instanceof Ss&&i instanceof Ss}(r.transform,e.transform)}class N0{constructor(e,t){this.version=e,this.transformResults=t}}class wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wt}static exists(e){return new wt(void 0,e)}static updateTime(e){return new wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vs(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xs{}function ad(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zs(r.key,wt.none()):new xi(r.key,r.data,wt.none());{const t=r.data,n=kt.empty();let i=new st(ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),i=i.add(s)}return new kn(r.key,n,new Ot(i.toArray()),wt.none())}}function R0(r,e,t){r instanceof xi?function(i,s,o){const a=i.value.clone(),l=Oc(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(r,e,t):r instanceof kn?function(i,s,o){if(!vs(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Oc(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ld(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(r,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ci(r,e,t,n){return r instanceof xi?function(s,o,a,l){if(!vs(s.precondition,o))return a;const h=s.value.clone(),c=Pc(s.fieldTransforms,l,o);return h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(r,e,t,n):r instanceof kn?function(s,o,a,l){if(!vs(s.precondition,o))return a;const h=Pc(s.fieldTransforms,l,o),c=o.data;return c.setAll(ld(s)),c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(r,e,t,n):function(s,o,a){return vs(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(r,e,t)}function C0(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=rd(n.transform,i||null);s!=null&&(t===null&&(t=kt.empty()),t.set(n.field,s))}return t||null}function Ic(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&hr(n,i,(s,o)=>P0(s,o))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class xi extends Xs{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kn extends Xs{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ld(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Oc(r,e,t){const n=new Map;De(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],o=s.transform,a=e.data.field(s.field);n.set(s.field,O0(o,a,t[i]))}return n}function Pc(r,e,t){const n=new Map;for(const i of r){const s=i.transform,o=t.data.field(i.field);n.set(i.field,I0(s,o,e))}return n}class Zs extends Xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j0 extends Xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&R0(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ci(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ci(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=td();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=ad(o,a);l!==null&&n.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&hr(this.mutations,e.mutations,(t,n)=>Ic(t,n))&&hr(this.baseMutations,e.baseMutations,(t,n)=>Ic(t,n))}}class ol{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){De(e.mutations.length===n.length);let i=function(){return T0}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,n[o].version);return new ol(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,je;function V0(r){switch(r){case ne.OK:return ye();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ye()}}function ud(r){if(r===void 0)return on("GRPC error has no .code"),ne.UNKNOWN;switch(r){case tt.OK:return ne.OK;case tt.CANCELLED:return ne.CANCELLED;case tt.UNKNOWN:return ne.UNKNOWN;case tt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case tt.INTERNAL:return ne.INTERNAL;case tt.UNAVAILABLE:return ne.UNAVAILABLE;case tt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case tt.NOT_FOUND:return ne.NOT_FOUND;case tt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case tt.ABORTED:return ne.ABORTED;case tt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case tt.DATA_LOSS:return ne.DATA_LOSS;default:return ye()}}(je=tt||(tt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new yn([4294967295,4294967295],0);function Nc(r){const e=Nf().encode(r),t=new xf;return t.update(e),new Uint8Array(t.digest())}function Rc(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yn([t,n],0),new yn([i,s],0)]}class al{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ii(`Invalid padding: ${t}`);if(n<0)throw new ii(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ii(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ii(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=yn.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(yn.fromNumber(n)));return i.compare($0)===1&&(i=new yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Nc(e),[n,i]=Rc(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(n,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new al(s,i,t);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=Nc(e),[n,i]=Rc(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(n,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Ai.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new eo(ve.min(),i,new We(Oe),an(),Ce())}}class Ai{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ai(n,t,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class cd{constructor(e,t){this.targetId=e,this.ge=t}}class hd{constructor(e,t,n=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Cc{constructor(){this.pe=0,this.ye=jc(),this.we=ht.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ce(),t=Ce(),n=Ce();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:ye()}}),new Ai(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=jc()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,De(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class q0{constructor(e){this.ke=e,this.qe=new Map,this.Qe=an(),this.$e=ns(),this.Ue=ns(),this.Ke=new We(Oe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(Ea(s))if(n===0){const o=new me(s.path);this.ze(t,o,mt.newNoDocument(o,ve.min()))}else De(n===1);else{const o=this.et(t);if(o!==n){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=wn(n).toUint8Array()}catch(l){if(l instanceof Lf)return cr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new al(o,i,s)}catch(l){return cr(l instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&Ea(a.target)){const l=new me(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,mt.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let n=Ce();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Xe(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new eo(e,t,this.Ke,this.Qe,n);return this.Qe=an(),this.$e=ns(),this.Ue=ns(),this.Ke=new We(Oe),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Cc,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new st(Oe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new st(Oe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Cc),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function ns(){return new We(me.comparator)}function jc(){return new We(me.comparator)}const F0={asc:"ASCENDING",desc:"DESCENDING"},U0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B0={and:"AND",or:"OR"};class z0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Aa(r,e){return r.useProto3Json||Ks(e)?e:{value:e}}function Os(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fd(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function H0(r,e){return Os(r,e.toTimestamp())}function Ht(r){return De(!!r),ve.fromTimestamp(function(t){const n=bn(t);return new it(n.seconds,n.nanos)}(r))}function ll(r,e){return ka(r,e).canonicalString()}function ka(r,e){const t=function(i){return new He(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function dd(r){const e=He.fromString(r);return De(vd(e)),e}function Sa(r,e){return ll(r.databaseId,e.path)}function Fo(r,e){const t=dd(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new me(gd(t))}function pd(r,e){return ll(r.databaseId,e)}function K0(r){const e=dd(r);return e.length===4?He.emptyPath():gd(e)}function Ia(r){return new He(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gd(r){return De(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Lc(r,e,t){return{name:Sa(r,e),fields:t.value.mapValue.fields}}function G0(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,c){return h.useProto3Json?(De(c===void 0||typeof c=="string"),ht.fromBase64String(c||"")):(De(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ht.fromUint8Array(c||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const c=h.code===void 0?ne.UNKNOWN:ud(h.code);return new fe(c,h.message||"")}(o);t=new hd(n,i,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Fo(r,n.document.name),s=Ht(n.document.updateTime),o=n.document.createTime?Ht(n.document.createTime):ve.min(),a=new kt({mapValue:{fields:n.document.fields}}),l=mt.newFoundDocument(i,s,o,a),h=n.targetIds||[],c=n.removedTargetIds||[];t=new _s(h,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Fo(r,n.document),s=n.readTime?Ht(n.readTime):ve.min(),o=mt.newNoDocument(i,s),a=n.removedTargetIds||[];t=new _s([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Fo(r,n.document),s=n.removedTargetIds||[];t=new _s([],s,i,null)}else{if(!("filter"in e))return ye();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,o=new M0(i,s),a=n.targetId;t=new cd(a,o)}}return t}function W0(r,e){let t;if(e instanceof xi)t={update:Lc(r,e.key,e.value)};else if(e instanceof Zs)t={delete:Sa(r,e.key)};else if(e instanceof kn)t={update:Lc(r,e.key,e.data),updateMask:rv(e.fieldMask)};else{if(!(e instanceof j0))return ye();t={verify:Sa(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const a=o.transform;if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Is)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ye()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:H0(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye()}(r,e.precondition)),t}function Q0(r,e){return r&&r.length>0?(De(e!==void 0),r.map(t=>function(i,s){let o=i.updateTime?Ht(i.updateTime):Ht(s);return o.isEqual(ve.min())&&(o=Ht(s)),new N0(o,i.transformResults||[])}(t,e))):[]}function Y0(r,e){return{documents:[pd(r,e.path)]}}function J0(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=pd(r,i);const s=function(h){if(h.length!==0)return yd(Vt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(c=>function(f){return{field:ir(f.field),direction:ev(f.dir)}}(c))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Aa(r,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function X0(r){let e=K0(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){De(n===1);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(d){const f=md(d);return f instanceof Vt&&Kf(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(v){return new _i(sr(v.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ks(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new ks(p,f)}(t.startAt));let h=null;return t.endAt&&(h=function(d){const f=!d.before,p=d.values||[];return new ks(p,f)}(t.endAt)),v0(e,i,o,s,a,"F",l,h)}function Z0(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function md(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=sr(t.unaryFilter.field);return nt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=sr(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sr(t.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sr(t.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(r):r.fieldFilter!==void 0?function(t){return nt.create(sr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Vt.create(t.compositeFilter.filters.map(n=>md(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(r):ye()}function ev(r){return F0[r]}function tv(r){return U0[r]}function nv(r){return B0[r]}function ir(r){return{fieldPath:r.canonicalString()}}function sr(r){return ct.fromServerFormat(r.fieldPath)}function yd(r){return r instanceof nt?function(t){if(t.op==="=="){if(Ec(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NAN"}};if(wc(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ec(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NOT_NAN"}};if(wc(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ir(t.field),op:tv(t.op),value:t.value}}}(r):r instanceof Vt?function(t){const n=t.getFilters().map(i=>yd(i));return n.length===1?n[0]:{compositeFilter:{op:nv(t.op),filters:n}}}(r):ye()}function rv(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vd(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,n,i,s=ve.min(),o=ve.min(),a=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new mn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.Tt=e}}function sv(r){const e=X0({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?xa(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.Tn=new av}addToCollectionParentIndex(e,t){return this.Tn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(_n.min())}updateCollectionGroup(e,t,n){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class av{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new st(He.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new st(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_d=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(_d,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new pr(0)}static Kn(){return new pr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="LruGarbageCollector",lv=1048576;function Vc([r,e],[t,n]){const i=Oe(r,t);return i===0?Oe(e,n):i}class uv{constructor(e){this.Hn=e,this.buffer=new st(Vc),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Vc(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(Mc,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tr(t)?de(Mc,"Ignoring IndexedDB error during garbage collection: ",t):await Er(t)}await this.er(3e5)})}}class hv{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Hs.ae);const n=new uv(t);return this.tr.forEachTarget(e,i=>n.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>n.Zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Dc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dc):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,s,o,a,l,h;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,a=Date.now(),this.removeTargets(e,n,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(h=Date.now(),nr()<=en.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(h-l)+`ms
Total Duration: ${h-c}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function fv(r,e){return new hv(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.changes=new Bn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ie.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&ci(n.mutation,i,Ot.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Ce()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Ce()){const i=$n();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let o=ri();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=$n();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ce()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,n,i){let s=an();const o=ui(),a=function(){return ui()}();return t.forEach((l,h)=>{const c=n.get(h.key);i.has(h.key)&&(c===void 0||c.mutation instanceof kn)?s=s.insert(h.key,h):c!==void 0?(o.set(h.key,c.mutation.getFieldMask()),ci(c.mutation,h,c.mutation.getFieldMask(),it.now())):o.set(h.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,c)=>o.set(h,c)),t.forEach((h,c)=>{var d;return a.set(h,new pv(c,(d=o.get(h))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ui();let i=new We((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=t.get(l);if(h===null)return;let c=n.get(l)||Ot.empty();c=a.applyToLocalView(h,c),n.set(l,c);const d=(i.get(a.batchId)||Ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,c=l.value,d=td();c.forEach(f=>{if(!s.has(f)){const p=ad(t.get(f),n.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,d))}return ie.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):ie.resolve($n());let a=gi,l=s;return o.next(h=>ie.forEach(h,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?ie.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,Ce())).next(c=>({batchId:a,changes:ed(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(n=>{let i=ri();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let o=ri();return this.indexManager.getCollectionParents(e,s).next(a=>ie.forEach(a,l=>{const h=function(d,f){return new xr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(o=>{s.forEach((l,h)=>{const c=h.getKey();o.get(c)===null&&(o=o.insert(c,mt.newInvalidDocument(c)))});let a=ri();return o.forEach((l,h)=>{const c=s.get(l);c!==void 0&&ci(c.mutation,h,Ot.empty(),it.now()),Ys(t,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ie.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ht(i.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:sv(i.bundledQuery),readTime:Ht(i.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.overlays=new We(me.comparator),this.Rr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$n();return ie.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.Et(e,t,s)}),ie.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(n)),ie.resolve()}getOverlaysForCollection(e,t,n){const i=$n(),s=t.length+1,o=new me(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new We((h,c)=>h-c);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let c=s.get(h.largestBatchId);c===null&&(c=$n(),s=s.insert(h.largestBatchId,c)),c.set(h.getKey(),h)}}const a=$n(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,c)=>a.set(h,c)),!(a.size()>=i)););return ie.resolve(a)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new D0(t,n));let s=this.Rr.get(t);s===void 0&&(s=Ce(),this.Rr.set(t,s)),this.Rr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.Vr=new st(at.mr),this.gr=new st(at.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new at(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new at(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new me(new He([])),n=new at(t,e),i=new at(t,e+1),s=[];return this.gr.forEachInRange([n,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new me(new He([])),n=new at(t,e),i=new at(t,e+1);let s=Ce();return this.gr.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new at(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class at{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return me.comparator(e.key,t.key)||Oe(e.Cr,t.Cr)}static pr(e,t){return Oe(e.Cr,t.Cr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new st(at.mr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L0(s,t,n,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,t){return ie.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),s=i<0?0:i;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?el:this.Fr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([n,i],o=>{const a=this.Or(o.Cr);s.push(a)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new st(Oe);return t.forEach(i=>{const s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{n=n.add(a.Cr)})}),ie.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;me.isDocumentKey(s)||(s=s.child(""));const o=new at(new me(s),0);let a=new st(Oe);return this.Mr.forEachWhile(l=>{const h=l.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(a=a.add(l.Cr)),!0)},o),ie.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(n=>{const i=this.Or(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){De(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return ie.forEach(t.mutations,i=>{const s=new at(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new at(t,0),i=this.Mr.firstAfterOrEqual(n);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.kr=e,this.docs=function(){return new We(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ie.resolve(n?n.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let n=an();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),ie.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=an();const o=t.path,a=new me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:c}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Jy(Yy(c),n)<=0||(i.has(c.key)||Ys(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(e,t,n,i){ye()}qr(e,t){return ie.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new wv(this)}getSize(e){return ie.resolve(this.size)}}class wv extends dv{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)}),ie.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.persistence=e,this.Qr=new Bn(t=>rl(t),il),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ul,this.targetCount=0,this.Kr=pr.Un()}forEachTarget(e,t){return this.Qr.forEach((n,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),ie.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new pr(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.zn(t),ie.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ie.waitFor(s).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return ie.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),ie.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return ie.resolve(n)}containsKey(e,t){return ie.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Hs(0),this.zr=!1,this.zr=!0,this.jr=new vv,this.referenceDelegate=e(this),this.Hr=new Ev(this),this.indexManager=new ov,this.remoteDocumentCache=function(i){return new bv(i)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new iv(t),this.Yr=new mv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new _v(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){de("MemoryPersistence","Starting transaction:",e);const i=new Tv(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return ie.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class Tv extends Zy{constructor(e){super(),this.currentSequenceNumber=e}}class cl{constructor(e){this.persistence=e,this.ti=new ul,this.ni=null}static ri(e){return new cl(e)}get ii(){if(this.ni)return this.ni;throw ye()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),ie.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ie.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,n=>{const i=me.fromPath(n);return this.si(e,i).next(s=>{s||t.removeEntry(i,ve.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ie.or([()=>ie.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ps{constructor(e,t){this.persistence=e,this.oi=new Bn(n=>n0(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=fv(this,t)}static ri(e,t){return new Ps(e,t)}Zr(){}Xr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return ie.forEach(this.oi,(n,i)=>this.ar(e,n,i).next(s=>s?ie.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(n++,s.removeEntry(o,ve.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ms(e.data.value)),t}ar(e,t,n){return ie.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return ie.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=Ce(),i=Ce();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hl(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return om()?8:e0(am())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xv;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,n,i){return n.documentReadCount<this.es?(nr()<=en.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",rr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(nr()<=en.DEBUG&&de("QueryEngine","Query:",rr(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(nr()<=en.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",rr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):ie.resolve())}rs(e,t){if(kc(t))return ie.resolve(null);let n=zt(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xa(t,null,"F"),n=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Ce(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const h=this.cs(t,a);return this.ls(t,h,o,l.readTime)?this.rs(e,xa(t,null,"F")):this.hs(e,h,t,l)}))})))}ss(e,t,n,i){return kc(t)||i.isEqual(ve.min())?ie.resolve(null):this.ns.getDocuments(e,n).next(s=>{const o=this.cs(t,s);return this.ls(t,o,n,i)?ie.resolve(null):(nr()<=en.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rr(t)),this.hs(e,o,t,Qy(i,gi)).next(a=>a))})}cs(e,t){let n=new st(Xf(e));return t.forEach((i,s)=>{Ys(e,s)&&(n=n.add(s))}),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,n){return nr()<=en.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",rr(t)),this.ns.getDocumentsMatchingQuery(e,t,_n.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="LocalStore",kv=3e8;class Sv{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new We(Oe),this.Is=new Bn(s=>rl(s),il),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gv(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Iv(r,e,t,n){return new Sv(r,e,t,n)}async function wd(r,e){const t=be(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let l=Ce();for(const h of i){o.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}for(const h of s){a.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(n,l).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:a}))})})}function Ov(r,e){const t=be(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,h,c){const d=h.batch,f=d.keys();let p=ie.resolve();return f.forEach(v=>{p=p.next(()=>c.getEntry(l,v)).next(y=>{const g=h.docVersions.get(v);De(g!==null),y.version.compareTo(g)<0&&(d.applyToRemoteDocument(y,h),y.isValidDocument()&&(y.setReadTime(h.commitVersion),c.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Ce();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(l=l.add(a.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function Ed(r){const e=be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Pv(r,e){const t=be(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(t.Hr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>t.Hr.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ht.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,n)),i=i.insert(d,p),function(y,g,m){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=kv?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,p,c)&&a.push(t.Hr.updateTargetData(s,p))});let l=an(),h=Ce();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Nv(s,o,e.documentUpdates).next(c=>{l=c.Vs,h=c.fs})),!n.isEqual(ve.min())){const c=t.Hr.getLastRemoteSnapshotVersion(s).next(d=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(c)}return ie.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.Ts=i,s))}function Nv(r,e,t){let n=Ce(),i=Ce();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let o=an();return t.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):de(fl,"Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function Rv(r,e){const t=be(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=el),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Cv(r,e){const t=be(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Hr.getTargetData(n,e).next(s=>s?(i=s,ie.resolve(i)):t.Hr.allocateTargetId(n).next(o=>(i=new mn(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Oa(r,e,t){const n=be(r),i=n.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Tr(o))throw o;de(fl,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function $c(r,e,t){const n=be(r);let i=ve.min(),s=Ce();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,c){const d=be(l),f=d.Is.get(c);return f!==void 0?ie.resolve(d.Ts.get(f)):d.Hr.getTargetData(h,c)}(n,o,zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n.Ps.getDocumentsMatchingQuery(o,e,t?i:ve.min(),t?s:Ce())).next(a=>(jv(n,b0(e),a),{documents:a,gs:s})))}function jv(r,e,t){let n=r.Es.get(e)||ve.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Es.set(e,n)}class qc{constructor(){this.activeTargetIds=k0()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lv{constructor(){this.ho=new qc,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new qc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="ConnectivityMonitor";class Uc{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(Fc,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(Fc,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs=null;function Pa(){return rs===null?rs=function(){return 268435456+Math.round(2147483648*Math.random())}():rs++,"0x"+rs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RestConnection",Mv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vv{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===xs?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(e,t,n,i,s){const o=Pa(),a=this.bo(e,t.toUriEncodedString());de(Uo,`Sending RPC '${e}' ${o}:`,a,n);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,n).then(h=>(de(Uo,`Received RPC '${e}' ${o}: `,h),h),h=>{throw cr(Uo,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",n),h})}Co(e,t,n,i,s,o){return this.So(e,t,n,i,s)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}bo(e,t){const n=Mv[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class qv extends Vv{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const s=Pa();return new Promise((o,a)=>{const l=new Af;l.setWithCredentials(!0),l.listenOnce(kf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gs.NO_ERROR:const c=l.getResponseJson();de(pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case gs.TIMEOUT:de(pt,`RPC '${e}' ${s} timed out`),a(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:const d=l.getStatus();if(de(pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const v=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(m)>=0?m:ne.UNKNOWN}(p.status);a(new fe(v,p.message))}else a(new fe(ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{de(pt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);de(pt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,n,15)})}Wo(e,t,n){const i=Pa(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Of(),a=If(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const c=s.join("");de(pt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let f=!1,p=!1;const v=new $v({Fo:g=>{p?de(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(f||(de(pt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),de(pt,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},Mo:()=>d.close()}),y=(g,m,b)=>{g.listen(m,I=>{try{b(I)}catch(_){setTimeout(()=>{throw _},0)}})};return y(d,ni.EventType.OPEN,()=>{p||(de(pt,`RPC '${e}' stream ${i} transport opened.`),v.Qo())}),y(d,ni.EventType.CLOSE,()=>{p||(p=!0,de(pt,`RPC '${e}' stream ${i} transport closed`),v.Uo())}),y(d,ni.EventType.ERROR,g=>{p||(p=!0,cr(pt,`RPC '${e}' stream ${i} transport errored:`,g),v.Uo(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),y(d,ni.EventType.MESSAGE,g=>{var m;if(!p){const b=g.data[0];De(!!b);const I=b,_=(I==null?void 0:I.error)||((m=I[0])===null||m===void 0?void 0:m.error);if(_){de(pt,`RPC '${e}' stream ${i} received error:`,_);const P=_.status;let C=function(S){const T=tt[S];if(T!==void 0)return ud(T)}(P),w=_.message;C===void 0&&(C=ne.INTERNAL,w="Unknown error status: "+P+" with message "+_.message),p=!0,v.Uo(new fe(C,w)),d.close()}else de(pt,`RPC '${e}' stream ${i} received:`,b),v.Ko(b)}}),y(a,Sf.STAT_EVENT,g=>{g.stat===ya.PROXY?de(pt,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===ya.NOPROXY&&de(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}function Bo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(r){return new z0(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="PersistentStream";class xd{constructor(e,t,n,i,s,o,a,l){this.Ti=e,this.n_=n,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Td(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(on(t.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.i_===t&&this.V_(n,i)},n=>{e(()=>{const i=new fe(ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{n(()=>this.m_(i))}),this.stream.onMessage(i=>{n(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(Bc,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(Bc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fv extends xd{constructor(e,t,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=G0(this.serializer,e),n=function(s){if(!("targetChange"in s))return ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Ht(o.readTime):ve.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Ia(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Ea(l)?{documents:Y0(s,l)}:{query:J0(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fd(s,o.resumeToken);const h=Aa(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=Os(s,o.snapshotVersion.toTimestamp());const h=Aa(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const n=Z0(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Ia(this.serializer),t.removeTarget=e,this.I_(t)}}class Uv extends xd{constructor(e,t,n,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Q0(e.writeResults,e.commitTime),n=Ht(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Ia(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>W0(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{}class zv extends Bv{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,ka(t,n),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ne.UNKNOWN,s.toString())})}Co(e,t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,ka(t,n),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(ne.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Hv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(on(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="RemoteStore";class Kv{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{n.enqueueAndForget(async()=>{zn(this)&&(de(Un,"Restarting streams for network reachability change."),await async function(l){const h=be(l);h.W_.add(4),await ki(h),h.j_.set("Unknown"),h.W_.delete(4),await no(h)}(this))})}),this.j_=new Hv(n,i)}}async function no(r){if(zn(r))for(const e of r.G_)await e(!0)}async function ki(r){for(const e of r.G_)await e(!1)}function Ad(r,e){const t=be(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),ml(t)?gl(t):Ar(t).c_()&&pl(t,e))}function dl(r,e){const t=be(r),n=Ar(t);t.K_.delete(e),n.c_()&&kd(t,e),t.K_.size===0&&(n.c_()?n.P_():zn(t)&&t.j_.set("Unknown"))}function pl(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ar(r).y_(e)}function kd(r,e){r.H_.Ne(e),Ar(r).w_(e)}function gl(r){r.H_=new q0({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Ar(r).start(),r.j_.B_()}function ml(r){return zn(r)&&!Ar(r).u_()&&r.K_.size>0}function zn(r){return be(r).W_.size===0}function Sd(r){r.H_=void 0}async function Gv(r){r.j_.set("Online")}async function Wv(r){r.K_.forEach((e,t)=>{pl(r,e)})}async function Qv(r,e){Sd(r),ml(r)?(r.j_.q_(e),gl(r)):r.j_.set("Unknown")}async function Yv(r,e,t){if(r.j_.set("Online"),e instanceof hd&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))}(r,e)}catch(n){de(Un,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ns(r,n)}else if(e instanceof _s?r.H_.We(e):e instanceof cd?r.H_.Ze(e):r.H_.je(e),!t.isEqual(ve.min()))try{const n=await Ed(r.localStore);t.compareTo(n)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.K_.get(h);c&&s.K_.set(h,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const c=s.K_.get(l);if(!c)return;s.K_.set(l,c.withResumeToken(ht.EMPTY_BYTE_STRING,c.snapshotVersion)),kd(s,l);const d=new mn(c.target,l,h,c.sequenceNumber);pl(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(r,t)}catch(n){de(Un,"Failed to raise snapshot:",n),await Ns(r,n)}}async function Ns(r,e,t){if(!Tr(e))throw e;r.W_.add(1),await ki(r),r.j_.set("Offline"),t||(t=()=>Ed(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{de(Un,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await no(r)})}function Id(r,e){return e().catch(t=>Ns(r,t,e))}async function ro(r){const e=be(r),t=Tn(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:el;for(;Jv(e);)try{const i=await Rv(e.localStore,n);if(i===null){e.U_.length===0&&t.P_();break}n=i.batchId,Xv(e,i)}catch(i){await Ns(e,i)}Od(e)&&Pd(e)}function Jv(r){return zn(r)&&r.U_.length<10}function Xv(r,e){r.U_.push(e);const t=Tn(r);t.c_()&&t.S_&&t.b_(e.mutations)}function Od(r){return zn(r)&&!Tn(r).u_()&&r.U_.length>0}function Pd(r){Tn(r).start()}async function Zv(r){Tn(r).C_()}async function e_(r){const e=Tn(r);for(const t of r.U_)e.b_(t.mutations)}async function t_(r,e,t){const n=r.U_.shift(),i=ol.from(n,e,t);await Id(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await ro(r)}async function n_(r,e){e&&Tn(r).S_&&await async function(n,i){if(function(o){return V0(o)&&o!==ne.ABORTED}(i.code)){const s=n.U_.shift();Tn(n).h_(),await Id(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ro(n)}}(r,e),Od(r)&&Pd(r)}async function zc(r,e){const t=be(r);t.asyncQueue.verifyOperationInProgress(),de(Un,"RemoteStore received new credentials");const n=zn(t);t.W_.add(3),await ki(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await no(t)}async function r_(r,e){const t=be(r);e?(t.W_.delete(2),await no(t)):e||(t.W_.add(2),await ki(t),t.j_.set("Unknown"))}function Ar(r){return r.J_||(r.J_=function(t,n,i){const s=be(t);return s.M_(),new Fv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{xo:Gv.bind(null,r),No:Wv.bind(null,r),Lo:Qv.bind(null,r),p_:Yv.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),ml(r)?gl(r):r.j_.set("Unknown")):(await r.J_.stop(),Sd(r))})),r.J_}function Tn(r){return r.Y_||(r.Y_=function(t,n,i){const s=be(t);return s.M_(),new Uv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:Zv.bind(null,r),Lo:n_.bind(null,r),D_:e_.bind(null,r),v_:t_.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await ro(r)):(await r.Y_.stop(),r.U_.length>0&&(de(Un,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const o=Date.now()+n,a=new yl(e,t,o,i,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vl(r,e){if(on("AsyncQueue",`${e}: ${r}`),Tr(r))return new fe(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{static emptySet(e){return new ar(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||me.comparator(t.key,n.key):(t,n)=>me.comparator(t.key,n.key),this.keyedMap=ri(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ar)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ar;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.Z_=new We(me.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ye():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class gr{constructor(e,t,n,i,s,o,a,l,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new gr(e,t,ar.emptySet(t),o,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class s_{constructor(){this.queries=Kc(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=be(t),s=i.queries;i.queries=Kc(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(n)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function Kc(){return new Bn(r=>Jf(r),Qs)}async function _l(r,e){const t=be(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(n=2):(s=new i_,n=e.ra()?0:1);try{switch(n){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=vl(o,`Initialization of query '${rr(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&wl(t)}async function bl(r,e){const t=be(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function o_(r,e){const t=be(r);let n=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(n=!0);o.ea=i}}n&&wl(t)}function a_(r,e,t){const n=be(r),i=n.queries.get(e);if(i)for(const s of i.ta)s.onError(t);n.queries.delete(e)}function wl(r){r.ia.forEach(e=>{e.next()})}var Na,Gc;(Gc=Na||(Na={}))._a="default",Gc.Cache="cache";class El{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new gr(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=gr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Na.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.key=e}}class Rd{constructor(e){this.key=e}}class l_{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ce(),this.mutatedKeys=Ce(),this.ya=Xf(e),this.wa=new ar(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Hc,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=Ys(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;f&&p?f.data.isEqual(p.data)?v!==y&&(n.track({type:3,doc:p}),g=!0):this.va(f,p)||(n.track({type:2,doc:p}),g=!0,(l&&this.ya(p,l)>0||h&&this.ya(p,h)<0)&&(a=!0)):!f&&p?(n.track({type:0,doc:p}),g=!0):f&&!p&&(n.track({type:1,doc:f}),g=!0,(l||h)&&(a=!0)),g&&(p?(o=o.add(p),s=y?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{wa:o,Da:n,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((c,d)=>function(p,v){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return y(p)-y(v)}(c.type,d.type)||this.ya(c.doc,d.doc)),this.Ca(n),i=i!=null&&i;const a=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,h=l!==this.ga;return this.ga=l,o.length!==0||h?{snapshot:new gr(this.query,e.wa,s,o,e.mutatedKeys,l===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Hc,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ce(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new Rd(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new Nd(n))}),t}Oa(e){this.fa=e.gs,this.pa=Ce();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return gr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Tl="SyncEngine";class u_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class c_{constructor(e){this.key=e,this.Ba=!1}}class h_{constructor(e,t,n,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Bn(a=>Jf(a),Qs),this.qa=new Map,this.Qa=new Set,this.$a=new We(me.comparator),this.Ua=new Map,this.Ka=new ul,this.Wa={},this.Ga=new Map,this.za=pr.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function f_(r,e,t=!0){const n=Vd(r);let i;const s=n.ka.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Cd(n,e,t,!0),i}async function d_(r,e){const t=Vd(r);await Cd(t,e,!0,!1)}async function Cd(r,e,t,n){const i=await Cv(r.localStore,zt(e)),s=i.targetId,o=r.sharedClientState.addLocalQueryTarget(s,t);let a;return n&&(a=await p_(r,e,s,o==="current",i.resumeToken)),r.isPrimaryClient&&t&&Ad(r.remoteStore,i),a}async function p_(r,e,t,n,i){r.Ha=(d,f,p)=>async function(y,g,m,b){let I=g.view.ba(m);I.ls&&(I=await $c(y.localStore,g.query,!1).then(({documents:w})=>g.view.ba(w,I)));const _=b&&b.targetChanges.get(g.targetId),P=b&&b.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(I,y.isPrimaryClient,_,P);return Qc(y,g.targetId,C.Ma),C.snapshot}(r,d,f,p);const s=await $c(r.localStore,e,!0),o=new l_(e,s.gs),a=o.ba(s.documents),l=Ai.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),h=o.applyChanges(a,r.isPrimaryClient,l);Qc(r,t,h.Ma);const c=new u_(e,t,o);return r.ka.set(e,c),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),h.snapshot}async function g_(r,e,t){const n=be(r),i=n.ka.get(e),s=n.qa.get(i.targetId);if(s.length>1)return n.qa.set(i.targetId,s.filter(o=>!Qs(o,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Oa(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&dl(n.remoteStore,i.targetId),Ra(n,i.targetId)}).catch(Er)):(Ra(n,i.targetId),await Oa(n.localStore,i.targetId,!0))}async function m_(r,e){const t=be(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),dl(t.remoteStore,n.targetId))}async function y_(r,e,t){const n=x_(r);try{const i=await function(o,a){const l=be(o),h=it.now(),c=a.reduce((p,v)=>p.add(v.key),Ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=an(),y=Ce();return l.ds.getEntries(p,c).next(g=>{v=g,v.forEach((m,b)=>{b.isValidDocument()||(y=y.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(g=>{d=g;const m=[];for(const b of a){const I=C0(b,d.get(b.key).overlayedDocument);I!=null&&m.push(new kn(b.key,I,Bf(I.value.mapValue),wt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,h,m,a)}).next(g=>{f=g;const m=g.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,g.batchId,m)})}).then(()=>({batchId:f.batchId,changes:ed(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let h=o.Wa[o.currentUser.toKey()];h||(h=new We(Oe)),h=h.insert(a,l),o.Wa[o.currentUser.toKey()]=h}(n,i.batchId,t),await Si(n,i.changes),await ro(n.remoteStore)}catch(i){const s=vl(i,"Failed to persist write");t.reject(s)}}async function jd(r,e){const t=be(r);try{const n=await Pv(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ua.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?De(o.Ba):i.removedDocuments.size>0&&(De(o.Ba),o.Ba=!1))}),await Si(t,n,e)}catch(n){await Er(n)}}function Wc(r,e,t){const n=be(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=be(o);l.onlineState=a;let h=!1;l.queries.forEach((c,d)=>{for(const f of d.ta)f.sa(a)&&(h=!0)}),h&&wl(l)}(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function v_(r,e,t){const n=be(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ua.get(e),s=i&&i.key;if(s){let o=new We(me.comparator);o=o.insert(s,mt.newNoDocument(s,ve.min()));const a=Ce().add(s),l=new eo(ve.min(),new Map,new We(Oe),o,a);await jd(n,l),n.$a=n.$a.remove(s),n.Ua.delete(e),xl(n)}else await Oa(n.localStore,e,!1).then(()=>Ra(n,e,t)).catch(Er)}async function __(r,e){const t=be(r),n=e.batch.batchId;try{const i=await Ov(t.localStore,e);Dd(t,n,null),Ld(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Si(t,i)}catch(i){await Er(i)}}async function b_(r,e,t){const n=be(r);try{const i=await function(o,a){const l=be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let c;return l.mutationQueue.lookupMutationBatch(h,a).next(d=>(De(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(h,d))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,c)).next(()=>l.localDocuments.getDocuments(h,c))})}(n.localStore,e);Dd(n,e,t),Ld(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Si(n,i)}catch(i){await Er(i)}}function Ld(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function Dd(r,e,t){const n=be(r);let i=n.Wa[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function Ra(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(n=>{r.Ka.containsKey(n)||Md(r,n)})}function Md(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(dl(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),xl(r))}function Qc(r,e,t){for(const n of t)n instanceof Nd?(r.Ka.addReference(n.key,e),w_(r,n)):n instanceof Rd?(de(Tl,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||Md(r,n.key)):ye()}function w_(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(de(Tl,"New document in limbo: "+t),r.Qa.add(n),xl(r))}function xl(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new me(He.fromString(e)),n=r.za.next();r.Ua.set(n,new c_(t)),r.$a=r.$a.insert(t,n),Ad(r.remoteStore,new mn(zt(Ws(t.path)),n,"TargetPurposeLimboResolution",Hs.ae))}}async function Si(r,e,t){const n=be(r),i=[],s=[],o=[];n.ka.isEmpty()||(n.ka.forEach((a,l)=>{o.push(n.Ha(l,e,t).then(h=>{var c;if((h||t)&&n.isPrimaryClient){const d=h?!h.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(h){i.push(h);const d=hl.Yi(l.targetId,h);s.push(d)}}))}),await Promise.all(o),n.La.p_(i),await async function(l,h){const c=be(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ie.forEach(h,f=>ie.forEach(f.Hi,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>ie.forEach(f.Ji,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Tr(d))throw d;de(fl,"Failed to update sequence numbers: "+d)}for(const d of h){const f=d.targetId;if(!d.fromCache){const p=c.Ts.get(f),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);c.Ts=c.Ts.insert(f,y)}}}(n.localStore,s))}async function E_(r,e){const t=be(r);if(!t.currentUser.isEqual(e)){de(Tl,"User change. New user:",e.toKey());const n=await wd(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new fe(ne.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Si(t,n.Rs)}}function T_(r,e){const t=be(r),n=t.Ua.get(e);if(n&&n.Ba)return Ce().add(n.key);{let i=Ce();const s=t.qa.get(e);if(!s)return i;for(const o of s){const a=t.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function Vd(r){const e=be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=jd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v_.bind(null,e),e.La.p_=o_.bind(null,e.eventManager),e.La.Ja=a_.bind(null,e.eventManager),e}function x_(r){const e=be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b_.bind(null,e),e}class Rs{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=to(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Iv(this.persistence,new Av,e.initialUser,this.serializer)}Xa(e){return new bd(cl.ri,this.serializer)}Za(e){return new Lv}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rs.provider={build:()=>new Rs};class A_ extends Rs{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){De(this.persistence.referenceDelegate instanceof Ps);const n=this.persistence.referenceDelegate.garbageCollector;return new cv(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new bd(n=>Ps.ri(n,t),this.serializer)}}class Ca{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Wc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=E_.bind(null,this.syncEngine),await r_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s_}()}createDatastore(e){const t=to(e.databaseInfo.databaseId),n=function(s){return new qv(s)}(e.databaseInfo);return function(s,o,a,l){return new zv(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,o,a){return new Kv(n,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Wc(this.syncEngine,t,0),function(){return Uc.D()?new Uc:new Dv}())}createSyncEngine(e,t){return function(i,s,o,a,l,h,c){const d=new h_(i,s,o,a,l,h);return c&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=be(i);de(Un,"RemoteStore shutting down."),s.W_.add(5),await ki(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ca.provider={build:()=>new Ca};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="FirestoreClient";class k_{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{de(xn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(de(xn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function zo(r,e){r.asyncQueue.verifyOperationInProgress(),de(xn,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await wd(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Yc(r,e){r.asyncQueue.verifyOperationInProgress();const t=await S_(r);de(xn,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>zc(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>zc(e.remoteStore,i)),r._onlineComponents=e}async function S_(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de(xn,"Using user provided OfflineComponentProvider");try{await zo(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;cr("Error using user provided cache. Falling back to memory cache: "+t),await zo(r,new Rs)}}else de(xn,"Using default OfflineComponentProvider"),await zo(r,new A_(void 0));return r._offlineComponents}async function $d(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de(xn,"Using user provided OnlineComponentProvider"),await Yc(r,r._uninitializedComponentsProvider._online)):(de(xn,"Using default OnlineComponentProvider"),await Yc(r,new Ca))),r._onlineComponents}function I_(r){return $d(r).then(e=>e.syncEngine)}async function Cs(r){const e=await $d(r),t=e.eventManager;return t.onListen=f_.bind(null,e.syncEngine),t.onUnlisten=g_.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d_.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m_.bind(null,e.syncEngine),t}function O_(r,e,t={}){const n=new nn;return r.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const c=new Al({next:f=>{c.su(),o.enqueueAndForget(()=>bl(s,d));const p=f.docs.has(a);!p&&f.fromCache?h.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?h.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new El(Ws(a.path),c,{includeMetadataChanges:!0,Ta:!0});return _l(s,d)}(await Cs(r),r.asyncQueue,e,t,n)),n.promise}function P_(r,e,t={}){const n=new nn;return r.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const c=new Al({next:f=>{c.su(),o.enqueueAndForget(()=>bl(s,d)),f.fromCache&&l.source==="server"?h.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new El(a,c,{includeMetadataChanges:!0,Ta:!0});return _l(s,d)}(await Cs(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(r,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function N_(r,e,t,n){if(e===!0&&n===!0)throw new fe(ne.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Xc(r){if(!me.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zc(r){if(me.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function io(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ye()}function Et(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=io(r);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="firestore.googleapis.com",eh=!0;class th{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ud,this.ssl=eh}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:eh;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_d;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lv)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qd((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class so{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new th({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new th(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qy;switch(n.type){case"firstParty":return new zy(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Jc.get(t);n&&(de("ComponentProvider","Removing Datastore"),Jc.delete(t),n.terminate())}(this),Promise.resolve()}}function R_(r,e,t,n={}){var i;const s=(r=Et(r,so))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:r._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==Ud&&s.host!==a&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:n});if(!rm(l,o)&&(r._setSettings(l),n.mockUserToken)){let h,c;if(typeof n.mockUserToken=="string")h=n.mockUserToken,c=gt.MOCK_USER;else{h=im(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gt(d)}r._authCredentials=new Fy(new Pf(h,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sn(this.firestore,e,this._query)}}class vt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class vn extends Sn{constructor(e,t,n){super(e,t,Ws(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new me(e))}withConverter(e){return new vn(this.firestore,e,this._path)}}function mr(r,e,...t){if(r=Nt(r),Fd("collection","path",e),r instanceof so){const n=He.fromString(e,...t);return Zc(n),new vn(r,null,n)}{if(!(r instanceof vt||r instanceof vn))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(He.fromString(e,...t));return Zc(n),new vn(r.firestore,null,n)}}function Xe(r,e,...t){if(r=Nt(r),arguments.length===1&&(e=Rf.newId()),Fd("doc","path",e),r instanceof so){const n=He.fromString(e,...t);return Xc(n),new vt(r,null,new me(n))}{if(!(r instanceof vt||r instanceof vn))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(He.fromString(e,...t));return Xc(n),new vt(r.firestore,r instanceof vn?r.converter:null,new me(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="AsyncQueue";class rh{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Td(this,"async_queue_retry"),this.Su=()=>{const n=Bo();n&&de(nh,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=Bo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Bo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new nn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Tr(e))throw e;de(nh,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw on("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=yl.createAndSchedule(this,e,t,n,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&ye()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ih(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class Wt extends so{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new rh,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rh(e),this._firestoreClient=void 0,await e}}}function C_(r,e){const t=typeof r=="object"?r:em(),n=typeof r=="string"?r:xs,i=tm(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=nm("firestore");s&&R_(i,...s)}return i}function Ii(r){if(r._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||j_(r),r._firestoreClient}function j_(r){var e,t,n;const i=r._freezeSettings(),s=function(a,l,h,c){return new s0(a,l,h,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qd(c.experimentalLongPollingOptions),c.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new k_(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yr(ht.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yr(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=/^__.*__$/;class D_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new xi(e,this.data,t,this.fieldTransforms)}}class Bd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new kn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zd(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class Ol{constructor(e,t,n,i,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ol(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.$u(e),i}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return js(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zd(this.Lu)&&L_.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class M_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||to(e)}ju(e,t,n,i=!1){return new Ol({Lu:e,methodName:t,zu:n,path:ct.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pi(r){const e=r._freezeSettings(),t=to(r._databaseId);return new M_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Pl(r,e,t,n,i,s={}){const o=r.ju(s.merge||s.mergeFields?2:0,e,t,i);Nl("Data must be an object, but it was:",o,n);const a=Gd(n,o);let l,h;if(s.merge)l=new Ot(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=ja(e,d,t);if(!o.contains(f))throw new fe(ne.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Qd(c,f)||c.push(f)}l=new Ot(c),h=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,h=o.fieldTransforms;return new D_(new kt(a),l,h)}class Ni extends kl{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ni}}function Hd(r,e,t,n){const i=r.ju(1,e,t);Nl("Data must be an object, but it was:",i,n);const s=[],o=kt.empty();An(n,(l,h)=>{const c=Rl(e,l,t);h=Nt(h);const d=i.Uu(c);if(h instanceof Ni)s.push(c);else{const f=Ri(h,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new Ot(s);return new Bd(o,a,i.fieldTransforms)}function Kd(r,e,t,n,i,s){const o=r.ju(1,e,t),a=[ja(e,n,t)],l=[i];if(s.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(ja(e,s[f])),l.push(s[f+1]);const h=[],c=kt.empty();for(let f=a.length-1;f>=0;--f)if(!Qd(h,a[f])){const p=a[f];let v=l[f];v=Nt(v);const y=o.Uu(p);if(v instanceof Ni)h.push(p);else{const g=Ri(v,y);g!=null&&(h.push(p),c.set(p,g))}}const d=new Ot(h);return new Bd(c,d,o.fieldTransforms)}function V_(r,e,t,n=!1){return Ri(t,r.ju(n?4:3,e))}function Ri(r,e){if(Wd(r=Nt(r)))return Nl("Unsupported field value:",e,r),Gd(r,e);if(r instanceof kl)return function(n,i){if(!zd(i.Lu))throw i.Wu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,i){const s=[];let o=0;for(const a of n){let l=Ri(a,i.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=Nt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return S0(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=it.fromDate(n);return{timestampValue:Os(i.serializer,s)}}if(n instanceof it){const s=new it(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Os(i.serializer,s)}}if(n instanceof Sl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yr)return{bytesValue:fd(i.serializer,n._byteString)};if(n instanceof vt){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ll(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Il)return function(o,a){return{mapValue:{fields:{[qf]:{stringValue:Uf},[As]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw a.Wu("VectorValues must only contain numeric values.");return sl(a.serializer,h)})}}}}}}(n,i);throw i.Wu(`Unsupported field value: ${io(n)}`)}(r,e)}function Gd(r,e){const t={};return jf(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):An(r,(n,i)=>{const s=Ri(i,e.qu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function Wd(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof Sl||r instanceof yr||r instanceof vt||r instanceof kl||r instanceof Il)}function Nl(r,e,t){if(!Wd(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=io(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function ja(r,e,t){if((e=Nt(e))instanceof Oi)return e._internalPath;if(typeof e=="string")return Rl(r,e);throw js("Field path arguments must be of type string or ",r,!1,void 0,t)}const $_=new RegExp("[~\\*/\\[\\]]");function Rl(r,e,t){if(e.search($_)>=0)throw js(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Oi(...e.split("."))._internalPath}catch{throw js(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function js(r,e,t,n,i){const s=n&&!n.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new fe(ne.INVALID_ARGUMENT,a+r+l)}function Qd(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class q_ extends Yd{data(){return super.data()}}function Cl(r,e){return typeof e=="string"?Rl(r,e):e instanceof Oi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jl{}class Xd extends jl{}function oo(r,e,...t){let n=[];e instanceof jl&&n.push(e),n=n.concat(t),function(s){const o=s.filter(l=>l instanceof Dl).length,a=s.filter(l=>l instanceof Ll).length;if(o>1||o>0&&a>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class Ll extends Xd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ll(e,t,n)}_apply(e){const t=this._parse(e);return Zd(e._query,t),new Sn(e.firestore,e.converter,Ta(e._query,t))}_parse(e){const t=Pi(e.firestore);return function(s,o,a,l,h,c,d){let f;if(h.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){oh(d,c);const v=[];for(const y of d)v.push(sh(l,s,y));f={arrayValue:{values:v}}}else f=sh(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||oh(d,c),f=V_(a,o,d,c==="in"||c==="not-in");return nt.create(h,c,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Dl extends jl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dl(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Zd(o,l),o=Ta(o,l)}(e._query,t),new Sn(e.firestore,e.converter,Ta(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ml extends Xd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ml(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _i(s,o)}(e._query,this._field,this._direction);return new Sn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new xr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ao(r,e="asc"){const t=e,n=Cl("orderBy",r);return Ml._create(n,t)}function sh(r,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yf(e)&&t.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(He.fromString(t));if(!me.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return bc(r,new me(n))}if(t instanceof vt)return bc(r,t._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${io(t)}.`)}function oh(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zd(r,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class F_{convertValue(e,t="none"){switch(En(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return An(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,i;const s=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[As].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new Il(s)}convertGeoPoint(e){return new Sl(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Gs(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mi(e));default:return null}}convertTimestamp(e){const t=bn(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=He.fromString(e);De(vd(n));const i=new yi(n.get(1),n.get(3)),s=new me(n.popFirst(5));return i.isEqual(t)||on(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ep extends Yd{constructor(e,t,n,i,s,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Cl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bs extends ep{data(e={}){return super.data(e)}}class tp{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new si(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new bs(this._firestore,this._userDataWriter,n.key,n,new si(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,c=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:U_(a.type),doc:l,oldIndex:h,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U_(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r){r=Et(r,vt);const e=Et(r.firestore,Wt);return O_(Ii(e),r._key).then(t=>np(e,r,t))}class $l extends F_{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function Ci(r){r=Et(r,Sn);const e=Et(r.firestore,Wt),t=Ii(e),n=new $l(e);return Jd(r._query),P_(t,r._query).then(i=>new tp(e,n,r,i))}function La(r,e,t){r=Et(r,vt);const n=Et(r.firestore,Wt),i=Vl(r.converter,e,t);return ji(n,[Pl(Pi(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,wt.none())])}function Ls(r,e,t,...n){r=Et(r,vt);const i=Et(r.firestore,Wt),s=Pi(i);let o;return o=typeof(e=Nt(e))=="string"||e instanceof Oi?Kd(s,"updateDoc",r._key,e,t,n):Hd(s,"updateDoc",r._key,e),ji(i,[o.toMutation(r._key,wt.exists(!0))])}function ql(r){return ji(Et(r.firestore,Wt),[new Zs(r._key,wt.none())])}function Fl(r,e){const t=Et(r.firestore,Wt),n=Xe(r),i=Vl(r.converter,e);return ji(t,[Pl(Pi(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,wt.exists(!1))]).then(()=>n)}function Ul(r,...e){var t,n,i;r=Nt(r);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ih(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ih(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,h,c;if(r instanceof vt)h=Et(r.firestore,Wt),c=Ws(r._key.path),l={next:d=>{e[o]&&e[o](np(h,r,d))},error:e[o+1],complete:e[o+2]};else{const d=Et(r,Sn);h=Et(d.firestore,Wt),c=d._query;const f=new $l(h);l={next:p=>{e[o]&&e[o](new tp(h,f,d,p))},error:e[o+1],complete:e[o+2]},Jd(r._query)}return function(f,p,v,y){const g=new Al(y),m=new El(p,g,v);return f.asyncQueue.enqueueAndForget(async()=>_l(await Cs(f),m)),()=>{g.su(),f.asyncQueue.enqueueAndForget(async()=>bl(await Cs(f),m))}}(Ii(h),c,a,l)}function ji(r,e){return function(n,i){const s=new nn;return n.asyncQueue.enqueueAndForget(async()=>y_(await I_(n),i,s)),s.promise}(Ii(r),e)}function np(r,e,t){const n=t.docs.get(e._key),i=new $l(r);return new ep(r,i,e._key,n,new si(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pi(e)}set(e,t,n){this._verifyNotCommitted();const i=Ho(e,this._firestore),s=Vl(i.converter,t,n),o=Pl(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,wt.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=Ho(e,this._firestore);let o;return o=typeof(t=Nt(t))=="string"||t instanceof Oi?Kd(this._dataReader,"WriteBatch.update",s._key,t,n,i):Hd(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new Zs(t._key,wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ho(r,e){if((r=Nt(r)).firestore!==e)throw new fe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){return new Ni("deleteField")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(r){return Ii(r=Et(r,Wt)),new z_(r,e=>ji(r,e))}(function(e,t=!0){(function(i){wr=i})(sm),Yg(new Jg("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new Wt(new Uy(n.getProvider("auth-internal")),new Hy(o,n.getProvider("app-check-internal")),function(h,c){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(h.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Zu(lc,uc,e),Zu(lc,uc,"esm2017")})();const K_={apiKey:"AIzaSyAsGrtbRSjz77iShv4tB0vQ33A23ie9JM8",authDomain:"tiger3homs-f3a5f-d60da.firebaseapp.com",projectId:"tiger3homs-f3a5f-d60da",storageBucket:"tiger3homs-f3a5f-d60da.firebasestorage.app",messagingSenderId:"509990310606",appId:"1:509990310606:web:e36d91ea748c4cd64d369f",measurementId:"G-DDZTZ6MR6S"};let Ko=null,Lt=null,pe=null;try{Ko=lm(K_),Lt=um(Ko),pe=C_(Ko)}catch(r){throw console.error("Firebase initialization error:",r),new Error(`Firebase initialization failed: ${r instanceof Error?r.message:String(r)}`)}if(!pe)throw new Error("Firestore failed to initialize and is null.");const Dt={en:{generalInfo:{title:"General Information",siteTitle:"Tiger3Homs",siteRole:"Website Developer & Tech Enthusiast",logoUrl:"https://raw.githubusercontent.com/tiger3homs/home/refs/heads/main/public/logo.png",footerText:" 2025. Built and designed by Tiger3homs"},about:{title:"About Me",description:"I'm a passionate software developer with expertise in web development and system architecture. I love building efficient, scalable solutions and contributing to open-source projects. When I'm not coding, you can find me exploring new technologies and sharing knowledge with the developer community."},projects:{title:"Featured Projects",project1:{title:"OS Design v1",description:"The website offers a sleek, intuitive design with straightforward navigation and professional fonts. It highlights the company's services and expertise, making it easy for visitors to get in touch. Simple visuals and effective calls-to-action ensure a smooth and engaging experience. For more information, explore the site.",tags:["Modern","User-friendly","Professional"],link:""},project2:{title:"Project 2",description:"Coming soon.",tags:["Wait","For","It"],link:""},project3:{title:"New Project",description:"This is a new project description.",tags:["New","Exciting","Innovative"],link:""}},contact:{title:"Contact Me",nameLabel:"Name",namePlaceholder:"Enter your name",emailLabel:"Email",emailPlaceholder:"Enter your email",messageLabel:"Message",messagePlaceholder:"Enter your message",submitButton:"Send Message"},services:{title:"Services",list:[{title:"Web Development",description:"Building modern, responsive websites tailored to your needs."},{title:"UI/UX Design",description:"Crafting user-friendly and visually appealing designs."},{title:"SEO Optimization",description:"Improving your website's visibility on search engines."},{title:"Consulting",description:"Providing expert advice to help you achieve your goals."}]}}},G_=r=>{const t=/[A-Z]/.test(r),n=/[a-z]/.test(r),i=/\d/.test(r),s=/[!@#$%^&*(),.?":{}|<>]/.test(r);return r.length>=8&&t&&n&&i&&s},W_=()=>{const[r,e]=re.useState(""),[t,n]=re.useState(""),[i,s]=re.useState(""),[o,a]=re.useState(!1),l=df();re.useEffect(()=>{const c=setTimeout(()=>{Lt&&Lt.signOut()},18e5);return()=>clearTimeout(c)},[]),re.useEffect(()=>{if(!Lt)return;const c=gf(Lt,d=>{d&&l("/admin/dashboard",{replace:!0})});return()=>c()},[l]);const h=async c=>{if(c.preventDefault(),s(""),a(!0),!r.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){s("Please enter a valid email address"),a(!1);return}if(!G_(t)){s("Password must be at least 8 characters long and contain uppercase, lowercase, numbers, and special characters"),a(!1);return}if(!Lt){s("Authentication service is not available."),a(!1);return}try{await cm(Lt,r,t)}catch(d){let f="Failed to log in. Please check your credentials.";if(d.code)switch(d.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":f="Invalid email or password.";break;case"auth/invalid-email":f="Invalid email format.";break;case"auth/too-many-requests":f="Too many failed attempts. Please try again later.";break;default:console.error("Firebase Login error:",d)}s(f)}finally{a(!1)}};return R.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:R.jsxs("div",{className:"p-8 bg-white rounded shadow-md w-full max-w-sm",children:[R.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),R.jsxs("form",{onSubmit:h,children:[R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),R.jsx("input",{type:"email",id:"email",value:r,onChange:c=>e(c.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:o})]}),R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),R.jsx("input",{type:"password",id:"password",value:t,onChange:c=>n(c.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:o})]}),i&&R.jsx("p",{className:"text-red-500 text-xs italic mb-4",children:i}),R.jsx("div",{className:"flex items-center justify-between",children:R.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full disabled:opacity-50",disabled:o,children:o?"Logging in...":"Login"})})]})]})})},Q_={title:"New Project Title",description:"New project description.",tags:["Tag1","Tag2"],link:""},lr=(r,e,t,n,i,s,o)=>e.length===1&&e[0]==="projects"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?R.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[R.jsxs("div",{className:"flex justify-between items-center mb-3",children:[R.jsx("h4",{className:"text-lg font-semibold capitalize",children:String(e[0]).replace(/([A-Z])/g," $1")}),s&&R.jsx("button",{onClick:s,className:"bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-1 px-3 rounded focus:outline-none focus:shadow-outline",children:"+ Add Project"})]}),Object.entries(r).map(([a,l])=>{if(a!=="title"&&typeof l=="object"&&l!==null&&!Array.isArray(l)){const h=[...e,a];return R.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm relative",children:[R.jsxs("div",{className:"flex justify-between items-start mb-3",children:[" ",R.jsxs("h5",{className:"text-lg font-semibold text-gray-700 mr-4",children:["Project: ",R.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:a})]}),o&&R.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete project "${a}"?`)&&o(h)},className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete project ${a}`,children:"Delete Project"})]}),R.jsxs("div",{className:"space-y-4",children:[" ",lr(l,h,t,n,i,void 0,void 0)]})]},h.join("."))}else if(a==="title"&&typeof l=="string"){const h=[...e,a],c=h.join("."),d=n===c;return R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:a.replace(/([A-Z])/g," $1")}),d?R.jsx("input",{type:"text",id:c,name:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2",value:l,onChange:f=>t(h,f.target.value),onBlur:()=>i(null),autoFocus:!0}):R.jsx("div",{className:"mt-1 block w-full rounded-md border border-transparent p-2 cursor-pointer hover:bg-gray-100 min-h-[38px]",onClick:()=>i(c),children:l||R.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},c)}return null})]},e.join(".")):Object.entries(r).map(([a,l])=>{const h=[...e,a],c=h.map(String).join("."),d=n===c;return typeof l=="string"?R.jsxs("div",{className:"mb-4 px-1 sm:px-0",children:[R.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:a.replace(/([A-Z])/g," $1")}),d?R.jsx("textarea",{id:c,name:c,rows:l.length>100?4:2,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:l,onChange:f=>t(h,f.target.value),onBlur:()=>i(null),autoFocus:!0}):R.jsx("div",{className:"block w-full flex-1 rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[50px] whitespace-pre-wrap text-gray-800",onClick:()=>i(c),children:l||R.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},c):typeof l=="object"&&l!==null&&!Array.isArray(l)?R.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[R.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize",children:String(a).replace(/([A-Z])/g," $1")}),lr(l,h,t,n,i)]},c):Array.isArray(l)?R.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-sm",children:[R.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize text-gray-700",children:String(a).replace(/([A-Z])/g," $1")}),R.jsxs("div",{className:"space-y-3",children:[" ",l.map((f,p)=>{const v=[...h,p],y=v.map(String).join("."),g=n===y;return typeof f=="string"?R.jsxs("div",{className:"flex items-center space-x-2",children:[g?R.jsx("input",{type:"text",id:y,name:y,className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:f,onChange:m=>t(v,m.target.value),onBlur:()=>i(null),autoFocus:!0}):R.jsx("div",{className:"flex-grow rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[38px] text-gray-800",onClick:()=>i(y),children:f||R.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})}),o&&R.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this item?")&&o(v)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete item ${p+1}`,children:"Delete"})]},y):typeof f=="object"&&f!==null?R.jsxs("div",{className:"mb-4 p-3 border border-gray-100 rounded relative",children:[" ",R.jsxs("div",{className:"flex justify-between items-center mb-2",children:[" ",R.jsxs("h5",{className:"text-md font-medium",children:["Item ",p+1]}),o&&R.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete Item ${p+1}?`)&&o(v)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-0.5 px-1.5 rounded focus:outline-none focus:shadow-outline","aria-label":`Delete item ${p+1}`,children:"Delete"})]}),lr(f,v,t,n,i,void 0,o)]},y):null})]})," "]},c):null}),Y_=(r,e,t)=>{if(!e||e.length===0)return r;const n=JSON.parse(JSON.stringify(r));let i=n;for(let o=0;o<e.length-1;o++){const a=e[o];if(i[a]===void 0||i[a]===null){const l=typeof e[o+1]=="number";i[a]=l?[]:{}}if(Array.isArray(i)&&typeof a=="number")for(;i.length<=a;)i.push(null);i=i[a]}const s=e[e.length-1];return typeof i!="object"||i===null?(console.error("Cannot set property on non-object:",i,"at path",e),r):(i[s]=t,n)},is=r=>r.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),J_=r=>r===null?!1:r in Dt.en,Xr="translations/en",X_={title:"New Service Title",description:"New service description."},Z_=()=>{var p;const[r,e]=re.useState(Dt),[t,n]=re.useState(!0),[i,s]=re.useState("");re.useEffect(()=>{if(!pe){console.error("Firestore instance is not available."),s("Error: Firestore connection failed."),n(!1);return}const v=Xe(pe,Xr);n(!0);const y=Ul(v,g=>{if(g.exists()){const m=g.data();e(b=>({...b,en:m}))}else e(Dt),console.log("No translations document found in Firestore, using defaults.");n(!1)},g=>{console.error("Firestore snapshot error:",g),s("Error fetching data from Firestore."),n(!1)});return()=>y()},[]);const o=re.useCallback((v,y)=>{e(g=>{const m="en";if(!v||v.length===0)return g;const b=Y_(g[m],v,y);return{...g,[m]:b}}),s("")},[]),a=re.useCallback(()=>{e(v=>{const y=`project_${Date.now()}`,g={...v.en};return(typeof g.projects!="object"||g.projects===null)&&(g.projects={title:Dt.en.projects.title}),g.projects[y]={...Q_},{...v,en:g}}),s("New project added. Edit details and save.")},[]),l=re.useCallback(()=>{e(v=>{var I;const y=(I=v.en)==null?void 0:I.services,m=[...Array.isArray(y==null?void 0:y.list)?y.list:[],{...X_}],b={...v.en,services:{...y||{title:Dt.en.services.title||"Services",list:[]},list:m}};return{...v,en:b}}),s("New service added. Edit details and save.")},[]),h=async v=>{const y=v||r.en;if(!pe){s("Error: Firestore connection failed.");return}s("Saving...");try{const g=Xe(pe,Xr);await La(g,y,{merge:!0}),s("Content changes saved successfully!"),setTimeout(()=>s(""),3e3)}catch(g){console.error("Failed to save translations to Firestore:",g),s("Error saving content changes."),setTimeout(()=>s(""),5e3)}},c=async v=>{if(!pe){s("Error: Firestore connection failed.");return}s("Deleting item...");const y=Xe(pe,Xr);try{await Ls(y,{[v]:H_()})}catch(g){console.error("Failed to delete item from Firestore:",g),s("Error deleting item."),setTimeout(()=>s(""),5e3)}},d=re.useCallback(async v=>{var y;if(!v||v.length<1){console.error("Invalid path for deletion:",v),s("Error: Invalid deletion path.");return}if(v[0]==="services"&&v[1]==="list"&&typeof v[2]=="number"){const g=v[2],m=(y=r.en.services)==null?void 0:y.list;if(!Array.isArray(m)){console.error("Cannot delete service item: services.list is not an array or is missing.",m),s("Error: Services data structure issue.");return}const b=m.filter((_,P)=>P!==g);if(!pe){s("Error: Firestore connection failed.");return}s("Deleting service item...");const I=Xe(pe,Xr);try{await Ls(I,{"services.list":b})}catch(_){console.error("Failed to update services list in Firestore:",_),s("Error deleting service item."),setTimeout(()=>s(""),5e3)}}else{const g=v.join(".");if(!g){console.error("Generated empty field path for deletion:",v),s("Error: Could not determine field to delete.");return}await c(g)}},[(p=r.en.services)==null?void 0:p.list]);return{translations:r,isLoading:t,saveStatus:i,setSaveStatus:s,setTranslations:e,handleInputChange:o,handleAddNewProject:a,handleAddNewService:l,saveChanges:h,handleDeleteItem:d,resetToDefaults:async()=>{if(!pe){s("Error: Firestore connection failed.");return}if(window.confirm("Are you sure you want to reset the English text content (About, Contact, Services, General Info) to the default values? This cannot be undone and does not affect Projects, Styles, or Social Links.")){s("Resetting...");const v={...Dt.en,projects:r.en.projects};try{const y=Xe(pe,Xr);await La(y,v),s("Text content sections reset to defaults."),setTimeout(()=>s(""),3e3)}catch(y){console.error("Failed to reset translations in Firestore:",y),s("Error resetting content."),setTimeout(()=>s(""),5e3)}}}}},e1=({data:r,path:e,handleChange:t,editingPath:n,setEditingPath:i,handleAddProject:s,handleDelete:o,renderFields:a})=>R.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[R.jsxs("div",{className:"flex justify-between items-center mb-3",children:[R.jsx("h4",{className:"text-lg font-semibold capitalize",children:(r==null?void 0:r.title)||String(e[0]).replace(/([A-Z])/g," $1")}),R.jsx("button",{onClick:s,className:"bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-1 px-3 rounded focus:outline-none focus:shadow-outline",children:"+ Add Project"})]}),(r==null?void 0:r.title)!==void 0&&typeof r.title=="string"&&a({title:r.title},e,t,n,i,void 0,void 0),Object.entries(r).map(([l,h])=>{if(l!=="title"&&typeof h=="object"&&h!==null&&!Array.isArray(h)){const c=[...e,l];return R.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm relative",children:[R.jsxs("div",{className:"flex justify-between items-start mb-3",children:[R.jsxs("h5",{className:"text-lg font-semibold text-gray-700 mr-4",children:["Project: ",R.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:l})]}),R.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete project "${l}"?`)&&o(c)},className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete project ${l}`,children:"Delete Project"})]}),R.jsx("div",{className:"space-y-4",children:a(h,c,t,n,i,void 0,o)})]},c.join("."))}return null})]},e.join(".")),t1=({data:r,path:e,handleChange:t,editingPath:n,setEditingPath:i,handleDelete:s,handleAddService:o,renderFields:a})=>!r||typeof r!="object"?R.jsx("p",{children:"Error: Services data is missing or invalid."}):(Array.isArray(r.list)||console.warn("Services data is missing 'list' array."),R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:o,className:"mb-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50","aria-label":"Add new service item",children:"Add New Service Item"}),a(r,e,t,n,i,void 0,s)]})),{min:n1,max:r1}=Math,qn=(r,e=0,t=1)=>n1(r1(e,r),t),Bl=r=>{r._clipped=!1,r._unclipped=r.slice(0);for(let e=0;e<=3;e++)e<3?((r[e]<0||r[e]>255)&&(r._clipped=!0),r[e]=qn(r[e],0,255)):e===3&&(r[e]=qn(r[e],0,1));return r},rp={};for(let r of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])rp[`[object ${r}]`]=r.toLowerCase();function Pe(r){return rp[Object.prototype.toString.call(r)]||"object"}const xe=(r,e=null)=>r.length>=3?Array.prototype.slice.call(r):Pe(r[0])=="object"&&e?e.split("").filter(t=>r[0][t]!==void 0).map(t=>r[0][t]):r[0].slice(0),kr=r=>{if(r.length<2)return null;const e=r.length-1;return Pe(r[e])=="string"?r[e].toLowerCase():null},{PI:lo,min:ip,max:sp}=Math,Pt=r=>Math.round(r*100)/100,Ma=r=>Math.round(r*100)/100,Zt=lo*2,Go=lo/3,i1=lo/180,s1=180/lo;function op(r){return[...r.slice(0,3).reverse(),...r.slice(3)]}const we={format:{},autodetect:[]};class ae{constructor(...e){const t=this;if(Pe(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let n=kr(e),i=!1;if(!n){i=!0,we.sorted||(we.autodetect=we.autodetect.sort((s,o)=>o.p-s.p),we.sorted=!0);for(let s of we.autodetect)if(n=s.test(...e),n)break}if(we.format[n]){const s=we.format[n].apply(null,i?e:e.slice(0,-1));t._rgb=Bl(s)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Pe(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const o1="3.1.2",ke=(...r)=>new ae(...r);ke.version=o1;const vr={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a1=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,l1=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,ap=r=>{if(r.match(a1)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);const e=parseInt(r,16),t=e>>16,n=e>>8&255,i=e&255;return[t,n,i,1]}if(r.match(l1)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);const e=parseInt(r,16),t=e>>24&255,n=e>>16&255,i=e>>8&255,s=Math.round((e&255)/255*100)/100;return[t,n,i,s]}throw new Error(`unknown hex color: ${r}`)},{round:ss}=Math,lp=(...r)=>{let[e,t,n,i]=xe(r,"rgba"),s=kr(r)||"auto";i===void 0&&(i=1),s==="auto"&&(s=i<1?"rgba":"rgb"),e=ss(e),t=ss(t),n=ss(n);let a="000000"+(e<<16|t<<8|n).toString(16);a=a.substr(a.length-6);let l="0"+ss(i*255).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}};ae.prototype.name=function(){const r=lp(this._rgb,"rgb");for(let e of Object.keys(vr))if(vr[e]===r)return e.toLowerCase();return r};we.format.named=r=>{if(r=r.toLowerCase(),vr[r])return ap(vr[r]);throw new Error("unknown color name: "+r)};we.autodetect.push({p:5,test:(r,...e)=>{if(!e.length&&Pe(r)==="string"&&vr[r.toLowerCase()])return"named"}});ae.prototype.alpha=function(r,e=!1){return r!==void 0&&Pe(r)==="number"?e?(this._rgb[3]=r,this):new ae([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};ae.prototype.clipped=function(){return this._rgb._clipped||!1};const Kt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},u1=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function tn(r){const e=u1.get(String(r).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+r);Kt.labWhitePoint=r,Kt.Xn=e[0],Kt.Zn=e[1]}function Ei(){return Kt.labWhitePoint}const zl=(...r)=>{r=xe(r,"lab");const[e,t,n]=r,[i,s,o]=c1(e,t,n),[a,l,h]=up(i,s,o);return[a,l,h,r.length>3?r[3]:1]},c1=(r,e,t)=>{const{kE:n,kK:i,kKE:s,Xn:o,Yn:a,Zn:l}=Kt,h=(r+16)/116,c=.002*e+h,d=h-.005*t,f=c*c*c,p=d*d*d,v=f>n?f:(116*c-16)/i,y=r>s?Math.pow((r+16)/116,3):r/i,g=p>n?p:(116*d-16)/i,m=v*o,b=y*a,I=g*l;return[m,b,I]},Wo=r=>{const e=Math.sign(r);return r=Math.abs(r),(r<=.0031308?r*12.92:1.055*Math.pow(r,1/2.4)-.055)*e},up=(r,e,t)=>{const{MtxAdaptMa:n,MtxAdaptMaI:i,MtxXYZ2RGB:s,RefWhiteRGB:o,Xn:a,Yn:l,Zn:h}=Kt,c=a*n.m00+l*n.m10+h*n.m20,d=a*n.m01+l*n.m11+h*n.m21,f=a*n.m02+l*n.m12+h*n.m22,p=o.X*n.m00+o.Y*n.m10+o.Z*n.m20,v=o.X*n.m01+o.Y*n.m11+o.Z*n.m21,y=o.X*n.m02+o.Y*n.m12+o.Z*n.m22,g=(r*n.m00+e*n.m10+t*n.m20)*(p/c),m=(r*n.m01+e*n.m11+t*n.m21)*(v/d),b=(r*n.m02+e*n.m12+t*n.m22)*(y/f),I=g*i.m00+m*i.m10+b*i.m20,_=g*i.m01+m*i.m11+b*i.m21,P=g*i.m02+m*i.m12+b*i.m22,C=Wo(I*s.m00+_*s.m10+P*s.m20),w=Wo(I*s.m01+_*s.m11+P*s.m21),E=Wo(I*s.m02+_*s.m12+P*s.m22);return[C*255,w*255,E*255]},Hl=(...r)=>{const[e,t,n,...i]=xe(r,"rgb"),[s,o,a]=cp(e,t,n),[l,h,c]=h1(s,o,a);return[l,h,c,...i.length>0&&i[0]<1?[i[0]]:[]]};function h1(r,e,t){const{Xn:n,Yn:i,Zn:s,kE:o,kK:a}=Kt,l=r/n,h=e/i,c=t/s,d=l>o?Math.pow(l,1/3):(a*l+16)/116,f=h>o?Math.pow(h,1/3):(a*h+16)/116,p=c>o?Math.pow(c,1/3):(a*c+16)/116;return[116*f-16,500*(d-f),200*(f-p)]}function Qo(r){const e=Math.sign(r);return r=Math.abs(r),(r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4))*e}const cp=(r,e,t)=>{r=Qo(r/255),e=Qo(e/255),t=Qo(t/255);const{MtxRGB2XYZ:n,MtxAdaptMa:i,MtxAdaptMaI:s,Xn:o,Yn:a,Zn:l,As:h,Bs:c,Cs:d}=Kt;let f=r*n.m00+e*n.m10+t*n.m20,p=r*n.m01+e*n.m11+t*n.m21,v=r*n.m02+e*n.m12+t*n.m22;const y=o*i.m00+a*i.m10+l*i.m20,g=o*i.m01+a*i.m11+l*i.m21,m=o*i.m02+a*i.m12+l*i.m22;let b=f*i.m00+p*i.m10+v*i.m20,I=f*i.m01+p*i.m11+v*i.m21,_=f*i.m02+p*i.m12+v*i.m22;return b*=y/h,I*=g/c,_*=m/d,f=b*s.m00+I*s.m10+_*s.m20,p=b*s.m01+I*s.m11+_*s.m21,v=b*s.m02+I*s.m12+_*s.m22,[f,p,v]};ae.prototype.lab=function(){return Hl(this._rgb)};const f1=(...r)=>new ae(...r,"lab");Object.assign(ke,{lab:f1,getLabWhitePoint:Ei,setLabWhitePoint:tn});we.format.lab=zl;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"lab"),Pe(r)==="array"&&r.length===3)return"lab"}});ae.prototype.darken=function(r=1){const e=this,t=e.lab();return t[0]-=Kt.Kn*r,new ae(t,"lab").alpha(e.alpha(),!0)};ae.prototype.brighten=function(r=1){return this.darken(-r)};ae.prototype.darker=ae.prototype.darken;ae.prototype.brighter=ae.prototype.brighten;ae.prototype.get=function(r){const[e,t]=r.split("."),n=this[e]();if(t){const i=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(i>-1)return n[i];throw new Error(`unknown channel ${t} in mode ${e}`)}else return n};const{pow:d1}=Math,p1=1e-7,g1=20;ae.prototype.luminance=function(r,e="rgb"){if(r!==void 0&&Pe(r)==="number"){if(r===0)return new ae([0,0,0,this._rgb[3]],"rgb");if(r===1)return new ae([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),n=g1;const i=(o,a)=>{const l=o.interpolate(a,.5,e),h=l.luminance();return Math.abs(r-h)<p1||!n--?l:h>r?i(o,l):i(l,a)},s=(t>r?i(new ae([0,0,0]),this):i(this,new ae([255,255,255]))).rgb();return new ae([...s,this._rgb[3]])}return m1(...this._rgb.slice(0,3))};const m1=(r,e,t)=>(r=Yo(r),e=Yo(e),t=Yo(t),.2126*r+.7152*e+.0722*t),Yo=r=>(r/=255,r<=.03928?r/12.92:d1((r+.055)/1.055,2.4)),yt={},_r=(r,e,t=.5,...n)=>{let i=n[0]||"lrgb";if(!yt[i]&&!n.length&&(i=Object.keys(yt)[0]),!yt[i])throw new Error(`interpolation mode ${i} is not defined`);return Pe(r)!=="object"&&(r=new ae(r)),Pe(e)!=="object"&&(e=new ae(e)),yt[i](r,e,t).alpha(r.alpha()+t*(e.alpha()-r.alpha()))};ae.prototype.mix=ae.prototype.interpolate=function(r,e=.5,...t){return _r(this,r,e,...t)};ae.prototype.premultiply=function(r=!1){const e=this._rgb,t=e[3];return r?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new ae([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};const{sin:y1,cos:v1}=Math,hp=(...r)=>{let[e,t,n]=xe(r,"lch");return isNaN(n)&&(n=0),n=n*i1,[e,v1(n)*t,y1(n)*t]},Kl=(...r)=>{r=xe(r,"lch");const[e,t,n]=r,[i,s,o]=hp(e,t,n),[a,l,h]=zl(i,s,o);return[a,l,h,r.length>3?r[3]:1]},_1=(...r)=>{const e=op(xe(r,"hcl"));return Kl(...e)},{sqrt:b1,atan2:w1,round:E1}=Math,fp=(...r)=>{const[e,t,n]=xe(r,"lab"),i=b1(t*t+n*n);let s=(w1(n,t)*s1+360)%360;return E1(i*1e4)===0&&(s=Number.NaN),[e,i,s]},Gl=(...r)=>{const[e,t,n,...i]=xe(r,"rgb"),[s,o,a]=Hl(e,t,n),[l,h,c]=fp(s,o,a);return[l,h,c,...i.length>0&&i[0]<1?[i[0]]:[]]};ae.prototype.lch=function(){return Gl(this._rgb)};ae.prototype.hcl=function(){return op(Gl(this._rgb))};const T1=(...r)=>new ae(...r,"lch"),x1=(...r)=>new ae(...r,"hcl");Object.assign(ke,{lch:T1,hcl:x1});we.format.lch=Kl;we.format.hcl=_1;["lch","hcl"].forEach(r=>we.autodetect.push({p:2,test:(...e)=>{if(e=xe(e,r),Pe(e)==="array"&&e.length===3)return r}}));ae.prototype.saturate=function(r=1){const e=this,t=e.lch();return t[1]+=Kt.Kn*r,t[1]<0&&(t[1]=0),new ae(t,"lch").alpha(e.alpha(),!0)};ae.prototype.desaturate=function(r=1){return this.saturate(-r)};ae.prototype.set=function(r,e,t=!1){const[n,i]=r.split("."),s=this[n]();if(i){const o=n.indexOf(i)-(n.substr(0,2)==="ok"?2:0);if(o>-1){if(Pe(e)=="string")switch(e.charAt(0)){case"+":s[o]+=+e;break;case"-":s[o]+=+e;break;case"*":s[o]*=+e.substr(1);break;case"/":s[o]/=+e.substr(1);break;default:s[o]=+e}else if(Pe(e)==="number")s[o]=e;else throw new Error("unsupported value for Color.set");const a=new ae(s,n);return t?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${i} in mode ${n}`)}else return s};ae.prototype.tint=function(r=.5,...e){return _r(this,"white",r,...e)};ae.prototype.shade=function(r=.5,...e){return _r(this,"black",r,...e)};const A1=(r,e,t)=>{const n=r._rgb,i=e._rgb;return new ae(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"rgb")};yt.rgb=A1;const{sqrt:Jo,pow:Yn}=Math,k1=(r,e,t)=>{const[n,i,s]=r._rgb,[o,a,l]=e._rgb;return new ae(Jo(Yn(n,2)*(1-t)+Yn(o,2)*t),Jo(Yn(i,2)*(1-t)+Yn(a,2)*t),Jo(Yn(s,2)*(1-t)+Yn(l,2)*t),"rgb")};yt.lrgb=k1;const S1=(r,e,t)=>{const n=r.lab(),i=e.lab();return new ae(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"lab")};yt.lab=S1;const Sr=(r,e,t,n)=>{let i,s;n==="hsl"?(i=r.hsl(),s=e.hsl()):n==="hsv"?(i=r.hsv(),s=e.hsv()):n==="hcg"?(i=r.hcg(),s=e.hcg()):n==="hsi"?(i=r.hsi(),s=e.hsi()):n==="lch"||n==="hcl"?(n="hcl",i=r.hcl(),s=e.hcl()):n==="oklch"&&(i=r.oklch().reverse(),s=e.oklch().reverse());let o,a,l,h,c,d;(n.substr(0,1)==="h"||n==="oklch")&&([o,l,c]=i,[a,h,d]=s);let f,p,v,y;return!isNaN(o)&&!isNaN(a)?(a>o&&a-o>180?y=a-(o+360):a<o&&o-a>180?y=a+360-o:y=a-o,p=o+t*y):isNaN(o)?isNaN(a)?p=Number.NaN:(p=a,(c==1||c==0)&&n!="hsv"&&(f=h)):(p=o,(d==1||d==0)&&n!="hsv"&&(f=l)),f===void 0&&(f=l+t*(h-l)),v=c+t*(d-c),n==="oklch"?new ae([v,f,p],n):new ae([p,f,v],n)},dp=(r,e,t)=>Sr(r,e,t,"lch");yt.lch=dp;yt.hcl=dp;const I1=r=>{if(Pe(r)=="number"&&r>=0&&r<=16777215){const e=r>>16,t=r>>8&255,n=r&255;return[e,t,n,1]}throw new Error("unknown num color: "+r)},O1=(...r)=>{const[e,t,n]=xe(r,"rgb");return(e<<16)+(t<<8)+n};ae.prototype.num=function(){return O1(this._rgb)};const P1=(...r)=>new ae(...r,"num");Object.assign(ke,{num:P1});we.format.num=I1;we.autodetect.push({p:5,test:(...r)=>{if(r.length===1&&Pe(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});const N1=(r,e,t)=>{const n=r.num(),i=e.num();return new ae(n+t*(i-n),"num")};yt.num=N1;const{floor:R1}=Math,C1=(...r)=>{r=xe(r,"hcg");let[e,t,n]=r,i,s,o;n=n*255;const a=t*255;if(t===0)i=s=o=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=R1(e),h=e-l,c=n*(1-t),d=c+a*(1-h),f=c+a*h,p=c+a;switch(l){case 0:[i,s,o]=[p,f,c];break;case 1:[i,s,o]=[d,p,c];break;case 2:[i,s,o]=[c,p,f];break;case 3:[i,s,o]=[c,d,p];break;case 4:[i,s,o]=[f,c,p];break;case 5:[i,s,o]=[p,c,d];break}}return[i,s,o,r.length>3?r[3]:1]},j1=(...r)=>{const[e,t,n]=xe(r,"rgb"),i=ip(e,t,n),s=sp(e,t,n),o=s-i,a=o*100/255,l=i/(255-o)*100;let h;return o===0?h=Number.NaN:(e===s&&(h=(t-n)/o),t===s&&(h=2+(n-e)/o),n===s&&(h=4+(e-t)/o),h*=60,h<0&&(h+=360)),[h,a,l]};ae.prototype.hcg=function(){return j1(this._rgb)};const L1=(...r)=>new ae(...r,"hcg");ke.hcg=L1;we.format.hcg=C1;we.autodetect.push({p:1,test:(...r)=>{if(r=xe(r,"hcg"),Pe(r)==="array"&&r.length===3)return"hcg"}});const D1=(r,e,t)=>Sr(r,e,t,"hcg");yt.hcg=D1;const{cos:Jn}=Math,M1=(...r)=>{r=xe(r,"hsi");let[e,t,n]=r,i,s,o;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(o=(1-t)/3,i=(1+t*Jn(Zt*e)/Jn(Go-Zt*e))/3,s=1-(o+i)):e<2/3?(e-=1/3,i=(1-t)/3,s=(1+t*Jn(Zt*e)/Jn(Go-Zt*e))/3,o=1-(i+s)):(e-=2/3,s=(1-t)/3,o=(1+t*Jn(Zt*e)/Jn(Go-Zt*e))/3,i=1-(s+o)),i=qn(n*i*3),s=qn(n*s*3),o=qn(n*o*3),[i*255,s*255,o*255,r.length>3?r[3]:1]},{min:V1,sqrt:$1,acos:q1}=Math,F1=(...r)=>{let[e,t,n]=xe(r,"rgb");e/=255,t/=255,n/=255;let i;const s=V1(e,t,n),o=(e+t+n)/3,a=o>0?1-s/o:0;return a===0?i=NaN:(i=(e-t+(e-n))/2,i/=$1((e-t)*(e-t)+(e-n)*(t-n)),i=q1(i),n>t&&(i=Zt-i),i/=Zt),[i*360,a,o]};ae.prototype.hsi=function(){return F1(this._rgb)};const U1=(...r)=>new ae(...r,"hsi");ke.hsi=U1;we.format.hsi=M1;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"hsi"),Pe(r)==="array"&&r.length===3)return"hsi"}});const B1=(r,e,t)=>Sr(r,e,t,"hsi");yt.hsi=B1;const Va=(...r)=>{r=xe(r,"hsl");const[e,t,n]=r;let i,s,o;if(t===0)i=s=o=n*255;else{const a=[0,0,0],l=[0,0,0],h=n<.5?n*(1+t):n+t-n*t,c=2*n-h,d=e/360;a[0]=d+1/3,a[1]=d,a[2]=d-1/3;for(let f=0;f<3;f++)a[f]<0&&(a[f]+=1),a[f]>1&&(a[f]-=1),6*a[f]<1?l[f]=c+(h-c)*6*a[f]:2*a[f]<1?l[f]=h:3*a[f]<2?l[f]=c+(h-c)*(2/3-a[f])*6:l[f]=c;[i,s,o]=[l[0]*255,l[1]*255,l[2]*255]}return r.length>3?[i,s,o,r[3]]:[i,s,o,1]},pp=(...r)=>{r=xe(r,"rgba");let[e,t,n]=r;e/=255,t/=255,n/=255;const i=ip(e,t,n),s=sp(e,t,n),o=(s+i)/2;let a,l;return s===i?(a=0,l=Number.NaN):a=o<.5?(s-i)/(s+i):(s-i)/(2-s-i),e==s?l=(t-n)/(s-i):t==s?l=2+(n-e)/(s-i):n==s&&(l=4+(e-t)/(s-i)),l*=60,l<0&&(l+=360),r.length>3&&r[3]!==void 0?[l,a,o,r[3]]:[l,a,o]};ae.prototype.hsl=function(){return pp(this._rgb)};const z1=(...r)=>new ae(...r,"hsl");ke.hsl=z1;we.format.hsl=Va;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"hsl"),Pe(r)==="array"&&r.length===3)return"hsl"}});const H1=(r,e,t)=>Sr(r,e,t,"hsl");yt.hsl=H1;const{floor:K1}=Math,G1=(...r)=>{r=xe(r,"hsv");let[e,t,n]=r,i,s,o;if(n*=255,t===0)i=s=o=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=K1(e),l=e-a,h=n*(1-t),c=n*(1-t*l),d=n*(1-t*(1-l));switch(a){case 0:[i,s,o]=[n,d,h];break;case 1:[i,s,o]=[c,n,h];break;case 2:[i,s,o]=[h,n,d];break;case 3:[i,s,o]=[h,c,n];break;case 4:[i,s,o]=[d,h,n];break;case 5:[i,s,o]=[n,h,c];break}}return[i,s,o,r.length>3?r[3]:1]},{min:W1,max:Q1}=Math,Y1=(...r)=>{r=xe(r,"rgb");let[e,t,n]=r;const i=W1(e,t,n),s=Q1(e,t,n),o=s-i;let a,l,h;return h=s/255,s===0?(a=Number.NaN,l=0):(l=o/s,e===s&&(a=(t-n)/o),t===s&&(a=2+(n-e)/o),n===s&&(a=4+(e-t)/o),a*=60,a<0&&(a+=360)),[a,l,h]};ae.prototype.hsv=function(){return Y1(this._rgb)};const J1=(...r)=>new ae(...r,"hsv");ke.hsv=J1;we.format.hsv=G1;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"hsv"),Pe(r)==="array"&&r.length===3)return"hsv"}});const X1=(r,e,t)=>Sr(r,e,t,"hsv");yt.hsv=X1;function Ds(r,e){let t=r.length;Array.isArray(r[0])||(r=[r]),Array.isArray(e[0])||(e=e.map(o=>[o]));let n=e[0].length,i=e[0].map((o,a)=>e.map(l=>l[a])),s=r.map(o=>i.map(a=>Array.isArray(o)?o.reduce((l,h,c)=>l+h*(a[c]||0),0):a.reduce((l,h)=>l+h*o,0)));return t===1&&(s=s[0]),n===1?s.map(o=>o[0]):s}const Wl=(...r)=>{r=xe(r,"lab");const[e,t,n,...i]=r,[s,o,a]=Z1([e,t,n]),[l,h,c]=up(s,o,a);return[l,h,c,...i.length>0&&i[0]<1?[i[0]]:[]]};function Z1(r){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],t=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=Ds(t,r);return Ds(e,n.map(i=>i**3))}const Ql=(...r)=>{const[e,t,n,...i]=xe(r,"rgb"),s=cp(e,t,n);return[...eb(s),...i.length>0&&i[0]<1?[i[0]]:[]]};function eb(r){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=Ds(e,r);return Ds(t,n.map(i=>Math.cbrt(i)))}ae.prototype.oklab=function(){return Ql(this._rgb)};const tb=(...r)=>new ae(...r,"oklab");Object.assign(ke,{oklab:tb});we.format.oklab=Wl;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"oklab"),Pe(r)==="array"&&r.length===3)return"oklab"}});const nb=(r,e,t)=>{const n=r.oklab(),i=e.oklab();return new ae(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"oklab")};yt.oklab=nb;const rb=(r,e,t)=>Sr(r,e,t,"oklch");yt.oklch=rb;const{pow:Xo,sqrt:Zo,PI:ea,cos:ah,sin:lh,atan2:ib}=Math,sb=(r,e="lrgb",t=null)=>{const n=r.length;t||(t=Array.from(new Array(n)).map(()=>1));const i=n/t.reduce(function(d,f){return d+f});if(t.forEach((d,f)=>{t[f]*=i}),r=r.map(d=>new ae(d)),e==="lrgb")return ob(r,t);const s=r.shift(),o=s.get(e),a=[];let l=0,h=0;for(let d=0;d<o.length;d++)if(o[d]=(o[d]||0)*t[0],a.push(isNaN(o[d])?0:t[0]),e.charAt(d)==="h"&&!isNaN(o[d])){const f=o[d]/180*ea;l+=ah(f)*t[0],h+=lh(f)*t[0]}let c=s.alpha()*t[0];r.forEach((d,f)=>{const p=d.get(e);c+=d.alpha()*t[f+1];for(let v=0;v<o.length;v++)if(!isNaN(p[v]))if(a[v]+=t[f+1],e.charAt(v)==="h"){const y=p[v]/180*ea;l+=ah(y)*t[f+1],h+=lh(y)*t[f+1]}else o[v]+=p[v]*t[f+1]});for(let d=0;d<o.length;d++)if(e.charAt(d)==="h"){let f=ib(h/a[d],l/a[d])/ea*180;for(;f<0;)f+=360;for(;f>=360;)f-=360;o[d]=f}else o[d]=o[d]/a[d];return c/=n,new ae(o,e).alpha(c>.99999?1:c,!0)},ob=(r,e)=>{const t=r.length,n=[0,0,0,0];for(let i=0;i<r.length;i++){const s=r[i],o=e[i]/t,a=s._rgb;n[0]+=Xo(a[0],2)*o,n[1]+=Xo(a[1],2)*o,n[2]+=Xo(a[2],2)*o,n[3]+=a[3]*o}return n[0]=Zo(n[0]),n[1]=Zo(n[1]),n[2]=Zo(n[2]),n[3]>.9999999&&(n[3]=1),new ae(Bl(n))},{pow:ab}=Math;function Ms(r){let e="rgb",t=ke("#ccc"),n=0,i=[0,1],s=[],o=[0,0],a=!1,l=[],h=!1,c=0,d=1,f=!1,p={},v=!0,y=1;const g=function(w){if(w=w||["#fff","#000"],w&&Pe(w)==="string"&&ke.brewer&&ke.brewer[w.toLowerCase()]&&(w=ke.brewer[w.toLowerCase()]),Pe(w)==="array"){w.length===1&&(w=[w[0],w[0]]),w=w.slice(0);for(let E=0;E<w.length;E++)w[E]=ke(w[E]);s.length=0;for(let E=0;E<w.length;E++)s.push(E/(w.length-1))}return P(),l=w},m=function(w){if(a!=null){const E=a.length-1;let S=0;for(;S<E&&w>=a[S];)S++;return S-1}return 0};let b=w=>w,I=w=>w;const _=function(w,E){let S,T;if(E==null&&(E=!1),isNaN(w)||w===null)return t;E?T=w:a&&a.length>2?T=m(w)/(a.length-2):d!==c?T=(w-c)/(d-c):T=1,T=I(T),E||(T=b(T)),y!==1&&(T=ab(T,y)),T=o[0]+T*(1-o[0]-o[1]),T=qn(T,0,1);const x=Math.floor(T*1e4);if(v&&p[x])S=p[x];else{if(Pe(l)==="array")for(let A=0;A<s.length;A++){const O=s[A];if(T<=O){S=l[A];break}if(T>=O&&A===s.length-1){S=l[A];break}if(T>O&&T<s[A+1]){T=(T-O)/(s[A+1]-O),S=ke.interpolate(l[A],l[A+1],T,e);break}}else Pe(l)==="function"&&(S=l(T));v&&(p[x]=S)}return S};var P=()=>p={};g(r);const C=function(w){const E=ke(_(w));return h&&E[h]?E[h]():E};return C.classes=function(w){if(w!=null){if(Pe(w)==="array")a=w,i=[w[0],w[w.length-1]];else{const E=ke.analyze(i);w===0?a=[E.min,E.max]:a=ke.limits(E,"e",w)}return C}return a},C.domain=function(w){if(!arguments.length)return i;c=w[0],d=w[w.length-1],s=[];const E=l.length;if(w.length===E&&c!==d)for(let S of Array.from(w))s.push((S-c)/(d-c));else{for(let S=0;S<E;S++)s.push(S/(E-1));if(w.length>2){const S=w.map((x,A)=>A/(w.length-1)),T=w.map(x=>(x-c)/(d-c));T.every((x,A)=>S[A]===x)||(I=x=>{if(x<=0||x>=1)return x;let A=0;for(;x>=T[A+1];)A++;const O=(x-T[A])/(T[A+1]-T[A]);return S[A]+O*(S[A+1]-S[A])})}}return i=[c,d],C},C.mode=function(w){return arguments.length?(e=w,P(),C):e},C.range=function(w,E){return g(w),C},C.out=function(w){return h=w,C},C.spread=function(w){return arguments.length?(n=w,C):n},C.correctLightness=function(w){return w==null&&(w=!0),f=w,P(),f?b=function(E){const S=_(0,!0).lab()[0],T=_(1,!0).lab()[0],x=S>T;let A=_(E,!0).lab()[0];const O=S+(T-S)*E;let D=A-O,q=0,H=1,K=20;for(;Math.abs(D)>.01&&K-- >0;)(function(){return x&&(D*=-1),D<0?(q=E,E+=(H-E)*.5):(H=E,E+=(q-E)*.5),A=_(E,!0).lab()[0],D=A-O})();return E}:b=E=>E,C},C.padding=function(w){return w!=null?(Pe(w)==="number"&&(w=[w,w]),o=w,C):o},C.colors=function(w,E){arguments.length<2&&(E="hex");let S=[];if(arguments.length===0)S=l.slice(0);else if(w===1)S=[C(.5)];else if(w>1){const T=i[0],x=i[1]-T;S=lb(0,w).map(A=>C(T+A/(w-1)*x))}else{r=[];let T=[];if(a&&a.length>2)for(let x=1,A=a.length,O=1<=A;O?x<A:x>A;O?x++:x--)T.push((a[x-1]+a[x])*.5);else T=i;S=T.map(x=>C(x))}return ke[E]&&(S=S.map(T=>T[E]())),S},C.cache=function(w){return w!=null?(v=w,C):v},C.gamma=function(w){return w!=null?(y=w,C):y},C.nodata=function(w){return w!=null?(t=ke(w),C):t},C}function lb(r,e,t){let n=[],i=r<e,s=e;for(let o=r;i?o<s:o>s;i?o++:o--)n.push(o);return n}const ub=function(r){let e=[1,1];for(let t=1;t<r;t++){let n=[1];for(let i=1;i<=e.length;i++)n[i]=(e[i]||0)+e[i-1];e=n}return e},cb=function(r){let e,t,n,i;if(r=r.map(s=>new ae(s)),r.length===2)[t,n]=r.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>t[a]+s*(n[a]-t[a]));return new ae(o,"lab")};else if(r.length===3)[t,n,i]=r.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>(1-s)*(1-s)*t[a]+2*(1-s)*s*n[a]+s*s*i[a]);return new ae(o,"lab")};else if(r.length===4){let s;[t,n,i,s]=r.map(o=>o.lab()),e=function(o){const a=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*t[l]+3*(1-o)*(1-o)*o*n[l]+3*(1-o)*o*o*i[l]+o*o*o*s[l]);return new ae(a,"lab")}}else if(r.length>=5){let s,o,a;s=r.map(l=>l.lab()),a=r.length-1,o=ub(a),e=function(l){const h=1-l,c=[0,1,2].map(d=>s.reduce((f,p,v)=>f+o[v]*h**(a-v)*l**v*p[d],0));return new ae(c,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},hb=r=>{const e=cb(r);return e.scale=()=>Ms(e),e},{round:gp}=Math;ae.prototype.rgb=function(r=!0){return r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(gp)};ae.prototype.rgba=function(r=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?r===!1?e:gp(e):e)};const fb=(...r)=>new ae(...r,"rgb");Object.assign(ke,{rgb:fb});we.format.rgb=(...r)=>{const e=xe(r,"rgba");return e[3]===void 0&&(e[3]=1),e};we.autodetect.push({p:3,test:(...r)=>{if(r=xe(r,"rgba"),Pe(r)==="array"&&(r.length===3||r.length===4&&Pe(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});const $t=(r,e,t)=>{if(!$t[t])throw new Error("unknown blend mode "+t);return $t[t](r,e)},In=r=>(e,t)=>{const n=ke(t).rgb(),i=ke(e).rgb();return ke.rgb(r(n,i))},On=r=>(e,t)=>{const n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n},db=r=>r,pb=(r,e)=>r*e/255,gb=(r,e)=>r>e?e:r,mb=(r,e)=>r>e?r:e,yb=(r,e)=>255*(1-(1-r/255)*(1-e/255)),vb=(r,e)=>e<128?2*r*e/255:255*(1-2*(1-r/255)*(1-e/255)),_b=(r,e)=>255*(1-(1-e/255)/(r/255)),bb=(r,e)=>r===255?255:(r=255*(e/255)/(1-r/255),r>255?255:r);$t.normal=In(On(db));$t.multiply=In(On(pb));$t.screen=In(On(yb));$t.overlay=In(On(vb));$t.darken=In(On(gb));$t.lighten=In(On(mb));$t.dodge=In(On(bb));$t.burn=In(On(_b));const{pow:wb,sin:Eb,cos:Tb}=Math;function xb(r=300,e=-1.5,t=1,n=1,i=[0,1]){let s=0,o;Pe(i)==="array"?o=i[1]-i[0]:(o=0,i=[i,i]);const a=function(l){const h=Zt*((r+120)/360+e*l),c=wb(i[0]+o*l,n),f=(s!==0?t[0]+l*s:t)*c*(1-c)/2,p=Tb(h),v=Eb(h),y=c+f*(-.14861*p+1.78277*v),g=c+f*(-.29227*p-.90649*v),m=c+f*(1.97294*p);return ke(Bl([y*255,g*255,m*255,1]))};return a.start=function(l){return l==null?r:(r=l,a)},a.rotations=function(l){return l==null?e:(e=l,a)},a.gamma=function(l){return l==null?n:(n=l,a)},a.hue=function(l){return l==null?t:(t=l,Pe(t)==="array"?(s=t[1]-t[0],s===0&&(t=t[1])):s=0,a)},a.lightness=function(l){return l==null?i:(Pe(l)==="array"?(i=l,o=l[1]-l[0]):(i=[l,l],o=0),a)},a.scale=()=>ke.scale(a),a.hue(t),a}const Ab="0123456789abcdef",{floor:kb,random:Sb}=Math,Ib=()=>{let r="#";for(let e=0;e<6;e++)r+=Ab.charAt(kb(Sb()*16));return new ae(r,"hex")},{log:uh,pow:Ob,floor:Pb,abs:Nb}=Math;function mp(r,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Pe(r)==="object"&&(r=Object.values(r)),r.forEach(n=>{e&&Pe(n)==="object"&&(n=n[e]),n!=null&&!isNaN(n)&&(t.values.push(n),t.sum+=n,n<t.min&&(t.min=n),n>t.max&&(t.max=n),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(n,i)=>yp(t,n,i),t}function yp(r,e="equal",t=7){Pe(r)=="array"&&(r=mp(r));const{min:n,max:i}=r,s=r.values.sort((a,l)=>a-l);if(t===1)return[n,i];const o=[];if(e.substr(0,1)==="c"&&(o.push(n),o.push(i)),e.substr(0,1)==="e"){o.push(n);for(let a=1;a<t;a++)o.push(n+a/t*(i-n));o.push(i)}else if(e.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*uh(n),l=Math.LOG10E*uh(i);o.push(n);for(let h=1;h<t;h++)o.push(Ob(10,a+h/t*(l-a)));o.push(i)}else if(e.substr(0,1)==="q"){o.push(n);for(let a=1;a<t;a++){const l=(s.length-1)*a/t,h=Pb(l);if(h===l)o.push(s[h]);else{const c=l-h;o.push(s[h]*(1-c)+s[h+1]*c)}}o.push(i)}else if(e.substr(0,1)==="k"){let a;const l=s.length,h=new Array(l),c=new Array(t);let d=!0,f=0,p=null;p=[],p.push(n);for(let g=1;g<t;g++)p.push(n+g/t*(i-n));for(p.push(i);d;){for(let m=0;m<t;m++)c[m]=0;for(let m=0;m<l;m++){const b=s[m];let I=Number.MAX_VALUE,_;for(let P=0;P<t;P++){const C=Nb(p[P]-b);C<I&&(I=C,_=P),c[_]++,h[m]=_}}const g=new Array(t);for(let m=0;m<t;m++)g[m]=null;for(let m=0;m<l;m++)a=h[m],g[a]===null?g[a]=s[m]:g[a]+=s[m];for(let m=0;m<t;m++)g[m]*=1/c[m];d=!1;for(let m=0;m<t;m++)if(g[m]!==p[m]){d=!0;break}p=g,f++,f>200&&(d=!1)}const v={};for(let g=0;g<t;g++)v[g]=[];for(let g=0;g<l;g++)a=h[g],v[a].push(s[g]);let y=[];for(let g=0;g<t;g++)y.push(v[g][0]),y.push(v[g][v[g].length-1]);y=y.sort((g,m)=>g-m),o.push(y[0]);for(let g=1;g<y.length;g+=2){const m=y[g];!isNaN(m)&&o.indexOf(m)===-1&&o.push(m)}}return o}const Rb=(r,e)=>{r=new ae(r),e=new ae(e);const t=r.luminance(),n=e.luminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const ch=.027,Cb=5e-4,jb=.1,hh=1.14,os=.022,fh=1.414,Lb=(r,e)=>{r=new ae(r),e=new ae(e),r.alpha()<1&&(r=_r(e,r,r.alpha(),"rgb"));const t=dh(...r.rgb()),n=dh(...e.rgb()),i=t>=os?t:t+Math.pow(os-t,fh),s=n>=os?n:n+Math.pow(os-n,fh),o=Math.pow(s,.56)-Math.pow(i,.57),a=Math.pow(s,.65)-Math.pow(i,.62),l=Math.abs(s-i)<Cb?0:i<s?o*hh:a*hh;return(Math.abs(l)<jb?0:l>0?l-ch:l+ch)*100};function dh(r,e,t){return .2126729*Math.pow(r/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(t/255,2.4)}const{sqrt:Jt,pow:Ze,min:Db,max:Mb,atan2:ph,abs:gh,cos:as,sin:mh,exp:Vb,PI:yh}=Math;function $b(r,e,t=1,n=1,i=1){var s=function($){return 360*$/(2*yh)},o=function($){return 2*yh*$/360};r=new ae(r),e=new ae(e);const[a,l,h]=Array.from(r.lab()),[c,d,f]=Array.from(e.lab()),p=(a+c)/2,v=Jt(Ze(l,2)+Ze(h,2)),y=Jt(Ze(d,2)+Ze(f,2)),g=(v+y)/2,m=.5*(1-Jt(Ze(g,7)/(Ze(g,7)+Ze(25,7)))),b=l*(1+m),I=d*(1+m),_=Jt(Ze(b,2)+Ze(h,2)),P=Jt(Ze(I,2)+Ze(f,2)),C=(_+P)/2,w=s(ph(h,b)),E=s(ph(f,I)),S=w>=0?w:w+360,T=E>=0?E:E+360,x=gh(S-T)>180?(S+T+360)/2:(S+T)/2,A=1-.17*as(o(x-30))+.24*as(o(2*x))+.32*as(o(3*x+6))-.2*as(o(4*x-63));let O=T-S;O=gh(O)<=180?O:T<=S?O+360:O-360,O=2*Jt(_*P)*mh(o(O)/2);const D=c-a,q=P-_,H=1+.015*Ze(p-50,2)/Jt(20+Ze(p-50,2)),K=1+.045*C,te=1+.015*C*A,z=30*Vb(-Ze((x-275)/25,2)),j=-(2*Jt(Ze(C,7)/(Ze(C,7)+Ze(25,7))))*mh(2*o(z)),V=Jt(Ze(D/(t*H),2)+Ze(q/(n*K),2)+Ze(O/(i*te),2)+j*(q/(n*K))*(O/(i*te)));return Mb(0,Db(100,V))}function qb(r,e,t="lab"){r=new ae(r),e=new ae(e);const n=r.get(t),i=e.get(t);let s=0;for(let o in n){const a=(n[o]||0)-(i[o]||0);s+=a*a}return Math.sqrt(s)}const Fb=(...r)=>{try{return new ae(...r),!0}catch{return!1}},Ub={cool(){return Ms([ke.hsl(180,1,.9),ke.hsl(250,.7,.4)])},hot(){return Ms(["#000","#f00","#ff0","#fff"]).mode("rgb")}},$a={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},vp=Object.keys($a),vh=new Map(vp.map(r=>[r.toLowerCase(),r])),Bb=typeof Proxy=="function"?new Proxy($a,{get(r,e){const t=e.toLowerCase();if(vh.has(t))return r[vh.get(t)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(vp)}}):$a,zb=(...r)=>{r=xe(r,"cmyk");const[e,t,n,i]=r,s=r.length>4?r[4]:1;return i===1?[0,0,0,s]:[e>=1?0:255*(1-e)*(1-i),t>=1?0:255*(1-t)*(1-i),n>=1?0:255*(1-n)*(1-i),s]},{max:_h}=Math,Hb=(...r)=>{let[e,t,n]=xe(r,"rgb");e=e/255,t=t/255,n=n/255;const i=1-_h(e,_h(t,n)),s=i<1?1/(1-i):0,o=(1-e-i)*s,a=(1-t-i)*s,l=(1-n-i)*s;return[o,a,l,i]};ae.prototype.cmyk=function(){return Hb(this._rgb)};const Kb=(...r)=>new ae(...r,"cmyk");Object.assign(ke,{cmyk:Kb});we.format.cmyk=zb;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"cmyk"),Pe(r)==="array"&&r.length===4)return"cmyk"}});const Gb=(...r)=>{const e=xe(r,"hsla");let t=kr(r)||"lsa";return e[0]=Pt(e[0]||0)+"deg",e[1]=Pt(e[1]*100)+"%",e[2]=Pt(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),t="hsla"):e.length=3,`${t.substr(0,3)}(${e.join(" ")})`},Wb=(...r)=>{const e=xe(r,"lab");let t=kr(r)||"lab";return e[0]=Pt(e[0])+"%",e[1]=Pt(e[1]),e[2]=Pt(e[2]),t==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},Qb=(...r)=>{const e=xe(r,"lch");let t=kr(r)||"lab";return e[0]=Pt(e[0])+"%",e[1]=Pt(e[1]),e[2]=isNaN(e[2])?"none":Pt(e[2])+"deg",t==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},Yb=(...r)=>{const e=xe(r,"lab");return e[0]=Pt(e[0]*100)+"%",e[1]=Ma(e[1]),e[2]=Ma(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},_p=(...r)=>{const[e,t,n,...i]=xe(r,"rgb"),[s,o,a]=Ql(e,t,n),[l,h,c]=fp(s,o,a);return[l,h,c,...i.length>0&&i[0]<1?[i[0]]:[]]},Jb=(...r)=>{const e=xe(r,"lch");return e[0]=Pt(e[0]*100)+"%",e[1]=Ma(e[1]),e[2]=isNaN(e[2])?"none":Pt(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:ta}=Math,Xb=(...r)=>{const e=xe(r,"rgba");let t=kr(r)||"rgb";if(t.substr(0,3)==="hsl")return Gb(pp(e),t);if(t.substr(0,3)==="lab"){const n=Ei();tn("d50");const i=Wb(Hl(e),t);return tn(n),i}if(t.substr(0,3)==="lch"){const n=Ei();tn("d50");const i=Qb(Gl(e),t);return tn(n),i}return t.substr(0,5)==="oklab"?Yb(Ql(e)):t.substr(0,5)==="oklch"?Jb(_p(e)):(e[0]=ta(e[0]),e[1]=ta(e[1]),e[2]=ta(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),t="rgba"),`${t.substr(0,3)}(${e.slice(0,t==="rgb"?3:4).join(" ")})`)},bp=(...r)=>{r=xe(r,"lch");const[e,t,n,...i]=r,[s,o,a]=hp(e,t,n),[l,h,c]=Wl(s,o,a);return[l,h,c,...i.length>0&&i[0]<1?[i[0]]:[]]},rn=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Mt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Vs=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Rt=/\s*/.source,Ir=/\s+/.source,Yl=/\s*,\s*/.source,uo=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Or=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,wp=new RegExp("^rgba?\\("+Rt+[rn,rn,rn].join(Ir)+Or+"\\)$"),Ep=new RegExp("^rgb\\("+Rt+[rn,rn,rn].join(Yl)+Rt+"\\)$"),Tp=new RegExp("^rgba\\("+Rt+[rn,rn,rn,Mt].join(Yl)+Rt+"\\)$"),xp=new RegExp("^hsla?\\("+Rt+[uo,Vs,Vs].join(Ir)+Or+"\\)$"),Ap=new RegExp("^hsl?\\("+Rt+[uo,Vs,Vs].join(Yl)+Rt+"\\)$"),kp=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Sp=new RegExp("^lab\\("+Rt+[Mt,Mt,Mt].join(Ir)+Or+"\\)$"),Ip=new RegExp("^lch\\("+Rt+[Mt,Mt,uo].join(Ir)+Or+"\\)$"),Op=new RegExp("^oklab\\("+Rt+[Mt,Mt,Mt].join(Ir)+Or+"\\)$"),Pp=new RegExp("^oklch\\("+Rt+[Mt,Mt,uo].join(Ir)+Or+"\\)$"),{round:Np}=Math,Xn=r=>r.map((e,t)=>t<=2?qn(Np(e),0,255):e),et=(r,e=0,t=100,n=!1)=>(typeof r=="string"&&r.endsWith("%")&&(r=parseFloat(r.substring(0,r.length-1))/100,n?r=e+(r+1)*.5*(t-e):r=e+r*(t-e)),+r),bt=(r,e)=>r==="none"?e:r,Jl=r=>{if(r=r.toLowerCase().trim(),r==="transparent")return[0,0,0,0];let e;if(we.format.named)try{return we.format.named(r)}catch{}if((e=r.match(wp))||(e=r.match(Ep))){let t=e.slice(1,4);for(let i=0;i<3;i++)t[i]=+et(bt(t[i],0),0,255);t=Xn(t);const n=e[4]!==void 0?+et(e[4],0,1):1;return t[3]=n,t}if(e=r.match(Tp)){const t=e.slice(1,5);for(let n=0;n<4;n++)t[n]=+et(t[n],0,255);return t}if((e=r.match(xp))||(e=r.match(Ap))){const t=e.slice(1,4);t[0]=+bt(t[0].replace("deg",""),0),t[1]=+et(bt(t[1],0),0,100)*.01,t[2]=+et(bt(t[2],0),0,100)*.01;const n=Xn(Va(t)),i=e[4]!==void 0?+et(e[4],0,1):1;return n[3]=i,n}if(e=r.match(kp)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const n=Va(t);for(let i=0;i<3;i++)n[i]=Np(n[i]);return n[3]=+e[4],n}if(e=r.match(Sp)){const t=e.slice(1,4);t[0]=et(bt(t[0],0),0,100),t[1]=et(bt(t[1],0),-125,125,!0),t[2]=et(bt(t[2],0),-125,125,!0);const n=Ei();tn("d50");const i=Xn(zl(t));tn(n);const s=e[4]!==void 0?+et(e[4],0,1):1;return i[3]=s,i}if(e=r.match(Ip)){const t=e.slice(1,4);t[0]=et(t[0],0,100),t[1]=et(bt(t[1],0),0,150,!1),t[2]=+bt(t[2].replace("deg",""),0);const n=Ei();tn("d50");const i=Xn(Kl(t));tn(n);const s=e[4]!==void 0?+et(e[4],0,1):1;return i[3]=s,i}if(e=r.match(Op)){const t=e.slice(1,4);t[0]=et(bt(t[0],0),0,1),t[1]=et(bt(t[1],0),-.4,.4,!0),t[2]=et(bt(t[2],0),-.4,.4,!0);const n=Xn(Wl(t)),i=e[4]!==void 0?+et(e[4],0,1):1;return n[3]=i,n}if(e=r.match(Pp)){const t=e.slice(1,4);t[0]=et(bt(t[0],0),0,1),t[1]=et(bt(t[1],0),0,.4,!1),t[2]=+bt(t[2].replace("deg",""),0);const n=Xn(bp(t)),i=e[4]!==void 0?+et(e[4],0,1):1;return n[3]=i,n}};Jl.test=r=>wp.test(r)||xp.test(r)||Sp.test(r)||Ip.test(r)||Op.test(r)||Pp.test(r)||Ep.test(r)||Tp.test(r)||Ap.test(r)||kp.test(r)||r==="transparent";ae.prototype.css=function(r){return Xb(this._rgb,r)};const Zb=(...r)=>new ae(...r,"css");ke.css=Zb;we.format.css=Jl;we.autodetect.push({p:5,test:(r,...e)=>{if(!e.length&&Pe(r)==="string"&&Jl.test(r))return"css"}});we.format.gl=(...r)=>{const e=xe(r,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const ew=(...r)=>new ae(...r,"gl");ke.gl=ew;ae.prototype.gl=function(){const r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};ae.prototype.hex=function(r){return lp(this._rgb,r)};const tw=(...r)=>new ae(...r,"hex");ke.hex=tw;we.format.hex=ap;we.autodetect.push({p:4,test:(r,...e)=>{if(!e.length&&Pe(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});const{log:ls}=Math,Rp=r=>{const e=r/100;let t,n,i;return e<66?(t=255,n=e<6?0:-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*ls(n),i=e<20?0:-254.76935184120902+.8274096064007395*(i=e-10)+115.67994401066147*ls(i)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*ls(t),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*ls(n),i=255),[t,n,i,1]},{round:nw}=Math,rw=(...r)=>{const e=xe(r,"rgb"),t=e[0],n=e[2];let i=1e3,s=4e4;const o=.4;let a;for(;s-i>o;){a=(s+i)*.5;const l=Rp(a);l[2]/l[0]>=n/t?s=a:i=a}return nw(a)};ae.prototype.temp=ae.prototype.kelvin=ae.prototype.temperature=function(){return rw(this._rgb)};const na=(...r)=>new ae(...r,"temp");Object.assign(ke,{temp:na,kelvin:na,temperature:na});we.format.temp=we.format.kelvin=we.format.temperature=Rp;ae.prototype.oklch=function(){return _p(this._rgb)};const iw=(...r)=>new ae(...r,"oklch");Object.assign(ke,{oklch:iw});we.format.oklch=bp;we.autodetect.push({p:2,test:(...r)=>{if(r=xe(r,"oklch"),Pe(r)==="array"&&r.length===3)return"oklch"}});Object.assign(ke,{analyze:mp,average:sb,bezier:hb,blend:$t,brewer:Bb,Color:ae,colors:vr,contrast:Rb,contrastAPCA:Lb,cubehelix:xb,deltaE:$b,distance:qb,input:we,interpolate:_r,limits:yp,mix:_r,random:Ib,scale:Ms,scales:Ub,valid:Fb});const ra={light:{primaryColor:"#3b82f6",secondaryColor:"#6b7280",titleColor:"#1f2937",h3TitleColor:"#1f2937",textColor:"#1f2937",backgroundFromColor:"#ffffff",backgroundToColor:"#f3f4f6",sectionBgColor:"#f3f4f6"},dark:{primaryColor:"#60a5fa",secondaryColor:"#9ca3af",titleColor:"#f9fafb",h3TitleColor:"#f9fafb",textColor:"#f9fafb",backgroundFromColor:"#111827",backgroundToColor:"#1f2937",sectionBgColor:"#111827"},forest:{primaryColor:"#34d399",secondaryColor:"#6b7280",titleColor:"#064e3b",h3TitleColor:"#064e3b",textColor:"#064e3b",backgroundFromColor:"#d1fae5",backgroundToColor:"#ecfdf5",sectionBgColor:"#d1fae5"},ocean:{primaryColor:"#38bdf8",secondaryColor:"#94a3b8",titleColor:"#0c4a6e",h3TitleColor:"#0c4a6e",textColor:"#0c4a6e",backgroundFromColor:"#e0f2fe",backgroundToColor:"#f0f9ff",sectionBgColor:"#e0f2fe"},sunset:{primaryColor:"#fb7185",secondaryColor:"#f97316",titleColor:"#881337",h3TitleColor:"#881337",textColor:"#881337",backgroundFromColor:"#ffe4e6",backgroundToColor:"#fff1f2",sectionBgColor:"#ffe4e6"}},sw=({onThemeSelect:r})=>{const e=[{name:"Light",value:"light",icon:""},{name:"Dark",value:"dark",icon:""},{name:"Forest",value:"forest",icon:""},{name:"Ocean",value:"ocean",icon:""},{name:"Sunset",value:"sunset",icon:""}],[t,n]=re.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("theme");return s&&ra[s]?s:"light"}return"light"});re.useEffect(()=>{if(typeof window<"u"){const s=Object.keys(ra);document.documentElement.classList.remove(...s),document.documentElement.classList.add(t),localStorage.setItem("theme",t)}},[t]);const i=s=>{const o=ra[s];o?(n(s),r(o)):console.warn(`Theme data not found for: ${s}`)};return R.jsx("div",{className:"theme-switcher",children:R.jsx("div",{className:"flex items-center space-x-1 sm:space-x-2 p-1 sm:p-2 bg-[var(--color-background-secondary)] rounded-lg border border-gray-300 dark:border-gray-700",children:R.jsx("div",{className:"flex space-x-1",children:e.map(s=>R.jsx("button",{onClick:()=>i(s.value),className:`p-1 sm:p-2 rounded-md text-xs sm:text-sm transition-colors duration-150 ${t===s.value?"bg-[var(--color-primary)] text-white shadow-md":"bg-[var(--color-background-secondary)] text-[var(--color-text)] hover:bg-[var(--color-secondary)] hover:text-white"}`,title:s.name,children:R.jsx("span",{className:"flex items-center",children:R.jsx("span",{className:"mr-1",children:s.icon})})},s.value))})})})},qe={primaryColor:"#377dc8",secondaryColor:"#0f3257",fontFamily:"'Noto Sans', sans-serif",titleColor:"#d7e3ee",h3TitleColor:"#d7e3ee",textColor:"#c6d3e2",backgroundFromColor:"#111827",backgroundToColor:"#1F2937",sectionBgColor:"#374151"},ow=()=>{const[r,e]=re.useState(qe.primaryColor),[t,n]=re.useState(qe.secondaryColor),[i,s]=re.useState(qe.fontFamily),[o,a]=re.useState(qe.titleColor??"#ffffff"),[l,h]=re.useState(qe.h3TitleColor??"#d7e3ee"),[c,d]=re.useState(qe.textColor??"#c6d3e2"),[f,p]=re.useState(qe.backgroundFromColor??"#111827"),[v,y]=re.useState(qe.backgroundToColor??"#1F2937"),[g,m]=re.useState(qe.sectionBgColor??"#374151"),[b,I]=re.useState(!0),[_,P]=re.useState(!1),[C,w]=re.useState(0),[E,S]=re.useState([]),[T,x]=re.useState(""),[A,O]=re.useState(!0),[D,q]=re.useState("colors");re.useState(!1),re.useState(null),re.useEffect(()=>{z()},[]),re.useEffect(()=>{b||H()},[r,t,i,o,l,c,f,v,g,b]);const H=()=>{const U=document.documentElement,J=K({primaryColor:r,secondaryColor:t,titleColor:o,h3TitleColor:l,textColor:c,backgroundFromColor:f,backgroundToColor:v,sectionBgColor:g});Object.entries(J).forEach(([oe,le])=>{U.style.setProperty(`--${oe.replace(/([A-Z])/g,"-$1").toLowerCase()}`,le)}),U.style.setProperty("--font-family",i)},K=U=>{const J={};return Object.entries(U).forEach(([oe,le])=>{J[oe]=le.match(/^#[0-9A-F]{6}$/i)?le:qe[oe]||"#000000"}),J},te=U=>{e(U.primaryColor),n(U.secondaryColor),a(U.titleColor),h(U.h3TitleColor),d(U.textColor),p(U.backgroundFromColor),y(U.backgroundToColor),m(U.sectionBgColor)},z=async()=>{if(!pe){console.error("Firestore not available"),I(!1);return}try{const U=await B_(Xe(pe,"settings","styles"));if(U.exists()){const le=U.data();e(le.primaryColor||qe.primaryColor),n(le.secondaryColor||qe.secondaryColor),s(le.fontFamily||qe.fontFamily),a(le.titleColor||qe.titleColor||"#ffffff"),h(le.h3TitleColor||qe.h3TitleColor||"#d7e3ee"),d(le.textColor||qe.textColor||"#c6d3e2"),p(le.backgroundFromColor||qe.backgroundFromColor||"#111827"),y(le.backgroundToColor||qe.backgroundToColor||"#1F2937"),m(le.sectionBgColor||qe.sectionBgColor||"#374151")}const oe=(await Ci(mr(pe,"themes"))).docs.map(le=>({id:le.id,...le.data()}));S(oe)}catch(U){console.error("Error loading data:",U)}finally{I(!1),O(!1)}},F=async()=>{if(!pe){console.error("Firestore not available");return}P(!0);try{const U={primaryColor:r,secondaryColor:t,fontFamily:i,titleColor:o,h3TitleColor:l,textColor:c,backgroundFromColor:f,backgroundToColor:v,sectionBgColor:g};await La(Xe(pe,"settings","styles"),U),alert("Styles saved successfully!")}catch(U){console.error("Error saving styles:",U),alert("Failed to save styles")}finally{P(!1)}},j=async()=>{if(!(!pe||!T.trim())){P(!0);try{const U={name:T.trim(),style:{primaryColor:r,secondaryColor:t,fontFamily:i,titleColor:o,h3TitleColor:l,textColor:c,backgroundFromColor:f,backgroundToColor:v,sectionBgColor:g}};await Fl(mr(pe,"themes"),U),z(),x(""),alert("Theme saved successfully!")}catch(U){console.error("Error saving theme:",U),alert("Failed to save theme")}finally{P(!1)}}},V=async U=>{if(!(!pe||!window.confirm("Are you sure you want to delete this theme?")))try{await ql(Xe(pe,"themes",U)),S(J=>J.filter(oe=>oe.id!==U))}catch(J){console.error("Error deleting theme:",J),alert("Failed to delete theme")}},$=U=>{const{style:J}=U;e(J.primaryColor),n(J.secondaryColor),s(J.fontFamily),a(J.titleColor||qe.titleColor||"#ffffff"),h(J.h3TitleColor||qe.h3TitleColor||"#d7e3ee"),d(J.textColor||qe.textColor||"#c6d3e2"),p(J.backgroundFromColor||qe.backgroundFromColor||"#111827"),y(J.backgroundToColor||qe.backgroundToColor||"#1F2937"),m(J.sectionBgColor||qe.sectionBgColor||"#374151")},W=()=>{try{const U=ke.valid(r)?ke(r):ke(qe.primaryColor),J=C%3;let oe,le;switch(J){case 1:oe=U.set("hsl.h","+30").hex(),le=U.set("hsl.h","-30").hex();break;case 2:oe=U.set("hsl.h","+120").hex(),le=U.set("hsl.h","-120").hex();break;default:oe=U.set("hsl.h","+180").hex(),le=U.set("hsl.h","+150").hex();break}n(oe);const ge=ke.mix(U.brighten(1.5),"#ffffff",.1).hex(),_e=ke.mix(U.brighten(1),"#ffffff",.05).hex(),Ie=ke.mix(U.brighten(2.5).desaturate(.5),"#ffffff",.2).hex();a(ge),h(_e),d(Ie),p(U.darken(2.2).desaturate(.5).hex()),y(U.darken(1.8).desaturate(.3).hex()),m(U.darken(1.5).desaturate(.4).hex()),w(rt=>rt+1)}catch(U){console.error("Error generating AI colors:",U),alert("Failed to generate colors")}},G=()=>{const U={primaryColor:r,secondaryColor:t,fontFamily:i,titleColor:o,h3TitleColor:l,textColor:c,backgroundFromColor:f,backgroundToColor:v,sectionBgColor:g},J=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),oe=URL.createObjectURL(J),le=document.createElement("a");le.href=oe,le.download="theme.json",document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(oe)},M=U=>{var le;const J=(le=U.target.files)==null?void 0:le[0];if(!J)return;const oe=new FileReader;oe.onload=ge=>{var _e;try{const Ie=JSON.parse((_e=ge.target)==null?void 0:_e.result);te(Ie)}catch(Ie){console.error("Error importing theme:",Ie),alert("Invalid theme file")}},oe.readAsText(J)},B=(U,J,oe,le)=>R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:U}),R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 space-y-2 sm:space-y-0",children:[R.jsx("input",{type:"color",value:J,onChange:ge=>oe(ge.target.value),className:"h-10 w-10 p-1 border border-gray-300 rounded cursor-pointer self-start sm:self-center"}),R.jsx("input",{type:"text",value:J,onChange:ge=>oe(ge.target.value),className:"w-full sm:flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:7}),R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(J),alert("Color code copied!")},className:"p-2 text-gray-500 hover:text-gray-700 self-start sm:self-center",title:"Copy color code",children:R.jsx(Cm,{size:20})})]}),le&&R.jsx("p",{className:"mt-1 text-sm text-gray-500",children:le})]}),Y=[{id:"colors",label:"Colors",icon:R.jsx(bf,{size:20})},{id:"typography",label:"Typography",icon:R.jsx(Oy,{size:20})},{id:"layout",label:"Layout",icon:R.jsx(py,{size:20})},{id:"advanced",label:"Advanced",icon:R.jsx(wy,{size:20})}];return b?R.jsx("div",{className:"flex items-center justify-center h-64",children:R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[R.jsxs("div",{className:"border-b border-gray-200 overflow-x-auto",children:[" ",R.jsxs("nav",{className:"-mb-px flex space-x-8 whitespace-nowrap",children:[" ",Y.map(U=>R.jsxs("button",{onClick:()=>q(U.id),className:`
                  flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm
                  ${D===U.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[U.icon,R.jsx("span",{children:U.label})]},U.id))]})]}),R.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[D==="colors"&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Color Settings"}),R.jsxs("button",{onClick:W,className:"flex items-center justify-center sm:justify-start space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors w-full sm:w-auto",children:[R.jsx(Ly,{size:16}),R.jsx("span",{children:"Generate AI Colors"})]})]}),B("Primary Color",r,e,"Main brand color used for buttons and important elements"),B("Secondary Color",t,n,"Supporting color for secondary elements"),B("Title Color",o,a,"Color for main headings"),B("Subtitle Color",l,h,"Color for subheadings"),B("Text Color",c,d,"Color for body text"),R.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[R.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Background Colors"}),B("Background Start",f,p,"Starting color for background gradient"),B("Background End",v,y,"Ending color for background gradient"),B("Section Background",g,m,"Background color for content sections")]})]}),D==="typography"&&R.jsxs("div",{className:"space-y-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Typography Settings"}),R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Family"}),R.jsxs("select",{value:i,onChange:U=>s(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[R.jsx("option",{value:"'Noto Sans', sans-serif",children:"Noto Sans"}),R.jsx("option",{value:"'Arial', sans-serif",children:"Arial"}),R.jsx("option",{value:"'Helvetica', sans-serif",children:"Helvetica"}),R.jsx("option",{value:"'Georgia', serif",children:"Georgia"}),R.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"})]})]}),R.jsxs("div",{className:"mt-6 p-6 bg-gray-50 rounded-lg",children:[R.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Preview"}),R.jsxs("div",{style:{fontFamily:i},children:[R.jsx("h1",{style:{color:o},className:"text-4xl font-bold mb-4",children:"Heading 1"}),R.jsx("h2",{style:{color:l},className:"text-3xl font-semibold mb-4",children:"Heading 2"}),R.jsx("h3",{style:{color:l},className:"text-2xl font-medium mb-4",children:"Heading 3"}),R.jsx("p",{style:{color:c},className:"mb-4",children:"This is a paragraph of text that shows how your typography settings will look in the actual content. The quick brown fox jumps over the lazy dog."})]})]})]}),D==="layout"&&R.jsxs("div",{className:"space-y-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Layout Settings"}),R.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{className:"p-4 rounded",style:{backgroundColor:g},children:[R.jsx("h4",{style:{color:l},className:"text-lg font-medium mb-2",children:"Section Preview"}),R.jsx("p",{style:{color:c},className:"text-sm",children:"Preview of section background and spacing"})]}),R.jsxs("div",{className:"p-4 rounded",style:{backgroundColor:g},children:[R.jsx("h4",{style:{color:l},className:"text-lg font-medium mb-2",children:"Content Area"}),R.jsx("p",{style:{color:c},className:"text-sm",children:"Sample content area layout"})]})]})})]}),D==="advanced"&&R.jsxs("div",{className:"space-y-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Advanced Settings"}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("button",{onClick:G,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[R.jsx(Lm,{size:16}),R.jsx("span",{children:"Export Theme"})]}),R.jsxs("label",{className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors cursor-pointer",children:[R.jsx(Ny,{size:16}),R.jsx("span",{children:"Import Theme"}),R.jsx("input",{type:"file",accept:".json",onChange:M,className:"hidden"})]})]})})]})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0",children:[R.jsxs("button",{onClick:()=>te(qe),className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[R.jsx(my,{size:16}),R.jsx("span",{children:"Reset to Defaults"})]}),R.jsxs("button",{onClick:F,disabled:_,className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[R.jsx(wf,{size:16}),R.jsx("span",{children:_?"Saving...":"Save Changes"})]})]})]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Global Theme"}),R.jsx(sw,{onThemeSelect:te})]}),R.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Saved Themes"}),R.jsx("div",{className:"mb-4",children:R.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[R.jsx("input",{type:"text",value:T,onChange:U=>x(U.target.value),placeholder:"Enter theme name",className:"w-full sm:flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),R.jsx("button",{onClick:j,disabled:!T.trim()||_,className:"w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex-shrink-0",children:"Save"})]})}),R.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:E.map(U=>R.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[R.jsx("span",{className:"font-medium text-gray-700",children:U.name}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>$(U),className:"text-blue-600 hover:text-blue-800",children:"Apply"}),R.jsx("button",{onClick:()=>V(U.id),className:"text-red-600 hover:text-red-800",children:R.jsx(Es,{size:16})})]})]},U.id))})]})]})]})},us=["Github","Facebook","Mail","Instagram","Linkedin","Twitter"],aw=()=>{const[r,e]=re.useState([]),[t,n]=re.useState(!0),[i,s]=re.useState(null),[o,a]=re.useState(!1),[l,h]=re.useState(null),[c,d]=re.useState({name:"",url:"",icon:us[0],order:0}),f=re.useMemo(()=>pe?mr(pe,"socialLinks"):null,[]),p=re.useCallback(async()=>{if(!pe||!f){s("Firestore is not initialized correctly."),n(!1);return}n(!0),s(null);try{const C=oo(f,ao("order","asc")),E=(await Ci(C)).docs.map(S=>({...S.data(),id:S.id}));e(E)}catch(C){console.error("Error fetching social links:",C),s("Failed to load social links. Please try again.")}finally{n(!1)}},[f]);re.useEffect(()=>{p()},[p]);const v=C=>{const{name:w,value:E}=C.target;d(S=>({...S,[w]:w==="order"?parseInt(E,10)||0:E}))},y=()=>{a(!1),h(null),d({name:"",url:"",icon:us[0],order:0})},g=async C=>{if(C.preventDefault(),!c.name||!c.url||!c.icon){s("Name, URL, and Icon are required.");return}if(s(null),!pe||!f){s("Firestore is not initialized correctly.");return}try{await Fl(f,c),y(),p()}catch(w){console.error("Error adding link:",w),s("Failed to add link. Please try again.")}},m=async C=>{if(C.preventDefault(),!l||!c.name||!c.url||!c.icon){s("Name, URL, and Icon are required.");return}if(s(null),!pe){s("Firestore is not initialized correctly.");return}try{const w=Xe(pe,"socialLinks",l);await Ls(w,c),y(),p()}catch(w){console.error("Error updating link:",w),s("Failed to update link. Please try again.")}},b=async C=>{if(C===0||!pe)return;s(null);const w=r[C],E=r[C-1],S=Da(pe),T=Xe(pe,"socialLinks",w.id),x=Xe(pe,"socialLinks",E.id);S.update(T,{order:E.order}),S.update(x,{order:w.order});try{await S.commit(),p()}catch(A){console.error("Error moving link up:",A),s("Failed to reorder link. Please try again.")}},I=async C=>{if(C===r.length-1||!pe)return;s(null);const w=r[C],E=r[C+1],S=Da(pe),T=Xe(pe,"socialLinks",w.id),x=Xe(pe,"socialLinks",E.id);S.update(T,{order:E.order}),S.update(x,{order:w.order});try{await S.commit(),p()}catch(A){console.error("Error moving link down:",A),s("Failed to reorder link. Please try again.")}},_=async C=>{if(window.confirm("Are you sure you want to delete this link?")){if(s(null),!pe){s("Firestore is not initialized correctly.");return}try{const w=Xe(pe,"socialLinks",C);await ql(w),p()}catch(w){console.error("Error deleting link:",w),s("Failed to delete link. Please try again.")}}},P=C=>{h(C.id),d({name:C.name,url:C.url,icon:C.icon,order:C.order}),a(!1)};return R.jsxs("div",{className:"p-4 md:p-6 bg-gray-800 rounded-lg shadow-lg text-gray-200",children:[R.jsx("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Manage Social Links"}),i&&R.jsx("p",{className:"text-red-400 bg-red-900/50 p-3 rounded mb-4",children:i}),t&&R.jsx("p",{children:"Loading links..."}),(o||l)&&R.jsxs("form",{onSubmit:l?m:g,className:"mb-6 p-4 bg-gray-700 rounded",children:[R.jsx("h3",{className:"text-xl font-medium mb-3 text-white",children:l?"Edit Link":"Add New Link"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[R.jsx("input",{type:"text",name:"name",placeholder:"Link Name (e.g., GitHub)",value:c.name,onChange:v,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0}),R.jsx("input",{type:"url",name:"url",placeholder:"Full URL (e.g., https://github.com/user)",value:c.url,onChange:v,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0}),R.jsxs("select",{name:"icon",value:c.icon,onChange:v,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0,children:[R.jsx("option",{value:"",disabled:!0,children:"Select Icon"}),us.map(C=>R.jsx("option",{value:C,children:C},C))]}),R.jsx("input",{type:"number",name:"order",placeholder:"Order (e.g., 1)",value:c.order,onChange:v,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0,min:"0"})]}),R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsxs("button",{type:"submit",className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[R.jsx(wf,{size:18})," ",l?"Save Changes":"Add Link"]}),R.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[R.jsx(Nm,{size:18})," Cancel"]})]})]}),!o&&!l&&R.jsxs("button",{onClick:()=>{a(!0),d({name:"",url:"",icon:us[0],order:r.length>0?Math.max(...r.map(C=>C.order))+1:0})},className:"mb-6 flex items-center gap-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[R.jsx(Om,{size:18})," Add New Link"]}),!t&&r.length>0&&R.jsxs("div",{className:"space-y-4 md:space-y-0",children:[R.jsxs("div",{className:"hidden md:flex bg-gray-600 rounded-t-lg p-3 font-semibold text-white",children:[R.jsx("div",{className:"w-1/12 px-2",children:"Order"}),R.jsx("div",{className:"w-3/12 px-2",children:"Name"}),R.jsx("div",{className:"w-4/12 px-2",children:"URL"}),R.jsx("div",{className:"w-2/12 px-2",children:"Icon"}),R.jsx("div",{className:"w-2/12 px-2 text-right",children:"Actions"})]}),r.map((C,w)=>R.jsxs("div",{className:"bg-gray-700 md:bg-transparent md:hover:bg-gray-600/50 rounded-lg md:rounded-none p-4 md:p-0 md:flex md:items-center border-b border-gray-600 md:border-gray-600 last:border-b-0 md:last:border-b",children:[R.jsxs("div",{className:"md:hidden space-y-2",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("span",{className:"font-semibold text-lg text-white",children:C.name}),R.jsxs("span",{className:"text-sm text-gray-400",children:["(Order: ",C.order,")"]})]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium text-gray-400",children:"URL: "}),R.jsx("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline break-all",children:C.url})]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium text-gray-400",children:"Icon: "}),R.jsx("span",{className:"text-gray-300",children:C.icon})]}),R.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-gray-600 mt-2",children:[R.jsx("button",{onClick:()=>b(w),disabled:w===0,className:`p-1 ${w===0?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Up",children:R.jsx(ga,{size:18})}),R.jsx("button",{onClick:()=>I(w),disabled:w===r.length-1,className:`p-1 ${w===r.length-1?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Down",children:R.jsx(pa,{size:18})}),R.jsx("button",{onClick:()=>P(C),className:"text-yellow-400 hover:text-yellow-300 p-1",title:"Edit",children:R.jsx(ma,{size:18})}),R.jsx("button",{onClick:()=>_(C.id),className:"text-red-500 hover:text-red-400 p-1",title:"Delete",children:R.jsx(Es,{size:18})})]})]}),R.jsxs("div",{className:"hidden md:flex w-full items-center py-2",children:[R.jsx("div",{className:"w-1/12 px-2",children:C.order}),R.jsx("div",{className:"w-3/12 px-2 truncate",children:C.name}),R.jsx("div",{className:"w-4/12 px-2 truncate",children:R.jsx("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:C.url})}),R.jsx("div",{className:"w-2/12 px-2",children:C.icon}),R.jsxs("div",{className:"w-2/12 px-2 flex items-center justify-end gap-1",children:[R.jsx("button",{onClick:()=>b(w),disabled:w===0,className:`p-1 ${w===0?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Up",children:R.jsx(ga,{size:18})}),R.jsx("button",{onClick:()=>I(w),disabled:w===r.length-1,className:`p-1 ${w===r.length-1?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Down",children:R.jsx(pa,{size:18})}),R.jsx("button",{onClick:()=>P(C),className:"text-yellow-400 hover:text-yellow-300 p-1",title:"Edit",children:R.jsx(ma,{size:18})}),R.jsx("button",{onClick:()=>_(C.id),className:"text-red-500 hover:text-red-400 p-1",title:"Delete",children:R.jsx(Es,{size:18})})]})]})]},C.id))]}),!t&&r.length===0&&!o&&R.jsx("p",{className:"text-center text-gray-400 mt-4",children:"No social links found. Add one!"})]})},bh=({fieldKey:r,value:e,path:t,handleChange:n,editingPath:i,setEditingPath:s})=>{const o=t.join("."),a=i===o,l=r.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase()),h=/url|link/i.test(r);return R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:l}),a?h?R.jsx("input",{type:"url",id:o,name:o,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white transition-shadow duration-150 ease-in-out",value:e,onChange:c=>n(t,c.target.value),onBlur:()=>s(null),autoFocus:!0}):R.jsx("textarea",{id:o,name:o,rows:e.length>100?5:3,className:"block w-full flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white transition-shadow duration-150 ease-in-out",value:e,onChange:c=>n(t,c.target.value),onBlur:()=>s(null),autoFocus:!0}):R.jsx("div",{className:"block w-full flex-1 rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[40px] whitespace-pre-wrap text-gray-800 transition-colors duration-150 ease-in-out break-words",onClick:()=>s(o),children:e||R.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},o)},lw=({translations:r,handleInputChange:e,editingPath:t,setEditingPath:n,getStaticSectionName:i})=>{const s=r.en.generalInfo,o=r.en.about;return R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[R.jsxs("div",{className:"space-y-4",children:[" ",s?Object.entries(s).map(([a,l])=>typeof l=="string"?R.jsx(bh,{fieldKey:a,value:l,path:["generalInfo",a],handleChange:e,editingPath:t,setEditingPath:n},a):null):R.jsx("p",{className:"text-gray-500 italic",children:"General Info data not available."})]}),R.jsxs("div",{className:"space-y-4",children:[" ",R.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize border-b border-gray-300 pb-2 mb-4",children:i("about")}),o?Object.entries(o).map(([a,l])=>typeof l=="string"?R.jsx(bh,{fieldKey:a,value:l,path:["about",a],handleChange:e,editingPath:t,setEditingPath:n},a):null):R.jsx("p",{className:"text-gray-500 italic",children:"About section data not available."})]})]})};function uw(){this.__data__=[],this.size=0}var cw=uw;function hw(r,e){return r===e||r!==r&&e!==e}var Cp=hw,fw=Cp;function dw(r,e){for(var t=r.length;t--;)if(fw(r[t][0],e))return t;return-1}var co=dw,pw=co,gw=Array.prototype,mw=gw.splice;function yw(r){var e=this.__data__,t=pw(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():mw.call(e,t,1),--this.size,!0}var vw=yw,_w=co;function bw(r){var e=this.__data__,t=_w(e,r);return t<0?void 0:e[t][1]}var ww=bw,Ew=co;function Tw(r){return Ew(this.__data__,r)>-1}var xw=Tw,Aw=co;function kw(r,e){var t=this.__data__,n=Aw(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var Sw=kw,Iw=cw,Ow=vw,Pw=ww,Nw=xw,Rw=Sw;function Pr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Pr.prototype.clear=Iw;Pr.prototype.delete=Ow;Pr.prototype.get=Pw;Pr.prototype.has=Nw;Pr.prototype.set=Rw;var ho=Pr,Cw=ho;function jw(){this.__data__=new Cw,this.size=0}var Lw=jw;function Dw(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var Mw=Dw;function Vw(r){return this.__data__.get(r)}var $w=Vw;function qw(r){return this.__data__.has(r)}var Fw=qw,Uw=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,jp=Uw,Bw=jp,zw=typeof self=="object"&&self&&self.Object===Object&&self,Hw=Bw||zw||Function("return this")(),ln=Hw,Kw=ln,Gw=Kw.Symbol,Xl=Gw,wh=Xl,Lp=Object.prototype,Ww=Lp.hasOwnProperty,Qw=Lp.toString,Zr=wh?wh.toStringTag:void 0;function Yw(r){var e=Ww.call(r,Zr),t=r[Zr];try{r[Zr]=void 0;var n=!0}catch{}var i=Qw.call(r);return n&&(e?r[Zr]=t:delete r[Zr]),i}var Jw=Yw,Xw=Object.prototype,Zw=Xw.toString;function e2(r){return Zw.call(r)}var t2=e2,Eh=Xl,n2=Jw,r2=t2,i2="[object Null]",s2="[object Undefined]",Th=Eh?Eh.toStringTag:void 0;function o2(r){return r==null?r===void 0?s2:i2:Th&&Th in Object(r)?n2(r):r2(r)}var fo=o2;function a2(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Dp=a2,l2=fo,u2=Dp,c2="[object AsyncFunction]",h2="[object Function]",f2="[object GeneratorFunction]",d2="[object Proxy]";function p2(r){if(!u2(r))return!1;var e=l2(r);return e==h2||e==f2||e==c2||e==d2}var Mp=p2,g2=ln,m2=g2["__core-js_shared__"],y2=m2,ia=y2,xh=function(){var r=/[^.]+$/.exec(ia&&ia.keys&&ia.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function v2(r){return!!xh&&xh in r}var _2=v2,b2=Function.prototype,w2=b2.toString;function E2(r){if(r!=null){try{return w2.call(r)}catch{}try{return r+""}catch{}}return""}var Vp=E2,T2=Mp,x2=_2,A2=Dp,k2=Vp,S2=/[\\^$.*+?()[\]{}|]/g,I2=/^\[object .+?Constructor\]$/,O2=Function.prototype,P2=Object.prototype,N2=O2.toString,R2=P2.hasOwnProperty,C2=RegExp("^"+N2.call(R2).replace(S2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function j2(r){if(!A2(r)||x2(r))return!1;var e=T2(r)?C2:I2;return e.test(k2(r))}var L2=j2;function D2(r,e){return r==null?void 0:r[e]}var M2=D2,V2=L2,$2=M2;function q2(r,e){var t=$2(r,e);return V2(t)?t:void 0}var Nr=q2,F2=Nr,U2=ln,B2=F2(U2,"Map"),Zl=B2,z2=Nr,H2=z2(Object,"create"),po=H2,Ah=po;function K2(){this.__data__=Ah?Ah(null):{},this.size=0}var G2=K2;function W2(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Q2=W2,Y2=po,J2="__lodash_hash_undefined__",X2=Object.prototype,Z2=X2.hasOwnProperty;function eE(r){var e=this.__data__;if(Y2){var t=e[r];return t===J2?void 0:t}return Z2.call(e,r)?e[r]:void 0}var tE=eE,nE=po,rE=Object.prototype,iE=rE.hasOwnProperty;function sE(r){var e=this.__data__;return nE?e[r]!==void 0:iE.call(e,r)}var oE=sE,aE=po,lE="__lodash_hash_undefined__";function uE(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=aE&&e===void 0?lE:e,this}var cE=uE,hE=G2,fE=Q2,dE=tE,pE=oE,gE=cE;function Rr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Rr.prototype.clear=hE;Rr.prototype.delete=fE;Rr.prototype.get=dE;Rr.prototype.has=pE;Rr.prototype.set=gE;var mE=Rr,kh=mE,yE=ho,vE=Zl;function _E(){this.size=0,this.__data__={hash:new kh,map:new(vE||yE),string:new kh}}var bE=_E;function wE(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var EE=wE,TE=EE;function xE(r,e){var t=r.__data__;return TE(e)?t[typeof e=="string"?"string":"hash"]:t.map}var go=xE,AE=go;function kE(r){var e=AE(this,r).delete(r);return this.size-=e?1:0,e}var SE=kE,IE=go;function OE(r){return IE(this,r).get(r)}var PE=OE,NE=go;function RE(r){return NE(this,r).has(r)}var CE=RE,jE=go;function LE(r,e){var t=jE(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var DE=LE,ME=bE,VE=SE,$E=PE,qE=CE,FE=DE;function Cr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Cr.prototype.clear=ME;Cr.prototype.delete=VE;Cr.prototype.get=$E;Cr.prototype.has=qE;Cr.prototype.set=FE;var $p=Cr,UE=ho,BE=Zl,zE=$p,HE=200;function KE(r,e){var t=this.__data__;if(t instanceof UE){var n=t.__data__;if(!BE||n.length<HE-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new zE(n)}return t.set(r,e),this.size=t.size,this}var GE=KE,WE=ho,QE=Lw,YE=Mw,JE=$w,XE=Fw,ZE=GE;function jr(r){var e=this.__data__=new WE(r);this.size=e.size}jr.prototype.clear=QE;jr.prototype.delete=YE;jr.prototype.get=JE;jr.prototype.has=XE;jr.prototype.set=ZE;var eT=jr,tT="__lodash_hash_undefined__";function nT(r){return this.__data__.set(r,tT),this}var rT=nT;function iT(r){return this.__data__.has(r)}var sT=iT,oT=$p,aT=rT,lT=sT;function $s(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new oT;++e<t;)this.add(r[e])}$s.prototype.add=$s.prototype.push=aT;$s.prototype.has=lT;var uT=$s;function cT(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}var hT=cT;function fT(r,e){return r.has(e)}var dT=fT,pT=uT,gT=hT,mT=dT,yT=1,vT=2;function _T(r,e,t,n,i,s){var o=t&yT,a=r.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var h=s.get(r),c=s.get(e);if(h&&c)return h==e&&c==r;var d=-1,f=!0,p=t&vT?new pT:void 0;for(s.set(r,e),s.set(e,r);++d<a;){var v=r[d],y=e[d];if(n)var g=o?n(y,v,d,e,r,s):n(v,y,d,r,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!gT(e,function(m,b){if(!mT(p,b)&&(v===m||i(v,m,t,n,s)))return p.push(b)})){f=!1;break}}else if(!(v===y||i(v,y,t,n,s))){f=!1;break}}return s.delete(r),s.delete(e),f}var qp=_T,bT=ln,wT=bT.Uint8Array,ET=wT;function TT(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}var xT=TT;function AT(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var kT=AT,Sh=Xl,Ih=ET,ST=Cp,IT=qp,OT=xT,PT=kT,NT=1,RT=2,CT="[object Boolean]",jT="[object Date]",LT="[object Error]",DT="[object Map]",MT="[object Number]",VT="[object RegExp]",$T="[object Set]",qT="[object String]",FT="[object Symbol]",UT="[object ArrayBuffer]",BT="[object DataView]",Oh=Sh?Sh.prototype:void 0,sa=Oh?Oh.valueOf:void 0;function zT(r,e,t,n,i,s,o){switch(t){case BT:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case UT:return!(r.byteLength!=e.byteLength||!s(new Ih(r),new Ih(e)));case CT:case jT:case MT:return ST(+r,+e);case LT:return r.name==e.name&&r.message==e.message;case VT:case qT:return r==e+"";case DT:var a=OT;case $T:var l=n&NT;if(a||(a=PT),r.size!=e.size&&!l)return!1;var h=o.get(r);if(h)return h==e;n|=RT,o.set(r,e);var c=IT(a(r),a(e),n,i,s,o);return o.delete(r),c;case FT:if(sa)return sa.call(r)==sa.call(e)}return!1}var HT=zT;function KT(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var GT=KT,WT=Array.isArray,eu=WT,QT=GT,YT=eu;function JT(r,e,t){var n=e(r);return YT(r)?n:QT(n,t(r))}var XT=JT;function ZT(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var o=r[t];e(o,t,r)&&(s[i++]=o)}return s}var ex=ZT;function tx(){return[]}var nx=tx,rx=ex,ix=nx,sx=Object.prototype,ox=sx.propertyIsEnumerable,Ph=Object.getOwnPropertySymbols,ax=Ph?function(r){return r==null?[]:(r=Object(r),rx(Ph(r),function(e){return ox.call(r,e)}))}:ix,lx=ax;function ux(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var cx=ux;function hx(r){return r!=null&&typeof r=="object"}var mo=hx,fx=fo,dx=mo,px="[object Arguments]";function gx(r){return dx(r)&&fx(r)==px}var mx=gx,Nh=mx,yx=mo,Fp=Object.prototype,vx=Fp.hasOwnProperty,_x=Fp.propertyIsEnumerable,bx=Nh(function(){return arguments}())?Nh:function(r){return yx(r)&&vx.call(r,"callee")&&!_x.call(r,"callee")},wx=bx,qs={exports:{}};function Ex(){return!1}var Tx=Ex;qs.exports;(function(r,e){var t=ln,n=Tx,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,h=l||n;r.exports=h})(qs,qs.exports);var Up=qs.exports,xx=9007199254740991,Ax=/^(?:0|[1-9]\d*)$/;function kx(r,e){var t=typeof r;return e=e??xx,!!e&&(t=="number"||t!="symbol"&&Ax.test(r))&&r>-1&&r%1==0&&r<e}var Sx=kx,Ix=9007199254740991;function Ox(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ix}var Bp=Ox,Px=fo,Nx=Bp,Rx=mo,Cx="[object Arguments]",jx="[object Array]",Lx="[object Boolean]",Dx="[object Date]",Mx="[object Error]",Vx="[object Function]",$x="[object Map]",qx="[object Number]",Fx="[object Object]",Ux="[object RegExp]",Bx="[object Set]",zx="[object String]",Hx="[object WeakMap]",Kx="[object ArrayBuffer]",Gx="[object DataView]",Wx="[object Float32Array]",Qx="[object Float64Array]",Yx="[object Int8Array]",Jx="[object Int16Array]",Xx="[object Int32Array]",Zx="[object Uint8Array]",eA="[object Uint8ClampedArray]",tA="[object Uint16Array]",nA="[object Uint32Array]",ze={};ze[Wx]=ze[Qx]=ze[Yx]=ze[Jx]=ze[Xx]=ze[Zx]=ze[eA]=ze[tA]=ze[nA]=!0;ze[Cx]=ze[jx]=ze[Kx]=ze[Lx]=ze[Gx]=ze[Dx]=ze[Mx]=ze[Vx]=ze[$x]=ze[qx]=ze[Fx]=ze[Ux]=ze[Bx]=ze[zx]=ze[Hx]=!1;function rA(r){return Rx(r)&&Nx(r.length)&&!!ze[Px(r)]}var iA=rA;function sA(r){return function(e){return r(e)}}var oA=sA,Fs={exports:{}};Fs.exports;(function(r,e){var t=jp,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();r.exports=a})(Fs,Fs.exports);var aA=Fs.exports,lA=iA,uA=oA,Rh=aA,Ch=Rh&&Rh.isTypedArray,cA=Ch?uA(Ch):lA,zp=cA,hA=cx,fA=wx,dA=eu,pA=Up,gA=Sx,mA=zp,yA=Object.prototype,vA=yA.hasOwnProperty;function _A(r,e){var t=dA(r),n=!t&&fA(r),i=!t&&!n&&pA(r),s=!t&&!n&&!i&&mA(r),o=t||n||i||s,a=o?hA(r.length,String):[],l=a.length;for(var h in r)(e||vA.call(r,h))&&!(o&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||gA(h,l)))&&a.push(h);return a}var bA=_A,wA=Object.prototype;function EA(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||wA;return r===t}var TA=EA;function xA(r,e){return function(t){return r(e(t))}}var AA=xA,kA=AA,SA=kA(Object.keys,Object),IA=SA,OA=TA,PA=IA,NA=Object.prototype,RA=NA.hasOwnProperty;function CA(r){if(!OA(r))return PA(r);var e=[];for(var t in Object(r))RA.call(r,t)&&t!="constructor"&&e.push(t);return e}var jA=CA,LA=Mp,DA=Bp;function MA(r){return r!=null&&DA(r.length)&&!LA(r)}var VA=MA,$A=bA,qA=jA,FA=VA;function UA(r){return FA(r)?$A(r):qA(r)}var BA=UA,zA=XT,HA=lx,KA=BA;function GA(r){return zA(r,KA,HA)}var WA=GA,jh=WA,QA=1,YA=Object.prototype,JA=YA.hasOwnProperty;function XA(r,e,t,n,i,s){var o=t&QA,a=jh(r),l=a.length,h=jh(e),c=h.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:JA.call(e,f)))return!1}var p=s.get(r),v=s.get(e);if(p&&v)return p==e&&v==r;var y=!0;s.set(r,e),s.set(e,r);for(var g=o;++d<l;){f=a[d];var m=r[f],b=e[f];if(n)var I=o?n(b,m,f,e,r,s):n(m,b,f,r,e,s);if(!(I===void 0?m===b||i(m,b,t,n,s):I)){y=!1;break}g||(g=f=="constructor")}if(y&&!g){var _=r.constructor,P=e.constructor;_!=P&&"constructor"in r&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof P=="function"&&P instanceof P)&&(y=!1)}return s.delete(r),s.delete(e),y}var ZA=XA,ek=Nr,tk=ln,nk=ek(tk,"DataView"),rk=nk,ik=Nr,sk=ln,ok=ik(sk,"Promise"),ak=ok,lk=Nr,uk=ln,ck=lk(uk,"Set"),hk=ck,fk=Nr,dk=ln,pk=fk(dk,"WeakMap"),gk=pk,qa=rk,Fa=Zl,Ua=ak,Ba=hk,za=gk,Hp=fo,Lr=Vp,Lh="[object Map]",mk="[object Object]",Dh="[object Promise]",Mh="[object Set]",Vh="[object WeakMap]",$h="[object DataView]",yk=Lr(qa),vk=Lr(Fa),_k=Lr(Ua),bk=Lr(Ba),wk=Lr(za),Dn=Hp;(qa&&Dn(new qa(new ArrayBuffer(1)))!=$h||Fa&&Dn(new Fa)!=Lh||Ua&&Dn(Ua.resolve())!=Dh||Ba&&Dn(new Ba)!=Mh||za&&Dn(new za)!=Vh)&&(Dn=function(r){var e=Hp(r),t=e==mk?r.constructor:void 0,n=t?Lr(t):"";if(n)switch(n){case yk:return $h;case vk:return Lh;case _k:return Dh;case bk:return Mh;case wk:return Vh}return e});var Ek=Dn,oa=eT,Tk=qp,xk=HT,Ak=ZA,qh=Ek,Fh=eu,Uh=Up,kk=zp,Sk=1,Bh="[object Arguments]",zh="[object Array]",cs="[object Object]",Ik=Object.prototype,Hh=Ik.hasOwnProperty;function Ok(r,e,t,n,i,s){var o=Fh(r),a=Fh(e),l=o?zh:qh(r),h=a?zh:qh(e);l=l==Bh?cs:l,h=h==Bh?cs:h;var c=l==cs,d=h==cs,f=l==h;if(f&&Uh(r)){if(!Uh(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new oa),o||kk(r)?Tk(r,e,t,n,i,s):xk(r,e,l,t,n,i,s);if(!(t&Sk)){var p=c&&Hh.call(r,"__wrapped__"),v=d&&Hh.call(e,"__wrapped__");if(p||v){var y=p?r.value():r,g=v?e.value():e;return s||(s=new oa),i(y,g,t,n,s)}}return f?(s||(s=new oa),Ak(r,e,t,n,i,s)):!1}var Pk=Ok,Nk=Pk,Kh=mo;function Kp(r,e,t,n,i){return r===e?!0:r==null||e==null||!Kh(r)&&!Kh(e)?r!==r&&e!==e:Nk(r,e,t,n,Kp,i)}var Rk=Kp,Ck=Rk;function jk(r,e){return Ck(r,e)}var Lk=jk,Gp={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:Ke,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),h=i(46),c=i(47),d=i(48),f=i(49),p=i(12),v=i(32),y=i(33),g=i(31),m=i(1),b={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:d.default,Scroll:l.default,Block:c.default,Inline:h.default,Text:f.default,Attributor:{Attribute:p.default,Class:v.default,Style:y.default,Store:g.default}};n.default=b},function(t,n,i){var s=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var I in b)b.hasOwnProperty(I)&&(m[I]=b[I])};return function(m,b){g(m,b);function I(){this.constructor=m}m.prototype=b===null?Object.create(b):(I.prototype=b.prototype,new I)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(g){s(m,g);function m(b){var I=this;return b="[Parchment] "+b,I=g.call(this,b)||this,I.message=b,I.name=I.constructor.name,I}return m}(Error);n.ParchmentError=o;var a={},l={},h={},c={};n.DATA_KEY="__blot";var d;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function f(g,m){var b=v(g);if(b==null)throw new o("Unable to create "+g+" blot");var I=b,_=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:I.create(m);return new I(_,m)}n.create=f;function p(g,m){return m===void 0&&(m=!1),g==null?null:g[n.DATA_KEY]!=null?g[n.DATA_KEY].blot:m?p(g.parentNode,m):null}n.find=p;function v(g,m){m===void 0&&(m=d.ANY);var b;if(typeof g=="string")b=c[g]||a[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)b=c.text;else if(typeof g=="number")g&d.LEVEL&d.BLOCK?b=c.block:g&d.LEVEL&d.INLINE&&(b=c.inline);else if(g instanceof HTMLElement){var I=(g.getAttribute("class")||"").split(/\s+/);for(var _ in I)if(b=l[I[_]],b)break;b=b||h[g.tagName]}return b==null?null:m&d.LEVEL&b.scope&&m&d.TYPE&b.scope?b:null}n.query=v;function y(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];if(g.length>1)return g.map(function(_){return y(_)});var b=g[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(c[b.blotName||b.attrName]=b,typeof b.keyName=="string")a[b.keyName]=b;else if(b.className!=null&&(l[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(_){return _.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var I=Array.isArray(b.tagName)?b.tagName:[b.tagName];I.forEach(function(_){(h[_]==null||b.className==null)&&(h[_]=b)})}return b}n.register=y},function(t,n,i){var s=i(51),o=i(11),a=i(3),l=i(20),h="\0",c=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};c.prototype.insert=function(d,f){var p={};return d.length===0?this:(p.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},c.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},c.prototype.retain=function(d,f){if(d<=0)return this;var p={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},c.prototype.push=function(d){var f=this.ops.length,p=this.ops[f-1];if(d=a(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(d),this;if(o(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},c.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},c.prototype.filter=function(d){return this.ops.filter(d)},c.prototype.forEach=function(d){this.ops.forEach(d)},c.prototype.map=function(d){return this.ops.map(d)},c.prototype.partition=function(d){var f=[],p=[];return this.forEach(function(v){var y=d(v)?f:p;y.push(v)}),[f,p]},c.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},c.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},c.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},c.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var p=[],v=l.iterator(this.ops),y=0;y<f&&v.hasNext();){var g;y<d?g=v.next(d-y):(g=v.next(f-y),p.push(g)),y+=l.length(g)}return new c(p)},c.prototype.compose=function(d){var f=l.iterator(this.ops),p=l.iterator(d.ops),v=[],y=p.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var g=y.retain;f.peekType()==="insert"&&f.peekLength()<=g;)g-=f.peekLength(),v.push(f.next());y.retain-g>0&&p.next(y.retain-g)}for(var m=new c(v);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")m.push(p.next());else if(f.peekType()==="delete")m.push(f.next());else{var b=Math.min(f.peekLength(),p.peekLength()),I=f.next(b),_=p.next(b);if(typeof _.retain=="number"){var P={};typeof I.retain=="number"?P.retain=b:P.insert=I.insert;var C=l.attributes.compose(I.attributes,_.attributes,typeof I.retain=="number");if(C&&(P.attributes=C),m.push(P),!p.hasNext()&&o(m.ops[m.ops.length-1],P)){var w=new c(f.rest());return m.concat(w).chop()}}else typeof _.delete=="number"&&typeof I.retain=="number"&&m.push(_)}return m.chop()},c.prototype.concat=function(d){var f=new c(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},c.prototype.diff=function(d,f){if(this.ops===d.ops)return new c;var p=[this,d].map(function(b){return b.map(function(I){if(I.insert!=null)return typeof I.insert=="string"?I.insert:h;var _=b===d?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")}),v=new c,y=s(p[0],p[1],f),g=l.iterator(this.ops),m=l.iterator(d.ops);return y.forEach(function(b){for(var I=b[1].length;I>0;){var _=0;switch(b[0]){case s.INSERT:_=Math.min(m.peekLength(),I),v.push(m.next(_));break;case s.DELETE:_=Math.min(I,g.peekLength()),g.next(_),v.delete(_);break;case s.EQUAL:_=Math.min(g.peekLength(),m.peekLength(),I);var P=g.next(_),C=m.next(_);o(P.insert,C.insert)?v.retain(_,l.attributes.diff(P.attributes,C.attributes)):v.push(C).delete(_);break}I-=_}}),v.chop()},c.prototype.eachLine=function(d,f){f=f||`
`;for(var p=l.iterator(this.ops),v=new c,y=0;p.hasNext();){if(p.peekType()!=="insert")return;var g=p.peek(),m=l.length(g)-p.peekLength(),b=typeof g.insert=="string"?g.insert.indexOf(f,m)-m:-1;if(b<0)v.push(p.next());else if(b>0)v.push(p.next(b));else{if(d(v,p.next(1).attributes||{},y)===!1)return;y+=1,v=new c}}v.length()>0&&d(v,{},y)},c.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var p=l.iterator(this.ops),v=l.iterator(d.ops),y=new c;p.hasNext()||v.hasNext();)if(p.peekType()==="insert"&&(f||v.peekType()!=="insert"))y.retain(l.length(p.next()));else if(v.peekType()==="insert")y.push(v.next());else{var g=Math.min(p.peekLength(),v.peekLength()),m=p.next(g),b=v.next(g);if(m.delete)continue;b.delete?y.push(b):y.retain(g,l.attributes.transform(m.attributes,b.attributes,f))}return y.chop()},c.prototype.transformPosition=function(d,f){f=!!f;for(var p=l.iterator(this.ops),v=0;p.hasNext()&&v<=d;){var y=p.peekLength(),g=p.peekType();if(p.next(),g==="delete"){d-=Math.min(y,d-v);continue}else g==="insert"&&(v<d||!f)&&(d+=y);v+=y}return d},t.exports=c},function(t,n){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):s.call(p)==="[object Array]"},h=function(p){if(!p||s.call(p)!=="[object Object]")return!1;var v=i.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!v&&!y)return!1;var g;for(g in p);return typeof g>"u"||i.call(p,g)},c=function(p,v){o&&v.name==="__proto__"?o(p,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):p[v.name]=v.newValue},d=function(p,v){if(v==="__proto__")if(i.call(p,v)){if(a)return a(p,v).value}else return;return p[v]};t.exports=function f(){var p,v,y,g,m,b,I=arguments[0],_=1,P=arguments.length,C=!1;for(typeof I=="boolean"&&(C=I,I=arguments[1]||{},_=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});_<P;++_)if(p=arguments[_],p!=null)for(v in p)y=d(I,v),g=d(p,v),I!==g&&(C&&g&&(h(g)||(m=l(g)))?(m?(m=!1,b=y&&l(y)?y:[]):b=y&&h(y)?y:{},c(I,{name:v,newValue:f(C,b,g)})):typeof g<"u"&&c(I,{name:v,newValue:g}));return I}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function x(A,O){for(var D=0;D<O.length;D++){var q=O[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(A,q.key,q)}}return function(A,O,D){return O&&x(A.prototype,O),D&&x(A,D),A}}(),o=function x(A,O,D){A===null&&(A=Function.prototype);var q=Object.getOwnPropertyDescriptor(A,O);if(q===void 0){var H=Object.getPrototypeOf(A);return H===null?void 0:x(H,O,D)}else{if("value"in q)return q.value;var K=q.get;return K===void 0?void 0:K.call(D)}},a=i(3),l=I(a),h=i(2),c=I(h),d=i(0),f=I(d),p=i(16),v=I(p),y=i(6),g=I(y),m=i(7),b=I(m);function I(x){return x&&x.__esModule?x:{default:x}}function _(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function P(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:x}function C(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var w=1,E=function(x){C(A,x);function A(){return _(this,A),P(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,q){var H=f.default.query(D,f.default.Scope.BLOCK_ATTRIBUTE);H!=null&&this.attributes.attribute(H,q)}},{key:"formatAt",value:function(D,q,H,K){this.format(H,K)}},{key:"insertAt",value:function(D,q,H){if(typeof q=="string"&&q.endsWith(`
`)){var K=f.default.create(S.blotName);this.parent.insertBefore(K,D===0?this:this.next),K.insertAt(0,q.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,D,q,H)}}]),A}(f.default.Embed);E.scope=f.default.Scope.BLOCK_BLOT;var S=function(x){C(A,x);function A(O){_(this,A);var D=P(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O));return D.cache={},D}return s(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(D,q){return q.length()===0?D:D.insert(q.value(),T(q))},new c.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(D,q){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,D,q),this.cache={}}},{key:"formatAt",value:function(D,q,H,K){q<=0||(f.default.query(H,f.default.Scope.BLOCK)?D+q===this.length()&&this.format(H,K):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,D,Math.min(q,this.length()-D-1),H,K),this.cache={})}},{key:"insertAt",value:function(D,q,H){if(H!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,D,q,H);if(q.length!==0){var K=q.split(`
`),te=K.shift();te.length>0&&(D<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),te):this.children.tail.insertAt(this.children.tail.length(),te),this.cache={});var z=this;K.reduce(function(F,j){return z=z.split(F,!0),z.insertAt(0,j),j.length},D+te.length)}}},{key:"insertBefore",value:function(D,q){var H=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,D,q),H instanceof v.default&&H.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+w),this.cache.length}},{key:"moveChildren",value:function(D,q){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,D,q),this.cache={}}},{key:"optimize",value:function(D){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q&&(D===0||D>=this.length()-w)){var H=this.clone();return D===0?(this.parent.insertBefore(H,this),this):(this.parent.insertBefore(H,this.next),H)}else{var K=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,D,q);return this.cache={},K}}}]),A}(f.default.Block);S.blotName="block",S.tagName="P",S.defaultChild="break",S.allowedChildren=[g.default,f.default.Embed,b.default];function T(x){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x==null||(typeof x.formats=="function"&&(A=(0,l.default)(A,x.formats())),x.parent==null||x.parent.blotName=="scroll"||x.parent.statics.scope!==x.statics.scope)?A:T(x.parent,A)}n.bubbleFormats=T,n.BlockEmbed=E,n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},o=function(){function z(F,j){var V=[],$=!0,W=!1,G=void 0;try{for(var M=F[Symbol.iterator](),B;!($=(B=M.next()).done)&&(V.push(B.value),!(j&&V.length===j));$=!0);}catch(Y){W=!0,G=Y}finally{try{!$&&M.return&&M.return()}finally{if(W)throw G}}return V}return function(F,j){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return z(F,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function z(F,j){for(var V=0;V<j.length;V++){var $=j[V];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(F,$.key,$)}}return function(F,j,V){return j&&z(F.prototype,j),V&&z(F,V),F}}();i(50);var l=i(2),h=T(l),c=i(14),d=T(c),f=i(8),p=T(f),v=i(9),y=T(v),g=i(0),m=T(g),b=i(15),I=T(b),_=i(3),P=T(_),C=i(10),w=T(C),E=i(34),S=T(E);function T(z){return z&&z.__esModule?z:{default:z}}function x(z,F,j){return F in z?Object.defineProperty(z,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):z[F]=j,z}function A(z,F){if(!(z instanceof F))throw new TypeError("Cannot call a class as a function")}var O=(0,w.default)("quill"),D=function(){a(z,null,[{key:"debug",value:function(j){j===!0&&(j="log"),w.default.level(j)}},{key:"find",value:function(j){return j.__quill||m.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&O.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,V){var $=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var G=j.attrName||j.blotName;typeof G=="string"?this.register("formats/"+G,j,V):Object.keys(j).forEach(function(M){$.register(M,j[M],V)})}else this.imports[j]!=null&&!W&&O.warn("Overwriting "+j+" with",V),this.imports[j]=V,(j.startsWith("blots/")||j.startsWith("formats/"))&&V.blotName!=="abstract"?m.default.register(V):j.startsWith("modules")&&typeof V.register=="function"&&V.register()}}]);function z(F){var j=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,z),this.options=q(F,V),this.container=this.options.container,this.container==null)return O.error("Invalid Quill container",F);this.options.debug&&z.debug(this.options.debug);var $=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new I.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(G){G===p.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(G,M){var B=j.selection.lastRange,Y=B&&B.length===0?B.index:void 0;H.call(j,function(){return j.editor.update(null,M,Y)},G)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+$+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(z,[{key:"addContainer",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var $=j;j=document.createElement("div"),j.classList.add($)}return this.container.insertBefore(j,V),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,V,$){var W=this,G=K(j,V,$),M=o(G,4);return j=M[0],V=M[1],$=M[3],H.call(this,function(){return W.editor.deleteText(j,V)},$,j,-1*V)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,V){var $=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return H.call(this,function(){var G=$.getSelection(!0),M=new h.default;if(G==null)return M;if(m.default.query(j,m.default.Scope.BLOCK))M=$.editor.formatLine(G.index,G.length,x({},j,V));else{if(G.length===0)return $.selection.format(j,V),M;M=$.editor.formatText(G.index,G.length,x({},j,V))}return $.setSelection(G,p.default.sources.SILENT),M},W)}},{key:"formatLine",value:function(j,V,$,W,G){var M=this,B=void 0,Y=K(j,V,$,W,G),U=o(Y,4);return j=U[0],V=U[1],B=U[2],G=U[3],H.call(this,function(){return M.editor.formatLine(j,V,B)},G,j,0)}},{key:"formatText",value:function(j,V,$,W,G){var M=this,B=void 0,Y=K(j,V,$,W,G),U=o(Y,4);return j=U[0],V=U[1],B=U[2],G=U[3],H.call(this,function(){return M.editor.formatText(j,V,B)},G,j,0)}},{key:"getBounds",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=void 0;typeof j=="number"?$=this.selection.getBounds(j,V):$=this.selection.getBounds(j.index,j.length);var W=this.container.getBoundingClientRect();return{bottom:$.bottom-W.top,height:$.height,left:$.left-W.left,right:$.right-W.left,top:$.top-W.top,width:$.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,$=K(j,V),W=o($,2);return j=W[0],V=W[1],this.editor.getContents(j,V)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,V):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,V)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,$=K(j,V),W=o($,2);return j=W[0],V=W[1],this.editor.getText(j,V)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,V,$){var W=this,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return H.call(this,function(){return W.editor.insertEmbed(j,V,$)},G,j)}},{key:"insertText",value:function(j,V,$,W,G){var M=this,B=void 0,Y=K(j,0,$,W,G),U=o(Y,4);return j=U[0],B=U[2],G=U[3],H.call(this,function(){return M.editor.insertText(j,V,B)},G,j,V.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,V,$){this.clipboard.dangerouslyPasteHTML(j,V,$)}},{key:"removeFormat",value:function(j,V,$){var W=this,G=K(j,V,$),M=o(G,4);return j=M[0],V=M[1],$=M[3],H.call(this,function(){return W.editor.removeFormat(j,V)},$,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var V=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return H.call(this,function(){j=new h.default(j);var W=V.getLength(),G=V.editor.deleteText(0,W),M=V.editor.applyDelta(j),B=M.ops[M.ops.length-1];B!=null&&typeof B.insert=="string"&&B.insert[B.insert.length-1]===`
`&&(V.editor.deleteText(V.getLength()-1,1),M.delete(1));var Y=G.compose(M);return Y},$)}},{key:"setSelection",value:function(j,V,$){if(j==null)this.selection.setRange(null,V||z.sources.API);else{var W=K(j,V,$),G=o(W,4);j=G[0],V=G[1],$=G[3],this.selection.setRange(new b.Range(j,V),$),$!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,$=new h.default().insert(j);return this.setContents($,V)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,V=this.scroll.update(j);return this.selection.update(j),V}},{key:"updateContents",value:function(j){var V=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return H.call(this,function(){return j=new h.default(j),V.editor.applyDelta(j,$)},$,!0)}}]),z}();D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=p.default.events,D.sources=p.default.sources,D.version="1.3.7",D.imports={delta:h.default,parchment:m.default,"core/module":y.default,"core/theme":S.default};function q(z,F){if(F=(0,P.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},F),!F.theme||F.theme===D.DEFAULTS.theme)F.theme=S.default;else if(F.theme=D.import("themes/"+F.theme),F.theme==null)throw new Error("Invalid theme "+F.theme+". Did you register it?");var j=(0,P.default)(!0,{},F.theme.DEFAULTS);[j,F].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(G){W.modules[G]===!0&&(W.modules[G]={})})});var V=Object.keys(j.modules).concat(Object.keys(F.modules)),$=V.reduce(function(W,G){var M=D.import("modules/"+G);return M==null?O.error("Cannot load "+G+" module. Are you sure you registered it?"):W[G]=M.DEFAULTS||{},W},{});return F.modules!=null&&F.modules.toolbar&&F.modules.toolbar.constructor!==Object&&(F.modules.toolbar={container:F.modules.toolbar}),F=(0,P.default)(!0,{},D.DEFAULTS,{modules:$},j,F),["bounds","container","scrollingContainer"].forEach(function(W){typeof F[W]=="string"&&(F[W]=document.querySelector(F[W]))}),F.modules=Object.keys(F.modules).reduce(function(W,G){return F.modules[G]&&(W[G]=F.modules[G]),W},{}),F}function H(z,F,j,V){if(this.options.strict&&!this.isEnabled()&&F===p.default.sources.USER)return new h.default;var $=j==null?null:this.getSelection(),W=this.editor.delta,G=z();if($!=null&&(j===!0&&(j=$.index),V==null?$=te($,G,F):V!==0&&($=te($,j,V,F)),this.setSelection($,p.default.sources.SILENT)),G.length()>0){var M,B=[p.default.events.TEXT_CHANGE,G,W,F];if((M=this.emitter).emit.apply(M,[p.default.events.EDITOR_CHANGE].concat(B)),F!==p.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,B)}}return G}function K(z,F,j,V,$){var W={};return typeof z.index=="number"&&typeof z.length=="number"?typeof F!="number"?($=V,V=j,j=F,F=z.length,z=z.index):(F=z.length,z=z.index):typeof F!="number"&&($=V,V=j,j=F,F=0),(typeof j>"u"?"undefined":s(j))==="object"?(W=j,$=V):typeof j=="string"&&(V!=null?W[j]=V:$=j),$=$||p.default.sources.API,[z,F,W,$]}function te(z,F,j,V){if(z==null)return null;var $=void 0,W=void 0;if(F instanceof h.default){var G=[z.index,z.index+z.length].map(function(U){return F.transformPosition(U,V!==p.default.sources.USER)}),M=o(G,2);$=M[0],W=M[1]}else{var B=[z.index,z.index+z.length].map(function(U){return U<F||U===F&&V===p.default.sources.USER?U:j>=0?U+j:Math.max(F,U+j)}),Y=o(B,2);$=Y[0],W=Y[1]}return new b.Range($,W-$)}n.expandConfig=q,n.overload=K,n.default=D},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,b){for(var I=0;I<b.length;I++){var _=b[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,b,I){return b&&g(m.prototype,b),I&&g(m,I),m}}(),o=function g(m,b,I){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,b);if(_===void 0){var P=Object.getPrototypeOf(m);return P===null?void 0:g(P,b,I)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(I)}},a=i(7),l=d(a),h=i(0),c=d(h);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function p(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function v(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var y=function(g){v(m,g);function m(){return f(this,m),p(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"formatAt",value:function(I,_,P,C){if(m.compare(this.statics.blotName,P)<0&&c.default.query(P,c.default.Scope.BLOT)){var w=this.isolate(I,_);C&&w.wrap(P,C)}else o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,I,_,P,C)}},{key:"optimize",value:function(I){if(o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,I),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var _=this.parent.isolate(this.offset(),this.length());this.moveChildren(_),_.wrap(this)}}}],[{key:"compare",value:function(I,_){var P=m.order.indexOf(I),C=m.order.indexOf(_);return P>=0||C>=0?P-C:I===_?0:I<_?-1:1}}]),m}(c.default.Inline);y.allowedChildren=[y,c.default.Embed,l.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){c(p,f);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);n.default=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function b(I,_){for(var P=0;P<_.length;P++){var C=_[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(I,C.key,C)}}return function(I,_,P){return _&&b(I.prototype,_),P&&b(I,P),I}}(),o=function b(I,_,P){I===null&&(I=Function.prototype);var C=Object.getOwnPropertyDescriptor(I,_);if(C===void 0){var w=Object.getPrototypeOf(I);return w===null?void 0:b(w,_,P)}else{if("value"in C)return C.value;var E=C.get;return E===void 0?void 0:E.call(P)}},a=i(54),l=d(a),h=i(10),c=d(h);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,I){if(!(b instanceof I))throw new TypeError("Cannot call a class as a function")}function p(b,I){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:b}function v(b,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);b.prototype=Object.create(I&&I.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(b,I):b.__proto__=I)}var y=(0,c.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(b){document.addEventListener(b,function(){for(var I=arguments.length,_=Array(I),P=0;P<I;P++)_[P]=arguments[P];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var w;(w=C.__quill.emitter).handleDOM.apply(w,_)}})})});var m=function(b){v(I,b);function I(){f(this,I);var _=p(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));return _.listeners={},_.on("error",y.error),_}return s(I,[{key:"emit",value:function(){y.log.apply(y,arguments),o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(P){for(var C=arguments.length,w=Array(C>1?C-1:0),E=1;E<C;E++)w[E-1]=arguments[E];(this.listeners[P.type]||[]).forEach(function(S){var T=S.node,x=S.handler;(P.target===T||T.contains(P.target))&&x.apply(void 0,[P].concat(w))})}},{key:"listenDOM",value:function(P,C,w){this.listeners[P]||(this.listeners[P]=[]),this.listeners[P].push({node:C,handler:w})}}]),I}(l.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=h};o.DEFAULTS={},n.default=o},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(h){if(s.indexOf(h)<=s.indexOf(o)){for(var c,d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];(c=console)[h].apply(c,f)}}function l(h){return s.reduce(function(c,d){return c[d]=a.bind(console,d,h),c},{})}a.level=l.level=function(h){o=h},n.default=l},function(t,n,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=t.exports=function(f,p,v){return v||(v={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?v.strict?f===p:f==p:d(f,p,v)};function h(f){return f==null}function c(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,p,v){var y,g;if(h(f)||h(p)||f.prototype!==p.prototype)return!1;if(a(f))return a(p)?(f=s.call(f),p=s.call(p),l(f,p,v)):!1;if(c(f)){if(!c(p)||f.length!==p.length)return!1;for(y=0;y<f.length;y++)if(f[y]!==p[y])return!1;return!0}try{var m=o(f),b=o(p)}catch{return!1}if(m.length!=b.length)return!1;for(m.sort(),b.sort(),y=m.length-1;y>=0;y--)if(m[y]!=b[y])return!1;for(y=m.length-1;y>=0;y--)if(g=m[y],!l(f[g],p[g],v))return!1;return typeof f==typeof p}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),o=function(){function a(l,h,c){c===void 0&&(c={}),this.attrName=l,this.keyName=h;var d=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|d:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(h){return h.name})},a.prototype.add=function(l,h){return this.canAdd(l,h)?(l.setAttribute(this.keyName,h),!0):!1},a.prototype.canAdd=function(l,h){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var h=l.getAttribute(this.keyName);return this.canAdd(l,h)&&h?h:""},a}();n.default=o},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function E(S,T){var x=[],A=!0,O=!1,D=void 0;try{for(var q=S[Symbol.iterator](),H;!(A=(H=q.next()).done)&&(x.push(H.value),!(T&&x.length===T));A=!0);}catch(K){O=!0,D=K}finally{try{!A&&q.return&&q.return()}finally{if(O)throw D}}return x}return function(S,T){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return E(S,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(S,T){for(var x=0;x<T.length;x++){var A=T[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,T,x){return T&&E(S.prototype,T),x&&E(S,x),S}}(),a=function E(S,T,x){S===null&&(S=Function.prototype);var A=Object.getOwnPropertyDescriptor(S,T);if(A===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:E(O,T,x)}else{if("value"in A)return A.value;var D=A.get;return D===void 0?void 0:D.call(x)}},l=i(2),h=b(l),c=i(0),d=b(c),f=i(4),p=b(f),v=i(6),y=b(v),g=i(7),m=b(g);function b(E){return E&&E.__esModule?E:{default:E}}function I(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function _(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function P(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var C=function(E){P(S,E);function S(){return I(this,S),_(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(y.default);C.blotName="code",C.tagName="CODE";var w=function(E){P(S,E);function S(){return I(this,S),_(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"delta",value:function(){var x=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(O,D){return O.insert(D).insert(`
`,x.formats())},new h.default)}},{key:"format",value:function(x,A){if(!(x===this.statics.blotName&&A)){var O=this.descendant(m.default,this.length()-1),D=s(O,1),q=D[0];q!=null&&q.deleteAt(q.length()-1,1),a(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,x,A)}}},{key:"formatAt",value:function(x,A,O,D){if(A!==0&&!(d.default.query(O,d.default.Scope.BLOCK)==null||O===this.statics.blotName&&D===this.statics.formats(this.domNode))){var q=this.newlineIndex(x);if(!(q<0||q>=x+A)){var H=this.newlineIndex(x,!0)+1,K=q-H+1,te=this.isolate(H,K),z=te.next;te.format(O,D),z instanceof S&&z.formatAt(0,x-H+A-K,O,D)}}}},{key:"insertAt",value:function(x,A,O){if(O==null){var D=this.descendant(m.default,x),q=s(D,2),H=q[0],K=q[1];H.insertAt(K,A)}}},{key:"length",value:function(){var x=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?x:x+1}},{key:"newlineIndex",value:function(x){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,x).lastIndexOf(`
`);var O=this.domNode.textContent.slice(x).indexOf(`
`);return O>-1?x+O:-1}},{key:"optimize",value:function(x){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),a(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,x);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(x),A.moveChildren(this),A.remove())}},{key:"replace",value:function(x){a(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,x),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var O=d.default.find(A);O==null?A.parentNode.removeChild(A):O instanceof d.default.Embed?O.remove():O.unwrap()})}}],[{key:"create",value:function(x){var A=a(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,x);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),S}(p.default);w.blotName="code-block",w.tagName="PRE",w.TAB="  ",n.Code=C,n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},o=function(){function z(F,j){var V=[],$=!0,W=!1,G=void 0;try{for(var M=F[Symbol.iterator](),B;!($=(B=M.next()).done)&&(V.push(B.value),!(j&&V.length===j));$=!0);}catch(Y){W=!0,G=Y}finally{try{!$&&M.return&&M.return()}finally{if(W)throw G}}return V}return function(F,j){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return z(F,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function z(F,j){for(var V=0;V<j.length;V++){var $=j[V];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(F,$.key,$)}}return function(F,j,V){return j&&z(F.prototype,j),V&&z(F,V),F}}(),l=i(2),h=A(l),c=i(20),d=A(c),f=i(0),p=A(f),v=i(13),y=A(v),g=i(24),m=A(g),b=i(4),I=A(b),_=i(16),P=A(_),C=i(21),w=A(C),E=i(11),S=A(E),T=i(3),x=A(T);function A(z){return z&&z.__esModule?z:{default:z}}function O(z,F,j){return F in z?Object.defineProperty(z,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):z[F]=j,z}function D(z,F){if(!(z instanceof F))throw new TypeError("Cannot call a class as a function")}var q=/^[ -~]*$/,H=function(){function z(F){D(this,z),this.scroll=F,this.delta=this.getDelta()}return a(z,[{key:"applyDelta",value:function(j){var V=this,$=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),j=te(j),j.reduce(function(G,M){var B=M.retain||M.delete||M.insert.length||1,Y=M.attributes||{};if(M.insert!=null){if(typeof M.insert=="string"){var U=M.insert;U.endsWith(`
`)&&$&&($=!1,U=U.slice(0,-1)),G>=W&&!U.endsWith(`
`)&&($=!0),V.scroll.insertAt(G,U);var J=V.scroll.line(G),oe=o(J,2),le=oe[0],ge=oe[1],_e=(0,x.default)({},(0,b.bubbleFormats)(le));if(le instanceof I.default){var Ie=le.descendant(p.default.Leaf,ge),rt=o(Ie,1),Ye=rt[0];_e=(0,x.default)(_e,(0,b.bubbleFormats)(Ye))}Y=d.default.attributes.diff(_e,Y)||{}}else if(s(M.insert)==="object"){var Z=Object.keys(M.insert)[0];if(Z==null)return G;V.scroll.insertAt(G,Z,M.insert[Z])}W+=B}return Object.keys(Y).forEach(function(ee){V.scroll.formatAt(G,B,ee,Y[ee])}),G+B},0),j.reduce(function(G,M){return typeof M.delete=="number"?(V.scroll.deleteAt(G,M.delete),G):G+(M.retain||M.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,V){return this.scroll.deleteAt(j,V),this.update(new h.default().retain(j).delete(V))}},{key:"formatLine",value:function(j,V){var $=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(G){if(!($.scroll.whitelist!=null&&!$.scroll.whitelist[G])){var M=$.scroll.lines(j,Math.max(V,1)),B=V;M.forEach(function(Y){var U=Y.length();if(!(Y instanceof y.default))Y.format(G,W[G]);else{var J=j-Y.offset($.scroll),oe=Y.newlineIndex(J+B)-J+1;Y.formatAt(J,oe,G,W[G])}B-=U})}}),this.scroll.optimize(),this.update(new h.default().retain(j).retain(V,(0,w.default)(W)))}},{key:"formatText",value:function(j,V){var $=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(G){$.scroll.formatAt(j,V,G,W[G])}),this.update(new h.default().retain(j).retain(V,(0,w.default)(W)))}},{key:"getContents",value:function(j,V){return this.delta.slice(j,j+V)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,V){return j.concat(V.delta())},new h.default)}},{key:"getFormat",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=[],W=[];V===0?this.scroll.path(j).forEach(function(M){var B=o(M,1),Y=B[0];Y instanceof I.default?$.push(Y):Y instanceof p.default.Leaf&&W.push(Y)}):($=this.scroll.lines(j,V),W=this.scroll.descendants(p.default.Leaf,j,V));var G=[$,W].map(function(M){if(M.length===0)return{};for(var B=(0,b.bubbleFormats)(M.shift());Object.keys(B).length>0;){var Y=M.shift();if(Y==null)return B;B=K((0,b.bubbleFormats)(Y),B)}return B});return x.default.apply(x.default,G)}},{key:"getText",value:function(j,V){return this.getContents(j,V).filter(function($){return typeof $.insert=="string"}).map(function($){return $.insert}).join("")}},{key:"insertEmbed",value:function(j,V,$){return this.scroll.insertAt(j,V,$),this.update(new h.default().retain(j).insert(O({},V,$)))}},{key:"insertText",value:function(j,V){var $=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V=V.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,V),Object.keys(W).forEach(function(G){$.scroll.formatAt(j,V.length,G,W[G])}),this.update(new h.default().retain(j).insert(V,(0,w.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==I.default.blotName||j.children.length>1?!1:j.children.head instanceof P.default}},{key:"removeFormat",value:function(j,V){var $=this.getText(j,V),W=this.scroll.line(j+V),G=o(W,2),M=G[0],B=G[1],Y=0,U=new h.default;M!=null&&(M instanceof y.default?Y=M.newlineIndex(B)-B+1:Y=M.length()-B,U=M.delta().slice(B,B+Y-1).insert(`
`));var J=this.getContents(j,V+Y),oe=J.diff(new h.default().insert($).concat(U)),le=new h.default().retain(j).concat(oe);return this.applyDelta(le)}},{key:"update",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(V.length===1&&V[0].type==="characterData"&&V[0].target.data.match(q)&&p.default.find(V[0].target)){var G=p.default.find(V[0].target),M=(0,b.bubbleFormats)(G),B=G.offset(this.scroll),Y=V[0].oldValue.replace(m.default.CONTENTS,""),U=new h.default().insert(Y),J=new h.default().insert(G.value()),oe=new h.default().retain(B).concat(U.diff(J,$));j=oe.reduce(function(le,ge){return ge.insert?le.insert(ge.insert,M):le.push(ge)},new h.default),this.delta=W.compose(j)}else this.delta=this.getDelta(),(!j||!(0,S.default)(W.compose(j),this.delta))&&(j=W.diff(this.delta,$));return j}}]),z}();function K(z,F){return Object.keys(F).reduce(function(j,V){return z[V]==null||(F[V]===z[V]?j[V]=F[V]:Array.isArray(F[V])?F[V].indexOf(z[V])<0&&(j[V]=F[V].concat([z[V]])):j[V]=[F[V],z[V]]),j},{})}function te(z){return z.reduce(function(F,j){if(j.insert===1){var V=(0,w.default)(j.attributes);return delete V.image,F.insert({image:j.attributes.image},V)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,w.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var $=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return F.insert($,j.attributes)}return F.push(j)},new h.default)}n.default=H},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function E(S,T){var x=[],A=!0,O=!1,D=void 0;try{for(var q=S[Symbol.iterator](),H;!(A=(H=q.next()).done)&&(x.push(H.value),!(T&&x.length===T));A=!0);}catch(K){O=!0,D=K}finally{try{!A&&q.return&&q.return()}finally{if(O)throw D}}return x}return function(S,T){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return E(S,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(S,T){for(var x=0;x<T.length;x++){var A=T[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,T,x){return T&&E(S.prototype,T),x&&E(S,x),S}}(),a=i(0),l=m(a),h=i(21),c=m(h),d=i(11),f=m(d),p=i(8),v=m(p),y=i(10),g=m(y);function m(E){return E&&E.__esModule?E:{default:E}}function b(E){if(Array.isArray(E)){for(var S=0,T=Array(E.length);S<E.length;S++)T[S]=E[S];return T}else return Array.from(E)}function I(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}var _=(0,g.default)("quill:selection"),P=function E(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;I(this,E),this.index=S,this.length=T},C=function(){function E(S,T){var x=this;I(this,E),this.emitter=T,this.scroll=S,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new P(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){x.mouseDown||setTimeout(x.update.bind(x,v.default.sources.USER),1)}),this.emitter.on(v.default.events.EDITOR_CHANGE,function(A,O){A===v.default.events.TEXT_CHANGE&&O.length()>0&&x.update(v.default.sources.SILENT)}),this.emitter.on(v.default.events.SCROLL_BEFORE_UPDATE,function(){if(x.hasFocus()){var A=x.getNativeRange();A!=null&&A.start.node!==x.cursor.textNode&&x.emitter.once(v.default.events.SCROLL_UPDATE,function(){try{x.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(v.default.events.SCROLL_OPTIMIZE,function(A,O){if(O.range){var D=O.range,q=D.startNode,H=D.startOffset,K=D.endNode,te=D.endOffset;x.setNativeRange(q,H,K,te)}}),this.update(v.default.sources.SILENT)}return o(E,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var x=T.cursor.restore();if(!x)return;setTimeout(function(){T.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(v.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,x){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(T,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var O=l.default.find(A.start.node,!1);if(O==null)return;if(O instanceof l.default.Leaf){var D=O.split(A.start.offset);O.parent.insertBefore(this.cursor,D)}else O.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(T,x),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();T=Math.min(T,A-1),x=Math.min(T+x,A-1)-T;var O=void 0,D=this.scroll.leaf(T),q=s(D,2),H=q[0],K=q[1];if(H==null)return null;var te=H.position(K,!0),z=s(te,2);O=z[0],K=z[1];var F=document.createRange();if(x>0){F.setStart(O,K);var j=this.scroll.leaf(T+x),V=s(j,2);if(H=V[0],K=V[1],H==null)return null;var $=H.position(K,!0),W=s($,2);return O=W[0],K=W[1],F.setEnd(O,K),F.getBoundingClientRect()}else{var G="left",M=void 0;return O instanceof Text?(K<O.data.length?(F.setStart(O,K),F.setEnd(O,K+1)):(F.setStart(O,K-1),F.setEnd(O,K),G="right"),M=F.getBoundingClientRect()):(M=H.domNode.getBoundingClientRect(),K>0&&(G="right")),{bottom:M.top+M.height,height:M.height,left:M[G],right:M[G],top:M.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var x=T.getRangeAt(0);if(x==null)return null;var A=this.normalizeNative(x);return _.info("getNativeRange",A),A}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var x=this.normalizedToRange(T);return[x,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var x=this,A=[[T.start.node,T.start.offset]];T.native.collapsed||A.push([T.end.node,T.end.offset]);var O=A.map(function(H){var K=s(H,2),te=K[0],z=K[1],F=l.default.find(te,!0),j=F.offset(x.scroll);return z===0?j:F instanceof l.default.Container?j+F.length():j+F.index(te,z)}),D=Math.min(Math.max.apply(Math,b(O)),this.scroll.length()-1),q=Math.min.apply(Math,[D].concat(b(O)));return new P(q,D-q)}},{key:"normalizeNative",value:function(T){if(!w(this.root,T.startContainer)||!T.collapsed&&!w(this.root,T.endContainer))return null;var x={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[x.start,x.end].forEach(function(A){for(var O=A.node,D=A.offset;!(O instanceof Text)&&O.childNodes.length>0;)if(O.childNodes.length>D)O=O.childNodes[D],D=0;else if(O.childNodes.length===D)O=O.lastChild,D=O instanceof Text?O.data.length:O.childNodes.length+1;else break;A.node=O,A.offset=D}),x}},{key:"rangeToNative",value:function(T){var x=this,A=T.collapsed?[T.index]:[T.index,T.index+T.length],O=[],D=this.scroll.length();return A.forEach(function(q,H){q=Math.min(D-1,q);var K=void 0,te=x.scroll.leaf(q),z=s(te,2),F=z[0],j=z[1],V=F.position(j,H!==0),$=s(V,2);K=$[0],j=$[1],O.push(K,j)}),O.length<2&&(O=O.concat(O)),O}},{key:"scrollIntoView",value:function(T){var x=this.lastRange;if(x!=null){var A=this.getBounds(x.index,x.length);if(A!=null){var O=this.scroll.length()-1,D=this.scroll.line(Math.min(x.index,O)),q=s(D,1),H=q[0],K=H;if(x.length>0){var te=this.scroll.line(Math.min(x.index+x.length,O)),z=s(te,1);K=z[0]}if(!(H==null||K==null)){var F=T.getBoundingClientRect();A.top<F.top?T.scrollTop-=F.top-A.top:A.bottom>F.bottom&&(T.scrollTop+=A.bottom-F.bottom)}}}}},{key:"setNativeRange",value:function(T,x){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_.info("setNativeRange",T,x,A,O),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||A.parentNode==null))){var q=document.getSelection();if(q!=null)if(T!=null){this.hasFocus()||this.root.focus();var H=(this.getNativeRange()||{}).native;if(H==null||D||T!==H.startContainer||x!==H.startOffset||A!==H.endContainer||O!==H.endOffset){T.tagName=="BR"&&(x=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),A.tagName=="BR"&&(O=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var K=document.createRange();K.setStart(T,x),K.setEnd(A,O),q.removeAllRanges(),q.addRange(K)}}else q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof x=="string"&&(A=x,x=!1),_.info("setRange",T),T!=null){var O=this.rangeToNative(T);this.setNativeRange.apply(this,b(O).concat([x]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.default.sources.USER,x=this.lastRange,A=this.getRange(),O=s(A,2),D=O[0],q=O[1];if(this.lastRange=D,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(x,this.lastRange)){var H;!this.composing&&q!=null&&q.native.collapsed&&q.start.node!==this.cursor.textNode&&this.cursor.restore();var K=[v.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(x),T];if((H=this.emitter).emit.apply(H,[v.default.events.EDITOR_CHANGE].concat(K)),T!==v.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,K)}}}}]),E}();function w(E,S){try{S.parentNode}catch{return!1}return S instanceof Text&&(S=S.parentNode),E.contains(S)}n.Range=P,n.default=C},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(y,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,g,m){return g&&v(y.prototype,g),m&&v(y,m),y}}(),o=function v(y,g,m){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,g);if(b===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:v(I,g,m)}else{if("value"in b)return b.value;var _=b.get;return _===void 0?void 0:_.call(m)}},a=i(0),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return c(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"insertInto",value:function(m,b){m.children.length===0?o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,m,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(l.default.Embed);p.blotName="break",p.tagName="BR",n.default=p},function(t,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var v in p)p.hasOwnProperty(v)&&(f[v]=p[v])};return function(f,p){d(f,p);function v(){this.constructor=f}f.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),h=function(d){s(f,d);function f(p){var v=d.call(this,p)||this;return v.build(),v}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(v){try{var y=c(v);p.insertBefore(y,p.children.head||void 0)}catch(g){if(g instanceof l.ParchmentError)return;throw g}})},f.prototype.deleteAt=function(p,v){if(p===0&&v===this.length())return this.remove();this.children.forEachAt(p,v,function(y,g,m){y.deleteAt(g,m)})},f.prototype.descendant=function(p,v){var y=this.children.find(v),g=y[0],m=y[1];return p.blotName==null&&p(g)||p.blotName!=null&&g instanceof p?[g,m]:g instanceof f?g.descendant(p,m):[null,-1]},f.prototype.descendants=function(p,v,y){v===void 0&&(v=0),y===void 0&&(y=Number.MAX_VALUE);var g=[],m=y;return this.children.forEachAt(v,y,function(b,I,_){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&g.push(b),b instanceof f&&(g=g.concat(b.descendants(p,I,m))),m-=_}),g},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(p,v,y,g){this.children.forEachAt(p,v,function(m,b,I){m.formatAt(b,I,y,g)})},f.prototype.insertAt=function(p,v,y){var g=this.children.find(p),m=g[0],b=g[1];if(m)m.insertAt(b,v,y);else{var I=y==null?l.create("text",v):l.create(v,y);this.appendChild(I)}},f.prototype.insertBefore=function(p,v){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return p instanceof y}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,v)},f.prototype.length=function(){return this.children.reduce(function(p,v){return p+v.length()},0)},f.prototype.moveChildren=function(p,v){this.children.forEach(function(y){p.insertBefore(y,v)})},f.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var v=l.create(this.statics.defaultChild);this.appendChild(v),v.optimize(p)}else this.remove()},f.prototype.path=function(p,v){v===void 0&&(v=!1);var y=this.children.find(p,v),g=y[0],m=y[1],b=[[this,p]];return g instanceof f?b.concat(g.path(m,v)):(g!=null&&b.push([g,m]),b)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),d.prototype.replace.call(this,p)},f.prototype.split=function(p,v){if(v===void 0&&(v=!1),!v){if(p===0)return this;if(p===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(p,this.length(),function(g,m,b){g=g.split(m,v),y.appendChild(g)}),y},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,v){var y=this,g=[],m=[];p.forEach(function(b){b.target===y.domNode&&b.type==="childList"&&(g.push.apply(g,b.addedNodes),m.push.apply(m,b.removedNodes))}),m.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var I=l.find(b);I!=null&&(I.domNode.parentNode==null||I.domNode.parentNode===y.domNode)&&I.detach()}}),g.filter(function(b){return b.parentNode==y.domNode}).sort(function(b,I){return b===I?0:b.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var I=null;b.nextSibling!=null&&(I=l.find(b.nextSibling));var _=c(b);(_.next!=I||_.next==null)&&(_.parent!=null&&_.parent.removeChild(y),y.insertBefore(_,I||void 0))})},f}(a.default);function c(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch{f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(v){f.domNode.appendChild(v)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}n.default=h},function(t,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var v in p)p.hasOwnProperty(v)&&(f[v]=p[v])};return function(f,p){d(f,p);function v(){this.constructor=f}f.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),h=i(1),c=function(d){s(f,d);function f(p){var v=d.call(this,p)||this;return v.attributes=new a.default(v.domNode),v}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,v){var y=h.query(p);y instanceof o.default?this.attributes.attribute(y,v):v&&y!=null&&(p!==this.statics.blotName||this.formats()[p]!==v)&&this.replaceWith(p,v)},f.prototype.formats=function(){var p=this.attributes.values(),v=this.statics.formats(this.domNode);return v!=null&&(p[this.statics.blotName]=v),p},f.prototype.replaceWith=function(p,v){var y=d.prototype.replaceWith.call(this,p,v);return this.attributes.copy(y),y},f.prototype.update=function(p,v){var y=this;d.prototype.update.call(this,p,v),p.some(function(g){return g.target===y.domNode&&g.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,v){var y=d.prototype.wrap.call(this,p,v);return y instanceof f&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},f}(l.default);n.default=c},function(t,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),a=i(1),l=function(h){s(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.value=function(d){return!0},c.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},c.prototype.position=function(d,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},c.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},c.scope=a.Scope.INLINE_BLOT,c}(o.default);n.default=l},function(t,n,i){var s=i(11),o=i(3),a={attributes:{compose:function(h,c,d){typeof h!="object"&&(h={}),typeof c!="object"&&(c={});var f=o(!0,{},c);d||(f=Object.keys(f).reduce(function(v,y){return f[y]!=null&&(v[y]=f[y]),v},{}));for(var p in h)h[p]!==void 0&&c[p]===void 0&&(f[p]=h[p]);return Object.keys(f).length>0?f:void 0},diff:function(h,c){typeof h!="object"&&(h={}),typeof c!="object"&&(c={});var d=Object.keys(h).concat(Object.keys(c)).reduce(function(f,p){return s(h[p],c[p])||(f[p]=c[p]===void 0?null:c[p]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(h,c,d){if(typeof h!="object")return c;if(typeof c=="object"){if(!d)return c;var f=Object.keys(c).reduce(function(p,v){return h[v]===void 0&&(p[v]=c[v]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(h){return new l(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function l(h){this.ops=h,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(h){h||(h=1/0);var c=this.ops[this.index];if(c){var d=this.offset,f=a.length(c);if(h>=f-d?(h=f-d,this.index+=1,this.offset=0):this.offset+=h,typeof c.delete=="number")return{delete:h};var p={};return c.attributes&&(p.attributes=c.attributes),typeof c.retain=="number"?p.retain=h:typeof c.insert=="string"?p.insert=c.insert.substr(d,h):p.insert=c.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,c=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=h,this.index=c,[d].concat(f)}else return[]},t.exports=a},function(t,n){var i=function(){function s(y,g){return g!=null&&y instanceof g}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function h(y,g,m,b,I){typeof g=="object"&&(m=g.depth,b=g.prototype,I=g.includeNonEnumerable,g=g.circular);var _=[],P=[],C=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof m>"u"&&(m=1/0);function w(E,S){if(E===null)return null;if(S===0)return E;var T,x;if(typeof E!="object")return E;if(s(E,o))T=new o;else if(s(E,a))T=new a;else if(s(E,l))T=new l(function(F,j){E.then(function(V){F(w(V,S-1))},function(V){j(w(V,S-1))})});else if(h.__isArray(E))T=[];else if(h.__isRegExp(E))T=new RegExp(E.source,v(E)),E.lastIndex&&(T.lastIndex=E.lastIndex);else if(h.__isDate(E))T=new Date(E.getTime());else{if(C&&Buffer.isBuffer(E))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(E.length):T=new Buffer(E.length),E.copy(T),T;s(E,Error)?T=Object.create(E):typeof b>"u"?(x=Object.getPrototypeOf(E),T=Object.create(x)):(T=Object.create(b),x=b)}if(g){var A=_.indexOf(E);if(A!=-1)return P[A];_.push(E),P.push(T)}s(E,o)&&E.forEach(function(F,j){var V=w(j,S-1),$=w(F,S-1);T.set(V,$)}),s(E,a)&&E.forEach(function(F){var j=w(F,S-1);T.add(j)});for(var O in E){var D;x&&(D=Object.getOwnPropertyDescriptor(x,O)),!(D&&D.set==null)&&(T[O]=w(E[O],S-1))}if(Object.getOwnPropertySymbols)for(var q=Object.getOwnPropertySymbols(E),O=0;O<q.length;O++){var H=q[O],K=Object.getOwnPropertyDescriptor(E,H);K&&!K.enumerable&&!I||(T[H]=w(E[H],S-1),K.enumerable||Object.defineProperty(T,H,{enumerable:!1}))}if(I)for(var te=Object.getOwnPropertyNames(E),O=0;O<te.length;O++){var z=te[O],K=Object.getOwnPropertyDescriptor(E,z);K&&K.enumerable||(T[z]=w(E[z],S-1),Object.defineProperty(T,z,{enumerable:!1}))}return T}return w(y,m)}h.clonePrototype=function(g){if(g===null)return null;var m=function(){};return m.prototype=g,new m};function c(y){return Object.prototype.toString.call(y)}h.__objToStr=c;function d(y){return typeof y=="object"&&c(y)==="[object Date]"}h.__isDate=d;function f(y){return typeof y=="object"&&c(y)==="[object Array]"}h.__isArray=f;function p(y){return typeof y=="object"&&c(y)==="[object RegExp]"}h.__isRegExp=p;function v(y){var g="";return y.global&&(g+="g"),y.ignoreCase&&(g+="i"),y.multiline&&(g+="m"),g}return h.__getRegExpFlags=v,h}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function T(x,A){var O=[],D=!0,q=!1,H=void 0;try{for(var K=x[Symbol.iterator](),te;!(D=(te=K.next()).done)&&(O.push(te.value),!(A&&O.length===A));D=!0);}catch(z){q=!0,H=z}finally{try{!D&&K.return&&K.return()}finally{if(q)throw H}}return O}return function(x,A){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return T(x,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(x,A){for(var O=0;O<A.length;O++){var D=A[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,A,O){return A&&T(x.prototype,A),O&&T(x,O),x}}(),a=function T(x,A,O){x===null&&(x=Function.prototype);var D=Object.getOwnPropertyDescriptor(x,A);if(D===void 0){var q=Object.getPrototypeOf(x);return q===null?void 0:T(q,A,O)}else{if("value"in D)return D.value;var H=D.get;return H===void 0?void 0:H.call(O)}},l=i(0),h=_(l),c=i(8),d=_(c),f=i(4),p=_(f),v=i(16),y=_(v),g=i(13),m=_(g),b=i(25),I=_(b);function _(T){return T&&T.__esModule?T:{default:T}}function P(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")}function C(T,x){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:T}function w(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);T.prototype=Object.create(x&&x.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(T,x):T.__proto__=x)}function E(T){return T instanceof p.default||T instanceof f.BlockEmbed}var S=function(T){w(x,T);function x(A,O){P(this,x);var D=C(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A));return D.emitter=O.emitter,Array.isArray(O.whitelist)&&(D.whitelist=O.whitelist.reduce(function(q,H){return q[H]=!0,q},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return o(x,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(O,D){var q=this.line(O),H=s(q,2),K=H[0],te=H[1],z=this.line(O+D),F=s(z,1),j=F[0];if(a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,O,D),j!=null&&K!==j&&te>0){if(K instanceof f.BlockEmbed||j instanceof f.BlockEmbed){this.optimize();return}if(K instanceof m.default){var V=K.newlineIndex(K.length(),!0);if(V>-1&&(K=K.split(V+1),K===j)){this.optimize();return}}else if(j instanceof m.default){var $=j.newlineIndex(0);$>-1&&j.split($+1)}var W=j.children.head instanceof y.default?null:j.children.head;K.moveChildren(j,W),K.remove()}this.optimize()}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",O)}},{key:"formatAt",value:function(O,D,q,H){this.whitelist!=null&&!this.whitelist[q]||(a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,O,D,q,H),this.optimize())}},{key:"insertAt",value:function(O,D,q){if(!(q!=null&&this.whitelist!=null&&!this.whitelist[D])){if(O>=this.length())if(q==null||h.default.query(D,h.default.Scope.BLOCK)==null){var H=h.default.create(this.statics.defaultChild);this.appendChild(H),q==null&&D.endsWith(`
`)&&(D=D.slice(0,-1)),H.insertAt(0,D,q)}else{var K=h.default.create(D,q);this.appendChild(K)}else a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,O,D,q);this.optimize()}}},{key:"insertBefore",value:function(O,D){if(O.statics.scope===h.default.Scope.INLINE_BLOT){var q=h.default.create(this.statics.defaultChild);q.appendChild(O),O=q}a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,O,D)}},{key:"leaf",value:function(O){return this.path(O).pop()||[null,-1]}},{key:"line",value:function(O){return O===this.length()?this.line(O-1):this.descendant(E,O)}},{key:"lines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,q=function H(K,te,z){var F=[],j=z;return K.children.forEachAt(te,z,function(V,$,W){E(V)?F.push(V):V instanceof h.default.Container&&(F=F.concat(H(V,$,j))),j-=W}),F};return q(this,O,D)}},{key:"optimize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,O,D),O.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,O,D))}},{key:"path",value:function(O){return a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,O).slice(1)}},{key:"update",value:function(O){if(this.batch!==!0){var D=d.default.sources.USER;typeof O=="string"&&(D=O),Array.isArray(O)||(O=this.observer.takeRecords()),O.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,D,O),a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"update",this).call(this,O.concat([])),O.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,D,O)}}}]),x}(h.default.Scroll);S.blotName="scroll",S.className="ql-editor",S.tagName="DIV",S.defaultChild="block",S.allowedChildren=[p.default,f.BlockEmbed,I.default],n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},o=function(){function M(B,Y){var U=[],J=!0,oe=!1,le=void 0;try{for(var ge=B[Symbol.iterator](),_e;!(J=(_e=ge.next()).done)&&(U.push(_e.value),!(Y&&U.length===Y));J=!0);}catch(Ie){oe=!0,le=Ie}finally{try{!J&&ge.return&&ge.return()}finally{if(oe)throw le}}return U}return function(B,Y){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return M(B,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function M(B,Y){for(var U=0;U<Y.length;U++){var J=Y[U];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(B,J.key,J)}}return function(B,Y,U){return Y&&M(B.prototype,Y),U&&M(B,U),B}}(),l=i(21),h=T(l),c=i(11),d=T(c),f=i(3),p=T(f),v=i(2),y=T(v),g=i(20),m=T(g),b=i(0),I=T(b),_=i(5),P=T(_),C=i(10),w=T(C),E=i(9),S=T(E);function T(M){return M&&M.__esModule?M:{default:M}}function x(M,B,Y){return B in M?Object.defineProperty(M,B,{value:Y,enumerable:!0,configurable:!0,writable:!0}):M[B]=Y,M}function A(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function O(M,B){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:M}function D(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);M.prototype=Object.create(B&&B.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(M,B):M.__proto__=B)}var q=(0,w.default)("quill:keyboard"),H=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",K=function(M){D(B,M),a(B,null,[{key:"match",value:function(U,J){return J=G(J),["altKey","ctrlKey","metaKey","shiftKey"].some(function(oe){return!!J[oe]!==U[oe]&&J[oe]!==null})?!1:J.key===(U.which||U.keyCode)}}]);function B(Y,U){A(this,B);var J=O(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,Y,U));return J.bindings={},Object.keys(J.options.bindings).forEach(function(oe){oe==="list autofill"&&Y.scroll.whitelist!=null&&!Y.scroll.whitelist.list||J.options.bindings[oe]&&J.addBinding(J.options.bindings[oe])}),J.addBinding({key:B.keys.ENTER,shiftKey:null},V),J.addBinding({key:B.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(J.addBinding({key:B.keys.BACKSPACE},{collapsed:!0},z),J.addBinding({key:B.keys.DELETE},{collapsed:!0},F)):(J.addBinding({key:B.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),J.addBinding({key:B.keys.DELETE},{collapsed:!0,suffix:/^.?$/},F)),J.addBinding({key:B.keys.BACKSPACE},{collapsed:!1},j),J.addBinding({key:B.keys.DELETE},{collapsed:!1},j),J.addBinding({key:B.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),J.listen(),J}return a(B,[{key:"addBinding",value:function(U){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},le=G(U);if(le==null||le.key==null)return q.warn("Attempted to add invalid keyboard binding",le);typeof J=="function"&&(J={handler:J}),typeof oe=="function"&&(oe={handler:oe}),le=(0,p.default)(le,J,oe),this.bindings[le.key]=this.bindings[le.key]||[],this.bindings[le.key].push(le)}},{key:"listen",value:function(){var U=this;this.quill.root.addEventListener("keydown",function(J){if(!J.defaultPrevented){var oe=J.which||J.keyCode,le=(U.bindings[oe]||[]).filter(function(Ge){return B.match(J,Ge)});if(le.length!==0){var ge=U.quill.getSelection();if(!(ge==null||!U.quill.hasFocus())){var _e=U.quill.getLine(ge.index),Ie=o(_e,2),rt=Ie[0],Ye=Ie[1],Z=U.quill.getLeaf(ge.index),ee=o(Z,2),ce=ee[0],he=ee[1],se=ge.length===0?[ce,he]:U.quill.getLeaf(ge.index+ge.length),Ee=o(se,2),Te=Ee[0],Se=Ee[1],Me=ce instanceof I.default.Text?ce.value().slice(0,he):"",Ue=Te instanceof I.default.Text?Te.value().slice(Se):"",Ve={collapsed:ge.length===0,empty:ge.length===0&&rt.length()<=1,format:U.quill.getFormat(ge),offset:Ye,prefix:Me,suffix:Ue},Mi=le.some(function(Ge){if(Ge.collapsed!=null&&Ge.collapsed!==Ve.collapsed||Ge.empty!=null&&Ge.empty!==Ve.empty||Ge.offset!=null&&Ge.offset!==Ve.offset)return!1;if(Array.isArray(Ge.format)){if(Ge.format.every(function(qt){return Ve.format[qt]==null}))return!1}else if(s(Ge.format)==="object"&&!Object.keys(Ge.format).every(function(qt){return Ge.format[qt]===!0?Ve.format[qt]!=null:Ge.format[qt]===!1?Ve.format[qt]==null:(0,d.default)(Ge.format[qt],Ve.format[qt])}))return!1;return Ge.prefix!=null&&!Ge.prefix.test(Ve.prefix)||Ge.suffix!=null&&!Ge.suffix.test(Ve.suffix)?!1:Ge.handler.call(U,ge,Ve)!==!0});Mi&&J.preventDefault()}}}})}}]),B}(S.default);K.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},K.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:K.keys.TAB,format:["blockquote","indent","list"],handler:function(B,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","+1",P.default.sources.USER)}},outdent:{key:K.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(B,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","-1",P.default.sources.USER)}},"outdent backspace":{key:K.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(B,Y){Y.format.indent!=null?this.quill.format("indent","-1",P.default.sources.USER):Y.format.list!=null&&this.quill.format("list",!1,P.default.sources.USER)}},"indent code-block":$(!0),"outdent code-block":$(!1),"remove tab":{key:K.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(B){this.quill.deleteText(B.index-1,1,P.default.sources.USER)}},tab:{key:K.keys.TAB,handler:function(B){this.quill.history.cutoff();var Y=new y.default().retain(B.index).delete(B.length).insert("	");this.quill.updateContents(Y,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index+1,P.default.sources.SILENT)}},"list empty enter":{key:K.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(B,Y){this.quill.format("list",!1,P.default.sources.USER),Y.format.indent&&this.quill.format("indent",!1,P.default.sources.USER)}},"checklist enter":{key:K.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(B){var Y=this.quill.getLine(B.index),U=o(Y,2),J=U[0],oe=U[1],le=(0,p.default)({},J.formats(),{list:"checked"}),ge=new y.default().retain(B.index).insert(`
`,le).retain(J.length()-oe-1).retain(1,{list:"unchecked"});this.quill.updateContents(ge,P.default.sources.USER),this.quill.setSelection(B.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:K.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(B,Y){var U=this.quill.getLine(B.index),J=o(U,2),oe=J[0],le=J[1],ge=new y.default().retain(B.index).insert(`
`,Y.format).retain(oe.length()-le-1).retain(1,{header:null});this.quill.updateContents(ge,P.default.sources.USER),this.quill.setSelection(B.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(B,Y){var U=Y.prefix.length,J=this.quill.getLine(B.index),oe=o(J,2),le=oe[0],ge=oe[1];if(ge>U)return!0;var _e=void 0;switch(Y.prefix.trim()){case"[]":case"[ ]":_e="unchecked";break;case"[x]":_e="checked";break;case"-":case"*":_e="bullet";break;default:_e="ordered"}this.quill.insertText(B.index," ",P.default.sources.USER),this.quill.history.cutoff();var Ie=new y.default().retain(B.index-ge).delete(U+1).retain(le.length()-2-ge).retain(1,{list:_e});this.quill.updateContents(Ie,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index-U,P.default.sources.SILENT)}},"code exit":{key:K.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(B){var Y=this.quill.getLine(B.index),U=o(Y,2),J=U[0],oe=U[1],le=new y.default().retain(B.index+J.length()-oe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(le,P.default.sources.USER)}},"embed left":te(K.keys.LEFT,!1),"embed left shift":te(K.keys.LEFT,!0),"embed right":te(K.keys.RIGHT,!1),"embed right shift":te(K.keys.RIGHT,!0)}};function te(M,B){var Y,U=M===K.keys.LEFT?"prefix":"suffix";return Y={key:M,shiftKey:B,altKey:null},x(Y,U,/^$/),x(Y,"handler",function(oe){var le=oe.index;M===K.keys.RIGHT&&(le+=oe.length+1);var ge=this.quill.getLeaf(le),_e=o(ge,1),Ie=_e[0];return Ie instanceof I.default.Embed?(M===K.keys.LEFT?B?this.quill.setSelection(oe.index-1,oe.length+1,P.default.sources.USER):this.quill.setSelection(oe.index-1,P.default.sources.USER):B?this.quill.setSelection(oe.index,oe.length+1,P.default.sources.USER):this.quill.setSelection(oe.index+oe.length+1,P.default.sources.USER),!1):!0}),Y}function z(M,B){if(!(M.index===0||this.quill.getLength()<=1)){var Y=this.quill.getLine(M.index),U=o(Y,1),J=U[0],oe={};if(B.offset===0){var le=this.quill.getLine(M.index-1),ge=o(le,1),_e=ge[0];if(_e!=null&&_e.length()>1){var Ie=J.formats(),rt=this.quill.getFormat(M.index-1,1);oe=m.default.attributes.diff(Ie,rt)||{}}}var Ye=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(B.prefix)?2:1;this.quill.deleteText(M.index-Ye,Ye,P.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(M.index-Ye,Ye,oe,P.default.sources.USER),this.quill.focus()}}function F(M,B){var Y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(B.suffix)?2:1;if(!(M.index>=this.quill.getLength()-Y)){var U={},J=0,oe=this.quill.getLine(M.index),le=o(oe,1),ge=le[0];if(B.offset>=ge.length()-1){var _e=this.quill.getLine(M.index+1),Ie=o(_e,1),rt=Ie[0];if(rt){var Ye=ge.formats(),Z=this.quill.getFormat(M.index,1);U=m.default.attributes.diff(Ye,Z)||{},J=rt.length()}}this.quill.deleteText(M.index,Y,P.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(M.index+J-1,Y,U,P.default.sources.USER)}}function j(M){var B=this.quill.getLines(M),Y={};if(B.length>1){var U=B[0].formats(),J=B[B.length-1].formats();Y=m.default.attributes.diff(J,U)||{}}this.quill.deleteText(M,P.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(M.index,1,Y,P.default.sources.USER),this.quill.setSelection(M.index,P.default.sources.SILENT),this.quill.focus()}function V(M,B){var Y=this;M.length>0&&this.quill.scroll.deleteAt(M.index,M.length);var U=Object.keys(B.format).reduce(function(J,oe){return I.default.query(oe,I.default.Scope.BLOCK)&&!Array.isArray(B.format[oe])&&(J[oe]=B.format[oe]),J},{});this.quill.insertText(M.index,`
`,U,P.default.sources.USER),this.quill.setSelection(M.index+1,P.default.sources.SILENT),this.quill.focus(),Object.keys(B.format).forEach(function(J){U[J]==null&&(Array.isArray(B.format[J])||J!=="link"&&Y.quill.format(J,B.format[J],P.default.sources.USER))})}function $(M){return{key:K.keys.TAB,shiftKey:!M,format:{"code-block":!0},handler:function(Y){var U=I.default.query("code-block"),J=Y.index,oe=Y.length,le=this.quill.scroll.descendant(U,J),ge=o(le,2),_e=ge[0],Ie=ge[1];if(_e!=null){var rt=this.quill.getIndex(_e),Ye=_e.newlineIndex(Ie,!0)+1,Z=_e.newlineIndex(rt+Ie+oe),ee=_e.domNode.textContent.slice(Ye,Z).split(`
`);Ie=0,ee.forEach(function(ce,he){M?(_e.insertAt(Ye+Ie,U.TAB),Ie+=U.TAB.length,he===0?J+=U.TAB.length:oe+=U.TAB.length):ce.startsWith(U.TAB)&&(_e.deleteAt(Ye+Ie,U.TAB.length),Ie-=U.TAB.length,he===0?J-=U.TAB.length:oe-=U.TAB.length),Ie+=ce.length+1}),this.quill.update(P.default.sources.USER),this.quill.setSelection(J,oe,P.default.sources.SILENT)}}}}function W(M){return{key:M[0].toUpperCase(),shortKey:!0,handler:function(Y,U){this.quill.format(M,!U.format[M],P.default.sources.USER)}}}function G(M){if(typeof M=="string"||typeof M=="number")return G({key:M});if((typeof M>"u"?"undefined":s(M))==="object"&&(M=(0,h.default)(M,!1)),typeof M.key=="string")if(K.keys[M.key.toUpperCase()]!=null)M.key=K.keys[M.key.toUpperCase()];else if(M.key.length===1)M.key=M.key.toUpperCase().charCodeAt(0);else return null;return M.shortKey&&(M[H]=M.shortKey,delete M.shortKey),M}n.default=K,n.SHORTKEY=H},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function m(b,I){var _=[],P=!0,C=!1,w=void 0;try{for(var E=b[Symbol.iterator](),S;!(P=(S=E.next()).done)&&(_.push(S.value),!(I&&_.length===I));P=!0);}catch(T){C=!0,w=T}finally{try{!P&&E.return&&E.return()}finally{if(C)throw w}}return _}return function(b,I){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return m(b,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function m(b,I,_){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,I);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:m(C,I,_)}else{if("value"in P)return P.value;var w=P.get;return w===void 0?void 0:w.call(_)}},a=function(){function m(b,I){for(var _=0;_<I.length;_++){var P=I[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,I,_){return I&&m(b.prototype,I),_&&m(b,_),b}}(),l=i(0),h=f(l),c=i(7),d=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function p(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function v(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function y(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var g=function(m){y(b,m),a(b,null,[{key:"value",value:function(){}}]);function b(I,_){p(this,b);var P=v(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,I));return P.selection=_,P.textNode=document.createTextNode(b.CONTENTS),P.domNode.appendChild(P.textNode),P._length=0,P}return a(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(_,P){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,_,P);for(var C=this,w=0;C!=null&&C.statics.scope!==h.default.Scope.BLOCK_BLOT;)w+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=b.CONTENTS.length,C.optimize(),C.formatAt(w,b.CONTENTS.length,_,P),this._length=0)}},{key:"index",value:function(_,P){return _===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,_,P)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var _=this.textNode,P=this.selection.getNativeRange(),C=void 0,w=void 0,E=void 0;if(P!=null&&P.start.node===_&&P.end.node===_){var S=[_,P.start.offset,P.end.offset];C=S[0],w=S[1],E=S[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var T=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof d.default?(C=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=b.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),w!=null){var x=[w,E].map(function(O){return Math.max(0,Math.min(C.data.length,O-1))}),A=s(x,2);return w=A[0],E=A[1],{startNode:C,startOffset:w,endNode:C,endOffset:E}}}}},{key:"update",value:function(_,P){var C=this;if(_.some(function(E){return E.type==="characterData"&&E.target===C.textNode})){var w=this.restore();w&&(P.range=w)}}},{key:"value",value:function(){return""}}]),b}(h.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=h(s),a=i(4),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return c(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(o.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function g(m,b){for(var I=0;I<b.length;I++){var _=b[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,b,I){return b&&g(m.prototype,b),I&&g(m,I),m}}(),o=function g(m,b,I){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,b);if(_===void 0){var P=Object.getPrototypeOf(m);return P===null?void 0:g(P,b,I)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(I)}},a=i(0),l=h(a);function h(g){return g&&g.__esModule?g:{default:g}}function c(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var p=function(g){f(m,g);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(I){var _=o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,I);return _.startsWith("rgb(")?(_=_.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+_.split(",").map(function(P){return("00"+parseInt(P).toString(16)).slice(-2)}).join("")):_}}]),m}(l.default.Attributor.Style),v=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),y=new p("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=p,n.ColorClass=v,n.ColorStyle=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function y(g,m){for(var b=0;b<m.length;b++){var I=m[b];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,m,b){return m&&y(g.prototype,m),b&&y(g,b),g}}(),o=function y(g,m,b){g===null&&(g=Function.prototype);var I=Object.getOwnPropertyDescriptor(g,m);if(I===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:y(_,m,b)}else{if("value"in I)return I.value;var P=I.get;return P===void 0?void 0:P.call(b)}},a=i(6),l=h(a);function h(y){return y&&y.__esModule?y:{default:y}}function c(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=function(y){f(g,y);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(b,I){if(b!==this.statics.blotName||!I)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,b,I);I=this.constructor.sanitize(I),this.domNode.setAttribute("href",I)}}],[{key:"create",value:function(b){var I=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,b);return b=this.sanitize(b),I.setAttribute("href",b),I.setAttribute("rel","noopener noreferrer"),I.setAttribute("target","_blank"),I}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return v(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),g}(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function v(y,g){var m=document.createElement("a");m.href=y;var b=m.href.slice(0,m.href.indexOf(":"));return g.indexOf(b)>-1}n.default=p,n.sanitize=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=function(){function g(m,b){for(var I=0;I<b.length;I++){var _=b[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,b,I){return b&&g(m.prototype,b),I&&g(m,I),m}}(),a=i(23),l=d(a),h=i(107),c=d(h);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}var p=0;function v(g,m){g.setAttribute(m,g.getAttribute(m)!=="true")}var y=function(){function g(m){var b=this;f(this,g),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(I){switch(I.keyCode){case l.default.keys.ENTER:b.togglePicker();break;case l.default.keys.ESCAPE:b.escape(),I.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),v(this.label,"aria-expanded"),v(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var I=this,_=document.createElement("span");return _.tabIndex="0",_.setAttribute("role","button"),_.classList.add("ql-picker-item"),b.hasAttribute("value")&&_.setAttribute("data-value",b.getAttribute("value")),b.textContent&&_.setAttribute("data-label",b.textContent),_.addEventListener("click",function(){I.selectItem(_,!0)}),_.addEventListener("keydown",function(P){switch(P.keyCode){case l.default.keys.ENTER:I.selectItem(_,!0),P.preventDefault();break;case l.default.keys.ESCAPE:I.escape(),P.preventDefault();break}}),_}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=c.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,I=document.createElement("span");I.classList.add("ql-picker-options"),I.setAttribute("aria-hidden","true"),I.tabIndex="-1",I.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",I.id),this.options=I,[].slice.call(this.select.options).forEach(function(_){var P=b.buildItem(_);I.appendChild(P),_.selected===!0&&b.selectItem(P)}),this.container.appendChild(I)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(I){b.container.setAttribute(I.name,I.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=this.container.querySelector(".ql-selected");if(b!==_&&(_!=null&&_.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),I))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var P=document.createEvent("Event");P.initEvent("change",!0,!0),this.select.dispatchEvent(P)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var I=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(I)}else this.selectItem(null);var _=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",_)}}]),g}();n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=q(s),a=i(5),l=q(a),h=i(4),c=q(h),d=i(16),f=q(d),p=i(25),v=q(p),y=i(24),g=q(y),m=i(35),b=q(m),I=i(6),_=q(I),P=i(22),C=q(P),w=i(7),E=q(w),S=i(55),T=q(S),x=i(42),A=q(x),O=i(23),D=q(O);function q(H){return H&&H.__esModule?H:{default:H}}l.default.register({"blots/block":c.default,"blots/block/embed":h.BlockEmbed,"blots/break":f.default,"blots/container":v.default,"blots/cursor":g.default,"blots/embed":b.default,"blots/inline":_.default,"blots/scroll":C.default,"blots/text":E.default,"modules/clipboard":T.default,"modules/history":A.default,"modules/keyboard":D.default}),o.default.register(c.default,f.default,g.default,_.default,C.default,E.default),n.default=l.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?h=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?h=document.createElement(l):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,h){var c=this.isolate(l,h);c.remove()},a.prototype.formatAt=function(l,h,c,d){var f=this.isolate(l,h);if(s.query(c,s.Scope.BLOT)!=null&&d)f.wrap(c,d);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var p=s.create(this.statics.scope);f.wrap(p),p.format(c,d)}},a.prototype.insertAt=function(l,h,c){var d=c==null?s.create("text",h):s.create(h,c),f=this.split(l);this.parent.insertBefore(d,f)},a.prototype.insertInto=function(l,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,h),h!=null&&(c=h.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,h){var c=this.split(l);return c.split(h),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,h){var c=typeof l=="string"?s.create(l,h):l;return c.replace(this),c},a.prototype.split=function(l,h){return l===0?this:this.next},a.prototype.update=function(l,h){},a.prototype.wrap=function(l,h){var c=typeof l=="string"?s.create(l,h):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a}();n.default=o},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),h=function(){function c(d){this.attributes={},this.domNode=d,this.build()}return c.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},c.prototype.build=function(){var d=this;this.attributes={};var f=s.default.keys(this.domNode),p=o.default.keys(this.domNode),v=a.default.keys(this.domNode);f.concat(p).concat(v).forEach(function(y){var g=l.query(y,l.Scope.ATTRIBUTE);g instanceof s.default&&(d.attributes[g.attrName]=g)})},c.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(p){var v=f.attributes[p].value(f.domNode);d.format(p,v)})},c.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},c.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=d.attributes[p].value(d.domNode),f},{})},c}();n.default=h},function(t,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function a(h,c){var d=h.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(c+"-")===0})}var l=function(h){s(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},c.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},c.prototype.remove=function(d){var f=a(d,this.keyName);f.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},c.prototype.value=function(d){var f=a(d,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},c}(o.default);n.default=l},function(t,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function a(h){var c=h.split("-"),d=c.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return c[0]+d}var l=function(h){s(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},c.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[a(this.keyName)]=f,!0):!1},c.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},c.prototype.value=function(d){var f=d.style[a(this.keyName)];return this.canAdd(d,f)?f:""},c}(o.default);n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function l(h,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return function(h,c,d){return c&&l(h.prototype,c),d&&l(h,d),h}}();function o(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(h,c){o(this,l),this.quill=h,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(d){c.modules[d]==null&&c.addModule(d)})}},{key:"addModule",value:function(c){var d=this.quill.constructor.import("modules/"+c);return this.modules[c]=new d(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},n.default=a},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function m(b,I){for(var _=0;_<I.length;_++){var P=I[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,I,_){return I&&m(b.prototype,I),_&&m(b,_),b}}(),o=function m(b,I,_){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,I);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:m(C,I,_)}else{if("value"in P)return P.value;var w=P.get;return w===void 0?void 0:w.call(_)}},a=i(0),l=d(a),h=i(7),c=d(h);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function p(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function v(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var y="\uFEFF",g=function(m){v(b,m);function b(I){f(this,b);var _=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,I));return _.contentNode=document.createElement("span"),_.contentNode.setAttribute("contenteditable",!1),[].slice.call(_.domNode.childNodes).forEach(function(P){_.contentNode.appendChild(P)}),_.leftGuard=document.createTextNode(y),_.rightGuard=document.createTextNode(y),_.domNode.appendChild(_.leftGuard),_.domNode.appendChild(_.contentNode),_.domNode.appendChild(_.rightGuard),_}return s(b,[{key:"index",value:function(_,P){return _===this.leftGuard?0:_===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,_,P)}},{key:"restore",value:function(_){var P=void 0,C=void 0,w=_.data.split(y).join("");if(_===this.leftGuard)if(this.prev instanceof c.default){var E=this.prev.length();this.prev.insertAt(E,w),P={startNode:this.prev.domNode,startOffset:E+w.length}}else C=document.createTextNode(w),this.parent.insertBefore(l.default.create(C),this),P={startNode:C,startOffset:w.length};else _===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,w),P={startNode:this.next.domNode,startOffset:w.length}):(C=document.createTextNode(w),this.parent.insertBefore(l.default.create(C),this.next),P={startNode:C,startOffset:w.length}));return _.data=y,P}},{key:"update",value:function(_,P){var C=this;_.forEach(function(w){if(w.type==="characterData"&&(w.target===C.leftGuard||w.target===C.rightGuard)){var E=C.restore(w.target);E&&(P.range=E)}})}}]),b}(l.default.Embed);n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),d=new o.default.Attributor.Style("align","text-align",l);n.AlignAttribute=h,n.AlignClass=c,n.AlignStyle=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=h,n.BackgroundStyle=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),d=new o.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=h,n.DirectionClass=c,n.DirectionStyle=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function m(b,I){for(var _=0;_<I.length;_++){var P=I[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,I,_){return I&&m(b.prototype,I),_&&m(b,_),b}}(),o=function m(b,I,_){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,I);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:m(C,I,_)}else{if("value"in P)return P.value;var w=P.get;return w===void 0?void 0:w.call(_)}},a=i(0),l=h(a);function h(m){return m&&m.__esModule?m:{default:m}}function c(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function d(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function f(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},v=new l.default.Attributor.Class("font","ql-font",p),y=function(m){f(b,m);function b(){return c(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"value",value:function(_){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,_).replace(/["']/g,"")}}]),b}(l.default.Attributor.Style),g=new y("font","font-family",p);n.FontStyle=g,n.FontClass=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=h},function(t,n,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function I(_,P){for(var C=0;C<P.length;C++){var w=P[C];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,P,C){return P&&I(_.prototype,P),C&&I(_,C),_}}(),o=i(0),a=f(o),l=i(5),h=f(l),c=i(9),d=f(c);function f(I){return I&&I.__esModule?I:{default:I}}function p(I,_){if(!(I instanceof _))throw new TypeError("Cannot call a class as a function")}function v(I,_){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:I}function y(I,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);I.prototype=Object.create(_&&_.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(I,_):I.__proto__=_)}var g=function(I){y(_,I);function _(P,C){p(this,_);var w=v(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,P,C));return w.lastRecorded=0,w.ignoreChange=!1,w.clear(),w.quill.on(h.default.events.EDITOR_CHANGE,function(E,S,T,x){E!==h.default.events.TEXT_CHANGE||w.ignoreChange||(!w.options.userOnly||x===h.default.sources.USER?w.record(S,T):w.transform(S))}),w.quill.keyboard.addBinding({key:"Z",shortKey:!0},w.undo.bind(w)),w.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},w.redo.bind(w)),/Win/i.test(navigator.platform)&&w.quill.keyboard.addBinding({key:"Y",shortKey:!0},w.redo.bind(w)),w}return s(_,[{key:"change",value:function(C,w){if(this.stack[C].length!==0){var E=this.stack[C].pop();this.stack[w].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[C],h.default.sources.USER),this.ignoreChange=!1;var S=b(E[C]);this.quill.setSelection(S)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,w){if(C.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(w),S=Date.now();if(this.lastRecorded+this.options.delay>S&&this.stack.undo.length>0){var T=this.stack.undo.pop();E=E.compose(T.undo),C=T.redo.compose(C)}else this.lastRecorded=S;this.stack.undo.push({redo:C,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(w){w.undo=C.transform(w.undo,!0),w.redo=C.transform(w.redo,!0)}),this.stack.redo.forEach(function(w){w.undo=C.transform(w.undo,!0),w.redo=C.transform(w.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),_}(d.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(I){var _=I.ops[I.ops.length-1];return _==null?!1:_.insert!=null?typeof _.insert=="string"&&_.insert.endsWith(`
`):_.attributes!=null?Object.keys(_.attributes).some(function(P){return a.default.query(P,a.default.Scope.BLOCK)!=null}):!1}function b(I){var _=I.reduce(function(C,w){return C+=w.delete||0,C},0),P=I.length()-_;return m(I)&&(P-=1),P}n.default=g,n.getLastChangeIndex=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function V($,W){for(var G=0;G<W.length;G++){var M=W[G];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty($,M.key,M)}}return function($,W,G){return W&&V($.prototype,W),G&&V($,G),$}}(),o=function V($,W,G){$===null&&($=Function.prototype);var M=Object.getOwnPropertyDescriptor($,W);if(M===void 0){var B=Object.getPrototypeOf($);return B===null?void 0:V(B,W,G)}else{if("value"in M)return M.value;var Y=M.get;return Y===void 0?void 0:Y.call(G)}},a=i(3),l=S(a),h=i(2),c=S(h),d=i(8),f=S(d),p=i(23),v=S(p),y=i(34),g=S(y),m=i(59),b=S(m),I=i(60),_=S(I),P=i(28),C=S(P),w=i(61),E=S(w);function S(V){return V&&V.__esModule?V:{default:V}}function T(V,$){if(!(V instanceof $))throw new TypeError("Cannot call a class as a function")}function x(V,$){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:V}function A(V,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);V.prototype=Object.create($&&$.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(V,$):V.__proto__=$)}var O=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],q=[!1,"serif","monospace"],H=["1","2","3",!1],K=["small",!1,"large","huge"],te=function(V){A($,V);function $(W,G){T(this,$);var M=x(this,($.__proto__||Object.getPrototypeOf($)).call(this,W,G)),B=function Y(U){if(!document.body.contains(W.root))return document.body.removeEventListener("click",Y);M.tooltip!=null&&!M.tooltip.root.contains(U.target)&&document.activeElement!==M.tooltip.textbox&&!M.quill.hasFocus()&&M.tooltip.hide(),M.pickers!=null&&M.pickers.forEach(function(J){J.container.contains(U.target)||J.close()})};return W.emitter.listenDOM("click",document.body,B),M}return s($,[{key:"addModule",value:function(G){var M=o($.prototype.__proto__||Object.getPrototypeOf($.prototype),"addModule",this).call(this,G);return G==="toolbar"&&this.extendToolbar(M),M}},{key:"buildButtons",value:function(G,M){G.forEach(function(B){var Y=B.getAttribute("class")||"";Y.split(/\s+/).forEach(function(U){if(U.startsWith("ql-")&&(U=U.slice(3),M[U]!=null))if(U==="direction")B.innerHTML=M[U][""]+M[U].rtl;else if(typeof M[U]=="string")B.innerHTML=M[U];else{var J=B.value||"";J!=null&&M[U][J]&&(B.innerHTML=M[U][J])}})})}},{key:"buildPickers",value:function(G,M){var B=this;this.pickers=G.map(function(U){if(U.classList.contains("ql-align"))return U.querySelector("option")==null&&j(U,O),new _.default(U,M.align);if(U.classList.contains("ql-background")||U.classList.contains("ql-color")){var J=U.classList.contains("ql-background")?"background":"color";return U.querySelector("option")==null&&j(U,D,J==="background"?"#ffffff":"#000000"),new b.default(U,M[J])}else return U.querySelector("option")==null&&(U.classList.contains("ql-font")?j(U,q):U.classList.contains("ql-header")?j(U,H):U.classList.contains("ql-size")&&j(U,K)),new C.default(U)});var Y=function(){B.pickers.forEach(function(J){J.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,Y)}}]),$}(g.default);te.DEFAULTS=(0,l.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var $=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var G=new FileReader;G.onload=function(M){var B=$.quill.getSelection(!0);$.quill.updateContents(new c.default().retain(B.index).delete(B.length).insert({image:M.target.result}),f.default.sources.USER),$.quill.setSelection(B.index+1,f.default.sources.SILENT),W.value=""},G.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(V){A($,V);function $(W,G){T(this,$);var M=x(this,($.__proto__||Object.getPrototypeOf($)).call(this,W,G));return M.textbox=M.root.querySelector('input[type="text"]'),M.listen(),M}return s($,[{key:"listen",value:function(){var G=this;this.textbox.addEventListener("keydown",function(M){v.default.match(M,"enter")?(G.save(),M.preventDefault()):v.default.match(M,"escape")&&(G.cancel(),M.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),M!=null?this.textbox.value=M:G!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+G)||""),this.root.setAttribute("data-mode",G)}},{key:"restoreFocus",value:function(){var G=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=G}},{key:"save",value:function(){var G=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var M=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",G,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",G,f.default.sources.USER)),this.quill.root.scrollTop=M;break}case"video":G=F(G);case"formula":{if(!G)break;var B=this.quill.getSelection(!0);if(B!=null){var Y=B.index+B.length;this.quill.insertEmbed(Y,this.root.getAttribute("data-mode"),G,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Y+1," ",f.default.sources.USER),this.quill.setSelection(Y+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),$}(E.default);function F(V){var $=V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return $?($[1]||"https")+"://www.youtube.com/embed/"+$[2]+"?showinfo=0":($=V.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?($[1]||"https")+"://player.vimeo.com/video/"+$[2]+"/":V}function j(V,$){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$.forEach(function(G){var M=document.createElement("option");G===W?M.setAttribute("selected","selected"):M.setAttribute("value",G),V.appendChild(M)})}n.BaseTooltip=z,n.default=te},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,h=this.iterator();l=h();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,h=this.head;h!=null;){if(h===a)return l;l+=h.length(),h=h.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var h,c=this.iterator();h=c();){var d=h.length();if(a<d||l&&a===d&&(h.next==null||h.next.length()!==0))return[h,a];a-=d}return[null,0]},o.prototype.forEach=function(a){for(var l,h=this.iterator();l=h();)a(l)},o.prototype.forEachAt=function(a,l,h){if(!(l<=0))for(var c=this.find(a),d=c[0],f=c[1],p,v=a-f,y=this.iterator(d);(p=y())&&v<a+l;){var g=p.length();a>v?h(p,a-v,Math.min(l,v+g-a)):h(p,0,Math.min(g,a+l-v)),v+=g}},o.prototype.map=function(a){return this.reduce(function(l,h){return l.push(a(h)),l},[])},o.prototype.reduce=function(a,l){for(var h,c=this.iterator();h=c();)l=a(l,h);return l},o}();n.default=s},function(t,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var v in p)p.hasOwnProperty(v)&&(f[v]=p[v])};return function(f,p){d(f,p);function v(){this.constructor=f}f.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,c=function(d){s(f,d);function f(p){var v=d.call(this,p)||this;return v.scroll=v,v.observer=new MutationObserver(function(y){v.update(y)}),v.observer.observe(v.domNode,l),v.attach(),v}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,v){this.update(),p===0&&v===this.length()?this.children.forEach(function(y){y.remove()}):d.prototype.deleteAt.call(this,p,v)},f.prototype.formatAt=function(p,v,y,g){this.update(),d.prototype.formatAt.call(this,p,v,y,g)},f.prototype.insertAt=function(p,v,y){this.update(),d.prototype.insertAt.call(this,p,v,y)},f.prototype.optimize=function(p,v){var y=this;p===void 0&&(p=[]),v===void 0&&(v={}),d.prototype.optimize.call(this,v);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)p.push(g.pop());for(var m=function(P,C){C===void 0&&(C=!0),!(P==null||P===y)&&P.domNode.parentNode!=null&&(P.domNode[a.DATA_KEY].mutations==null&&(P.domNode[a.DATA_KEY].mutations=[]),C&&m(P.parent))},b=function(P){P.domNode[a.DATA_KEY]==null||P.domNode[a.DATA_KEY].mutations==null||(P instanceof o.default&&P.children.forEach(b),P.optimize(v))},I=p,_=0;I.length>0;_+=1){if(_>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(I.forEach(function(P){var C=a.find(P.target,!0);C!=null&&(C.domNode===P.target&&(P.type==="childList"?(m(a.find(P.previousSibling,!1)),[].forEach.call(P.addedNodes,function(w){var E=a.find(w,!1);m(E,!1),E instanceof o.default&&E.children.forEach(function(S){m(S,!1)})})):P.type==="attributes"&&m(C.prev)),m(C))}),this.children.forEach(b),I=[].slice.call(this.observer.takeRecords()),g=I.slice();g.length>0;)p.push(g.pop())}},f.prototype.update=function(p,v){var y=this;v===void 0&&(v={}),p=p||this.observer.takeRecords(),p.map(function(g){var m=a.find(g.target,!0);return m==null?null:m.domNode[a.DATA_KEY].mutations==null?(m.domNode[a.DATA_KEY].mutations=[g],m):(m.domNode[a.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===y||g.domNode[a.DATA_KEY]==null||g.update(g.domNode[a.DATA_KEY].mutations||[],v)}),this.domNode[a.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,v),this.optimize(p,v)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);n.default=c},function(t,n,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)f.hasOwnProperty(p)&&(d[p]=f[p])};return function(d,f){c(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,d){if(Object.keys(c).length!==Object.keys(d).length)return!1;for(var f in c)if(c[f]!==d[f])return!1;return!0}var h=function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return c.formats.call(this,f)},d.prototype.format=function(f,p){var v=this;f===this.statics.blotName&&!p?(this.children.forEach(function(y){y instanceof o.default||(y=y.wrap(d.blotName,!0)),v.attributes.copy(y)}),this.unwrap()):c.prototype.format.call(this,f,p)},d.prototype.formatAt=function(f,p,v,y){if(this.formats()[v]!=null||a.query(v,a.Scope.ATTRIBUTE)){var g=this.isolate(f,p);g.format(v,y)}else c.prototype.formatAt.call(this,f,p,v,y)},d.prototype.optimize=function(f){c.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var v=this.next;v instanceof d&&v.prev===this&&l(p,v.formats())&&(v.moveChildren(this),v.remove())},d.blotName="inline",d.scope=a.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=h},function(t,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),a=i(1),l=function(h){s(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.formats=function(d){var f=a.query(c.blotName).tagName;if(d.tagName!==f)return h.formats.call(this,d)},c.prototype.format=function(d,f){a.query(d,a.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(c.blotName):h.prototype.format.call(this,d,f))},c.prototype.formatAt=function(d,f,p,v){a.query(p,a.Scope.BLOCK)!=null?this.format(p,v):h.prototype.formatAt.call(this,d,f,p,v)},c.prototype.insertAt=function(d,f,p){if(p==null||a.query(f,a.Scope.INLINE)!=null)h.prototype.insertAt.call(this,d,f,p);else{var v=this.split(d),y=a.create(f,p);v.parent.insertBefore(y,v)}},c.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,d,f)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c}(o.default);n.default=l},function(t,n,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){l(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),a=function(l){s(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return h.formats=function(c){},h.prototype.format=function(c,d){l.prototype.formatAt.call(this,0,this.length(),c,d)},h.prototype.formatAt=function(c,d,f,p){c===0&&d===this.length()?this.format(f,p):l.prototype.formatAt.call(this,c,d,f,p)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);n.default=a},function(t,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),a=i(1),l=function(h){s(c,h);function c(d){var f=h.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return c.create=function(d){return document.createTextNode(d)},c.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},c.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},c.prototype.index=function(d,f){return this.domNode===d?f:-1},c.prototype.insertAt=function(d,f,p){p==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):h.prototype.insertAt.call(this,d,f,p)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(d){h.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(d,f){return[this.domNode,d]},c.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var p=a.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},c.prototype.update=function(d,f){var p=this;d.some(function(v){return v.type==="characterData"&&v.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c}(o.default);n.default=l},function(t,n,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var h=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>h.length)&&(l=h.length),l-=a.length;var c=h.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),c=h.length>>>0,d=arguments[1],f,p=0;p<c;p++)if(f=h[p],l.call(d,f,p,h))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var i=-1,s=1,o=0;function a(_,P,C){if(_==P)return _?[[o,_]]:[];(C<0||_.length<C)&&(C=null);var w=d(_,P),E=_.substring(0,w);_=_.substring(w),P=P.substring(w),w=f(_,P);var S=_.substring(_.length-w);_=_.substring(0,_.length-w),P=P.substring(0,P.length-w);var T=l(_,P);return E&&T.unshift([o,E]),S&&T.push([o,S]),v(T),C!=null&&(T=m(T,C)),T=b(T),T}function l(_,P){var C;if(!_)return[[s,P]];if(!P)return[[i,_]];var w=_.length>P.length?_:P,E=_.length>P.length?P:_,S=w.indexOf(E);if(S!=-1)return C=[[s,w.substring(0,S)],[o,E],[s,w.substring(S+E.length)]],_.length>P.length&&(C[0][0]=C[2][0]=i),C;if(E.length==1)return[[i,_],[s,P]];var T=p(_,P);if(T){var x=T[0],A=T[1],O=T[2],D=T[3],q=T[4],H=a(x,O),K=a(A,D);return H.concat([[o,q]],K)}return h(_,P)}function h(_,P){for(var C=_.length,w=P.length,E=Math.ceil((C+w)/2),S=E,T=2*E,x=new Array(T),A=new Array(T),O=0;O<T;O++)x[O]=-1,A[O]=-1;x[S+1]=0,A[S+1]=0;for(var D=C-w,q=D%2!=0,H=0,K=0,te=0,z=0,F=0;F<E;F++){for(var j=-F+H;j<=F-K;j+=2){var V=S+j,$;j==-F||j!=F&&x[V-1]<x[V+1]?$=x[V+1]:$=x[V-1]+1;for(var W=$-j;$<C&&W<w&&_.charAt($)==P.charAt(W);)$++,W++;if(x[V]=$,$>C)K+=2;else if(W>w)H+=2;else if(q){var G=S+D-j;if(G>=0&&G<T&&A[G]!=-1){var M=C-A[G];if($>=M)return c(_,P,$,W)}}}for(var B=-F+te;B<=F-z;B+=2){var G=S+B,M;B==-F||B!=F&&A[G-1]<A[G+1]?M=A[G+1]:M=A[G-1]+1;for(var Y=M-B;M<C&&Y<w&&_.charAt(C-M-1)==P.charAt(w-Y-1);)M++,Y++;if(A[G]=M,M>C)z+=2;else if(Y>w)te+=2;else if(!q){var V=S+D-B;if(V>=0&&V<T&&x[V]!=-1){var $=x[V],W=S+$-V;if(M=C-M,$>=M)return c(_,P,$,W)}}}}return[[i,_],[s,P]]}function c(_,P,C,w){var E=_.substring(0,C),S=P.substring(0,w),T=_.substring(C),x=P.substring(w),A=a(E,S),O=a(T,x);return A.concat(O)}function d(_,P){if(!_||!P||_.charAt(0)!=P.charAt(0))return 0;for(var C=0,w=Math.min(_.length,P.length),E=w,S=0;C<E;)_.substring(S,E)==P.substring(S,E)?(C=E,S=C):w=E,E=Math.floor((w-C)/2+C);return E}function f(_,P){if(!_||!P||_.charAt(_.length-1)!=P.charAt(P.length-1))return 0;for(var C=0,w=Math.min(_.length,P.length),E=w,S=0;C<E;)_.substring(_.length-E,_.length-S)==P.substring(P.length-E,P.length-S)?(C=E,S=C):w=E,E=Math.floor((w-C)/2+C);return E}function p(_,P){var C=_.length>P.length?_:P,w=_.length>P.length?P:_;if(C.length<4||w.length*2<C.length)return null;function E(K,te,z){for(var F=K.substring(z,z+Math.floor(K.length/4)),j=-1,V="",$,W,G,M;(j=te.indexOf(F,j+1))!=-1;){var B=d(K.substring(z),te.substring(j)),Y=f(K.substring(0,z),te.substring(0,j));V.length<Y+B&&(V=te.substring(j-Y,j)+te.substring(j,j+B),$=K.substring(0,z-Y),W=K.substring(z+B),G=te.substring(0,j-Y),M=te.substring(j+B))}return V.length*2>=K.length?[$,W,G,M,V]:null}var S=E(C,w,Math.ceil(C.length/4)),T=E(C,w,Math.ceil(C.length/2)),x;if(!S&&!T)return null;T?S?x=S[4].length>T[4].length?S:T:x=T:x=S;var A,O,D,q;_.length>P.length?(A=x[0],O=x[1],D=x[2],q=x[3]):(D=x[0],q=x[1],A=x[2],O=x[3]);var H=x[4];return[A,O,D,q,H]}function v(_){_.push([o,""]);for(var P=0,C=0,w=0,E="",S="",T;P<_.length;)switch(_[P][0]){case s:w++,S+=_[P][1],P++;break;case i:C++,E+=_[P][1],P++;break;case o:C+w>1?(C!==0&&w!==0&&(T=d(S,E),T!==0&&(P-C-w>0&&_[P-C-w-1][0]==o?_[P-C-w-1][1]+=S.substring(0,T):(_.splice(0,0,[o,S.substring(0,T)]),P++),S=S.substring(T),E=E.substring(T)),T=f(S,E),T!==0&&(_[P][1]=S.substring(S.length-T)+_[P][1],S=S.substring(0,S.length-T),E=E.substring(0,E.length-T))),C===0?_.splice(P-w,C+w,[s,S]):w===0?_.splice(P-C,C+w,[i,E]):_.splice(P-C-w,C+w,[i,E],[s,S]),P=P-C-w+(C?1:0)+(w?1:0)+1):P!==0&&_[P-1][0]==o?(_[P-1][1]+=_[P][1],_.splice(P,1)):P++,w=0,C=0,E="",S="";break}_[_.length-1][1]===""&&_.pop();var x=!1;for(P=1;P<_.length-1;)_[P-1][0]==o&&_[P+1][0]==o&&(_[P][1].substring(_[P][1].length-_[P-1][1].length)==_[P-1][1]?(_[P][1]=_[P-1][1]+_[P][1].substring(0,_[P][1].length-_[P-1][1].length),_[P+1][1]=_[P-1][1]+_[P+1][1],_.splice(P-1,1),x=!0):_[P][1].substring(0,_[P+1][1].length)==_[P+1][1]&&(_[P-1][1]+=_[P+1][1],_[P][1]=_[P][1].substring(_[P+1][1].length)+_[P+1][1],_.splice(P+1,1),x=!0)),P++;x&&v(_)}var y=a;y.INSERT=s,y.DELETE=i,y.EQUAL=o,t.exports=y;function g(_,P){if(P===0)return[o,_];for(var C=0,w=0;w<_.length;w++){var E=_[w];if(E[0]===i||E[0]===o){var S=C+E[1].length;if(P===S)return[w+1,_];if(P<S){_=_.slice();var T=P-C,x=[E[0],E[1].slice(0,T)],A=[E[0],E[1].slice(T)];return _.splice(w,1,x,A),[w+1,_]}else C=S}}throw new Error("cursor_pos is out of bounds!")}function m(_,P){var C=g(_,P),w=C[1],E=C[0],S=w[E],T=w[E+1];if(S==null)return _;if(S[0]!==o)return _;if(T!=null&&S[1]+T[1]===T[1]+S[1])return w.splice(E,2,T,S),I(w,E,2);if(T!=null&&T[1].indexOf(S[1])===0){w.splice(E,2,[T[0],S[1]],[0,S[1]]);var x=T[1].slice(S[1].length);return x.length>0&&w.splice(E+2,0,[T[0],x]),I(w,E,3)}else return _}function b(_){for(var P=!1,C=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},w=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},E=2;E<_.length;E+=1)_[E-2][0]===o&&w(_[E-2][1])&&_[E-1][0]===i&&C(_[E-1][1])&&_[E][0]===s&&C(_[E][1])&&(P=!0,_[E-1][1]=_[E-2][1].slice(-1)+_[E-1][1],_[E][1]=_[E-2][1].slice(-1)+_[E][1],_[E-2][1]=_[E-2][1].slice(0,-1));if(!P)return _;for(var S=[],E=0;E<_.length;E+=1)_[E][1].length>0&&S.push(_[E]);return S}function I(_,P,C){for(var w=P+C-1;w>=0&&w>=P-1;w--)if(w+1<_.length){var E=_[w],S=_[w+1];E[0]===S[1]&&_.splice(w,2,[E[0],E[1]+S[1]])}return _}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}},function(t,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=i?s:o,n.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}n.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(t,n){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(h,c,d){this.fn=h,this.context=c,this.once=d||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)i.call(d,f)&&c.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},l.prototype.listeners=function(c,d){var f=s?s+c:c,p=this._events[f];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var v=0,y=p.length,g=new Array(y);v<y;v++)g[v]=p[v].fn;return g},l.prototype.emit=function(c,d,f,p,v,y){var g=s?s+c:c;if(!this._events[g])return!1;var m=this._events[g],b=arguments.length,I,_;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,f),!0;case 4:return m.fn.call(m.context,d,f,p),!0;case 5:return m.fn.call(m.context,d,f,p,v),!0;case 6:return m.fn.call(m.context,d,f,p,v,y),!0}for(_=1,I=new Array(b-1);_<b;_++)I[_-1]=arguments[_];m.fn.apply(m.context,I)}else{var P=m.length,C;for(_=0;_<P;_++)switch(m[_].once&&this.removeListener(c,m[_].fn,void 0,!0),b){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,d);break;case 3:m[_].fn.call(m[_].context,d,f);break;case 4:m[_].fn.call(m[_].context,d,f,p);break;default:if(!I)for(C=1,I=new Array(b-1);C<b;C++)I[C-1]=arguments[C];m[_].fn.apply(m[_].context,I)}}return!0},l.prototype.on=function(c,d,f){var p=new a(d,f||this),v=s?s+c:c;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],p]:this._events[v].push(p):(this._events[v]=p,this._eventsCount++),this},l.prototype.once=function(c,d,f){var p=new a(d,f||this,!0),v=s?s+c:c;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],p]:this._events[v].push(p):(this._events[v]=p,this._eventsCount++),this},l.prototype.removeListener=function(c,d,f,p){var v=s?s+c:c;if(!this._events[v])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[v],this;var y=this._events[v];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[v]);else{for(var g=0,m=[],b=y.length;g<b;g++)(y[g].fn!==d||p&&!y[g].once||f&&y[g].context!==f)&&m.push(y[g]);m.length?this._events[v]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new o:delete this._events[v]}return this},l.prototype.removeAllListeners=function(c){var d;return c?(d=s?s+c:c,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof t<"u"&&(t.exports=l)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},o=function(){function Z(ee,ce){var he=[],se=!0,Ee=!1,Te=void 0;try{for(var Se=ee[Symbol.iterator](),Me;!(se=(Me=Se.next()).done)&&(he.push(Me.value),!(ce&&he.length===ce));se=!0);}catch(Ue){Ee=!0,Te=Ue}finally{try{!se&&Se.return&&Se.return()}finally{if(Ee)throw Te}}return he}return function(ee,ce){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Z(ee,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Z(ee,ce){for(var he=0;he<ce.length;he++){var se=ce[he];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ee,se.key,se)}}return function(ee,ce,he){return ce&&Z(ee.prototype,ce),he&&Z(ee,he),ee}}(),l=i(3),h=A(l),c=i(2),d=A(c),f=i(0),p=A(f),v=i(5),y=A(v),g=i(10),m=A(g),b=i(9),I=A(b),_=i(36),P=i(37),C=i(13),w=A(C),E=i(26),S=i(38),T=i(39),x=i(40);function A(Z){return Z&&Z.__esModule?Z:{default:Z}}function O(Z,ee,ce){return ee in Z?Object.defineProperty(Z,ee,{value:ce,enumerable:!0,configurable:!0,writable:!0}):Z[ee]=ce,Z}function D(Z,ee){if(!(Z instanceof ee))throw new TypeError("Cannot call a class as a function")}function q(Z,ee){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:Z}function H(Z,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);Z.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,ee):Z.__proto__=ee)}var K=(0,m.default)("quill:clipboard"),te="__ql-matcher",z=[[Node.TEXT_NODE,Ye],[Node.TEXT_NODE,_e],["br",oe],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,U],[Node.ELEMENT_NODE,rt],["li",ge],["b",Y.bind(Y,"bold")],["i",Y.bind(Y,"italic")],["style",le]],F=[_.AlignAttribute,S.DirectionAttribute].reduce(function(Z,ee){return Z[ee.keyName]=ee,Z},{}),j=[_.AlignStyle,P.BackgroundStyle,E.ColorStyle,S.DirectionStyle,T.FontStyle,x.SizeStyle].reduce(function(Z,ee){return Z[ee.keyName]=ee,Z},{}),V=function(Z){H(ee,Z);function ee(ce,he){D(this,ee);var se=q(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ce,he));return se.quill.root.addEventListener("paste",se.onPaste.bind(se)),se.container=se.quill.addContainer("ql-clipboard"),se.container.setAttribute("contenteditable",!0),se.container.setAttribute("tabindex",-1),se.matchers=[],z.concat(se.options.matchers).forEach(function(Ee){var Te=o(Ee,2),Se=Te[0],Me=Te[1];!he.matchVisual&&Me===Ie||se.addMatcher(Se,Me)}),se}return a(ee,[{key:"addMatcher",value:function(he,se){this.matchers.push([he,se])}},{key:"convert",value:function(he){if(typeof he=="string")return this.container.innerHTML=he.replace(/\>\r?\n +\</g,"><"),this.convert();var se=this.quill.getFormat(this.quill.selection.savedRange.index);if(se[w.default.blotName]){var Ee=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ee,O({},w.default.blotName,se[w.default.blotName]))}var Te=this.prepareMatching(),Se=o(Te,2),Me=Se[0],Ue=Se[1],Ve=B(this.container,Me,Ue);return G(Ve,`
`)&&Ve.ops[Ve.ops.length-1].attributes==null&&(Ve=Ve.compose(new d.default().retain(Ve.length()-1).delete(1))),K.log("convert",this.container.innerHTML,Ve),this.container.innerHTML="",Ve}},{key:"dangerouslyPasteHTML",value:function(he,se){var Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof he=="string")this.quill.setContents(this.convert(he),se),this.quill.setSelection(0,y.default.sources.SILENT);else{var Te=this.convert(se);this.quill.updateContents(new d.default().retain(he).concat(Te),Ee),this.quill.setSelection(he+Te.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(he){var se=this;if(!(he.defaultPrevented||!this.quill.isEnabled())){var Ee=this.quill.getSelection(),Te=new d.default().retain(Ee.index),Se=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){Te=Te.concat(se.convert()).delete(Ee.length),se.quill.updateContents(Te,y.default.sources.USER),se.quill.setSelection(Te.length()-Ee.length,y.default.sources.SILENT),se.quill.scrollingContainer.scrollTop=Se,se.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var he=this,se=[],Ee=[];return this.matchers.forEach(function(Te){var Se=o(Te,2),Me=Se[0],Ue=Se[1];switch(Me){case Node.TEXT_NODE:Ee.push(Ue);break;case Node.ELEMENT_NODE:se.push(Ue);break;default:[].forEach.call(he.container.querySelectorAll(Me),function(Ve){Ve[te]=Ve[te]||[],Ve[te].push(Ue)});break}}),[se,Ee]}}]),ee}(I.default);V.DEFAULTS={matchers:[],matchVisual:!0};function $(Z,ee,ce){return(typeof ee>"u"?"undefined":s(ee))==="object"?Object.keys(ee).reduce(function(he,se){return $(he,se,ee[se])},Z):Z.reduce(function(he,se){return se.attributes&&se.attributes[ee]?he.push(se):he.insert(se.insert,(0,h.default)({},O({},ee,ce),se.attributes))},new d.default)}function W(Z){if(Z.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return Z[ee]||(Z[ee]=window.getComputedStyle(Z))}function G(Z,ee){for(var ce="",he=Z.ops.length-1;he>=0&&ce.length<ee.length;--he){var se=Z.ops[he];if(typeof se.insert!="string")break;ce=se.insert+ce}return ce.slice(-1*ee.length)===ee}function M(Z){if(Z.childNodes.length===0)return!1;var ee=W(Z);return["block","list-item"].indexOf(ee.display)>-1}function B(Z,ee,ce){return Z.nodeType===Z.TEXT_NODE?ce.reduce(function(he,se){return se(Z,he)},new d.default):Z.nodeType===Z.ELEMENT_NODE?[].reduce.call(Z.childNodes||[],function(he,se){var Ee=B(se,ee,ce);return se.nodeType===Z.ELEMENT_NODE&&(Ee=ee.reduce(function(Te,Se){return Se(se,Te)},Ee),Ee=(se[te]||[]).reduce(function(Te,Se){return Se(se,Te)},Ee)),he.concat(Ee)},new d.default):new d.default}function Y(Z,ee,ce){return $(ce,Z,!0)}function U(Z,ee){var ce=p.default.Attributor.Attribute.keys(Z),he=p.default.Attributor.Class.keys(Z),se=p.default.Attributor.Style.keys(Z),Ee={};return ce.concat(he).concat(se).forEach(function(Te){var Se=p.default.query(Te,p.default.Scope.ATTRIBUTE);Se!=null&&(Ee[Se.attrName]=Se.value(Z),Ee[Se.attrName])||(Se=F[Te],Se!=null&&(Se.attrName===Te||Se.keyName===Te)&&(Ee[Se.attrName]=Se.value(Z)||void 0),Se=j[Te],Se!=null&&(Se.attrName===Te||Se.keyName===Te)&&(Se=j[Te],Ee[Se.attrName]=Se.value(Z)||void 0))}),Object.keys(Ee).length>0&&(ee=$(ee,Ee)),ee}function J(Z,ee){var ce=p.default.query(Z);if(ce==null)return ee;if(ce.prototype instanceof p.default.Embed){var he={},se=ce.value(Z);se!=null&&(he[ce.blotName]=se,ee=new d.default().insert(he,ce.formats(Z)))}else typeof ce.formats=="function"&&(ee=$(ee,ce.blotName,ce.formats(Z)));return ee}function oe(Z,ee){return G(ee,`
`)||ee.insert(`
`),ee}function le(){return new d.default}function ge(Z,ee){var ce=p.default.query(Z);if(ce==null||ce.blotName!=="list-item"||!G(ee,`
`))return ee;for(var he=-1,se=Z.parentNode;!se.classList.contains("ql-clipboard");)(p.default.query(se)||{}).blotName==="list"&&(he+=1),se=se.parentNode;return he<=0?ee:ee.compose(new d.default().retain(ee.length()-1).retain(1,{indent:he}))}function _e(Z,ee){return G(ee,`
`)||(M(Z)||ee.length()>0&&Z.nextSibling&&M(Z.nextSibling))&&ee.insert(`
`),ee}function Ie(Z,ee){if(M(Z)&&Z.nextElementSibling!=null&&!G(ee,`

`)){var ce=Z.offsetHeight+parseFloat(W(Z).marginTop)+parseFloat(W(Z).marginBottom);Z.nextElementSibling.offsetTop>Z.offsetTop+ce*1.5&&ee.insert(`
`)}return ee}function rt(Z,ee){var ce={},he=Z.style||{};return he.fontStyle&&W(Z).fontStyle==="italic"&&(ce.italic=!0),he.fontWeight&&(W(Z).fontWeight.startsWith("bold")||parseInt(W(Z).fontWeight)>=700)&&(ce.bold=!0),Object.keys(ce).length>0&&(ee=$(ee,ce)),parseFloat(he.textIndent||0)>0&&(ee=new d.default().insert("	").concat(ee)),ee}function Ye(Z,ee){var ce=Z.data;if(Z.parentNode.tagName==="O:P")return ee.insert(ce.trim());if(ce.trim().length===0&&Z.parentNode.classList.contains("ql-clipboard"))return ee;if(!W(Z.parentNode).whiteSpace.startsWith("pre")){var he=function(Ee,Te){return Te=Te.replace(/[^\u00a0]/g,""),Te.length<1&&Ee?" ":Te};ce=ce.replace(/\r\n/g," ").replace(/\n/g," "),ce=ce.replace(/\s\s+/g,he.bind(he,!0)),(Z.previousSibling==null&&M(Z.parentNode)||Z.previousSibling!=null&&M(Z.previousSibling))&&(ce=ce.replace(/^\s+/,he.bind(he,!1))),(Z.nextSibling==null&&M(Z.parentNode)||Z.nextSibling!=null&&M(Z.nextSibling))&&(ce=ce.replace(/\s+$/,he.bind(he,!1)))}return ee.insert(ce)}n.default=V,n.matchAttributor=U,n.matchBlot=J,n.matchNewline=_e,n.matchSpacing=Ie,n.matchText=Ye},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(y,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,g,m){return g&&v(y.prototype,g),m&&v(y,m),y}}(),o=function v(y,g,m){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,g);if(b===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:v(I,g,m)}else{if("value"in b)return b.value;var _=b.get;return _===void 0?void 0:_.call(m)}},a=i(6),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return c(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"optimize",value:function(m){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(l.default);p.blotName="bold",p.tagName=["STRONG","B"],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function x(A,O){var D=[],q=!0,H=!1,K=void 0;try{for(var te=A[Symbol.iterator](),z;!(q=(z=te.next()).done)&&(D.push(z.value),!(O&&D.length===O));q=!0);}catch(F){H=!0,K=F}finally{try{!q&&te.return&&te.return()}finally{if(H)throw K}}return D}return function(A,O){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return x(A,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function x(A,O){for(var D=0;D<O.length;D++){var q=O[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(A,q.key,q)}}return function(A,O,D){return O&&x(A.prototype,O),D&&x(A,D),A}}(),a=i(2),l=m(a),h=i(0),c=m(h),d=i(5),f=m(d),p=i(10),v=m(p),y=i(9),g=m(y);function m(x){return x&&x.__esModule?x:{default:x}}function b(x,A,O){return A in x?Object.defineProperty(x,A,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[A]=O,x}function I(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function _(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:x}function P(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var C=(0,v.default)("quill:toolbar"),w=function(x){P(A,x);function A(O,D){I(this,A);var q=_(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O,D));if(Array.isArray(q.options.container)){var H=document.createElement("div");S(H,q.options.container),O.container.parentNode.insertBefore(H,O.container),q.container=H}else typeof q.options.container=="string"?q.container=document.querySelector(q.options.container):q.container=q.options.container;if(!(q.container instanceof HTMLElement)){var K;return K=C.error("Container required for toolbar",q.options),_(q,K)}return q.container.classList.add("ql-toolbar"),q.controls=[],q.handlers={},Object.keys(q.options.handlers).forEach(function(te){q.addHandler(te,q.options.handlers[te])}),[].forEach.call(q.container.querySelectorAll("button, select"),function(te){q.attach(te)}),q.quill.on(f.default.events.EDITOR_CHANGE,function(te,z){te===f.default.events.SELECTION_CHANGE&&q.update(z)}),q.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var te=q.quill.selection.getRange(),z=s(te,1),F=z[0];q.update(F)}),q}return o(A,[{key:"addHandler",value:function(D,q){this.handlers[D]=q}},{key:"attach",value:function(D){var q=this,H=[].find.call(D.classList,function(te){return te.indexOf("ql-")===0});if(H){if(H=H.slice(3),D.tagName==="BUTTON"&&D.setAttribute("type","button"),this.handlers[H]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[H]==null){C.warn("ignoring attaching to disabled format",H,D);return}if(c.default.query(H)==null){C.warn("ignoring attaching to nonexistent format",H,D);return}}var K=D.tagName==="SELECT"?"change":"click";D.addEventListener(K,function(te){var z=void 0;if(D.tagName==="SELECT"){if(D.selectedIndex<0)return;var F=D.options[D.selectedIndex];F.hasAttribute("selected")?z=!1:z=F.value||!1}else D.classList.contains("ql-active")?z=!1:z=D.value||!D.hasAttribute("value"),te.preventDefault();q.quill.focus();var j=q.quill.selection.getRange(),V=s(j,1),$=V[0];if(q.handlers[H]!=null)q.handlers[H].call(q,z);else if(c.default.query(H).prototype instanceof c.default.Embed){if(z=prompt("Enter "+H),!z)return;q.quill.updateContents(new l.default().retain($.index).delete($.length).insert(b({},H,z)),f.default.sources.USER)}else q.quill.format(H,z,f.default.sources.USER);q.update($)}),this.controls.push([H,D])}}},{key:"update",value:function(D){var q=D==null?{}:this.quill.getFormat(D);this.controls.forEach(function(H){var K=s(H,2),te=K[0],z=K[1];if(z.tagName==="SELECT"){var F=void 0;if(D==null)F=null;else if(q[te]==null)F=z.querySelector("option[selected]");else if(!Array.isArray(q[te])){var j=q[te];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),F=z.querySelector('option[value="'+j+'"]')}F==null?(z.value="",z.selectedIndex=-1):F.selected=!0}else if(D==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var V=q[te]===z.getAttribute("value")||q[te]!=null&&q[te].toString()===z.getAttribute("value")||q[te]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",V)}else z.classList.toggle("ql-active",q[te]!=null)})}}]),A}(g.default);w.DEFAULTS={};function E(x,A,O){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+A),O!=null&&(D.value=O),x.appendChild(D)}function S(x,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(O){var D=document.createElement("span");D.classList.add("ql-formats"),O.forEach(function(q){if(typeof q=="string")E(D,q);else{var H=Object.keys(q)[0],K=q[H];Array.isArray(K)?T(D,H,K):E(D,H,K)}}),x.appendChild(D)})}function T(x,A,O){var D=document.createElement("select");D.classList.add("ql-"+A),O.forEach(function(q){var H=document.createElement("option");q!==!1?H.setAttribute("value",q):H.setAttribute("selected","selected"),D.appendChild(H)}),x.appendChild(D)}w.DEFAULTS={container:null,handlers:{clean:function(){var A=this,O=this.quill.getSelection();if(O!=null)if(O.length==0){var D=this.quill.getFormat();Object.keys(D).forEach(function(q){c.default.query(q,c.default.Scope.INLINE)!=null&&A.quill.format(q,!1)})}else this.quill.removeFormat(O,f.default.sources.USER)},direction:function(A){var O=this.quill.getFormat().align;A==="rtl"&&O==null?this.quill.format("align","right",f.default.sources.USER):!A&&O==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",A,f.default.sources.USER)},indent:function(A){var O=this.quill.getSelection(),D=this.quill.getFormat(O),q=parseInt(D.indent||0);if(A==="+1"||A==="-1"){var H=A==="+1"?1:-1;D.direction==="rtl"&&(H*=-1),this.quill.format("indent",q+H,f.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,f.default.sources.USER)},list:function(A){var O=this.quill.getSelection(),D=this.quill.getFormat(O);A==="check"?D.list==="checked"||D.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",A,f.default.sources.USER)}}},n.default=w,n.addControls=S},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(y,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,g,m){return g&&v(y.prototype,g),m&&v(y,m),y}}(),o=function v(y,g,m){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,g);if(b===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:v(I,g,m)}else{if("value"in b)return b.value;var _=b.get;return _===void 0?void 0:_.call(m)}},a=i(28),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(g,m){c(this,y);var b=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,g));return b.label.innerHTML=m,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(I){I.classList.add("ql-primary")}),b}return s(y,[{key:"buildItem",value:function(m){var b=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,m);return b.style.backgroundColor=m.getAttribute("value")||"",b}},{key:"selectItem",value:function(m,b){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,m,b);var I=this.label.querySelector(".ql-color-label"),_=m&&m.getAttribute("data-value")||"";I&&(I.tagName==="line"?I.style.stroke=_:I.style.fill=_)}}]),y}(l.default);n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(y,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,g,m){return g&&v(y.prototype,g),m&&v(y,m),y}}(),o=function v(y,g,m){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,g);if(b===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:v(I,g,m)}else{if("value"in b)return b.value;var _=b.get;return _===void 0?void 0:_.call(m)}},a=i(28),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(g,m){c(this,y);var b=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,g));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(I){I.innerHTML=m[I.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return s(y,[{key:"selectItem",value:function(m,b){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,m,b),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),y}(l.default);n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function l(h,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return function(h,c,d){return c&&l(h.prototype,c),d&&l(h,d),h}}();function o(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(h,c){var d=this;o(this,l),this.quill=h,this.boundsContainer=c||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var d=c.left+c.width/2-this.root.offsetWidth/2,f=c.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),v=this.root.getBoundingClientRect(),y=0;if(v.right>p.right&&(y=p.right-v.right,this.root.style.left=d+y+"px"),v.left<p.left&&(y=p.left-v.left,this.root.style.left=d+y+"px"),v.bottom>p.bottom){var g=v.bottom-v.top,m=c.bottom-c.top+g;this.root.style.top=f-m+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=a},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function T(x,A){var O=[],D=!0,q=!1,H=void 0;try{for(var K=x[Symbol.iterator](),te;!(D=(te=K.next()).done)&&(O.push(te.value),!(A&&O.length===A));D=!0);}catch(z){q=!0,H=z}finally{try{!D&&K.return&&K.return()}finally{if(q)throw H}}return O}return function(x,A){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return T(x,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function T(x,A,O){x===null&&(x=Function.prototype);var D=Object.getOwnPropertyDescriptor(x,A);if(D===void 0){var q=Object.getPrototypeOf(x);return q===null?void 0:T(q,A,O)}else{if("value"in D)return D.value;var H=D.get;return H===void 0?void 0:H.call(O)}},a=function(){function T(x,A){for(var O=0;O<A.length;O++){var D=A[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,A,O){return A&&T(x.prototype,A),O&&T(x,O),x}}(),l=i(3),h=I(l),c=i(8),d=I(c),f=i(43),p=I(f),v=i(27),y=I(v),g=i(15),m=i(41),b=I(m);function I(T){return T&&T.__esModule?T:{default:T}}function _(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")}function P(T,x){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:T}function C(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);T.prototype=Object.create(x&&x.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(T,x):T.__proto__=x)}var w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(T){C(x,T);function x(A,O){_(this,x),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=w);var D=P(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A,O));return D.quill.container.classList.add("ql-snow"),D}return a(x,[{key:"extendToolbar",value:function(O){O.container.classList.add("ql-snow"),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),b.default),this.tooltip=new S(this.quill,this.options.bounds),O.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,q){O.handlers.link.call(O,!q.format.link)})}}]),x}(p.default);E.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){if(x){var A=this.quill.getSelection();if(A==null||A.length==0)return;var O=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(O)&&O.indexOf("mailto:")!==0&&(O="mailto:"+O);var D=this.quill.theme.tooltip;D.edit("link",O)}else this.quill.format("link",!1)}}}}});var S=function(T){C(x,T);function x(A,O){_(this,x);var D=P(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A,O));return D.preview=D.root.querySelector("a.ql-preview"),D}return a(x,[{key:"listen",value:function(){var O=this;o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){O.root.classList.contains("ql-editing")?O.save():O.edit("link",O.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if(O.linkRange!=null){var q=O.linkRange;O.restoreFocus(),O.quill.formatText(q,"link",!1,d.default.sources.USER),delete O.linkRange}D.preventDefault(),O.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(D,q,H){if(D!=null){if(D.length===0&&H===d.default.sources.USER){var K=O.quill.scroll.descendant(y.default,D.index),te=s(K,2),z=te[0],F=te[1];if(z!=null){O.linkRange=new g.Range(D.index-F,z.length());var j=y.default.formats(z.domNode);O.preview.textContent=j,O.preview.setAttribute("href",j),O.show(),O.position(O.quill.getBounds(O.linkRange));return}}else delete O.linkRange;O.hide()}})}},{key:"show",value:function(){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),x}(f.BaseTooltip);S.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(29),o=se(s),a=i(36),l=i(38),h=i(64),c=i(65),d=se(c),f=i(66),p=se(f),v=i(67),y=se(v),g=i(37),m=i(26),b=i(39),I=i(40),_=i(56),P=se(_),C=i(68),w=se(C),E=i(27),S=se(E),T=i(69),x=se(T),A=i(70),O=se(A),D=i(71),q=se(D),H=i(72),K=se(H),te=i(73),z=se(te),F=i(13),j=se(F),V=i(74),$=se(V),W=i(75),G=se(W),M=i(57),B=se(M),Y=i(41),U=se(Y),J=i(28),oe=se(J),le=i(59),ge=se(le),_e=i(60),Ie=se(_e),rt=i(61),Ye=se(rt),Z=i(108),ee=se(Z),ce=i(62),he=se(ce);function se(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":I.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":I.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":h.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":b.FontClass,"formats/size":I.SizeClass,"formats/blockquote":d.default,"formats/code-block":j.default,"formats/header":p.default,"formats/list":y.default,"formats/bold":P.default,"formats/code":F.Code,"formats/italic":w.default,"formats/link":S.default,"formats/script":x.default,"formats/strike":O.default,"formats/underline":q.default,"formats/image":K.default,"formats/video":z.default,"formats/list/item":v.ListItem,"modules/formula":$.default,"modules/syntax":G.default,"modules/toolbar":B.default,"themes/bubble":ee.default,"themes/snow":he.default,"ui/icons":U.default,"ui/picker":oe.default,"ui/icon-picker":Ie.default,"ui/color-picker":ge.default,"ui/tooltip":Ye.default},!0),n.default=o.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function y(g,m){for(var b=0;b<m.length;b++){var I=m[b];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,m,b){return m&&y(g.prototype,m),b&&y(g,b),g}}(),o=function y(g,m,b){g===null&&(g=Function.prototype);var I=Object.getOwnPropertyDescriptor(g,m);if(I===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:y(_,m,b)}else{if("value"in I)return I.value;var P=I.get;return P===void 0?void 0:P.call(b)}},a=i(0),l=h(a);function h(y){return y&&y.__esModule?y:{default:y}}function c(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=function(y){f(g,y);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"add",value:function(b,I){if(I==="+1"||I==="-1"){var _=this.value(b)||0;I=I==="+1"?_+1:_-1}return I===0?(this.remove(b),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,b,I)}},{key:"canAdd",value:function(b,I){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,b,I)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,b,parseInt(I))}},{key:"value",value:function(b){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,b))||void 0}}]),g}(l.default.Attributor.Class),v=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(4),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){c(p,f);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function p(v,y){for(var g=0;g<y.length;g++){var m=y[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,y,g){return y&&p(v.prototype,y),g&&p(v,g),v}}(),o=i(4),a=l(o);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function c(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function d(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var f=function(p){d(v,p);function v(){return h(this,v),c(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),v}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function _(P,C){for(var w=0;w<C.length;w++){var E=C[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,E.key,E)}}return function(P,C,w){return C&&_(P.prototype,C),w&&_(P,w),P}}(),o=function _(P,C,w){P===null&&(P=Function.prototype);var E=Object.getOwnPropertyDescriptor(P,C);if(E===void 0){var S=Object.getPrototypeOf(P);return S===null?void 0:_(S,C,w)}else{if("value"in E)return E.value;var T=E.get;return T===void 0?void 0:T.call(w)}},a=i(0),l=p(a),h=i(4),c=p(h),d=i(25),f=p(d);function p(_){return _&&_.__esModule?_:{default:_}}function v(_,P,C){return P in _?Object.defineProperty(_,P,{value:C,enumerable:!0,configurable:!0,writable:!0}):_[P]=C,_}function y(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function g(_,P){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:_}function m(_,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);_.prototype=Object.create(P&&P.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(_,P):_.__proto__=P)}var b=function(_){m(P,_);function P(){return y(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"format",value:function(w,E){w===I.blotName&&!E?this.replaceWith(l.default.create(this.statics.scope)):o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,w,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(w,E){return this.parent.isolate(this.offset(this.parent),this.length()),w===this.parent.statics.blotName?(this.parent.replaceWith(w,E),this):(this.parent.unwrap(),o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,w,E))}}],[{key:"formats",value:function(w){return w.tagName===this.tagName?void 0:o(P.__proto__||Object.getPrototypeOf(P),"formats",this).call(this,w)}}]),P}(c.default);b.blotName="list-item",b.tagName="LI";var I=function(_){m(P,_),s(P,null,[{key:"create",value:function(w){var E=w==="ordered"?"OL":"UL",S=o(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,E);return(w==="checked"||w==="unchecked")&&S.setAttribute("data-checked",w==="checked"),S}},{key:"formats",value:function(w){if(w.tagName==="OL")return"ordered";if(w.tagName==="UL")return w.hasAttribute("data-checked")?w.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function P(C){y(this,P);var w=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,C)),E=function(T){if(T.target.parentNode===C){var x=w.statics.formats(C),A=l.default.find(T.target);x==="checked"?A.format("list","unchecked"):x==="unchecked"&&A.format("list","checked")}};return C.addEventListener("touchstart",E),C.addEventListener("mousedown",E),w}return s(P,[{key:"format",value:function(w,E){this.children.length>0&&this.children.tail.format(w,E)}},{key:"formats",value:function(){return v({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(w,E){if(w instanceof b)o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,w,E);else{var S=E==null?this.length():E.offset(this),T=this.split(S);T.parent.insertBefore(w,T)}}},{key:"optimize",value:function(w){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,w);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(w){if(w.statics.blotName!==this.statics.blotName){var E=l.default.create(this.statics.defaultChild);w.moveChildren(E),this.appendChild(E)}o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,w)}}]),P}(f.default);I.blotName="list",I.scope=l.default.Scope.BLOCK_BLOT,I.tagName=["OL","UL"],I.defaultChild="list-item",I.allowedChildren=[b],n.ListItem=b,n.default=I},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(56),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){c(p,f);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(y,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,g,m){return g&&v(y.prototype,g),m&&v(y,m),y}}(),o=function v(y,g,m){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,g);if(b===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:v(I,g,m)}else{if("value"in b)return b.value;var _=b.get;return _===void 0?void 0:_.call(m)}},a=i(6),l=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return c(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),y}(l.default);p.blotName="script",p.tagName=["SUB","SUP"],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){c(p,f);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){c(p,f);function p(){return l(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,b){for(var I=0;I<b.length;I++){var _=b[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,b,I){return b&&g(m.prototype,b),I&&g(m,I),m}}(),o=function g(m,b,I){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,b);if(_===void 0){var P=Object.getPrototypeOf(m);return P===null?void 0:g(P,b,I)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(I)}},a=i(0),l=c(a),h=i(27);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function f(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function p(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v=["alt","height","width"],y=function(g){p(m,g);function m(){return d(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"format",value:function(I,_){v.indexOf(I)>-1?_?this.domNode.setAttribute(I,_):this.domNode.removeAttribute(I):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,I,_)}}],[{key:"create",value:function(I){var _=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,I);return typeof I=="string"&&_.setAttribute("src",this.sanitize(I)),_}},{key:"formats",value:function(I){return v.reduce(function(_,P){return I.hasAttribute(P)&&(_[P]=I.getAttribute(P)),_},{})}},{key:"match",value:function(I){return/\.(jpe?g|gif|png)$/.test(I)||/^data:image\/.+;base64/.test(I)}},{key:"sanitize",value:function(I){return(0,h.sanitize)(I,["http","https","data"])?I:"//:0"}},{key:"value",value:function(I){return I.getAttribute("src")}}]),m}(l.default.Embed);y.blotName="image",y.tagName="IMG",n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,b){for(var I=0;I<b.length;I++){var _=b[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,b,I){return b&&g(m.prototype,b),I&&g(m,I),m}}(),o=function g(m,b,I){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,b);if(_===void 0){var P=Object.getPrototypeOf(m);return P===null?void 0:g(P,b,I)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(I)}},a=i(4),l=i(27),h=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function f(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function p(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v=["height","width"],y=function(g){p(m,g);function m(){return d(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"format",value:function(I,_){v.indexOf(I)>-1?_?this.domNode.setAttribute(I,_):this.domNode.removeAttribute(I):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,I,_)}}],[{key:"create",value:function(I){var _=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,I);return _.setAttribute("frameborder","0"),_.setAttribute("allowfullscreen",!0),_.setAttribute("src",this.sanitize(I)),_}},{key:"formats",value:function(I){return v.reduce(function(_,P){return I.hasAttribute(P)&&(_[P]=I.getAttribute(P)),_},{})}},{key:"sanitize",value:function(I){return h.default.sanitize(I)}},{key:"value",value:function(I){return I.getAttribute("src")}}]),m}(a.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function I(_,P){for(var C=0;C<P.length;C++){var w=P[C];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,P,C){return P&&I(_.prototype,P),C&&I(_,C),_}}(),o=function I(_,P,C){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,P);if(w===void 0){var E=Object.getPrototypeOf(_);return E===null?void 0:I(E,P,C)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(C)}},a=i(35),l=p(a),h=i(5),c=p(h),d=i(9),f=p(d);function p(I){return I&&I.__esModule?I:{default:I}}function v(I,_){if(!(I instanceof _))throw new TypeError("Cannot call a class as a function")}function y(I,_){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:I}function g(I,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);I.prototype=Object.create(_&&_.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(I,_):I.__proto__=_)}var m=function(I){g(_,I);function _(){return v(this,_),y(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,null,[{key:"create",value:function(C){var w=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,w,{throwOnError:!1,errorColor:"#f00"}),w.setAttribute("data-value",C)),w}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),_}(l.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var b=function(I){g(_,I),s(_,null,[{key:"register",value:function(){c.default.register(m,!0)}}]);function _(){v(this,_);var P=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return P}return _}(f.default);n.FormulaBlot=m,n.default=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function C(w,E){for(var S=0;S<E.length;S++){var T=E[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}return function(w,E,S){return E&&C(w.prototype,E),S&&C(w,S),w}}(),o=function C(w,E,S){w===null&&(w=Function.prototype);var T=Object.getOwnPropertyDescriptor(w,E);if(T===void 0){var x=Object.getPrototypeOf(w);return x===null?void 0:C(x,E,S)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(S)}},a=i(0),l=y(a),h=i(5),c=y(h),d=i(9),f=y(d),p=i(13),v=y(p);function y(C){return C&&C.__esModule?C:{default:C}}function g(C,w){if(!(C instanceof w))throw new TypeError("Cannot call a class as a function")}function m(C,w){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:C}function b(C,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);C.prototype=Object.create(w&&w.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(C,w):C.__proto__=w)}var I=function(C){b(w,C);function w(){return g(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"replaceWith",value:function(S){this.domNode.textContent=this.domNode.textContent,this.attach(),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,S)}},{key:"highlight",value:function(S){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=S(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),w}(v.default);I.className="ql-syntax";var _=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),P=function(C){b(w,C),s(w,null,[{key:"register",value:function(){c.default.register(_,!0),c.default.register(I,!0)}}]);function w(E,S){g(this,w);var T=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,S));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var x=null;return T.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(x),x=setTimeout(function(){T.highlight(),x=null},T.options.interval)}),T.highlight(),T}return s(w,[{key:"highlight",value:function(){var S=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(I).forEach(function(x){x.highlight(S.options.highlight)}),this.quill.update(c.default.sources.SILENT),T!=null&&this.quill.setSelection(T,c.default.sources.SILENT)}}}]),w}(f.default);P.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var w=window.hljs.highlightAuto(C);return w.value}}(),interval:1e3},n.CodeBlock=I,n.CodeToken=_,n.default=P},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function w(E,S,T){E===null&&(E=Function.prototype);var x=Object.getOwnPropertyDescriptor(E,S);if(x===void 0){var A=Object.getPrototypeOf(E);return A===null?void 0:w(A,S,T)}else{if("value"in x)return x.value;var O=x.get;return O===void 0?void 0:O.call(T)}},o=function(){function w(E,S){for(var T=0;T<S.length;T++){var x=S[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(E,x.key,x)}}return function(E,S,T){return S&&w(E.prototype,S),T&&w(E,T),E}}(),a=i(3),l=g(a),h=i(8),c=g(h),d=i(43),f=g(d),p=i(15),v=i(41),y=g(v);function g(w){return w&&w.__esModule?w:{default:w}}function m(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function b(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function I(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var _=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],P=function(w){I(E,w);function E(S,T){m(this,E),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=_);var x=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,S,T));return x.quill.container.classList.add("ql-bubble"),x}return o(E,[{key:"extendToolbar",value:function(T){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),y.default)}}]),E}(f.default);P.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(w){I(E,w);function E(S,T){m(this,E);var x=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,S,T));return x.quill.on(c.default.events.EDITOR_CHANGE,function(A,O,D,q){if(A===c.default.events.SELECTION_CHANGE)if(O!=null&&O.length>0&&q===c.default.sources.USER){x.show(),x.root.style.left="0px",x.root.style.width="",x.root.style.width=x.root.offsetWidth+"px";var H=x.quill.getLines(O.index,O.length);if(H.length===1)x.position(x.quill.getBounds(O));else{var K=H[H.length-1],te=x.quill.getIndex(K),z=Math.min(K.length()-1,O.index+O.length-te),F=x.quill.getBounds(new p.Range(te,z));x.position(F)}}else document.activeElement!==x.textbox&&x.quill.hasFocus()&&x.hide()}),x}return o(E,[{key:"listen",value:function(){var T=this;s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var x=T.quill.getSelection();x!=null&&T.position(T.quill.getBounds(x))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var x=s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,T),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",x===0)return x;A.style.marginLeft=-1*x-A.offsetWidth/2+"px"}}]),E}(d.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=C,n.default=P},function(t,n,i){t.exports=i(63)}]).default})})(Gp);var Dk=Gp.exports,Mk=Ke&&Ke.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Us=Ke&&Ke.__assign||function(){return Us=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Us.apply(this,arguments)},Vk=Ke&&Ke.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n},yo=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Ft=yo(re),$k=yo(ff),ei=yo(Lk),Gh=yo(Dk),qk=function(r){Mk(e,r);function e(t){var n=r.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(s,o,a,l){var h,c,d,f;s==="text-change"?(c=(h=n).onEditorChangeText)===null||c===void 0||c.call(h,n.editor.root.innerHTML,o,l,n.unprivilegedEditor):s==="selection-change"&&((f=(d=n).onEditorChangeSelection)===null||f===void 0||f.call(d,o,l,n.unprivilegedEditor))};var i=n.isControlled()?t.value:t.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(t){var n;if(Ft.default.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ft.default.Children.count(t.children)){var i=Ft.default.Children.only(t.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(t,n){var i=this,s;if(this.validateProps(t),!this.editor||this.state.generation!==n.generation)return!0;if("value"in t){var o=this.getEditorContents(),a=(s=t.value,s??"");this.isEqualValue(a,o)||this.setEditorContents(this.editor,a)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),Vk(this.cleanProps,this.dirtyProps).some(function(l){return!ei.default(t[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(t){var n=this;return this.dirtyProps.some(function(i){return!ei.default(t[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(t,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(t)){var s=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var a=this.regenerationSnapshot,s=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(s),Wh(function(){return i.setEditorSelection(h,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(t,n){var i=new Gh.default(t,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(t){return t&&t.ops},e.prototype.isEqualValue=function(t,n){return this.isDelta(t)&&this.isDelta(n)?ei.default(t.ops,n.ops):ei.default(t,n)},e.prototype.setEditorContents=function(t,n){var i=this;this.value=n;var s=this.getEditorSelection();typeof n=="string"?t.setContents(t.clipboard.convert(n)):t.setContents(n),Wh(function(){return i.setEditorSelection(t,s)})},e.prototype.setEditorSelection=function(t,n){if(this.selection=n,n){var i=t.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),t.setSelection(n)}},e.prototype.setEditorTabIndex=function(t,n){var i,s;!((s=(i=t)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(t.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(t,n){n?t.disable():t.enable()},e.prototype.makeUnprivilegedEditor=function(t){var n=t;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var t=$k.default.findDOMNode(this.editingArea);if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t},e.prototype.renderEditingArea=function(){var t=this,n=this.props,i=n.children,s=n.preserveWhitespace,o=this.state.generation,a={key:o,ref:function(l){t.editingArea=l}};return Ft.default.Children.count(i)?Ft.default.cloneElement(Ft.default.Children.only(i),a):s?Ft.default.createElement("pre",Us({},a)):Ft.default.createElement("div",Us({},a))},e.prototype.render=function(){var t;return Ft.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(t=this.props.className,t??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(t,n,i,s){var o,a;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(a=(o=this.props).onChange)===null||a===void 0||a.call(o,t,n,i,s))}},e.prototype.onEditorChangeSelection=function(t,n,i){var s,o,a,l,h,c;if(this.editor){var d=this.getEditorSelection(),f=!d&&t,p=d&&!t;ei.default(t,d)||(this.selection=t,(o=(s=this.props).onChangeSelection)===null||o===void 0||o.call(s,t,n,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,t,n,i):p&&((c=(h=this.props).onBlur)===null||c===void 0||c.call(h,d,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Gh.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Ft.default.Component);function Wh(r){Promise.resolve().then(r)}var Fk=qk;const Uk=zg(Fk),Bk=100,zk=800,Hk=200,Kk=({value:r,onChange:e,placeholder:t="Enter content here...",style:n={},className:i="mt-1"})=>{const s=re.useRef(null),[o,a]=re.useState(Hk);re.useEffect(()=>{var y,g;const c=(y=s.current)==null?void 0:y.getEditor(),d=(g=c==null?void 0:c.getModule("toolbar"))==null?void 0:g.container;if(!d)return;let f=0;const p=m=>{m.target.closest(".ql-picker")&&(f=window.scrollY)},v=m=>{m.target.closest(".ql-picker")&&setTimeout(()=>{window.scrollY!==f&&window.scrollTo(window.scrollX,f)},0)};return d.addEventListener("mousedown",p),d.addEventListener("mouseup",v),()=>{d.removeEventListener("mousedown",p),d.removeEventListener("mouseup",v)}},[]);const l=re.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{align:[]}],[{color:[]},{background:[]}],["link","image","video"],["clean"]],handlers:{image:function(){var I;const c=(I=s.current)==null?void 0:I.getEditor();if(!c){console.error("Quill editor instance not found.");return}const d=c.getSelection(!0);if(!d)return;const f=c.theme.tooltip,p=f.save,v=f.action;f.edit();const y=f.textbox;if(!y){console.error("Tooltip input element not found."),f.hide();return}y.value="",y.setAttribute("placeholder","Enter image URL"),y.setAttribute("data-mode","image");const g=()=>{var P;const _=y.value;_&&c.insertEmbed(d.index,"image",_,"user"),f.hide(),f.save=p,f.action=v,y.removeEventListener("keydown",m),(P=f.root.querySelector("a.ql-action"))==null||P.removeEventListener("click",g)},m=_=>{var P;_.key==="Enter"?(_.preventDefault(),g()):_.key==="Escape"&&(_.preventDefault(),f.hide(),f.save=p,f.action=v,y.removeEventListener("keydown",m),(P=f.root.querySelector("a.ql-action"))==null||P.removeEventListener("click",g))};f.save=g,y.removeEventListener("keydown",m),y.addEventListener("keydown",m);const b=f.root.querySelector("a.ql-action");b?(b.removeEventListener("click",g),b.addEventListener("click",g)):console.warn("Tooltip save button (a.ql-action) not found."),y.focus()}}}}),[]),h=re.useMemo(()=>["header","font","size","bold","italic","underline","strike","blockquote","code-block","list","bullet","script","indent","direction","align","color","background","link","image","video"],[]);return R.jsxs("div",{className:`quill-editor-container ${i}`,children:[R.jsx("div",{className:"quill-editor-wrapper border border-gray-300 rounded-md overflow-hidden",style:{...n,height:`${o}px`,display:"flex",flexDirection:"column"},children:R.jsx(Uk,{theme:"snow",value:r,onChange:e,ref:s,modules:l,formats:h,className:"bg-white flex-grow",placeholder:t,style:{height:"calc(100% - 42px)"}})}),R.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-gray-600",children:[R.jsx(hy,{size:16}),R.jsx("input",{type:"range",min:Bk,max:zk,value:o,onChange:c=>a(Number(c.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700","aria-label":"Adjust editor height"}),R.jsx(oy,{size:16}),R.jsxs("span",{className:"text-xs w-12 text-right",children:[o,"px"]})]})]})},Gk=()=>{const[r,e]=re.useState([]),[t,n]=re.useState(!1),[i,s]=re.useState(null),[o,a]=re.useState(null),[l,h]=re.useState(""),[c,d]=re.useState(""),[f,p]=re.useState(""),[v,y]=re.useState(0),g=re.useMemo(()=>pe?mr(pe,"pages"):null,[]),m=re.useCallback(async()=>{if(!pe||!g){s("Firestore database is not initialized."),n(!1);return}n(!0),s(null);try{console.log("Fetching pages from Firestore...");const S=oo(g,ao("order","asc")),x=(await Ci(S)).docs.map(A=>({id:A.id,...A.data()}));e(x)}catch(S){console.error("Error fetching pages:",S),s('Failed to load pages. Ensure the "pages" collection exists and has an "order" field.')}finally{n(!1)}},[g]);re.useEffect(()=>{m()},[m]);const b=async S=>{if(S.preventDefault(),!l||!c||!f){s("Title, Slug, and Content are required.");return}if(n(!0),s(null),!pe){s("Firestore database is not initialized. Cannot save page."),n(!1);return}const T=r.length>0?Math.max(...r.map(O=>O.order))+1:0,A={title:l,slug:c,content:f,order:o?v:T};try{if(o){console.log("Updating page in Firestore:",o,A);const O=Xe(pe,"pages",o);await Ls(O,A),console.log("Page updated successfully.")}else{if(console.log("Adding new page to Firestore:",A),!g)throw new Error("Collection reference not available");await Fl(g,A),console.log("Page added successfully.")}P(),m()}catch(O){console.error("Error saving page:",O),s("Failed to save page. Check console for details.")}finally{n(!1)}},I=async S=>{if(!S){console.error("Cannot delete page without ID."),s("Cannot delete page: Invalid ID.");return}if(window.confirm(`Are you sure you want to delete the page with ID: ${S}?`)){if(n(!0),s(null),!pe){s("Firestore database is not initialized. Cannot delete page."),n(!1);return}try{console.log("Deleting page from Firestore:",S);const T=Xe(pe,"pages",S);await ql(T),e(r.filter(x=>x.id!==S)),console.log("Page deleted successfully."),o===S&&P()}catch(T){console.error("Error deleting page:",T),s("Failed to delete page. Check console for details.")}finally{n(!1)}}},_=S=>{if(!S.id){console.error("Cannot edit page without ID."),s("Cannot edit page: Invalid ID.");return}a(S.id),h(S.title),d(S.slug),p(S.content),y(S.order)},P=()=>{a(null),h(""),d(""),p(""),y(0)},C=async(S,T)=>{const x=T==="up"?S-1:S+1;if(x<0||x>=r.length||!pe||!g)return;s(null),n(!0);const A=r[S],O=r[x],D=Da(pe),q=Xe(g,A.id),H=Xe(g,O.id);D.update(q,{order:O.order}),D.update(H,{order:A.order});try{await D.commit(),m()}catch(K){console.error(`Error moving page ${T}:`,K),s("Failed to reorder page. Please try again."),n(!1)}},w=S=>C(S,"up"),E=S=>C(S,"down");return R.jsxs("div",{className:"space-y-6",children:[R.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manage Pages"}),i&&R.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded",children:i}),R.jsxs("form",{onSubmit:b,className:"p-4 border rounded shadow-sm bg-white space-y-4",children:[R.jsx("h3",{className:"text-lg font-medium",children:o?"Edit Page":"Add New Page"}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"pageTitle",className:"block text-sm font-medium text-gray-700",children:"Title"}),R.jsx("input",{type:"text",id:"pageTitle",value:l,onChange:S=>h(S.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"pageSlug",className:"block text-sm font-medium text-gray-700",children:"Slug (URL Path, e.g., 'about-us')"}),R.jsx("input",{type:"text",id:"pageSlug",value:c,onChange:S=>d(S.target.value.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",pattern:"^[a-z0-9-]+$",title:"Slug can only contain lowercase letters, numbers, and hyphens."})]}),R.jsxs("div",{className:"relative quill-editor-wrapper",children:[R.jsx("label",{htmlFor:"pageContent",className:"block text-sm font-medium text-gray-700",children:"Content"}),R.jsx(Kk,{value:f,onChange:p,placeholder:"Enter page content here..."})]}),R.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o&&R.jsx("button",{type:"button",onClick:P,disabled:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Cancel Edit"}),R.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:t?"Saving...":o?"Update Page":"Add Page"})]})]}),R.jsxs("div",{className:"mt-6 border rounded shadow-sm bg-white",children:[R.jsx("h3",{className:"text-lg font-medium p-4 border-b",children:"Existing Pages"}),t&&!r.length?R.jsx("p",{className:"p-4 text-gray-500",children:"Loading pages..."}):r.length===0?R.jsx("p",{className:"p-4 text-gray-500",children:"No pages found."}):R.jsx("ul",{className:"divide-y divide-gray-200",children:r.map((S,T)=>R.jsxs("li",{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("span",{className:"text-xs font-mono text-gray-400 w-6 text-right",children:S.order}),R.jsxs("div",{children:[R.jsx("p",{className:"font-medium text-gray-900",children:S.title}),R.jsxs("p",{className:"text-sm text-gray-500",children:["/",S.slug]})]})]}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:()=>w(T),disabled:t||T===0,className:`p-1 rounded ${t||T===0?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Up",children:R.jsx(ga,{size:18})}),R.jsx("button",{onClick:()=>E(T),disabled:t||T===r.length-1,className:`p-1 rounded ${t||T===r.length-1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Down",children:R.jsx(pa,{size:18})}),R.jsx("button",{onClick:()=>_(S),disabled:t,className:"p-1 rounded text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 disabled:opacity-50",title:"Edit",children:R.jsx(ma,{size:18})}),S.id&&R.jsx("button",{onClick:()=>I(S.id),disabled:t,className:"p-1 rounded text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50",title:"Delete",children:R.jsx(Es,{size:18})})]})]},S.id))})]})]})},Wk=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sn(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class tu extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Qk extends tu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yk extends tu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Jk extends tu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ha;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Ha||(Ha={}));var Xk=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};class Zk{constructor(e,{headers:t={},customFetch:n,region:i=Ha.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Wk(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Xk(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(a["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(a["Content-Type"]="application/json",h=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:h}).catch(v=>{throw new Qk(v)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new Yk(c);if(!c.ok)throw new Jk(c);let f=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield c.json():f==="application/octet-stream"?p=yield c.blob():f==="text/event-stream"?p=c:f==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var At={},nu={},vo={},Li={},_o={},bo={},eS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},br=eS();const tS=br.fetch,Wp=br.fetch.bind(br),Qp=br.Headers,nS=br.Request,rS=br.Response,Dr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Qp,Request:nS,Response:rS,default:Wp,fetch:tS},Symbol.toStringTag,{value:"Module"})),iS=Hg(Dr);var wo={};Object.defineProperty(wo,"__esModule",{value:!0});let sS=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};wo.default=sS;var Yp=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bo,"__esModule",{value:!0});const oS=Yp(iS),aS=Yp(wo);let lS=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=oS.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let h=null,c=null,d=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=m:c=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(h={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const y=await s.text();try{h=JSON.parse(y),Array.isArray(h)&&s.status===404&&(c=[],h=null,f=200,p="OK")}catch{s.status===404&&y===""?(f=204,p="No Content"):h={message:y}}if(h&&this.isMaybeSingle&&(!((l=h==null?void 0:h.details)===null||l===void 0)&&l.includes("0 rows"))&&(h=null,f=200,p="OK"),h&&this.shouldThrowOnError)throw new aS.default(h)}return{error:h,data:c,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};bo.default=lS;var uS=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_o,"__esModule",{value:!0});const cS=uS(bo);let hS=class extends cS.default{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${h}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_o.default=hS;var fS=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});const dS=fS(_o);let pS=class extends dS.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Li.default=pS;var gS=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vo,"__esModule",{value:!0});const ti=gS(Li);let mS=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=t,this.schema=n,this.fetch=i}select(e,{head:t=!1,count:n}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((h,c)=>h.concat(Object.keys(c)),[]);if(l.length>0){const h=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",h.join(","))}}return new ti.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new ti.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ti.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vo.default=mS;var Eo={},To={};Object.defineProperty(To,"__esModule",{value:!0});To.version=void 0;To.version="0.0.0-automated";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.DEFAULT_HEADERS=void 0;const yS=To;Eo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yS.version}`};var Jp=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nu,"__esModule",{value:!0});const vS=Jp(vo),_S=Jp(Li),bS=Eo;let wS=class Xp{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},bS.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new vS.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);const h=Object.assign({},this.headers);return s&&(h.Prefer=`count=${s}`),new _S.default({method:o,url:a,headers:h,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};nu.default=wS;var Mr=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const Zp=Mr(nu);At.PostgrestClient=Zp.default;const eg=Mr(vo);At.PostgrestQueryBuilder=eg.default;const tg=Mr(Li);At.PostgrestFilterBuilder=tg.default;const ng=Mr(_o);At.PostgrestTransformBuilder=ng.default;const rg=Mr(bo);At.PostgrestBuilder=rg.default;const ig=Mr(wo);At.PostgrestError=ig.default;var ES=At.default={PostgrestClient:Zp.default,PostgrestQueryBuilder:eg.default,PostgrestFilterBuilder:tg.default,PostgrestTransformBuilder:ng.default,PostgrestBuilder:rg.default,PostgrestError:ig.default};const{PostgrestClient:TS,PostgrestQueryBuilder:CO,PostgrestFilterBuilder:jO,PostgrestTransformBuilder:LO,PostgrestBuilder:DO,PostgrestError:MO}=ES,xS="2.11.2",AS={"X-Client-Info":`realtime-js/${xS}`},kS="1.0.0",sg=1e4,SS=1e3;var ur;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ur||(ur={}));var It;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(It||(It={}));var jt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(jt||(jt={}));var Ka;(function(r){r.websocket="websocket"})(Ka||(Ka={}));var Vn;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Vn||(Vn={}));class IS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const h=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:h}}}class og{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Fe||(Fe={}));const Qh=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=OS(o,r,e,i),s),{})},OS=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?ag(s,o):Ga(o)},ag=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return CS(e,t)}switch(r){case Fe.bool:return PS(e);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return NS(e);case Fe.json:case Fe.jsonb:return RS(e);case Fe.timestamp:return jS(e);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return Ga(e);default:return Ga(e)}},Ga=r=>r,PS=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},NS=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},RS=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},CS=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>ag(e,a))}return r},jS=r=>typeof r=="string"?r.replace(" ","T"):r,lg=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class aa{constructor(e,t,n={},i=sg){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yh;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Yh||(Yh={}));class hi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hi.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=hi.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=hi.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(h,c)=>{o[h]||(l[h]=c)}),this.map(o,(h,c)=>{const d=s[h];if(d){const f=c.map(g=>g.presence_ref),p=d.map(g=>g.presence_ref),v=c.filter(g=>p.indexOf(g.presence_ref)<0),y=d.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(a[h]=v),y.length>0&&(l[h]=y)}else a[h]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var h;const c=(h=e[a])!==null&&h!==void 0?h:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(p=>p.presence_ref),f=c.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let h=e[a];if(!h)return;const c=l.map(d=>d.presence_ref);h=h.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=h,i(a,h,l),h.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jh;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Jh||(Jh={}));var Xh;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Xh||(Xh={}));var Xt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class ru{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=It.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new aa(this,jt.join,this.params,this.timeout),this.rejoinTimer=new og(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=It.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=It.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new hi(this),this.broadcastEndpointURL=lg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(Xt.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Xt.CLOSED));const l={},h={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){e==null||e(Xt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,v=[];for(let y=0;y<p;y++){const g=f[y],{filter:{event:m,schema:b,table:I,filter:_}}=g,P=c&&c[y];if(P&&P.event===m&&P.schema===b&&P.table===I&&P.filter===_)v.push(Object.assign(Object.assign({},g),{id:P.id}));else{this.unsubscribe(),e==null||e(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Xt.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=It.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new aa(this,jt.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new aa(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:h,join:c}=jt;if(n&&[a,l,h,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var v,y,g;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(y=p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var v,y,g,m,b,I;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,P=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((y=t.ids)===null||y===void 0?void 0:y.includes(_))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(b=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:g,commit_timestamp:m,type:b,errors:I}=v;f=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:m,eventType:b,new:{},old:{},errors:I}),this._getPayloadRecords(v))}p.callback(f,n)})}_isClosed(){return this.state===It.closed}_isJoined(){return this.state===It.joined}_isJoining(){return this.state===It.joining}_isLeaving(){return this.state===It.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&ru.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jt.close,{},e)}_onError(e){this._on(jt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=It.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Qh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Qh(e.columns,e.old_record)),t}}const LS=()=>{},DS=typeof WebSocket<"u",MS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VS{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=AS,this.params={},this.timeout=sg,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=LS,this.conn=null,this.sendBuffer=[],this.serializer=new IS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>sn(async()=>{const{default:l}=await Promise.resolve().then(()=>Dr);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ka.websocket}`,this.httpEndpoint=lg(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new og(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(DS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new $S(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),sn(async()=>{const{default:e}=await import("./browser-CKC9vik6.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1]),import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kS}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ur.connecting:return Vn.Connecting;case ur.open:return Vn.Open;case ur.closing:return Vn.Closing;default:return Vn.Closed}}isConnected(){return this.connectionState()===Vn.Open}channel(e,t={config:{}}){const n=new ru(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(jt.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(SS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(jt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([MS],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class $S{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ur.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class iu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ot(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class qS extends iu{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Wa extends iu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var FS=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};const ug=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sn(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},US=()=>FS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sn(()=>Promise.resolve().then(()=>Dr),void 0,import.meta.url)).Response:Response}),Qa=r=>{if(Array.isArray(r))return r.map(t=>Qa(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Qa(n)}),e};var Hn=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};const la=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),BS=(r,e,t)=>Hn(void 0,void 0,void 0,function*(){const n=yield US();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(i=>{e(new qS(la(i),r.status||500))}).catch(i=>{e(new Wa(la(i),i))}):e(new Wa(la(r),r))}),zS=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function Di(r,e,t,n,i,s){return Hn(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,zS(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>BS(l,a,n))})})}function Bs(r,e,t,n){return Hn(this,void 0,void 0,function*(){return Di(r,"GET",e,t,n)})}function pn(r,e,t,n,i){return Hn(this,void 0,void 0,function*(){return Di(r,"POST",e,n,i,t)})}function HS(r,e,t,n,i){return Hn(this,void 0,void 0,function*(){return Di(r,"PUT",e,n,i,t)})}function KS(r,e,t,n){return Hn(this,void 0,void 0,function*(){return Di(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function cg(r,e,t,n,i){return Hn(this,void 0,void 0,function*(){return Di(r,"DELETE",e,n,i,t)})}var Tt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};const GS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WS{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ug(i)}uploadOrUpdate(e,t,n,i){return Tt(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Zh),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const h=this._removeEmptyFolders(t),c=this._getFinalPath(h),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:h,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return Tt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const h=Object.assign({upsert:Zh.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",h.cacheControl)):(l=n,c["cache-control"]=`max-age=${h.cacheControl}`,c["content-type"]=h.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(ot(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Tt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield pn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new iu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}update(e,t,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Tt(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ot(i))return{data:null,error:i};throw i}})}copy(e,t,n){return Tt(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ot(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return Tt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield pn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ot(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return Tt(this,void 0,void 0,function*(){try{const i=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ot(i))return{data:null,error:i};throw i}})}download(e,t){return Tt(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Bs(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ot(a))return{data:null,error:a};throw a}})}info(e){return Tt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Bs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Qa(n),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}exists(e){return Tt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield KS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ot(n)&&n instanceof Wa){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${h}`)}}}remove(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield cg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}})}list(e,t,n){return Tt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},GS),t),{prefix:e||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ot(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const QS="2.7.1",YS={"X-Client-Info":`storage-js/${QS}`};var Zn=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};class JS{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},YS),t),this.fetch=ug(n)}listBuckets(){return Zn(this,void 0,void 0,function*(){try{return{data:yield Bs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ot(e))return{data:null,error:e};throw e}})}getBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield Bs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Zn(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Zn(this,void 0,void 0,function*(){try{return{data:yield HS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield cg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}})}}class XS extends JS{constructor(e,t={},n){super(e,t,n)}from(e){return new WS(this.url,this.headers,e,this.fetch)}}const ZS="2.49.4";let oi="";typeof Deno<"u"?oi="deno":typeof document<"u"?oi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oi="react-native":oi="node";const eI={"X-Client-Info":`supabase-js-${oi}/${ZS}`},tI={headers:eI},nI={schema:"public"},rI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iI={};var sI=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};const oI=r=>{let e;return r?e=r:typeof fetch>"u"?e=Wp:e=fetch,(...t)=>e(...t)},aI=()=>typeof Headers>"u"?Qp:Headers,lI=(r,e,t)=>{const n=oI(t),i=aI();return(s,o)=>sI(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let h=new i(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",r),h.has("Authorization")||h.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:h}))})};var uI=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};function cI(r){return r.replace(/\/$/,"")}function hI(r,e){const{db:t,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:l,global:h}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},h),s),accessToken:()=>uI(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const hg="2.69.1",or=30*1e3,Ya=3,ua=Ya*or,fI="http://localhost:9999",dI="supabase.auth.token",pI={"X-Client-Info":`gotrue-js/${hg}`},Ja="X-Supabase-Api-Version",fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mI=6e5;class su extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ae(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class yI extends su{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function vI(r){return Ae(r)&&r.name==="AuthApiError"}class dg extends su{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Pn extends su{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class fn extends Pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _I(r){return Ae(r)&&r.name==="AuthSessionMissingError"}class ca extends Pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hs extends Pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fs extends Pn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bI(r){return Ae(r)&&r.name==="AuthImplicitGrantRedirectError"}class ef extends Pn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xa extends Pn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ha(r){return Ae(r)&&r.name==="AuthRetryableFetchError"}class tf extends Pn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class fi extends Pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rf=` 	
\r=`.split(""),wI=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<rf.length;e+=1)r[rf[e].charCodeAt(0)]=-2;for(let e=0;e<nf.length;e+=1)r[nf[e].charCodeAt(0)]=e;return r})();function pg(r,e,t){const n=wI[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function sf(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{xI(o,n,t)};for(let o=0;o<r.length;o+=1)pg(r.charCodeAt(o),i,s);return e.join("")}function EI(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function TI(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}EI(n,e)}}function xI(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if(!(r>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function AI(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)pg(r.charCodeAt(i),t,n);return new Uint8Array(e)}function kI(r){const e=[];return TI(r,t=>e.push(t)),new Uint8Array(e)}function SI(r){return Math.round(Date.now()/1e3)+r}function II(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ut=()=>typeof window<"u"&&typeof document<"u",Ln={tested:!1,writable:!1},di=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ln.tested)return Ln.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ln.tested=!0,Ln.writable=!0}catch{Ln.tested=!0,Ln.writable=!1}return Ln.writable};function OI(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const gg=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sn(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},PI=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",mg=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ds=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ps=async(r,e)=>{await r.removeItem(e)};class xo{constructor(){this.promise=new xo.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}xo.promiseConstructor=Promise;function fa(r){const e=r.split(".");if(e.length!==3)throw new fi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!gI.test(e[n]))throw new fi("JWT not in base64url format");return{header:JSON.parse(sf(e[0])),payload:JSON.parse(sf(e[1])),signature:AI(e[2]),raw:{header:e[0],payload:e[1]}}}async function NI(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function RI(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function CI(r){return("0"+r.toString(16)).substr(-2)}function jI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,CI).join("")}async function LI(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function DI(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await LI(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function er(r,e,t=!1){const n=jI();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await mg(r,`${e}-code-verifier`,i);const s=await DI(n);return[s,n===s?"plain":"s256"]}const MI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VI(r){const e=r.headers.get(Ja);if(!e||!e.match(MI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $I(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function qI(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var FI=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Mn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),UI=[502,503,504];async function of(r){var e;if(!PI(r))throw new Xa(Mn(r),0);if(UI.includes(r.status))throw new Xa(Mn(r),r.status);let t;try{t=await r.json()}catch(s){throw new dg(Mn(s),s)}let n;const i=VI(r);if(i&&i.getTime()>=fg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new tf(Mn(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new fn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new tf(Mn(t),r.status,t.weak_password.reasons);throw new yI(Mn(t),r.status||500,n)}const BI=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function Re(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Ja]||(s[Ja]=fg["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await zI(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function zI(r,e,t,n,i,s){const o=BI(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new Xa(Mn(l),0)}if(a.ok||await of(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await of(l)}}function dn(r){var e;let t=null;WI(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=SI(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function af(r){const e=dn(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function gn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function HI(r){return{data:r,error:null}}function KI(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=FI(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function GI(r){return r}function WI(r){return r.access_token&&r.refresh_token&&r.expires_in}var QI=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class YI{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=gg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gn})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=QI(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:KI,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ae(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gn})}catch(t){if(Ae(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const h={nextPage:null,lastPage:0,total:0},c=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:GI});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);h[`${g}Page`]=y}),h.total=parseInt(f)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(Ae(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gn})}catch(t){if(Ae(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gn})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gn})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(Ae(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ae(t))return{data:null,error:t};throw t}}}const JI={getItem:r=>di()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{di()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{di()&&globalThis.localStorage.removeItem(r)}};function lf(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function XI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tr={debug:!!(globalThis&&di()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZI extends yg{}async function eO(r,e,t){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ZI(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(tr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}XI();const tO={url:fI,storageKey:dI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uf(r,e,t){return await t()}class Ti{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ti.nextInstanceID,Ti.nextInstanceID+=1,this.instanceID>0&&Ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},tO),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new YI({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gg(i.fetch),this.lock=i.lock||uf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ut()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=eO:this.lock=uf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:di()?this.storage=JI:(this.memoryStorage={},this.storage=lf(this.memoryStorage)):(this.memoryStorage={},this.storage=lf(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=OI(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ut()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),bI(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ae(t)?{error:t}:{error:new dg("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:dn}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(s){if(Ae(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:c,password:d,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await er(this.storage,this.storageKey)),s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:dn})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:dn})}else throw new hs("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(s){if(Ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:af})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:af})}else throw new hs("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ca}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(Ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await ds(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:dn});if(await ps(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ca}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Ae(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:dn}),{data:l,error:h}=a;return h?{data:{user:null,session:null},error:h}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ca}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:h})}catch(t){if(Ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let h=null,c=null;this.flowType==="pkce"&&([h,c]=await er(this.storage,this.storageKey));const{error:d}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:h,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:h,error:c}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:c}}throw new hs("You must provide either an email or phone number.")}catch(a){if(Ae(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:dn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,h=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:h,session:l},error:null}}catch(i){if(Ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await er(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:HI})}catch(s){if(Ae(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new fn;const{error:i}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new hs("You must provide either an email or phone number and a type")}catch(t){if(Ae(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ds(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ua:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,h,c)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,h,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gn}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:gn})})}catch(t){if(Ae(t))return _I(t)&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new fn;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await er(this.storage,this.storageKey));const{data:h,error:c}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:gn});if(c)throw c;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fn;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=fa(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Ae(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new fn;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ae(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ut())throw new fs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ef("No code detected.");const{data:b,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:h}=e;if(!s||!a||!o||!h)throw new fs("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const p=f-c;p*1e3<=or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const v=f-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:y,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:h,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ds(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(vI(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=II(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await er(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Ae(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ae(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,h,c;const{data:d,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(h=d.session)===null||h===void 0?void 0:h.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Ut()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ae(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Ae(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await RI(async i=>(i>0&&await NI(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dn})),(i,s)=>{const o=200*Math.pow(2,i);return s&&ha(s)&&Date.now()+o-n<or})}catch(n){if(this._debug(t,"error",n),Ae(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ut()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await ds(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ua;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${ua}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),ha(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new xo;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new fn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ae(s)){const o={session:null,error:s};return ha(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mg(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ps(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),or);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${or}ms, refresh threshold is ${Ya} ticks`),i<=Ya&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await er(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ae(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:h}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Ae(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Ae(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ae(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=fa(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+mI>Date.now()))return n;const{data:i,error:s}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new fi("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new fi("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=fa(n);if($I(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const h=qI(i.alg),c=await this.fetchJwk(i.kid,t),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,kI(`${a}.${l}`)))throw new fi("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}}Ti.nextInstanceID=0;const nO=Ti;class rO extends nO{constructor(e){super(e)}}var iO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(n.next(c))}catch(d){o(d)}}function l(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?s(c.value):i(c.value).then(a,l)}h((n=n.apply(r,e||[])).next())})};class sO{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=cI(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:nI,realtime:iI,auth:Object.assign(Object.assign({},rI),{storageKey:l}),global:tI},c=hI(n??{},h);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=lI(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new TS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Zk(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new XS(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return iO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},h,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rO({url:this.authUrl,headers:Object.assign(Object.assign({},d),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new VS(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oO=(r,e,t)=>new sO(r,e,t),aO="https://dzmecnikrhsdedcagvzs.supabase.co",lO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bWVjbmlrcmhzZGVkY2FndnpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NTQ2NzcsImV4cCI6MjA1OTEzMDY3N30.JMMQMbVTS7QHDPkFInynQ-MszbrH_mEFl4uEDP9E5pk";let vg=null;try{vg=oO(aO,lO),console.log("Supabase client initialized.")}catch(r){console.error("Error initializing Supabase client:",r)}const da=vg,cf="img",uO=({onUploadSuccess:r})=>{const[e,t]=re.useState("idle"),[n,i]=re.useState(null),[s,o]=re.useState(null),[a,l]=re.useState(null),[h,c]=re.useState(null),[d,f]=re.useState(!1),[p,v]=re.useState("Copy Link"),y=re.useRef(null),g=A=>{A&&A.type.startsWith("image/")?(i(A),c(null),t("idle"),l(null),o(URL.createObjectURL(A)),C(A)):(i(null),o(null),A&&c("Please select an image file."))},m=A=>{var O;g(((O=A.target.files)==null?void 0:O[0])??null),A.target&&(A.target.value="")},b=A=>{var O;A.preventDefault(),A.stopPropagation(),f(!1),g(((O=A.dataTransfer.files)==null?void 0:O[0])??null)},I=A=>{A.preventDefault(),A.stopPropagation(),f(!0)},_=A=>{A.preventDefault(),A.stopPropagation(),A.currentTarget.contains(A.relatedTarget)||f(!1)},P=()=>{var A;(A=y.current)==null||A.click()},C=async A=>{if(!da){c("Supabase client is not initialized. Check configuration."),t("error");return}if(!A){c("No file selected for upload."),t("error");return}t("uploading"),c(null),v("Copy Link");const D=`public/${Date.now()}_${A.name}`;try{const{data:q,error:H}=await da.storage.from(cf).upload(D,A,{cacheControl:"3600",upsert:!1});if(H)throw console.error("Supabase upload error:",H),H;console.log("Supabase upload successful:",q);const{data:K}=da.storage.from(cf).getPublicUrl(D);if(!K||!K.publicUrl)throw console.error("Could not get public URL for:",D),new Error("Failed to retrieve public URL after upload.");const te=K.publicUrl;console.log("File available at:",te),l(te),t("success"),r&&r(te)}catch(q){console.error("Upload process failed:",q),c(`Upload failed: ${q instanceof Error?q.message:"Unknown error"}`),t("error")}},w=async()=>{if(a)try{await navigator.clipboard.writeText(a),v("Copied!"),setTimeout(()=>v("Copy Link"),2e3)}catch(A){console.error("Failed to copy:",A),c("Failed to copy link to clipboard.")}},E=()=>R.jsxs("div",{className:`w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center transition-all duration-300 ${d?"border-blue-500 border-2":"border-gray-200 border"}`,onDrop:b,onDragOver:I,onDragLeave:_,children:[R.jsx("h2",{className:"text-lg font-medium text-gray-700 mb-2",children:"Upload your image"}),R.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"File should be Jpeg, Png,..."}),R.jsxs("div",{className:`bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-10 mb-6 transition-colors duration-300 ${d?"border-blue-400 bg-blue-50":""}`,children:[R.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:R.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),R.jsx("p",{className:"text-sm text-gray-500",children:"Drag & Drop your image here"})]}),R.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Or"}),R.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300",children:"Choose a file"}),R.jsx("input",{ref:y,type:"file",accept:"image/jpeg",onChange:m,className:"hidden"}),h&&R.jsx("p",{className:"text-red-500 text-sm mt-4",children:h})]}),S=()=>R.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center",children:[R.jsxs("svg",{className:"animate-spin mx-auto h-10 w-10 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[R.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),R.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),R.jsx("h2",{className:"text-lg font-medium text-gray-700",children:"Uploading..."})]}),T=()=>R.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center",children:[R.jsx("svg",{className:"mx-auto h-10 w-10 text-green-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),R.jsx("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Uploaded Successfully!"}),s&&R.jsx("div",{className:"mb-6 rounded-xl overflow-hidden border border-gray-200",children:R.jsx("img",{src:s,alt:"Uploaded preview",className:"max-w-full max-h-64 object-contain mx-auto"})}),R.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg p-2 bg-gray-50",children:[R.jsx("input",{type:"text",value:a??"",readOnly:!0,className:"flex-grow text-xs text-gray-700 bg-transparent border-none focus:ring-0 p-1 truncate","aria-label":"Uploaded image link"}),R.jsx("button",{onClick:w,className:"ml-2 px-4 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors duration-300 flex-shrink-0",children:p})]}),h&&R.jsx("p",{className:"text-red-500 text-sm mt-4",children:h})]}),x=()=>R.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-center",children:[R.jsx("svg",{className:"mx-auto h-10 w-10 text-red-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),R.jsx("h2",{className:"text-lg font-medium text-red-700 mb-4",children:"Upload Failed"}),R.jsx("p",{className:"text-sm text-gray-600 mb-6",children:h||"An unknown error occurred."}),R.jsx("button",{onClick:()=>{t("idle"),c(null),i(null),o(null)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-300",children:"Try Again"})]});return R.jsxs("div",{className:"flex items-center justify-center min-h-[300px] bg-gray-100 p-4",children:[e==="idle"&&E(),e==="uploading"&&S(),e==="success"&&T(),e==="error"&&x()]})},cO=()=>{const r=df(),[e,t]=re.useState(!1),[n,i]=re.useState(()=>{const T=localStorage.getItem("desktopSidebarCollapsed");return T?JSON.parse(T):!1}),[s,o]=re.useState(!1),[a,l]=re.useState(window.innerWidth<768);re.useEffect(()=>{const T=()=>{const x=window.innerWidth<768;l(x),x||t(!1)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),re.useEffect(()=>{a||localStorage.setItem("desktopSidebarCollapsed",JSON.stringify(n))},[n,a]);const{translations:h,isLoading:c,saveStatus:d,handleInputChange:f,handleAddNewProject:p,handleAddNewService:v,saveChanges:y,handleDeleteItem:g}=Z_(),[m,b]=re.useState(null),[I,_]=re.useState(null),P={pageViews:"1,234",totalPages:"12",comments:"45",averageRating:"4.8"},C=async()=>{if(!Lt){console.error("Firebase auth instance is not available."),alert("Logout service unavailable. Please try again later.");return}try{await hm(Lt),r("/admin/login")}catch(T){console.error("Logout failed:",T),alert("Failed to log out. Please try again.")}},w=[{icon:R.jsx(Ym,{size:20}),label:"Dashboard",tab:"dashboard"},{icon:R.jsx(rc,{size:20}),label:"Pages",tab:"pages"},{icon:R.jsx(Fm,{size:20}),label:"Projects",tab:"projects"},{icon:R.jsx(Km,{size:20}),label:"Media",tab:"media"},{icon:R.jsx(bf,{size:20}),label:"Appearance",tab:"styleEditor"},{icon:R.jsx(Xm,{size:20}),label:"Social Links",tab:"socialLinks"},{icon:R.jsx(_y,{size:20}),label:"Settings",tab:"generalInfo"}],E=()=>R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-gray-700 font-semibold",children:"Page Views"}),R.jsx(Mm,{className:"text-blue-500",size:20})]}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.pageViews}),R.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Last 30 days"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-gray-700 font-semibold",children:"Total Pages"}),R.jsx(rc,{className:"text-green-500",size:20})]}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.totalPages}),R.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Published content"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-gray-700 font-semibold",children:"Comments"}),R.jsx(uy,{className:"text-purple-500",size:20})]}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.comments}),R.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Awaiting response"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-gray-700 font-semibold",children:"Average Rating"}),R.jsx(xy,{className:"text-yellow-500",size:20})]}),R.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.averageRating}),R.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Based on feedback"})]})]}),S=()=>{if(c)return R.jsx("div",{className:"flex items-center justify-center py-10",children:R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(!m||m==="dashboard")return E();if(m==="styleEditor")return R.jsx(ow,{});if(m==="socialLinks")return R.jsx(aw,{});if(m==="pages")return R.jsx(Gk,{});if(m==="media")return R.jsx(uO,{});if(J_(m)){const T=is(m);return R.jsxs(R.Fragment,{children:[R.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700 capitalize",children:T}),m==="projects"?R.jsx(e1,{data:h.en.projects,path:[m],handleChange:f,editingPath:I,setEditingPath:_,handleAddProject:p,handleDelete:g,renderFields:lr}):m==="services"?R.jsx(t1,{data:h.en.services,path:[m],handleChange:f,editingPath:I,setEditingPath:_,handleAddService:v,handleDelete:g,renderFields:lr}):m==="generalInfo"?R.jsx(lw,{translations:h,handleInputChange:f,editingPath:I,setEditingPath:_,getStaticSectionName:is}):lr(h.en[m],[m],f,I,_,void 0,g)]})}return R.jsxs("p",{className:"text-red-500",children:["Error: Invalid tab '",m,"' selected."]})};return R.jsxs("div",{className:"min-h-screen bg-gray-100",children:[R.jsx("nav",{className:"bg-white shadow-md fixed w-full z-10",children:R.jsxs("div",{className:"px-4 h-16 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsx("button",{onClick:()=>{a?t(!e):i(!n)},className:"text-gray-500 hover:text-gray-700 md:hidden",children:R.jsx(ic,{size:24})}),R.jsx("button",{onClick:()=>i(!n),className:"text-gray-500 hover:text-gray-700 hidden md:block",children:R.jsx(ic,{size:24})})]}),R.jsx("div",{className:"flex items-center space-x-4",children:R.jsxs("div",{className:"relative",children:[R.jsxs("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[R.jsx(Cy,{size:20}),R.jsx("span",{children:"Admin"}),R.jsx(Sm,{size:16})]}),s&&R.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 border border-gray-200",children:R.jsxs("button",{onClick:C,className:"w-full px-4 py-2 text-left text-red-600 hover:bg-gray-50 flex items-center space-x-2",children:[R.jsx(ny,{size:16}),R.jsx("span",{children:"Logout"})]})})]})})]})}),R.jsxs("div",{className:"flex pt-16",children:[a&&e&&R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:()=>t(!1)}),R.jsx("aside",{className:`fixed top-16 h-[calc(100vh-4rem)] bg-gray-800 text-white transition-transform duration-300 ease-in-out z-30 md:translate-x-0 md:transition-all md:duration-300
            ${a?e?"translate-x-0 w-64":"-translate-x-full w-64":n?"w-20":"w-64"}
          `,children:R.jsx("nav",{className:"p-4 overflow-y-auto h-full",children:w.map(T=>R.jsxs("button",{onClick:()=>{b(T.tab),a&&t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${m===T.tab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[T.icon,R.jsx("span",{className:`${a&&e||!a&&!n?"inline":"hidden"}`,children:T.label})]},T.tab))})}),R.jsx("main",{className:`flex-1 transition-all duration-300 ${a?"ml-0":n?"md:ml-20":"md:ml-64"}`,children:R.jsxs("div",{className:"p-4 md:p-8",children:[R.jsxs("div",{className:"mb-4 md:mb-6",children:[R.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:m?is(m):"Dashboard"}),R.jsxs("p",{className:"text-sm text-gray-500",children:["Home / ",m?is(m):"Dashboard"]})]}),R.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:S()}),m&&m!=="styleEditor"&&m!=="socialLinks"&&m!=="pages"&&R.jsxs("div",{className:"mt-6 flex justify-end items-center gap-4",children:[d&&R.jsx("span",{className:"text-green-600 text-sm",children:d}),R.jsx("button",{onClick:()=>y(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",disabled:c,children:"Save Changes"})]})]})})]})]})},hO=(r=Dt)=>{const e=r.en,t=e==null?void 0:e.projects,n=t?Object.entries(t).filter(([i,s])=>i!=="title"&&typeof s=="object"&&s!==null).map(([i,s])=>({title:(s==null?void 0:s.title)??`Project ${i}`,description:(s==null?void 0:s.description)??"Description missing.",tags:(s==null?void 0:s.tags)??[],link:(s==null?void 0:s.link)??""})):[];return{title:(t==null?void 0:t.title)??"Featured Projects",projects:n}},fO=({logoUrl:r})=>R.jsx("img",{src:r||"https://raw.githubusercontent.com/tiger3homs/home/refs/heads/main/public/logo.png",alt:"Logo",className:"mx-auto mb-6 w-24 h-24",style:{pointerEvents:"none",userSelect:"none"}}),dO=({page:r})=>{const e=Kg();return r?R.jsx("div",{className:"min-h-screen text-white",style:{background:"linear-gradient(to bottom right, var(--background-from-color, #111827), var(--background-to-color, #1F2937))"},children:R.jsxs("div",{className:"container mx-auto px-4 py-16",children:[R.jsx("h1",{className:"text-4xl font-bold mb-6",style:{color:"var(--title-color)"},children:r.title}),R.jsxs("div",{className:"prose prose-invert max-w-none text-text",children:[" ",R.jsx("div",{className:"ql-snow",children:R.jsx("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:r.content}})})]}),R.jsx("div",{className:"mt-12 text-center",children:R.jsx(ws,{to:"/",className:"text-blue-400 hover:text-blue-300 underline",children:" Back to Home"})})]})}):R.jsxs("div",{className:"container mx-auto px-4 py-16 text-center text-white min-h-screen flex flex-col items-center justify-center",children:[R.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Page Not Found"}),R.jsxs("p",{className:"text-xl",children:["The page you requested (",e.pathname,") could not be found."]}),R.jsx(ws,{to:"/",className:"mt-6 inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Go Home"})]})},pO=()=>{const[r,e]=re.useState(!1),t=()=>{window.pageYOffset>300?e(!0):e(!1)};re.useEffect(()=>(window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}),[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return R.jsx("button",{type:"button",onClick:n,className:`fixed bottom-5 right-5 p-3 rounded-full bg-blue-500 text-white shadow-lg transition-opacity duration-300 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-label":"Scroll to top",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})})})},gO=re.lazy(()=>sn(()=>import("./ServicesSection-B9OkB41F.js"),__vite__mapDeps([2,1,3]),import.meta.url)),mO=re.lazy(()=>sn(()=>import("./ProjectsSection-kyYgr1Hk.js"),__vite__mapDeps([4,1,3]),import.meta.url)),yO=re.lazy(()=>sn(()=>import("./ContactSection-PomfU9fZ.js"),__vite__mapDeps([5,1,3]),import.meta.url)),vO=6e4;let hf=0;const _O=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),bO=r=>r.length>=10&&r.length<=1e3,wO={Github:zm,Facebook:$m,Mail:iy,Instagram:Wm,Linkedin:ey,Twitter:Sy},EO=({children:r})=>{const[e,t]=re.useState(null),[n,i]=re.useState(!0);return re.useEffect(()=>{if(!Lt){i(!1);return}const s=gf(Lt,o=>{t(o),i(!1)});return()=>s()},[]),n?R.jsx("div",{className:"flex items-center justify-center min-h-screen",children:R.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):e?r:R.jsx(pf,{to:"/admin/login",replace:!0})},TO=({dynamicPages:r})=>{const[e,t]=re.useState(Dt),[n,i]=re.useState(!0),[s,o]=re.useState(!1);re.useEffect(()=>{if(!pe){console.error("MainSite: Firestore instance is not available."),i(!1);return}const b=Xe(pe,"translations/en");i(!0);const I=Ul(b,_=>{if(_.exists()){const P=_.data();t(C=>({...C,en:{...Dt.en,...P}}))}else t(Dt),console.log("MainSite: No translations document found in Firestore, using defaults.");i(!1)},_=>{console.error("MainSite: Firestore snapshot error:",_),t(Dt),i(!1)});return()=>I()},[]),re.useEffect(()=>{const b=I=>{I.ctrlKey&&I.altKey&&I.key==="a"&&(I.preventDefault(),o(_=>!_))};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[]);const a=re.useMemo(()=>e.en,[e]),[l,h]=re.useState([]),[c,d]=re.useState({name:"",email:"",message:""}),f=re.useCallback(b=>{const{name:I,value:_}=b.target;d(P=>({...P,[I]:_}))},[]),p=re.useCallback(async b=>{b.preventDefault();const I=Date.now();if(I-hf<vO){alert("Please wait a minute before sending another message.");return}if(!_O(c.email)){alert("Please enter a valid email address.");return}if(!bO(c.message)){alert("Message must be between 10 and 1000 characters.");return}hf=I;try{oc.init("skwn_-DYfDakGK644"),await oc.send("service_bdj14o3","template_2e2nikq",{name:c.name,email:c.email,message:c.message,to_email:"tiger3homs@gmail.com"}),alert("Message sent successfully!"),d({name:"",email:"",message:""})}catch(_){console.error("Failed to send message:",_),alert("Failed to send message. Please try again.")}},[c]);re.useEffect(()=>{(async()=>{if(pe)try{const I=mr(pe,"socialLinks"),_=oo(I,ao("order","asc")),C=(await Ci(_)).docs.map(w=>({id:w.id,...w.data()}));h(C)}catch(I){console.error("Error fetching social links:",I)}})()},[]);const v=re.useMemo(()=>hO(e),[e]),y=R.jsx("div",{className:"flex items-center justify-center p-8",children:R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});return n?R.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:R.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):R.jsxs("div",{className:"min-h-screen text-white ltr",style:{background:"linear-gradient(to bottom right, var(--background-from-color, #111827), var(--background-to-color, #1F2937))"},children:[R.jsx("header",{className:"container mx-auto px-4 py-16 md:py-32",children:R.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[R.jsx(fO,{logoUrl:a.generalInfo.logoUrl}),R.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 text-primary",style:{pointerEvents:"none",userSelect:"none"},children:a.generalInfo.siteTitle}),R.jsx("p",{className:"text-xl md:text-2xl text-secondary mb-8",style:{pointerEvents:"none",userSelect:"none"},children:a.generalInfo.siteRole}),R.jsx("div",{className:"flex justify-center space-x-6",children:l.map(b=>{const I=wO[b.icon];return I?R.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer","aria-label":b.name,className:"text-primary hover:text-text transition-colors transform hover:scale-110",children:R.jsx(I,{size:24})},b.id):null})}),r&&r.length>0&&R.jsx("nav",{className:"mb-4 flex justify-center flex-wrap gap-x-4 gap-y-2 mt-8",children:r.map(b=>R.jsx(ws,{to:`/${b.slug}`,className:"text-secondary hover:text-primary transition-colors text-sm",children:b.title},b.id))})]})}),R.jsx(re.Suspense,{fallback:y,children:R.jsx(mO,{title:v.title,projects:v.projects})}),R.jsx("section",{className:"container mx-auto px-4 py-16 bg-gray-800/50 backdrop-blur-sm",children:R.jsxs("div",{className:"max-w-3xl mx-auto",children:[R.jsx("h2",{className:"text-3xl font-bold text-center mb-8",style:{color:"var(--title-color)"},children:a.about.title}),R.jsx("p",{className:"text-lg leading-relaxed text-text",children:a.about.description})]})}),R.jsx(re.Suspense,{fallback:y,children:R.jsx(gO,{title:a.services.title,services:a.services.list})}),R.jsx(re.Suspense,{fallback:y,children:R.jsx(yO,{t:a.contact,handleSubmit:p,formData:c,handleInputChange:f})}),R.jsxs("footer",{className:"container mx-auto px-4 py-8 text-center relative",children:[R.jsx("p",{className:"text-secondary mb-4",children:a.generalInfo.footerText}),R.jsx(ws,{to:"/admin/dashboard",className:`absolute bottom-2 left-1/2 -translate-x-1/2 text-sm text-primary hover:text-text underline transition-opacity duration-300 ${s?"opacity-100":"opacity-0 pointer-events-none"}`,children:"Admin Dashboard"})]})]})};function xO(){const[r,e]=re.useState([]),[t,n]=re.useState(!0);return re.useEffect(()=>{if(!pe){console.error("App.tsx: Firestore not initialized correctly for loading styles.");return}const i=Xe(pe,"settings","styles");console.log("App.tsx: Setting up real-time listener for global styles...");const s=Ul(i,o=>{if(o.exists()){const a=o.data();console.log("App.tsx: Received style update from Firestore:",a),document.documentElement.style.setProperty("--primary-color",a.primaryColor),document.documentElement.style.setProperty("--secondary-color",a.secondaryColor),document.documentElement.style.setProperty("--font-family",a.fontFamily),document.documentElement.style.setProperty("--title-color",a.titleColor||"#d7e3ee"),document.documentElement.style.setProperty("--h3title-color",a.h3TitleColor||"#d7e3ee"),document.documentElement.style.setProperty("--text-color",a.textColor||"#c6d3e2"),document.documentElement.style.setProperty("--background-from-color",a.backgroundFromColor||"#111827"),document.documentElement.style.setProperty("--background-to-color",a.backgroundToColor||"#1F2937"),document.documentElement.style.setProperty("--section-bg-color",a.sectionBgColor||"#374151")}else console.log("App.tsx: No global styles document found in Firestore, applying CSS defaults.")},o=>{console.error("App.tsx: Error listening to global styles:",o)});return()=>{console.log("App.tsx: Unsubscribing from global styles listener."),s()}},[]),re.useEffect(()=>{if(n(!0),!pe){console.error("App.tsx: Firestore not initialized correctly for loading pages."),n(!1);return}(async()=>{if(!pe){console.error("App.tsx: Firestore not initialized correctly for loading pages."),n(!1);return}try{const s=mr(pe,"pages"),o=oo(s,ao("order","asc")),l=(await Ci(o)).docs.map(h=>({id:h.id,...h.data()}));e(l),console.log("App.tsx: Fetched dynamic pages:",l)}catch(s){console.error("App.tsx: Error fetching dynamic pages:",s)}finally{n(!1)}})()},[]),t?R.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:R.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):R.jsxs(Gg,{children:[R.jsxs(Wg,{children:[R.jsx(Jr,{path:"/",element:R.jsx(TO,{dynamicPages:r})}),r.map(i=>R.jsx(Jr,{path:`/${i.slug}`,element:R.jsx(dO,{page:i})},i.id)),R.jsx(Jr,{path:"/admin/login",element:R.jsx(W_,{})}),R.jsx(Jr,{path:"/admin/dashboard",element:R.jsx(EO,{children:R.jsx(cO,{})})}),R.jsx(Jr,{path:"/admin",element:R.jsx(pf,{to:"/admin/login",replace:!0})})]}),R.jsx(pO,{})," "]})}vf(document.getElementById("root")).render(R.jsx(xO,{}));export{Ne as c,R as j};
//# sourceMappingURL=index-CYZn8g7a.js.map
