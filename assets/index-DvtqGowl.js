const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ServicesSection-Bh_NfVYO.js","./react-vendor-BzzsfUdw.js","./firebase-vendor-CAk-8R_y.js","./ProjectsSection-CPhJNFxq.js","./ContactSection-BBolqeET.js"])))=>i.map(i=>d[i]);
import{r as ie,a as Dc,u as Mc,c as wt,g as zd,b as Hd,L as Li,B as Kd,R as Gd,d as Tr,N as Vc}from"./react-vendor-BzzsfUdw.js";import{L as Wd,_ as Qd,C as Yd,r as Fl,F as Xd,a as Zd,g as Jd,b as ep,c as tp,d as zt,e as np,f as rp,h as xt,S as ip,i as op,j as sp,k as ap,l as lp,o as qc,s as up,m as cp}from"./firebase-vendor-CAk-8R_y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Fc={exports:{}},ro={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=ie,hp=Symbol.for("react.element"),dp=Symbol.for("react.fragment"),pp=Object.prototype.hasOwnProperty,mp=fp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gp={key:!0,ref:!0,__self:!0,__source:!0};function Bc(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)pp.call(e,r)&&!gp.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hp,type:n,key:o,ref:s,props:i,_owner:mp.current}}ro.Fragment=dp;ro.jsx=Bc;ro.jsxs=Bc;Fc.exports=ro;var C=Fc.exports,$c,Bl=Dc;$c=Bl.createRoot,Bl.hydrateRoot;const yp="modulepreload",vp=function(n,e){return new URL(n,e).href},$l={},zs=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(h=>{if(h=vp(h,r),h in $l)return;$l[h]=!0;const f=h.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(!!r)for(let _=s.length-1;_>=0;_--){const y=s[_];if(y.href===h&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":yp,f||(p.as="script"),p.crossOrigin="",p.href=h,u&&p.setAttribute("nonce",u),document.head.appendChild(p),f)return new Promise((_,y)=>{p.addEventListener("load",_),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bp=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Ul=n=>{const e=bp(n);return e.charAt(0).toUpperCase()+e.slice(1)},Uc=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ie.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...l},u)=>ie.createElement("svg",{ref:u,...wp,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Uc("lucide",i),...l},[...s.map(([h,f])=>ie.createElement(h,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(n,e)=>{const t=ie.forwardRef(({className:r,...i},o)=>ie.createElement(Ep,{ref:o,iconNode:e,className:Uc(`lucide-${_p(Ul(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Ul(n),t};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ds=Oe("arrow-down",Tp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ps=Oe("arrow-up",xp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kp=Oe("bell",Ap);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Np=Oe("chevron-down",Ip);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Op=Oe("circle-plus",Sp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Rp=Oe("circle-x",Pp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jp=Oe("copy",Cp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Dp=Oe("download",Lp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vp=Oe("eye",Mp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Fp=Oe("facebook",qp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],$p=Oe("file-pen",Bp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zl=Oe("file-text",Up);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Hp=Oe("github",zp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Gp=Oe("image",Kp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Qp=Oe("instagram",Wp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Hl=Oe("layout-dashboard",Yp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Zp=Oe("link-2",Xp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],em=Oe("linkedin",Jp);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],nm=Oe("log-out",tm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],im=Oe("mail",rm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],sm=Oe("maximize-2",om);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],lm=Oe("message-square",am);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],cm=Oe("minimize-2",um);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],zc=Oe("palette",fm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],dm=Oe("panels-top-left",hm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mm=Oe("refresh-cw",pm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hc=Oe("save",gm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],vm=Oe("search",ym);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bm=Oe("settings",_m);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],Em=Oe("sliders-vertical",wm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ms=Oe("square-pen",Tm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Am=Oe("star",xm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Di=Oe("trash-2",km);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Nm=Oe("twitter",Im);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Om=Oe("type",Sm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Rm=Oe("upload",Pm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jm=Oe("user",Cm);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Dm=Oe("wand-sparkles",Lm),Lr={_origin:"https://api.emailjs.com"},Mm=(n,e="https://api.emailjs.com")=>{Lr._userID=n,Lr._origin=e},Kc=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class Kl{constructor(e){this.status=e.status,this.text=e.responseText}}const Gc=(n,e,t={})=>new Promise((r,i)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:s})=>{const l=new Kl(s);l.status===200||l.text==="OK"?r(l):i(l)}),o.addEventListener("error",({target:s})=>{i(new Kl(s))}),o.open("POST",Lr._origin+n,!0),Object.keys(t).forEach(s=>{o.setRequestHeader(s,t[s])}),o.send(e)}),Vm=(n,e,t,r)=>{const i=r||Lr._userID;return Kc(i,n,e),Gc("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},qm=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},Fm=(n,e,t,r)=>{const i=r||Lr._userID,o=qm(t);Kc(i,n,e);const s=new FormData(o);return s.append("lib_version","3.2.0"),s.append("service_id",n),s.append("template_id",e),s.append("user_id",i),Gc("/api/v1.0/email/send-form",s)},Gl={init:Mm,send:Vm,sendForm:Fm};var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tn,Wc;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,E){function I(){}I.prototype=E.prototype,w.D=E.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(x,T,k){for(var S=Array(arguments.length-2),D=2;D<arguments.length;D++)S[D-2]=arguments[D];return E.prototype[T].apply(x,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,E,I){I||(I=0);var x=Array(16);if(typeof E=="string")for(var T=0;16>T;++T)x[T]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(T=0;16>T;++T)x[T]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=w.g[0],I=w.g[1],T=w.g[2];var k=w.g[3],S=E+(k^I&(T^k))+x[0]+3614090360&4294967295;E=I+(S<<7&4294967295|S>>>25),S=k+(T^E&(I^T))+x[1]+3905402710&4294967295,k=E+(S<<12&4294967295|S>>>20),S=T+(I^k&(E^I))+x[2]+606105819&4294967295,T=k+(S<<17&4294967295|S>>>15),S=I+(E^T&(k^E))+x[3]+3250441966&4294967295,I=T+(S<<22&4294967295|S>>>10),S=E+(k^I&(T^k))+x[4]+4118548399&4294967295,E=I+(S<<7&4294967295|S>>>25),S=k+(T^E&(I^T))+x[5]+1200080426&4294967295,k=E+(S<<12&4294967295|S>>>20),S=T+(I^k&(E^I))+x[6]+2821735955&4294967295,T=k+(S<<17&4294967295|S>>>15),S=I+(E^T&(k^E))+x[7]+4249261313&4294967295,I=T+(S<<22&4294967295|S>>>10),S=E+(k^I&(T^k))+x[8]+1770035416&4294967295,E=I+(S<<7&4294967295|S>>>25),S=k+(T^E&(I^T))+x[9]+2336552879&4294967295,k=E+(S<<12&4294967295|S>>>20),S=T+(I^k&(E^I))+x[10]+4294925233&4294967295,T=k+(S<<17&4294967295|S>>>15),S=I+(E^T&(k^E))+x[11]+2304563134&4294967295,I=T+(S<<22&4294967295|S>>>10),S=E+(k^I&(T^k))+x[12]+1804603682&4294967295,E=I+(S<<7&4294967295|S>>>25),S=k+(T^E&(I^T))+x[13]+4254626195&4294967295,k=E+(S<<12&4294967295|S>>>20),S=T+(I^k&(E^I))+x[14]+2792965006&4294967295,T=k+(S<<17&4294967295|S>>>15),S=I+(E^T&(k^E))+x[15]+1236535329&4294967295,I=T+(S<<22&4294967295|S>>>10),S=E+(T^k&(I^T))+x[1]+4129170786&4294967295,E=I+(S<<5&4294967295|S>>>27),S=k+(I^T&(E^I))+x[6]+3225465664&4294967295,k=E+(S<<9&4294967295|S>>>23),S=T+(E^I&(k^E))+x[11]+643717713&4294967295,T=k+(S<<14&4294967295|S>>>18),S=I+(k^E&(T^k))+x[0]+3921069994&4294967295,I=T+(S<<20&4294967295|S>>>12),S=E+(T^k&(I^T))+x[5]+3593408605&4294967295,E=I+(S<<5&4294967295|S>>>27),S=k+(I^T&(E^I))+x[10]+38016083&4294967295,k=E+(S<<9&4294967295|S>>>23),S=T+(E^I&(k^E))+x[15]+3634488961&4294967295,T=k+(S<<14&4294967295|S>>>18),S=I+(k^E&(T^k))+x[4]+3889429448&4294967295,I=T+(S<<20&4294967295|S>>>12),S=E+(T^k&(I^T))+x[9]+568446438&4294967295,E=I+(S<<5&4294967295|S>>>27),S=k+(I^T&(E^I))+x[14]+3275163606&4294967295,k=E+(S<<9&4294967295|S>>>23),S=T+(E^I&(k^E))+x[3]+4107603335&4294967295,T=k+(S<<14&4294967295|S>>>18),S=I+(k^E&(T^k))+x[8]+1163531501&4294967295,I=T+(S<<20&4294967295|S>>>12),S=E+(T^k&(I^T))+x[13]+2850285829&4294967295,E=I+(S<<5&4294967295|S>>>27),S=k+(I^T&(E^I))+x[2]+4243563512&4294967295,k=E+(S<<9&4294967295|S>>>23),S=T+(E^I&(k^E))+x[7]+1735328473&4294967295,T=k+(S<<14&4294967295|S>>>18),S=I+(k^E&(T^k))+x[12]+2368359562&4294967295,I=T+(S<<20&4294967295|S>>>12),S=E+(I^T^k)+x[5]+4294588738&4294967295,E=I+(S<<4&4294967295|S>>>28),S=k+(E^I^T)+x[8]+2272392833&4294967295,k=E+(S<<11&4294967295|S>>>21),S=T+(k^E^I)+x[11]+1839030562&4294967295,T=k+(S<<16&4294967295|S>>>16),S=I+(T^k^E)+x[14]+4259657740&4294967295,I=T+(S<<23&4294967295|S>>>9),S=E+(I^T^k)+x[1]+2763975236&4294967295,E=I+(S<<4&4294967295|S>>>28),S=k+(E^I^T)+x[4]+1272893353&4294967295,k=E+(S<<11&4294967295|S>>>21),S=T+(k^E^I)+x[7]+4139469664&4294967295,T=k+(S<<16&4294967295|S>>>16),S=I+(T^k^E)+x[10]+3200236656&4294967295,I=T+(S<<23&4294967295|S>>>9),S=E+(I^T^k)+x[13]+681279174&4294967295,E=I+(S<<4&4294967295|S>>>28),S=k+(E^I^T)+x[0]+3936430074&4294967295,k=E+(S<<11&4294967295|S>>>21),S=T+(k^E^I)+x[3]+3572445317&4294967295,T=k+(S<<16&4294967295|S>>>16),S=I+(T^k^E)+x[6]+76029189&4294967295,I=T+(S<<23&4294967295|S>>>9),S=E+(I^T^k)+x[9]+3654602809&4294967295,E=I+(S<<4&4294967295|S>>>28),S=k+(E^I^T)+x[12]+3873151461&4294967295,k=E+(S<<11&4294967295|S>>>21),S=T+(k^E^I)+x[15]+530742520&4294967295,T=k+(S<<16&4294967295|S>>>16),S=I+(T^k^E)+x[2]+3299628645&4294967295,I=T+(S<<23&4294967295|S>>>9),S=E+(T^(I|~k))+x[0]+4096336452&4294967295,E=I+(S<<6&4294967295|S>>>26),S=k+(I^(E|~T))+x[7]+1126891415&4294967295,k=E+(S<<10&4294967295|S>>>22),S=T+(E^(k|~I))+x[14]+2878612391&4294967295,T=k+(S<<15&4294967295|S>>>17),S=I+(k^(T|~E))+x[5]+4237533241&4294967295,I=T+(S<<21&4294967295|S>>>11),S=E+(T^(I|~k))+x[12]+1700485571&4294967295,E=I+(S<<6&4294967295|S>>>26),S=k+(I^(E|~T))+x[3]+2399980690&4294967295,k=E+(S<<10&4294967295|S>>>22),S=T+(E^(k|~I))+x[10]+4293915773&4294967295,T=k+(S<<15&4294967295|S>>>17),S=I+(k^(T|~E))+x[1]+2240044497&4294967295,I=T+(S<<21&4294967295|S>>>11),S=E+(T^(I|~k))+x[8]+1873313359&4294967295,E=I+(S<<6&4294967295|S>>>26),S=k+(I^(E|~T))+x[15]+4264355552&4294967295,k=E+(S<<10&4294967295|S>>>22),S=T+(E^(k|~I))+x[6]+2734768916&4294967295,T=k+(S<<15&4294967295|S>>>17),S=I+(k^(T|~E))+x[13]+1309151649&4294967295,I=T+(S<<21&4294967295|S>>>11),S=E+(T^(I|~k))+x[4]+4149444226&4294967295,E=I+(S<<6&4294967295|S>>>26),S=k+(I^(E|~T))+x[11]+3174756917&4294967295,k=E+(S<<10&4294967295|S>>>22),S=T+(E^(k|~I))+x[2]+718787259&4294967295,T=k+(S<<15&4294967295|S>>>17),S=I+(k^(T|~E))+x[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(T+(S<<21&4294967295|S>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.u=function(w,E){E===void 0&&(E=w.length);for(var I=E-this.blockSize,x=this.B,T=this.h,k=0;k<E;){if(T==0)for(;k<=I;)i(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<E;)if(x[T++]=w.charCodeAt(k++),T==this.blockSize){i(this,x),T=0;break}}else for(;k<E;)if(x[T++]=w[k++],T==this.blockSize){i(this,x),T=0;break}}this.h=T,this.o+=E},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;var I=8*this.o;for(E=w.length-8;E<w.length;++E)w[E]=I&255,I/=256;for(this.u(w),w=Array(16),E=I=0;4>E;++E)for(var x=0;32>x;x+=8)w[I++]=this.g[E]>>>x&255;return w};function o(w,E){var I=l;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=E(w)}function s(w,E){this.h=E;for(var I=[],x=!0,T=w.length-1;0<=T;T--){var k=w[T]|0;x&&k==E||(I[T]=k,x=!1)}this.g=I}var l={};function u(w){return-128<=w&&128>w?o(w,function(E){return new s([E|0],0>E?-1:0)}):new s([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return m(h(-w));for(var E=[],I=1,x=0;w>=I;x++)E[x]=w/I|0,I*=4294967296;return new s(E,0)}function f(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return m(f(w.substring(1),E));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(E,8)),x=d,T=0;T<w.length;T+=8){var k=Math.min(8,w.length-T),S=parseInt(w.substring(T,T+k),E);8>k?(k=h(Math.pow(E,k)),x=x.j(k).add(h(S))):(x=x.j(I),x=x.add(h(S)))}return x}var d=u(0),c=u(1),p=u(16777216);n=s.prototype,n.m=function(){if(y(this))return-m(this).m();for(var w=0,E=1,I=0;I<this.g.length;I++){var x=this.i(I);w+=(0<=x?x:4294967296+x)*E,E*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(_(this))return"0";if(y(this))return"-"+m(this).toString(w);for(var E=h(Math.pow(w,6)),I=this,x="";;){var T=v(I,E).g;I=g(I,T.j(E));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=T,_(I))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function _(w){if(w.h!=0)return!1;for(var E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function y(w){return w.h==-1}n.l=function(w){return w=g(this,w),y(w)?-1:_(w)?0:1};function m(w){for(var E=w.g.length,I=[],x=0;x<E;x++)I[x]=~w.g[x];return new s(I,~w.h).add(c)}n.abs=function(){return y(this)?m(this):this},n.add=function(w){for(var E=Math.max(this.g.length,w.g.length),I=[],x=0,T=0;T<=E;T++){var k=x+(this.i(T)&65535)+(w.i(T)&65535),S=(k>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);x=S>>>16,k&=65535,S&=65535,I[T]=S<<16|k}return new s(I,I[I.length-1]&-2147483648?-1:0)};function g(w,E){return w.add(m(E))}n.j=function(w){if(_(this)||_(w))return d;if(y(this))return y(w)?m(this).j(m(w)):m(m(this).j(w));if(y(w))return m(this.j(m(w)));if(0>this.l(p)&&0>w.l(p))return h(this.m()*w.m());for(var E=this.g.length+w.g.length,I=[],x=0;x<2*E;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var T=0;T<w.g.length;T++){var k=this.i(x)>>>16,S=this.i(x)&65535,D=w.i(T)>>>16,F=w.i(T)&65535;I[2*x+2*T]+=S*F,b(I,2*x+2*T),I[2*x+2*T+1]+=k*F,b(I,2*x+2*T+1),I[2*x+2*T+1]+=S*D,b(I,2*x+2*T+1),I[2*x+2*T+2]+=k*D,b(I,2*x+2*T+2)}for(x=0;x<E;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=E;x<2*E;x++)I[x]=0;return new s(I,0)};function b(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function N(w,E){this.g=w,this.h=E}function v(w,E){if(_(E))throw Error("division by zero");if(_(w))return new N(d,d);if(y(w))return E=v(m(w),E),new N(m(E.g),m(E.h));if(y(E))return E=v(w,m(E)),new N(m(E.g),E.h);if(30<w.g.length){if(y(w)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var I=c,x=E;0>=x.l(w);)I=O(I),x=O(x);var T=R(I,1),k=R(x,1);for(x=R(x,2),I=R(I,2);!_(x);){var S=k.add(x);0>=S.l(w)&&(T=T.add(I),k=S),x=R(x,1),I=R(I,1)}return E=g(w,T.j(E)),new N(T,E)}for(T=d;0<=w.l(E);){for(I=Math.max(1,Math.floor(w.m()/E.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=h(I),S=k.j(E);y(S)||0<S.l(w);)I-=x,k=h(I),S=k.j(E);_(k)&&(k=c),T=T.add(k),w=g(w,S)}return new N(T,w)}n.A=function(w){return v(this,w).h},n.and=function(w){for(var E=Math.max(this.g.length,w.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)&w.i(x);return new s(I,this.h&w.h)},n.or=function(w){for(var E=Math.max(this.g.length,w.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)|w.i(x);return new s(I,this.h|w.h)},n.xor=function(w){for(var E=Math.max(this.g.length,w.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)^w.i(x);return new s(I,this.h^w.h)};function O(w){for(var E=w.g.length+1,I=[],x=0;x<E;x++)I[x]=w.i(x)<<1|w.i(x-1)>>>31;return new s(I,w.h)}function R(w,E){var I=E>>5;E%=32;for(var x=w.g.length-I,T=[],k=0;k<x;k++)T[k]=0<E?w.i(k+I)>>>E|w.i(k+I+1)<<32-E:w.i(k+I);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wc=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=f,tn=s}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});var yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qc,Ir,Yc,Si,gs,Xc,Zc,Jc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,A,P){return a==Array.prototype||a==Object.prototype||(a[A]=P.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof yi=="object"&&yi];for(var A=0;A<a.length;++A){var P=a[A];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=t(this);function i(a,A){if(A)e:{var P=r;a=a.split(".");for(var L=0;L<a.length-1;L++){var Q=a[L];if(!(Q in P))break e;P=P[Q]}a=a[a.length-1],L=P[a],A=A(L),A!=L&&A!=null&&e(P,a,{configurable:!0,writable:!0,value:A})}}function o(a,A){a instanceof String&&(a+="");var P=0,L=!1,Q={next:function(){if(!L&&P<a.length){var Z=P++;return{value:A(Z,a[Z]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(a){return a||function(){return o(this,function(A,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(a){var A=typeof a;return A=A!="object"?A:a?Array.isArray(a)?"array":A:"null",A=="array"||A=="object"&&typeof a.length=="number"}function h(a){var A=typeof a;return A=="object"&&a!=null||A=="function"}function f(a,A,P){return a.call.apply(a.bind,arguments)}function d(a,A,P){if(!a)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,L),a.apply(A,Q)}}return function(){return a.apply(A,arguments)}}function c(a,A,P){return c=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:d,c.apply(null,arguments)}function p(a,A){var P=Array.prototype.slice.call(arguments,1);return function(){var L=P.slice();return L.push.apply(L,arguments),a.apply(this,L)}}function _(a,A){function P(){}P.prototype=A.prototype,a.aa=A.prototype,a.prototype=new P,a.prototype.constructor=a,a.Qb=function(L,Q,Z){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return A.prototype[Q].apply(L,ue)}}function y(a){const A=a.length;if(0<A){const P=Array(A);for(let L=0;L<A;L++)P[L]=a[L];return P}return[]}function m(a,A){for(let P=1;P<arguments.length;P++){const L=arguments[P];if(u(L)){const Q=a.length||0,Z=L.length||0;a.length=Q+Z;for(let ue=0;ue<Z;ue++)a[Q+ue]=L[ue]}else a.push(L)}}class g{constructor(A,P){this.i=A,this.j=P,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function b(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function v(a){return v[" "](a),a}v[" "]=function(){};var O=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function R(a,A,P){for(const L in a)A.call(P,a[L],L,a)}function w(a,A){for(const P in a)A.call(void 0,a[P],P,a)}function E(a){const A={};for(const P in a)A[P]=a[P];return A}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,A){let P,L;for(let Q=1;Q<arguments.length;Q++){L=arguments[Q];for(P in L)a[P]=L[P];for(let Z=0;Z<I.length;Z++)P=I[Z],Object.prototype.hasOwnProperty.call(L,P)&&(a[P]=L[P])}}function T(a){var A=1;a=a.split(":");const P=[];for(;0<A&&a.length;)P.push(a.shift()),A--;return a.length&&P.push(a.join(":")),P}function k(a){l.setTimeout(()=>{throw a},0)}function S(){var a=z;let A=null;return a.g&&(A=a.g,a.g=a.g.next,a.g||(a.h=null),A.next=null),A}class D{constructor(){this.h=this.g=null}add(A,P){const L=F.get();L.set(A,P),this.h?this.h.next=L:this.g=L,this.h=L}}var F=new g(()=>new K,a=>a.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,P){this.h=A,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let G,re=!1,z=new D,B=()=>{const a=l.Promise.resolve(void 0);G=()=>{a.then(j)}};var j=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(P){k(P)}var A=F;A.j(a),100>A.h&&(A.h++,a.next=A.g,A.g=a)}re=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(a,A){this.type=a,this.g=this.target=A,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,A=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const P=()=>{};l.addEventListener("test",P,A),l.removeEventListener("test",P,A)}catch{}return a}();function H(a,A){if(q.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var P=this.type=a.type,L=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=A,A=a.relatedTarget){if(O){e:{try{v(A.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(A=null)}}else P=="mouseover"?A=a.fromElement:P=="mouseout"&&(A=a.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:M[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&H.aa.h.call(this)}}_(H,q);var M={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),Y=0;function $(a,A,P,L,Q){this.listener=a,this.proxy=null,this.src=A,this.type=P,this.capture=!!L,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function X(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function se(a){this.src=a,this.g={},this.h=0}se.prototype.add=function(a,A,P,L,Q){var Z=a.toString();a=this.g[Z],a||(a=this.g[Z]=[],this.h++);var ue=me(a,A,L,Q);return-1<ue?(A=a[ue],P||(A.fa=!1)):(A=new $(A,this.src,Z,!!L,Q),A.fa=P,a.push(A)),A};function le(a,A){var P=A.type;if(P in a.g){var L=a.g[P],Q=Array.prototype.indexOf.call(L,A,void 0),Z;(Z=0<=Q)&&Array.prototype.splice.call(L,Q,1),Z&&(X(A),a.g[P].length==0&&(delete a.g[P],a.h--))}}function me(a,A,P,L){for(var Q=0;Q<a.length;++Q){var Z=a[Q];if(!Z.da&&Z.listener==A&&Z.capture==!!P&&Z.ha==L)return Q}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),Ie={};function Je(a,A,P,L,Q){if(Array.isArray(A)){for(var Z=0;Z<A.length;Z++)Je(a,A[Z],P,L,Q);return null}return P=ke(P),a&&a[U]?a.K(A,P,h(L)?!!L.capture:!!L,Q):Ke(a,A,P,!1,L,Q)}function Ke(a,A,P,L,Q,Z){if(!A)throw Error("Invalid event type");var ue=h(Q)?!!Q.capture:!!Q,Me=Ee(a);if(Me||(a[_e]=Me=new se(a)),P=Me.add(A,P,L,ue,Z),P.proxy)return P;if(L=J(),P.proxy=L,L.src=a,L.listener=P,a.addEventListener)W||(Q=ue),Q===void 0&&(Q=!1),a.addEventListener(A.toString(),L,Q);else if(a.attachEvent)a.attachEvent(fe(A.toString()),L);else if(a.addListener&&a.removeListener)a.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return P}function J(){function a(P){return A.call(a.src,a.listener,P)}const A=oe;return a}function ee(a,A,P,L,Q){if(Array.isArray(A))for(var Z=0;Z<A.length;Z++)ee(a,A[Z],P,L,Q);else L=h(L)?!!L.capture:!!L,P=ke(P),a&&a[U]?(a=a.i,A=String(A).toString(),A in a.g&&(Z=a.g[A],P=me(Z,P,L,Q),-1<P&&(X(Z[P]),Array.prototype.splice.call(Z,P,1),Z.length==0&&(delete a.g[A],a.h--)))):a&&(a=Ee(a))&&(A=a.g[A.toString()],a=-1,A&&(a=me(A,P,L,Q)),(P=-1<a?A[a]:null)&&ce(P))}function ce(a){if(typeof a!="number"&&a&&!a.da){var A=a.src;if(A&&A[U])le(A.i,a);else{var P=a.type,L=a.proxy;A.removeEventListener?A.removeEventListener(P,L,a.capture):A.detachEvent?A.detachEvent(fe(P),L):A.addListener&&A.removeListener&&A.removeListener(L),(P=Ee(A))?(le(P,a),P.h==0&&(P.src=null,A[_e]=null)):X(a)}}}function fe(a){return a in Ie?Ie[a]:Ie[a]="on"+a}function oe(a,A){if(a.da)a=!0;else{A=new H(A,this);var P=a.listener,L=a.ha||a.src;a.fa&&ce(a),a=P.call(L,A)}return a}function Ee(a){return a=a[_e],a instanceof se?a:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(a){return typeof a=="function"?a:(a[Te]||(a[Te]=function(A){return a.handleEvent(A)}),a[Te])}function Le(){V.call(this),this.i=new se(this),this.M=this,this.F=null}_(Le,V),Le.prototype[U]=!0,Le.prototype.removeEventListener=function(a,A,P,L){ee(this,a,A,P,L)};function qe(a,A){var P,L=a.F;if(L)for(P=[];L;L=L.F)P.push(L);if(a=a.M,L=A.type||A,typeof A=="string")A=new q(A,a);else if(A instanceof q)A.target=A.target||a;else{var Q=A;A=new q(L,a),x(A,Q)}if(Q=!0,P)for(var Z=P.length-1;0<=Z;Z--){var ue=A.g=P[Z];Q=De(ue,L,!0,A)&&Q}if(ue=A.g=a,Q=De(ue,L,!0,A)&&Q,Q=De(ue,L,!1,A)&&Q,P)for(Z=0;Z<P.length;Z++)ue=A.g=P[Z],Q=De(ue,L,!1,A)&&Q}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var a=this.i,A;for(A in a.g){for(var P=a.g[A],L=0;L<P.length;L++)X(P[L]);delete a.g[A],a.h--}}this.F=null},Le.prototype.K=function(a,A,P,L){return this.i.add(String(a),A,!1,P,L)},Le.prototype.L=function(a,A,P,L){return this.i.add(String(a),A,!0,P,L)};function De(a,A,P,L){if(A=a.i.g[String(A)],!A)return!0;A=A.concat();for(var Q=!0,Z=0;Z<A.length;++Z){var ue=A[Z];if(ue&&!ue.da&&ue.capture==P){var Me=ue.listener,rt=ue.ha||ue.src;ue.fa&&le(a.i,ue),Q=Me.call(rt,L)!==!1&&Q}}return Q&&!L.defaultPrevented}function ti(a,A,P){if(typeof a=="function")P&&(a=c(a,P));else if(a&&typeof a.handleEvent=="function")a=c(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:l.setTimeout(a,A||0)}function Ue(a){a.g=ti(()=>{a.g=null,a.i&&(a.i=!1,Ue(a))},a.l);const A=a.h;a.h=null,a.m.apply(null,A)}class Rt extends V{constructor(A,P){super(),this.m=A,this.l=P,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(a){V.call(this),this.h=a,this.g={}}_(cr,V);var Ga=[];function Wa(a){R(a.g,function(A,P){this.g.hasOwnProperty(P)&&ce(A)},a),a.g={}}cr.prototype.N=function(){cr.aa.N.call(this),Wa(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=l.JSON.stringify,_d=l.JSON.parse,bd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ro(){}Ro.prototype.h=null;function Qa(a){return a.h||(a.h=a.i())}function Ya(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Co(){q.call(this,"d")}_(Co,q);function jo(){q.call(this,"c")}_(jo,q);var mn={},Xa=null;function ni(){return Xa=Xa||new Le}mn.La="serverreachability";function Za(a){q.call(this,mn.La,a)}_(Za,q);function hr(a){const A=ni();qe(A,new Za(A))}mn.STAT_EVENT="statevent";function Ja(a,A){q.call(this,mn.STAT_EVENT,a),this.stat=A}_(Ja,q);function pt(a){const A=ni();qe(A,new Ja(A,a))}mn.Ma="timingevent";function el(a,A){q.call(this,mn.Ma,a),this.size=A}_(el,q);function dr(a,A){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},A)}function pr(){this.g=!0}pr.prototype.xa=function(){this.g=!1};function wd(a,A,P,L,Q,Z){a.info(function(){if(a.g)if(Z)for(var ue="",Me=Z.split("&"),rt=0;rt<Me.length;rt++){var Ce=Me[rt].split("=");if(1<Ce.length){var at=Ce[0];Ce=Ce[1];var lt=at.split("_");ue=2<=lt.length&&lt[1]=="type"?ue+(at+"="+Ce+"&"):ue+(at+"=redacted&")}}else ue=null;else ue=Z;return"XMLHTTP REQ ("+L+") [attempt "+Q+"]: "+A+`
`+P+`
`+ue})}function Ed(a,A,P,L,Q,Z,ue){a.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Q+"]: "+A+`
`+P+`
`+Z+" "+ue})}function In(a,A,P,L){a.info(function(){return"XMLHTTP TEXT ("+A+"): "+xd(a,P)+(L?" "+L:"")})}function Td(a,A){a.info(function(){return"TIMEOUT: "+A})}pr.prototype.info=function(){};function xd(a,A){if(!a.g)return A;if(!A)return null;try{var P=JSON.parse(A);if(P){for(a=0;a<P.length;a++)if(Array.isArray(P[a])){var L=P[a];if(!(2>L.length)){var Q=L[1];if(Array.isArray(Q)&&!(1>Q.length)){var Z=Q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ue=1;ue<Q.length;ue++)Q[ue]=""}}}}return Po(P)}catch{return A}}var ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lo;function ii(){}_(ii,Ro),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},Lo=new ii;function Xt(a,A,P,L){this.j=a,this.i=A,this.l=P,this.R=L||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nl}function nl(){this.i=null,this.g="",this.h=!1}var rl={},Do={};function Mo(a,A,P){a.L=1,a.v=li(Ft(A)),a.m=P,a.P=!0,il(a,null)}function il(a,A){a.F=Date.now(),oi(a),a.A=Ft(a.v);var P=a.A,L=a.R;Array.isArray(L)||(L=[String(L)]),vl(P.i,"t",L),a.C=0,P=a.j.J,a.h=new nl,a.g=Dl(a.j,P?A:null,!a.m),0<a.O&&(a.M=new Rt(c(a.Y,a,a.g),a.O)),A=a.U,P=a.g,L=a.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ga[0]=Q.toString()),Q=Ga);for(var Z=0;Z<Q.length;Z++){var ue=Je(P,Q[Z],L||A.handleEvent,!1,A.h||A);if(!ue)break;A.g[ue.key]=ue}A=a.H?E(a.H):{},a.m?(a.u||(a.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,A)):(a.u="GET",a.g.ea(a.A,a.u,null,A)),hr(),wd(a.i,a.u,a.A,a.l,a.R,a.m)}Xt.prototype.ca=function(a){a=a.target;const A=this.M;A&&Bt(a)==3?A.j():this.Y(a)},Xt.prototype.Y=function(a){try{if(a==this.g)e:{const lt=Bt(this.g);var A=this.g.Ba();const On=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||Al(this.g)))){this.J||lt!=4||A==7||(A==8||0>=On?hr(3):hr(2)),Vo(this);var P=this.g.Z();this.X=P;t:if(ol(this)){var L=Al(this.g);a="";var Q=L.length,Z=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),mr(this);var ue="";break t}this.h.i=new l.TextDecoder}for(A=0;A<Q;A++)this.h.h=!0,a+=this.h.i.decode(L[A],{stream:!(Z&&A==Q-1)});L.length=0,this.h.g+=a,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=P==200,Ed(this.i,this.u,this.A,this.l,this.R,lt,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,rt=this.g;if((Me=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Me)){var Ce=Me;break t}}Ce=null}if(P=Ce)In(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qo(this,P);else{this.o=!1,this.s=3,pt(12),gn(this),mr(this);break e}}if(this.P){P=!0;let kt;for(;!this.J&&this.C<ue.length;)if(kt=Ad(this,ue),kt==Do){lt==4&&(this.s=4,pt(14),P=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==rl){this.s=4,pt(15),In(this.i,this.l,ue,"[Invalid Chunk]"),P=!1;break}else In(this.i,this.l,kt,null),qo(this,kt);if(ol(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ue.length!=0||this.h.h||(this.s=1,pt(16),P=!1),this.o=this.o&&P,!P)In(this.i,this.l,ue,"[Invalid Chunked Response]"),gn(this),mr(this);else if(0<ue.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ho(at),at.M=!0,pt(11))}}else In(this.i,this.l,ue,null),qo(this,ue);lt==4&&gn(this),this.o&&!this.J&&(lt==4?Rl(this.j,this):(this.o=!1,oi(this)))}else $d(this.g),P==400&&0<ue.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),gn(this),mr(this)}}}catch{}finally{}};function ol(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ad(a,A){var P=a.C,L=A.indexOf(`
`,P);return L==-1?Do:(P=Number(A.substring(P,L)),isNaN(P)?rl:(L+=1,L+P>A.length?Do:(A=A.slice(L,L+P),a.C=L+P,A)))}Xt.prototype.cancel=function(){this.J=!0,gn(this)};function oi(a){a.S=Date.now()+a.I,sl(a,a.I)}function sl(a,A){if(a.B!=null)throw Error("WatchDog timer not null");a.B=dr(c(a.ba,a),A)}function Vo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Xt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Td(this.i,this.A),this.L!=2&&(hr(),pt(17)),gn(this),this.s=2,mr(this)):sl(this,this.S-a)};function mr(a){a.j.G==0||a.J||Rl(a.j,a)}function gn(a){Vo(a);var A=a.M;A&&typeof A.ma=="function"&&A.ma(),a.M=null,Wa(a.U),a.g&&(A=a.g,a.g=null,A.abort(),A.ma())}function qo(a,A){try{var P=a.j;if(P.G!=0&&(P.g==a||Fo(P.h,a))){if(!a.K&&Fo(P.h,a)&&P.G==3){try{var L=P.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Q=L;if(Q[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<a.F)pi(P),hi(P);else break e;zo(P),pt(18)}}else P.za=Q[1],0<P.za-P.T&&37500>Q[2]&&P.F&&P.v==0&&!P.C&&(P.C=dr(c(P.Za,P),6e3));if(1>=ul(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else vn(P,11)}else if((a.K||P.g==a)&&pi(P),!b(A))for(Q=P.Da.g.parse(A),A=0;A<Q.length;A++){let Ce=Q[A];if(P.T=Ce[0],Ce=Ce[1],P.G==2)if(Ce[0]=="c"){P.K=Ce[1],P.ia=Ce[2];const at=Ce[3];at!=null&&(P.la=at,P.j.info("VER="+P.la));const lt=Ce[4];lt!=null&&(P.Aa=lt,P.j.info("SVER="+P.Aa));const On=Ce[5];On!=null&&typeof On=="number"&&0<On&&(L=1.5*On,P.L=L,P.j.info("backChannelRequestTimeoutMs_="+L)),L=P;const kt=a.g;if(kt){const gi=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var Z=L.h;Z.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Bo(Z,Z.h),Z.h=null))}if(L.D){const Ko=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(L.ya=Ko,Fe(L.I,L.D,Ko))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-a.F,P.j.info("Handshake RTT: "+P.R+"ms")),L=P;var ue=a;if(L.qa=Ll(L,L.J?L.ia:null,L.W),ue.K){cl(L.h,ue);var Me=ue,rt=L.L;rt&&(Me.I=rt),Me.B&&(Vo(Me),oi(Me)),L.g=ue}else Ol(L);0<P.i.length&&di(P)}else Ce[0]!="stop"&&Ce[0]!="close"||vn(P,7);else P.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?vn(P,7):Uo(P):Ce[0]!="noop"&&P.l&&P.l.ta(Ce),P.v=0)}}hr(4)}catch{}}var kd=class{constructor(a,A){this.g=a,this.map=A}};function al(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ll(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ul(a){return a.h?1:a.g?a.g.size:0}function Fo(a,A){return a.h?a.h==A:a.g?a.g.has(A):!1}function Bo(a,A){a.g?a.g.add(A):a.h=A}function cl(a,A){a.h&&a.h==A?a.h=null:a.g&&a.g.has(A)&&a.g.delete(A)}al.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let A=a.i;for(const P of a.g.values())A=A.concat(P.D);return A}return y(a.i)}function Id(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var A=[],P=a.length,L=0;L<P;L++)A.push(a[L]);return A}A=[],P=0;for(L in a)A[P++]=a[L];return A}function Nd(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var A=[];a=a.length;for(var P=0;P<a;P++)A.push(P);return A}A=[],P=0;for(const L in a)A[P++]=L;return A}}}function hl(a,A){if(a.forEach&&typeof a.forEach=="function")a.forEach(A,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,A,void 0);else for(var P=Nd(a),L=Id(a),Q=L.length,Z=0;Z<Q;Z++)A.call(void 0,L[Z],P&&P[Z],a)}var dl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(a,A){if(a){a=a.split("&");for(var P=0;P<a.length;P++){var L=a[P].indexOf("="),Q=null;if(0<=L){var Z=a[P].substring(0,L);Q=a[P].substring(L+1)}else Z=a[P];A(Z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function yn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof yn){this.h=a.h,si(this,a.j),this.o=a.o,this.g=a.g,ai(this,a.s),this.l=a.l;var A=a.i,P=new vr;P.i=A.i,A.g&&(P.g=new Map(A.g),P.h=A.h),pl(this,P),this.m=a.m}else a&&(A=String(a).match(dl))?(this.h=!1,si(this,A[1]||"",!0),this.o=gr(A[2]||""),this.g=gr(A[3]||"",!0),ai(this,A[4]),this.l=gr(A[5]||"",!0),pl(this,A[6]||"",!0),this.m=gr(A[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}yn.prototype.toString=function(){var a=[],A=this.j;A&&a.push(yr(A,ml,!0),":");var P=this.g;return(P||A=="file")&&(a.push("//"),(A=this.o)&&a.push(yr(A,ml,!0),"@"),a.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&a.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&a.push("/"),a.push(yr(P,P.charAt(0)=="/"?Rd:Pd,!0))),(P=this.i.toString())&&a.push("?",P),(P=this.m)&&a.push("#",yr(P,jd)),a.join("")};function Ft(a){return new yn(a)}function si(a,A,P){a.j=P?gr(A,!0):A,a.j&&(a.j=a.j.replace(/:$/,""))}function ai(a,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);a.s=A}else a.s=null}function pl(a,A,P){A instanceof vr?(a.i=A,Ld(a.i,a.h)):(P||(A=yr(A,Cd)),a.i=new vr(A,a.h))}function Fe(a,A,P){a.i.set(A,P)}function li(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function gr(a,A){return a?A?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yr(a,A,P){return typeof a=="string"?(a=encodeURI(a).replace(A,Od),P&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Od(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ml=/[#\/\?@]/g,Pd=/[#\?:]/g,Rd=/[#\?]/g,Cd=/[#\?@]/g,jd=/#/g;function vr(a,A){this.h=this.g=null,this.i=a||null,this.j=!!A}function Zt(a){a.g||(a.g=new Map,a.h=0,a.i&&Sd(a.i,function(A,P){a.add(decodeURIComponent(A.replace(/\+/g," ")),P)}))}n=vr.prototype,n.add=function(a,A){Zt(this),this.i=null,a=Nn(this,a);var P=this.g.get(a);return P||this.g.set(a,P=[]),P.push(A),this.h+=1,this};function gl(a,A){Zt(a),A=Nn(a,A),a.g.has(A)&&(a.i=null,a.h-=a.g.get(A).length,a.g.delete(A))}function yl(a,A){return Zt(a),A=Nn(a,A),a.g.has(A)}n.forEach=function(a,A){Zt(this),this.g.forEach(function(P,L){P.forEach(function(Q){a.call(A,Q,L,this)},this)},this)},n.na=function(){Zt(this);const a=Array.from(this.g.values()),A=Array.from(this.g.keys()),P=[];for(let L=0;L<A.length;L++){const Q=a[L];for(let Z=0;Z<Q.length;Z++)P.push(A[L])}return P},n.V=function(a){Zt(this);let A=[];if(typeof a=="string")yl(this,a)&&(A=A.concat(this.g.get(Nn(this,a))));else{a=Array.from(this.g.values());for(let P=0;P<a.length;P++)A=A.concat(a[P])}return A},n.set=function(a,A){return Zt(this),this.i=null,a=Nn(this,a),yl(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[A]),this.h+=1,this},n.get=function(a,A){return a?(a=this.V(a),0<a.length?String(a[0]):A):A};function vl(a,A,P){gl(a,A),0<P.length&&(a.i=null,a.g.set(Nn(a,A),y(P)),a.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],A=Array.from(this.g.keys());for(var P=0;P<A.length;P++){var L=A[P];const Z=encodeURIComponent(String(L)),ue=this.V(L);for(L=0;L<ue.length;L++){var Q=Z;ue[L]!==""&&(Q+="="+encodeURIComponent(String(ue[L]))),a.push(Q)}}return this.i=a.join("&")};function Nn(a,A){return A=String(A),a.j&&(A=A.toLowerCase()),A}function Ld(a,A){A&&!a.j&&(Zt(a),a.i=null,a.g.forEach(function(P,L){var Q=L.toLowerCase();L!=Q&&(gl(this,L),vl(this,Q,P))},a)),a.j=A}function Dd(a,A){const P=new pr;if(l.Image){const L=new Image;L.onload=p(Jt,P,"TestLoadImage: loaded",!0,A,L),L.onerror=p(Jt,P,"TestLoadImage: error",!1,A,L),L.onabort=p(Jt,P,"TestLoadImage: abort",!1,A,L),L.ontimeout=p(Jt,P,"TestLoadImage: timeout",!1,A,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=a}else A(!1)}function Md(a,A){const P=new pr,L=new AbortController,Q=setTimeout(()=>{L.abort(),Jt(P,"TestPingServer: timeout",!1,A)},1e4);fetch(a,{signal:L.signal}).then(Z=>{clearTimeout(Q),Z.ok?Jt(P,"TestPingServer: ok",!0,A):Jt(P,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Q),Jt(P,"TestPingServer: error",!1,A)})}function Jt(a,A,P,L,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),L(P)}catch{}}function Vd(){this.g=new bd}function qd(a,A,P){const L=P||"";try{hl(a,function(Q,Z){let ue=Q;h(Q)&&(ue=Po(Q)),A.push(L+Z+"="+encodeURIComponent(ue))})}catch(Q){throw A.push(L+"type="+encodeURIComponent("_badmap")),Q}}function ui(a){this.l=a.Ub||null,this.j=a.eb||!1}_(ui,Ro),ui.prototype.g=function(){return new ci(this.l,this.j)},ui.prototype.i=function(a){return function(){return a}}({});function ci(a,A){Le.call(this),this.D=a,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ci,Le),n=ci.prototype,n.open=function(a,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=A,this.readyState=1,br(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(A.body=a),(this.D||l).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var A=a.value?a.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!a.done}))&&(this.response=this.responseText+=A)}a.done?_r(this):br(this),this.readyState==3&&_l(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_r(this))},n.Qa=function(a){this.g&&(this.response=a,_r(this))},n.ga=function(){this.g&&_r(this)};function _r(a){a.readyState=4,a.l=null,a.j=null,a.v=null,br(a)}n.setRequestHeader=function(a,A){this.u.append(a,A)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],A=this.h.entries();for(var P=A.next();!P.done;)P=P.value,a.push(P[0]+": "+P[1]),P=A.next();return a.join(`\r
`)};function br(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bl(a){let A="";return R(a,function(P,L){A+=L,A+=":",A+=P,A+=`\r
`}),A}function $o(a,A,P){e:{for(L in P){var L=!1;break e}L=!0}L||(P=bl(P),typeof a=="string"?P!=null&&encodeURIComponent(String(P)):Fe(a,A,P))}function He(a){Le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(He,Le);var Fd=/^https?$/i,Bd=["POST","PUT"];n=He.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,A,P,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);A=A?A.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lo.g(),this.v=this.o?Qa(this.o):Qa(Lo),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(A,String(a),!0),this.B=!1}catch(Z){wl(this,Z);return}if(a=P||"",P=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Q in L)P.set(Q,L[Q]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Z of L.keys())P.set(Z,L.get(Z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(P.keys()).find(Z=>Z.toLowerCase()=="content-type"),Q=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Bd,A,void 0))||L||Q||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ue]of P)this.g.setRequestHeader(Z,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xl(this),this.u=!0,this.g.send(a),this.u=!1}catch(Z){wl(this,Z)}};function wl(a,A){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=A,a.m=5,El(a),fi(a)}function El(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),He.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tl(this):this.bb())},n.bb=function(){Tl(this)};function Tl(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Bt(a)!=4||a.Z()!=2)){if(a.u&&Bt(a)==4)ti(a.Ea,0,a);else if(qe(a,"readystatechange"),Bt(a)==4){a.h=!1;try{const ue=a.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var P;if(!(P=A)){var L;if(L=ue===0){var Q=String(a.D).match(dl)[1]||null;!Q&&l.self&&l.self.location&&(Q=l.self.location.protocol.slice(0,-1)),L=!Fd.test(Q?Q.toLowerCase():"")}P=L}if(P)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var Z=2<Bt(a)?a.g.statusText:""}catch{Z=""}a.l=Z+" ["+a.Z()+"]",El(a)}}finally{fi(a)}}}}function fi(a,A){if(a.g){xl(a);const P=a.g,L=a.v[0]?()=>{}:null;a.g=null,a.v=null,A||qe(a,"ready");try{P.onreadystatechange=L}catch{}}}function xl(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Bt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var A=this.g.responseText;return a&&A.indexOf(a)==0&&(A=A.substring(a.length)),_d(A)}};function Al(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $d(a){const A={};a=(a.g&&2<=Bt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<a.length;L++){if(b(a[L]))continue;var P=T(a[L]);const Q=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Z=A[Q]||[];A[Q]=Z,Z.push(P)}w(A,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(a,A,P){return P&&P.internalChannelParams&&P.internalChannelParams[a]||A}function kl(a){this.Aa=0,this.i=[],this.j=new pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,a),this.cb=wr("retryDelaySeedMs",1e4,a),this.Wa=wr("forwardChannelMaxRetries",2,a),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new al(a&&a.concurrentRequestLimit),this.Da=new Vd,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(a,A,P,L){pt(0),this.W=a,this.H=A||{},P&&L!==void 0&&(this.H.OSID=P,this.H.OAID=L),this.F=this.X,this.I=Ll(this,null,this.W),di(this)};function Uo(a){if(Il(a),a.G==3){var A=a.U++,P=Ft(a.I);if(Fe(P,"SID",a.K),Fe(P,"RID",A),Fe(P,"TYPE","terminate"),Er(a,P),A=new Xt(a,a.j,A),A.L=2,A.v=li(Ft(P)),P=!1,l.navigator&&l.navigator.sendBeacon)try{P=l.navigator.sendBeacon(A.v.toString(),"")}catch{}!P&&l.Image&&(new Image().src=A.v,P=!0),P||(A.g=Dl(A.j,null),A.g.ea(A.v)),A.F=Date.now(),oi(A)}jl(a)}function hi(a){a.g&&(Ho(a),a.g.cancel(),a.g=null)}function Il(a){hi(a),a.u&&(l.clearTimeout(a.u),a.u=null),pi(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function di(a){if(!ll(a.h)&&!a.s){a.s=!0;var A=a.Ga;G||B(),re||(G(),re=!0),z.add(A,a),a.B=0}}function Ud(a,A){return ul(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=A.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=dr(c(a.Ga,a,A),Cl(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const Q=new Xt(this,this.j,a);let Z=this.o;if(this.S&&(Z?(Z=E(Z),x(Z,this.S)):Z=this.S),this.m!==null||this.O||(Q.H=Z,Z=null),this.P)e:{for(var A=0,P=0;P<this.i.length;P++){t:{var L=this.i[P];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=P;break e}if(A===4096||P===this.i.length-1){A=P+1;break e}}A=1e3}else A=1e3;A=Sl(this,Q,A),P=Ft(this.I),Fe(P,"RID",a),Fe(P,"CVER",22),this.D&&Fe(P,"X-HTTP-Session-Id",this.D),Er(this,P),Z&&(this.O?A="headers="+encodeURIComponent(String(bl(Z)))+"&"+A:this.m&&$o(P,this.m,Z)),Bo(this.h,Q),this.Ua&&Fe(P,"TYPE","init"),this.P?(Fe(P,"$req",A),Fe(P,"SID","null"),Q.T=!0,Mo(Q,P,null)):Mo(Q,P,A),this.G=2}}else this.G==3&&(a?Nl(this,a):this.i.length==0||ll(this.h)||Nl(this))};function Nl(a,A){var P;A?P=A.l:P=a.U++;const L=Ft(a.I);Fe(L,"SID",a.K),Fe(L,"RID",P),Fe(L,"AID",a.T),Er(a,L),a.m&&a.o&&$o(L,a.m,a.o),P=new Xt(a,a.j,P,a.B+1),a.m===null&&(P.H=a.o),A&&(a.i=A.D.concat(a.i)),A=Sl(a,P,1e3),P.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bo(a.h,P),Mo(P,L,A)}function Er(a,A){a.H&&R(a.H,function(P,L){Fe(A,L,P)}),a.l&&hl({},function(P,L){Fe(A,L,P)})}function Sl(a,A,P){P=Math.min(a.i.length,P);var L=a.l?c(a.l.Na,a.l,a):null;e:{var Q=a.i;let Z=-1;for(;;){const ue=["count="+P];Z==-1?0<P?(Z=Q[0].g,ue.push("ofs="+Z)):Z=0:ue.push("ofs="+Z);let Me=!0;for(let rt=0;rt<P;rt++){let Ce=Q[rt].g;const at=Q[rt].map;if(Ce-=Z,0>Ce)Z=Math.max(0,Q[rt].g-100),Me=!1;else try{qd(at,ue,"req"+Ce+"_")}catch{L&&L(at)}}if(Me){L=ue.join("&");break e}}}return a=a.i.splice(0,P),A.D=a,L}function Ol(a){if(!a.g&&!a.u){a.Y=1;var A=a.Fa;G||B(),re||(G(),re=!0),z.add(A,a),a.v=0}}function zo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=dr(c(a.Fa,a),Cl(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Pl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=dr(c(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),hi(this),Pl(this))};function Ho(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Pl(a){a.g=new Xt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var A=Ft(a.qa);Fe(A,"RID","rpc"),Fe(A,"SID",a.K),Fe(A,"AID",a.T),Fe(A,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(A,"TO",a.ja),Fe(A,"TYPE","xmlhttp"),Er(a,A),a.m&&a.o&&$o(A,a.m,a.o),a.L&&(a.g.I=a.L);var P=a.g;a=a.ia,P.L=1,P.v=li(Ft(A)),P.m=null,P.P=!0,il(P,a)}n.Za=function(){this.C!=null&&(this.C=null,hi(this),zo(this),pt(19))};function pi(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Rl(a,A){var P=null;if(a.g==A){pi(a),Ho(a),a.g=null;var L=2}else if(Fo(a.h,A))P=A.D,cl(a.h,A),L=1;else return;if(a.G!=0){if(A.o)if(L==1){P=A.m?A.m.length:0,A=Date.now()-A.F;var Q=a.B;L=ni(),qe(L,new el(L,P)),di(a)}else Ol(a);else if(Q=A.s,Q==3||Q==0&&0<A.X||!(L==1&&Ud(a,A)||L==2&&zo(a)))switch(P&&0<P.length&&(A=a.h,A.i=A.i.concat(P)),Q){case 1:vn(a,5);break;case 4:vn(a,10);break;case 3:vn(a,6);break;default:vn(a,2)}}}function Cl(a,A){let P=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(P*=2),P*A}function vn(a,A){if(a.j.info("Error code "+A),A==2){var P=c(a.fb,a),L=a.Xa;const Q=!L;L=new yn(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||si(L,"https"),li(L),Q?Dd(L.toString(),P):Md(L.toString(),P)}else pt(2);a.G=0,a.l&&a.l.sa(A),jl(a),Il(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function jl(a){if(a.G=0,a.ka=[],a.l){const A=fl(a.h);(A.length!=0||a.i.length!=0)&&(m(a.ka,A),m(a.ka,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.ra()}}function Ll(a,A,P){var L=P instanceof yn?Ft(P):new yn(P);if(L.g!="")A&&(L.g=A+"."+L.g),ai(L,L.s);else{var Q=l.location;L=Q.protocol,A=A?A+"."+Q.hostname:Q.hostname,Q=+Q.port;var Z=new yn(null);L&&si(Z,L),A&&(Z.g=A),Q&&ai(Z,Q),P&&(Z.l=P),L=Z}return P=a.D,A=a.ya,P&&A&&Fe(L,P,A),Fe(L,"VER",a.la),Er(a,L),L}function Dl(a,A,P){if(A&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=a.Ca&&!a.pa?new He(new ui({eb:P})):new He(a.pa),A.Ha(a.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ml(){}n=Ml.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mi(){}mi.prototype.g=function(a,A){return new bt(a,A)};function bt(a,A){Le.call(this),this.g=new kl(A),this.l=a,this.h=A&&A.messageUrlParams||null,a=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(a?a["X-WebChannel-Content-Type"]=A.messageContentType:a={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(a?a["X-WebChannel-Client-Profile"]=A.va:a={"X-WebChannel-Client-Profile":A.va}),this.g.S=a,(a=A&&A.Sb)&&!b(a)&&(this.g.m=a),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!b(A)&&(this.g.D=A,a=this.h,a!==null&&A in a&&(a=this.h,A in a&&delete a[A])),this.j=new Sn(this)}_(bt,Le),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Uo(this.g)},bt.prototype.o=function(a){var A=this.g;if(typeof a=="string"){var P={};P.__data__=a,a=P}else this.u&&(P={},P.__data__=Po(a),a=P);A.i.push(new kd(A.Ya++,a)),A.G==3&&di(A)},bt.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,bt.aa.N.call(this)};function Vl(a){Co.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var A=a.__sm__;if(A){e:{for(const P in A){a=P;break e}a=void 0}(this.i=a)&&(a=this.i,A=A!==null&&a in A?A[a]:void 0),this.data=A}else this.data=a}_(Vl,Co);function ql(){jo.call(this),this.status=1}_(ql,jo);function Sn(a){this.g=a}_(Sn,Ml),Sn.prototype.ua=function(){qe(this.g,"a")},Sn.prototype.ta=function(a){qe(this.g,new Vl(a))},Sn.prototype.sa=function(a){qe(this.g,new ql)},Sn.prototype.ra=function(){qe(this.g,"b")},mi.prototype.createWebChannel=mi.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Jc=function(){return new mi},Zc=function(){return ni()},Xc=mn,gs={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,Si=ri,tl.COMPLETE="complete",Yc=tl,Ya.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Le.prototype.listen=Le.prototype.K,Ir=Ya,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Qc=He}).apply(typeof yi<"u"?yi:typeof self<"u"?self:typeof window<"u"?window:{});const Ql="@firebase/firestore",Yl="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qn="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Wd("@firebase/firestore");function jn(){return Tn.logLevel}function de(n,...e){if(Tn.logLevel<=zt.DEBUG){const t=e.map(Hs);Tn.debug(`Firestore (${Qn}): ${n}`,...t)}}function Wt(n,...e){if(Tn.logLevel<=zt.ERROR){const t=e.map(Hs);Tn.error(`Firestore (${Qn}): ${n}`,...t)}}function qn(n,...e){if(Tn.logLevel<=zt.WARN){const t=e.map(Hs);Tn.warn(`Firestore (${Qn}): ${n}`,...t)}}function Hs(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${Qn}) INTERNAL ASSERTION FAILED: `+n;throw Wt(e),new Error(e)}function je(n,e){n||ye()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}}class $m{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Um{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let o=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kt,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kt)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new ef(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new ct(e)}}class zm{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Hm{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new zm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Km{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Zd(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){je(this.o===void 0);const r=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,de("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Xl(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je(typeof t.token=="string"),this.R=t.token,new Xl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Gm(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ne(n,e){return n<e?-1:n>e?1:0}function ys(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ne(r,i);{const o=tf(),s=Wm(o.encode(Zl(n,t)),o.encode(Zl(e,t)));return s!==0?s:Ne(r,i)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function Zl(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Wm(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Fn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-62135596800,eu=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*eu);return new et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jl)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eu}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Jl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new et(0,0))}static max(){return new ve(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="__name__";class jt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return jt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=jt.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ne(e.length,t.length)}static compareSegments(e,t){const r=jt.isNumericId(e),i=jt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?jt.extractNumericId(e).compare(jt.extractNumericId(t)):ys(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tn.fromString(e.substring(4,e.length-2))}}class $e extends jt{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new $e(t)}static emptyPath(){return new $e([])}}const Qm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends jt{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return Qm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tu}static keyField(){return new ot([tu])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge($e.fromString(e))}static fromName(e){return new ge($e.fromString(e).popFirst(5))}static empty(){return new ge($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=-1;function Ym(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new rn(i,ge.empty(),e)}function Xm(n){return new rn(n.readTime,n.key,Dr)}class rn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rn(ve.min(),ge.empty(),Dr)}static max(){return new rn(ve.max(),ge.empty(),Dr)}}function Zm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yn(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==Jm)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const h=u;t(e[h]).next(f=>{s[h]=f,++l,l===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new ne((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function tg(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xn(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}io.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=-1;function oo(n){return n==null}function Mi(n){return n===0&&1/n==-1/0}function ng(n){return typeof n=="number"&&Number.isInteger(n)&&!Mi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="";function rg(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nu(e)),e=ig(n.get(t),e);return nu(e)}function ig(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case rf:t+="";break;default:t+=o}}return t}function nu(n){return n+rf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function of(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vi(this.root,e,this.comparator,!1)}getReverseIterator(){return new vi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vi(this.root,e,this.comparator,!0)}}class vi{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=o??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new it(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,i,o){return this}insert(e,t,r){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iu(this.data.getIterator())}getIteratorFrom(e){return new iu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class iu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Et([])}unionWith(e){let t=new tt(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Et(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fn(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new sf("Invalid base64 string: "+o):o}}(e);return new st(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new st(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const og=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(n){if(je(!!n),typeof n=="string"){let e=0;const t=og.exec(n);if(je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sn(n){return typeof n=="string"?st.fromBase64String(n):st.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="server_timestamp",lf="__type__",uf="__previous_value__",cf="__local_write_time__";function Gs(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[lf])===null||t===void 0?void 0:t.stringValue)===af}function so(n){const e=n.mapValue.fields[uf];return Gs(e)?so(e):e}function Mr(n){const e=on(n.mapValue.fields[cf].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,r,i,o,s,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const Vi="(default)";class Vr{constructor(e,t){this.projectId=e,this.database=t||Vi}static empty(){return new Vr("","")}get isDefaultDatabase(){return this.database===Vi}isEqual(e){return e instanceof Vr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="__type__",hf="__max__",_i={mapValue:{fields:{__type__:{stringValue:hf}}}},df="__vector__",qi="value";function an(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gs(n)?4:lg(n)?9007199254740991:ag(n)?10:11:ye()}function Vt(n,e){if(n===e)return!0;const t=an(n);if(t!==an(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mr(n).isEqual(Mr(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=on(i.timestampValue),l=on(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return sn(i.bytesValue).isEqual(sn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ge(i.doubleValue),l=Ge(o.doubleValue);return s===l?Mi(s)===Mi(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Fn(n.arrayValue.values||[],e.arrayValue.values||[],Vt);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(ru(s)!==ru(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Vt(s[u],l[u])))return!1;return!0}(n,e);default:return ye()}}function qr(n,e){return(n.values||[]).find(t=>Vt(t,e))!==void 0}function Bn(n,e){if(n===e)return 0;const t=an(n),r=an(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Ge(o.integerValue||o.doubleValue),u=Ge(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return ou(n.timestampValue,e.timestampValue);case 4:return ou(Mr(n),Mr(e));case 5:return ys(n.stringValue,e.stringValue);case 6:return function(o,s){const l=sn(o),u=sn(s);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=Ne(l[h],u[h]);if(f!==0)return f}return Ne(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const l=Ne(Ge(o.latitude),Ge(s.latitude));return l!==0?l:Ne(Ge(o.longitude),Ge(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return su(n.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,h,f;const d=o.fields||{},c=s.fields||{},p=(l=d[qi])===null||l===void 0?void 0:l.arrayValue,_=(u=c[qi])===null||u===void 0?void 0:u.arrayValue,y=Ne(((h=p==null?void 0:p.values)===null||h===void 0?void 0:h.length)||0,((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0);return y!==0?y:su(p,_)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===_i.mapValue&&s===_i.mapValue)return 0;if(o===_i.mapValue)return 1;if(s===_i.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),h=s.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let d=0;d<u.length&&d<f.length;++d){const c=ys(u[d],f[d]);if(c!==0)return c;const p=Bn(l[u[d]],h[f[d]]);if(p!==0)return p}return Ne(u.length,f.length)}(n.mapValue,e.mapValue);default:throw ye()}}function ou(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=on(n),r=on(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function su(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Bn(t[i],r[i]);if(o)return o}return Ne(t.length,r.length)}function $n(n){return vs(n)}function vs(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=on(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return sn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=vs(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${vs(t.fields[s])}`;return i+"}"}(n.mapValue):ye()}function Oi(n){switch(an(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=so(n);return e?16+Oi(e):16;case 5:return 2*n.stringValue.length;case 6:return sn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Oi(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return cn(r.fields,(o,s)=>{i+=o.length+Oi(s)}),i}(n.mapValue);default:throw ye()}}function au(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _s(n){return!!n&&"integerValue"in n}function Ws(n){return!!n&&"arrayValue"in n}function lu(n){return!!n&&"nullValue"in n}function uu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pi(n){return!!n&&"mapValue"in n}function ag(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ff])===null||t===void 0?void 0:t.stringValue)===df}function Pr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pr(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hf}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pr(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=l.popLast()}s?r[l.lastSegment()]=Pr(s):i.push(l.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Pi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cn(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _t(Pr(this.value))}}function pf(n){const e=[];return cn(n.fields,(t,r)=>{const i=new ot([t]);if(Pi(r)){const o=pf(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Et(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,i,o,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ve.min(),ve.min(),ve.min(),_t.empty(),0)}static newFoundDocument(e,t,r,i){return new ft(e,1,t,ve.min(),r,i,0)}static newNoDocument(e,t){return new ft(e,2,t,ve.min(),ve.min(),_t.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,ve.min(),ve.min(),_t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){this.position=e,this.inclusive=t}}function cu(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ge.comparator(ge.fromName(s.referenceValue),t.key):r=Bn(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fu(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t="asc"){this.field=e,this.dir=t}}function ug(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{}class Ze extends mf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fg(e,t,r):t==="array-contains"?new pg(e,r):t==="in"?new mg(e,r):t==="not-in"?new gg(e,r):t==="array-contains-any"?new yg(e,r):new Ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hg(e,r):new dg(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bn(t,this.value)):t!==null&&an(this.value)===an(t)&&this.matchesComparison(Bn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ot extends mf{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ot(e,t)}matches(e){return gf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function gf(n){return n.op==="and"}function yf(n){return cg(n)&&gf(n)}function cg(n){for(const e of n.filters)if(e instanceof Ot)return!1;return!0}function bs(n){if(n instanceof Ze)return n.field.canonicalString()+n.op.toString()+$n(n.value);if(yf(n))return n.filters.map(e=>bs(e)).join(",");{const e=n.filters.map(t=>bs(t)).join(",");return`${n.op}(${e})`}}function vf(n,e){return n instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Vt(r.value,i.value)}(n,e):n instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&vf(s,i.filters[l]),!0):!1}(n,e):void ye()}function _f(n){return n instanceof Ze?function(t){return`${t.field.canonicalString()} ${t.op} ${$n(t.value)}`}(n):n instanceof Ot?function(t){return t.op.toString()+" {"+t.getFilters().map(_f).join(" ,")+"}"}(n):"Filter"}class fg extends Ze{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class hg extends Ze{constructor(e,t){super(e,"in",t),this.keys=bf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dg extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=bf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bf(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ge.fromName(r.referenceValue))}class pg extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ws(t)&&qr(t.arrayValue,this.value)}}class mg extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qr(this.value.arrayValue,t)}}class gg extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(qr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!qr(this.value.arrayValue,t)}}class yg extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ws(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.le=null}}function hu(n,e=null,t=[],r=[],i=null,o=null,s=null){return new vg(n,e,t,r,i,o,s)}function Qs(n){const e=be(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bs(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),oo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$n(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$n(r)).join(",")),e.le=t}return e.le}function Ys(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ug(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fu(n.startAt,e.startAt)&&fu(n.endAt,e.endAt)}function ws(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function _g(n,e,t,r,i,o,s,l){return new Zn(n,e,t,r,i,o,s,l)}function ao(n){return new Zn(n)}function du(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wf(n){return n.collectionGroup!==null}function Rr(n){const e=be(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new tt(ot.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Fr(o,r))}),t.has(ot.keyField().canonicalString())||e.he.push(new Fr(ot.keyField(),r))}return e.he}function Lt(n){const e=be(n);return e.Pe||(e.Pe=bg(e,Rr(n))),e.Pe}function bg(n,e){if(n.limitType==="F")return hu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Fr(i.field,o)});const t=n.endAt?new Fi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fi(n.startAt.position,n.startAt.inclusive):null;return hu(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Es(n,e){const t=n.filters.concat([e]);return new Zn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ts(n,e,t){return new Zn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lo(n,e){return Ys(Lt(n),Lt(e))&&n.limitType===e.limitType}function Ef(n){return`${Qs(Lt(n))}|lt:${n.limitType}`}function Ln(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_f(i)).join(", ")}]`),oo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$n(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$n(i)).join(",")),`Target(${r})`}(Lt(n))}; limitType=${n.limitType})`}function uo(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Rr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const h=cu(s,l,u);return s.inclusive?h<=0:h<0}(r.startAt,Rr(r),i)||r.endAt&&!function(s,l,u){const h=cu(s,l,u);return s.inclusive?h>=0:h>0}(r.endAt,Rr(r),i))}(n,e)}function wg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tf(n){return(e,t)=>{let r=!1;for(const i of Rr(n)){const o=Eg(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Eg(n,e,t){const r=n.field.isKeyField()?ge.comparator(e.key,t.key):function(o,s,l){const u=s.data.field(o),h=l.data.field(o);return u!==null&&h!==null?Bn(u,h):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cn(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return of(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new ze(ge.comparator);function Qt(){return Tg}const xf=new ze(ge.comparator);function Nr(...n){let e=xf;for(const t of n)e=e.insert(t.key,t);return e}function Af(n){let e=xf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bn(){return Cr()}function kf(){return Cr()}function Cr(){return new An(n=>n.toString(),(n,e)=>n.isEqual(e))}const xg=new ze(ge.comparator),Ag=new tt(ge.comparator);function Pe(...n){let e=Ag;for(const t of n)e=e.add(t);return e}const kg=new tt(Ne);function Ig(){return kg}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mi(e)?"-0":e}}function If(n){return{integerValue:""+n}}function Ng(n,e){return ng(e)?If(e):Xs(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this._=void 0}}function Sg(n,e,t){return n instanceof Bi?function(i,o){const s={fields:{[lf]:{stringValue:af},[cf]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gs(o)&&(o=so(o)),o&&(s.fields[uf]=o),{mapValue:s}}(t,e):n instanceof Br?Sf(n,e):n instanceof $r?Of(n,e):function(i,o){const s=Nf(i,o),l=pu(s)+pu(i.Ie);return _s(s)&&_s(i.Ie)?If(l):Xs(i.serializer,l)}(n,e)}function Og(n,e,t){return n instanceof Br?Sf(n,e):n instanceof $r?Of(n,e):t}function Nf(n,e){return n instanceof $i?function(r){return _s(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Bi extends co{}class Br extends co{constructor(e){super(),this.elements=e}}function Sf(n,e){const t=Pf(e);for(const r of n.elements)t.some(i=>Vt(i,r))||t.push(r);return{arrayValue:{values:t}}}class $r extends co{constructor(e){super(),this.elements=e}}function Of(n,e){let t=Pf(e);for(const r of n.elements)t=t.filter(i=>!Vt(i,r));return{arrayValue:{values:t}}}class $i extends co{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function pu(n){return Ge(n.integerValue||n.doubleValue)}function Pf(n){return Ws(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Pg(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Br&&i instanceof Br||r instanceof $r&&i instanceof $r?Fn(r.elements,i.elements,Vt):r instanceof $i&&i instanceof $i?Vt(r.Ie,i.Ie):r instanceof Bi&&i instanceof Bi}(n.transform,e.transform)}class Rg{constructor(e,t){this.version=e,this.transformResults=t}}class gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ri(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fo{}function Rf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ho(n.key,gt.none()):new zr(n.key,n.data,gt.none());{const t=n.data,r=_t.empty();let i=new tt(ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fn(n.key,r,new Et(i.toArray()),gt.none())}}function Cg(n,e,t){n instanceof zr?function(i,o,s){const l=i.value.clone(),u=gu(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fn?function(i,o,s){if(!Ri(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=gu(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Cf(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function jr(n,e,t,r){return n instanceof zr?function(o,s,l,u){if(!Ri(o.precondition,s))return l;const h=o.value.clone(),f=yu(o.fieldTransforms,u,s);return h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof fn?function(o,s,l,u){if(!Ri(o.precondition,s))return l;const h=yu(o.fieldTransforms,u,s),f=s.data;return f.setAll(Cf(o)),f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(o,s,l){return Ri(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(n,e,t)}function jg(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Nf(r.transform,i||null);o!=null&&(t===null&&(t=_t.empty()),t.set(r.field,o))}return t||null}function mu(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fn(r,i,(o,s)=>Pg(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zr extends fo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fn extends fo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Cf(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gu(n,e,t){const r=new Map;je(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,Og(s,l,t[i]))}return r}function yu(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Sg(o,s,e))}return r}class ho extends fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lg extends fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Cg(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jr(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kf();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=t.has(i.key)?null:l;const u=Rf(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Fn(this.mutations,e.mutations,(t,r)=>mu(t,r))&&Fn(this.baseMutations,e.baseMutations,(t,r)=>mu(t,r))}}class Zs{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){je(e.mutations.length===r.length);let i=function(){return xg}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Zs(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,Re;function qg(n){switch(n){case te.OK:return ye();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ye()}}function jf(n){if(n===void 0)return Wt("GRPC error has no .code"),te.UNKNOWN;switch(n){case Xe.OK:return te.OK;case Xe.CANCELLED:return te.CANCELLED;case Xe.UNKNOWN:return te.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return te.INTERNAL;case Xe.UNAVAILABLE:return te.UNAVAILABLE;case Xe.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Xe.NOT_FOUND:return te.NOT_FOUND;case Xe.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Xe.ABORTED:return te.ABORTED;case Xe.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Xe.DATA_LOSS:return te.DATA_LOSS;default:return ye()}}(Re=Xe||(Xe={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new tn([4294967295,4294967295],0);function vu(n){const e=tf().encode(n),t=new Wc;return t.update(e),new Uint8Array(t.digest())}function _u(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new tn([t,r],0),new tn([i,o],0)]}class Js{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Sr(`Invalid padding: ${t}`);if(r<0)throw new Sr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Sr(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=tn.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(tn.fromNumber(r)));return i.compare(Fg)===1&&(i=new tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=vu(e),[r,i]=_u(t);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Js(o,i,t);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ee===0)return;const t=vu(e),[r,i]=_u(t);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Sr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Hr.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new po(ve.min(),i,new ze(Ne),Qt(),Pe())}}class Hr{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Hr(r,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class Lf{constructor(e,t){this.targetId=e,this.ge=t}}class Df{constructor(e,t,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bu{constructor(){this.pe=0,this.ye=wu(),this.we=st.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Pe(),t=Pe(),r=Pe();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new Hr(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=wu()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,je(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Bg{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Qt(),this.$e=bi(),this.Ue=bi(),this.Ke=new ze(Ne)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const o=i.target;if(ws(o))if(r===0){const s=new ge(o.path);this.ze(t,s,ft.newNoDocument(s,ve.min()))}else je(r===1);else{const s=this.et(t);if(s!==r){const l=this.tt(e),u=l?this.nt(l,e,s):1;if(u!==0){this.Ye(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,l;try{s=sn(r).toUint8Array()}catch(u){if(u instanceof sf)return qn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Js(s,i,o)}catch(u){return qn(u instanceof Sr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.ke.it(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.ze(t,o,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((o,s)=>{const l=this.Xe(s);if(l){if(o.current&&ws(l.target)){const u=new ge(l.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,ft.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Pe();this.Ue.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));const i=new po(e,t,this.Ke,this.Qe,r);return this.Qe=Qt(),this.$e=bi(),this.Ue=bi(),this.Ke=new ze(Ne),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new bu,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new tt(Ne),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new tt(Ne),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new bu),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function bi(){return new ze(ge.comparator)}function wu(){return new ze(ge.comparator)}const $g={asc:"ASCENDING",desc:"DESCENDING"},Ug={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zg={and:"AND",or:"OR"};class Hg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xs(n,e){return n.useProto3Json||oo(e)?e:{value:e}}function Ui(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Kg(n,e){return Ui(n,e.toTimestamp())}function Dt(n){return je(!!n),ve.fromTimestamp(function(t){const r=on(t);return new et(r.seconds,r.nanos)}(n))}function ea(n,e){return As(n,e).canonicalString()}function As(n,e){const t=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Vf(n){const e=$e.fromString(n);return je(Uf(e)),e}function ks(n,e){return ea(n.databaseId,e.path)}function Go(n,e){const t=Vf(e);if(t.get(1)!==n.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(Ff(t))}function qf(n,e){return ea(n.databaseId,e)}function Gg(n){const e=Vf(n);return e.length===4?$e.emptyPath():Ff(e)}function Is(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ff(n){return je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Eu(n,e,t){return{name:ks(n,e),fields:t.value.mapValue.fields}}function Wg(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(je(f===void 0||typeof f=="string"),st.fromBase64String(f||"")):(je(f===void 0||f instanceof Buffer||f instanceof Uint8Array),st.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(h){const f=h.code===void 0?te.UNKNOWN:jf(h.code);return new he(f,h.message||"")}(s);t=new Df(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Go(n,r.document.name),o=Dt(r.document.updateTime),s=r.document.createTime?Dt(r.document.createTime):ve.min(),l=new _t({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(i,o,s,l),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Ci(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Go(n,r.document),o=r.readTime?Dt(r.readTime):ve.min(),s=ft.newNoDocument(i,o),l=r.removedTargetIds||[];t=new Ci([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Go(n,r.document),o=r.removedTargetIds||[];t=new Ci([],o,i,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Vg(i,o),l=r.targetId;t=new Lf(l,s)}}return t}function Qg(n,e){let t;if(e instanceof zr)t={update:Eu(n,e.key,e.value)};else if(e instanceof ho)t={delete:ks(n,e.key)};else if(e instanceof fn)t={update:Eu(n,e.key,e.data),updateMask:iy(e.fieldMask)};else{if(!(e instanceof Lg))return ye();t={verify:ks(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Bi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Br)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $r)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $i)return{fieldPath:s.field.canonicalString(),increment:l.Ie};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Kg(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye()}(n,e.precondition)),t}function Yg(n,e){return n&&n.length>0?(je(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Dt(i.updateTime):Dt(o);return s.isEqual(ve.min())&&(s=Dt(o)),new Rg(s,i.transformResults||[])}(t,e))):[]}function Xg(n,e){return{documents:[qf(n,e.path)]}}function Zg(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qf(n,i);const o=function(h){if(h.length!==0)return $f(Ot.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(h){if(h.length!==0)return h.map(f=>function(c){return{field:Dn(c.field),direction:ty(c.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=xs(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function Jg(n){let e=Gg(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){je(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(d){const c=Bf(d);return c instanceof Ot&&yf(c)?c.getFilters():[c]}(t.where));let s=[];t.orderBy&&(s=function(d){return d.map(c=>function(_){return new Fr(Mn(_.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(c))}(t.orderBy));let l=null;t.limit&&(l=function(d){let c;return c=typeof d=="object"?d.value:d,oo(c)?null:c}(t.limit));let u=null;t.startAt&&(u=function(d){const c=!!d.before,p=d.values||[];return new Fi(p,c)}(t.startAt));let h=null;return t.endAt&&(h=function(d){const c=!d.before,p=d.values||[];return new Fi(p,c)}(t.endAt)),_g(e,i,s,o,l,"F",u,h)}function ey(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Bf(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Mn(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mn(t.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Mn(t.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Mn(t.unaryFilter.field);return Ze.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return Ze.create(Mn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ot.create(t.compositeFilter.filters.map(r=>Bf(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function ty(n){return $g[n]}function ny(n){return Ug[n]}function ry(n){return zg[n]}function Dn(n){return{fieldPath:n.canonicalString()}}function Mn(n){return ot.fromServerFormat(n.fieldPath)}function $f(n){return n instanceof Ze?function(t){if(t.op==="=="){if(uu(t.value))return{unaryFilter:{field:Dn(t.field),op:"IS_NAN"}};if(lu(t.value))return{unaryFilter:{field:Dn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uu(t.value))return{unaryFilter:{field:Dn(t.field),op:"IS_NOT_NAN"}};if(lu(t.value))return{unaryFilter:{field:Dn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dn(t.field),op:ny(t.op),value:t.value}}}(n):n instanceof Ot?function(t){const r=t.getFilters().map(i=>$f(i));return r.length===1?r[0]:{compositeFilter:{op:ry(t.op),filters:r}}}(n):ye()}function iy(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,r,i,o=ve.min(),s=ve.min(),l=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new en(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new en(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.Tt=e}}function sy(n){const e=Jg({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ts(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Tn=new ly}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(rn.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class ly{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt($e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zf=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(zf,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Un(0)}static Kn(){return new Un(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="LruGarbageCollector",uy=1048576;function Au([n,e],[t,r]){const i=Ne(n,t);return i===0?Ne(e,r):i}class cy{constructor(e){this.Hn=e,this.buffer=new tt(Au),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Au(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fy{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(xu,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xn(t)?de(xu,"Ignoring IndexedDB error during garbage collection: ",t):await Yn(t)}await this.er(3e5)})}}class hy{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(io.ae);const r=new cy(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Tu)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tu):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,l=Date.now(),this.removeTargets(e,r,t))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(h=Date.now(),jn()<=zt.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${d} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}function dy(n,e){return new hy(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.changes=new An(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&jr(r.mutation,i,Et.empty(),et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pe()){const i=bn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nr();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pe()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{t.set(s,l)})})}computeViews(e,t,r,i){let o=Qt();const s=Cr(),l=function(){return Cr()}();return t.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof fn)?o=o.insert(h.key,h):f!==void 0?(s.set(h.key,f.mutation.getFieldMask()),jr(f.mutation,h,f.mutation.getFieldMask(),et.now())):s.set(h.key,Et.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((h,f)=>s.set(h,f)),t.forEach((h,f)=>{var d;return l.set(h,new my(f,(d=s.get(h))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Cr();let i=new ze((s,l)=>s-l),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const l of s)l.keys().forEach(u=>{const h=t.get(u);if(h===null)return;let f=r.get(u)||Et.empty();f=l.applyToLocalView(h,f),r.set(u,f);const d=(i.get(l.batchId)||Pe()).add(u);i=i.insert(l.batchId,d)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,d=kf();f.forEach(c=>{if(!o.has(c)){const p=Rf(t.get(c),r.get(c));p!==null&&d.set(c,p),o=o.add(c)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,d))}return ne.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ne.resolve(bn());let l=Dr,u=o;return s.next(h=>ne.forEach(h,(f,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),o.get(f)?ne.resolve():this.remoteDocumentCache.getEntry(e,f).next(c=>{u=u.insert(f,c)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,u,h,Pe())).next(f=>({batchId:l,changes:Af(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(r=>{let i=Nr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Nr();return this.indexManager.getCollectionParents(e,o).next(l=>ne.forEach(l,u=>{const h=function(d,c){return new Zn(c,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((d,c)=>{s=s.insert(d,c)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,h)=>{const f=h.getKey();s.get(f)===null&&(s=s.insert(f,ft.newInvalidDocument(f)))});let l=Nr();return s.forEach((u,h)=>{const f=o.get(u);f!==void 0&&jr(f.mutation,h,Et.empty(),et.now()),uo(t,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Dt(i.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:sy(i.bundledQuery),readTime:Dt(i.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.overlays=new ze(ge.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bn();return ne.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=bn(),o=t.length+1,s=new ge(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ze((h,f)=>h-f);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=o.get(h.largestBatchId);f===null&&(f=bn(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=bn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return ne.resolve(l)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Mg(t,r));let o=this.Rr.get(t);o===void 0&&(o=Pe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.Vr=new tt(nt.mr),this.gr=new tt(nt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new nt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new nt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new ge(new $e([])),r=new nt(t,e),i=new nt(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ge(new $e([])),r=new nt(t,e),i=new nt(t,e+1);let o=Pe();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new nt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ge.comparator(e.key,t.key)||Ne(e.Cr,t.Cr)}static pr(e,t){return Ne(e.Cr,t.Cr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new tt(nt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Dg(o,t,r,i);this.mutationQueue.push(s);for(const l of i)this.Mr=this.Mr.add(new nt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(s)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),o=i<0?0:i;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Ks:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new nt(t,0),i=new nt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{const l=this.Or(s.Cr);o.push(l)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(Ne);return t.forEach(i=>{const o=new nt(i,0),s=new nt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],l=>{r=r.add(l.Cr)})}),ne.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;ge.isDocumentKey(o)||(o=o.child(""));const s=new nt(new ge(o),0);let l=new tt(Ne);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Cr)),!0)},s),ne.resolve(this.Br(l))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){je(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ne.forEach(t.mutations,i=>{const o=new nt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new nt(t,0),i=this.Mr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this.kr=e,this.docs=function(){return new ze(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=Qt();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ft.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Qt();const s=t.path,l=new ge(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||Zm(Xm(f),r)<=0||(i.has(f.key)||uo(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ye()}qr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ey(this)}getSize(e){return ne.resolve(this.size)}}class Ey extends py{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.persistence=e,this.Qr=new An(t=>Qs(t),Ys),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ta,this.targetCount=0,this.Kr=Un.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Un(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Qr.forEach((s,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ne.waitFor(o).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new io(0),this.zr=!1,this.zr=!0,this.jr=new _y,this.referenceDelegate=e(this),this.Hr=new Ty(this),this.indexManager=new ay,this.remoteDocumentCache=function(i){return new wy(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new oy(t),this.Yr=new yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new by(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const i=new xy(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class xy extends eg{constructor(e){super(),this.currentSequenceNumber=e}}class na{constructor(e){this.persistence=e,this.ti=new ta,this.ni=null}static ri(e){return new na(e)}get ii(){if(this.ni)return this.ni;throw ye()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,r=>{const i=ge.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ve.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class zi{constructor(e,t){this.persistence=e,this.oi=new An(r=>rg(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=dy(this,t)}static ri(e,t){return new zi(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?ne.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(l=>{l||(r++,o.removeEntry(s,ve.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Oi(e.data.value)),t}ar(e,t,r){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Pe(),i=Pe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ra(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return op()?8:tg(sp())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Ay;return this._s(e,t,s).next(l=>{if(o.result=l,this.Xi)return this.us(e,t,s,l.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(jn()<=zt.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ln(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(jn()<=zt.DEBUG&&de("QueryEngine","Query:",Ln(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(jn()<=zt.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ln(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lt(t))):ne.resolve())}rs(e,t){if(du(t))return ne.resolve(null);let r=Lt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ts(t,null,"F"),r=Lt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Pe(...o);return this.ns.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.cs(t,l);return this.ls(t,h,s,u.readTime)?this.rs(e,Ts(t,null,"F")):this.hs(e,h,t,u)}))})))}ss(e,t,r,i){return du(t)||i.isEqual(ve.min())?ne.resolve(null):this.ns.getDocuments(e,r).next(o=>{const s=this.cs(t,o);return this.ls(t,s,r,i)?ne.resolve(null):(jn()<=zt.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ln(t)),this.hs(e,s,t,Ym(i,Dr)).next(l=>l))})}cs(e,t){let r=new tt(Tf(e));return t.forEach((i,o)=>{uo(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return jn()<=zt.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ln(t)),this.ns.getDocumentsMatchingQuery(e,t,rn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="LocalStore",Iy=3e8;class Ny{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ze(Ne),this.Is=new An(o=>Qs(o),Ys),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gy(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Sy(n,e,t,r){return new Ny(n,e,t,r)}async function Kf(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=Pe();for(const h of i){s.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of o){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(h=>({Rs:h,removedBatchIds:s,addedBatchIds:l}))})})}function Oy(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const d=h.batch,c=d.keys();let p=ne.resolve();return c.forEach(_=>{p=p.next(()=>f.getEntry(u,_)).next(y=>{const m=h.docVersions.get(_);je(m!==null),y.version.compareTo(m)<0&&(d.applyToRemoteDocument(y,h),y.isValidDocument()&&(y.setReadTime(h.commitVersion),f.addEntry(y)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Gf(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Py(n,e){const t=be(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const l=[];e.targetChanges.forEach((f,d)=>{const c=i.get(d);if(!c)return;l.push(t.Hr.removeMatchingKeys(o,f.removedDocuments,d).next(()=>t.Hr.addMatchingKeys(o,f.addedDocuments,d)));let p=c.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(st.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),function(y,m,g){return y.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Iy?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(c,p,f)&&l.push(t.Hr.updateTargetData(o,p))});let u=Qt(),h=Pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(Ry(o,s,e.documentUpdates).next(f=>{u=f.Vs,h=f.fs})),!r.isEqual(ve.min())){const f=t.Hr.getLastRemoteSnapshotVersion(o).next(d=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(f)}return ne.waitFor(l).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(t.Ts=i,o))}function Ry(n,e,t){let r=Pe(),i=Pe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Qt();return t.forEach((l,u)=>{const h=o.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ve.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):de(ia,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function Cy(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ks),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jy(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,ne.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new en(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Ns(n,e,t){const r=be(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Xn(s))throw s;de(ia,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function ku(n,e,t){const r=be(n);let i=ve.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,h,f){const d=be(u),c=d.Is.get(f);return c!==void 0?ne.resolve(d.Ts.get(c)):d.Hr.getTargetData(h,f)}(r,s,Lt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:ve.min(),t?o:Pe())).next(l=>(Ly(r,wg(e),l),{documents:l,gs:o})))}function Ly(n,e,t){let r=n.Es.get(e)||ve.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class Iu{constructor(){this.activeTargetIds=Ig()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dy{constructor(){this.ho=new Iu,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Iu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu="ConnectivityMonitor";class Su{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(Nu,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(Nu,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi=null;function Ss(){return wi===null?wi=function(){return 268435456+Math.round(2147483648*Math.random())}():wi++,"0x"+wi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RestConnection",Vy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qy{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Vi?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){const s=Ss(),l=this.bo(e,t.toUriEncodedString());de(Wo,`Sending RPC '${e}' ${s}:`,l,r);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,l,u,r).then(h=>(de(Wo,`Received RPC '${e}' ${s}: `,h),h),h=>{throw qn(Wo,`RPC '${e}' ${s} failed with error: `,h,"url: ",l,"request:",r),h})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){const r=Vy[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class By extends qy{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const o=Ss();return new Promise((s,l)=>{const u=new Qc;u.setWithCredentials(!0),u.listenOnce(Yc.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Si.NO_ERROR:const f=u.getResponseJson();de(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Si.TIMEOUT:de(ut,`RPC '${e}' ${o} timed out`),l(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Si.HTTP_ERROR:const d=u.getStatus();if(de(ut,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let c=u.getResponseJson();Array.isArray(c)&&(c=c[0]);const p=c==null?void 0:c.error;if(p&&p.status&&p.message){const _=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(g)>=0?g:te.UNKNOWN}(p.status);l(new he(_,p.message))}else l(new he(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new he(te.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{de(ut,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);de(ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",h,r,15)})}Wo(e,t,r){const i=Ss(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jc(),l=Zc(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=o.join("");de(ut,`Creating RPC '${e}' stream ${i}: ${f}`,u);const d=s.createWebChannel(f,u);let c=!1,p=!1;const _=new Fy({Fo:m=>{p?de(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(c||(de(ut,`Opening RPC '${e}' stream ${i} transport.`),d.open(),c=!0),de(ut,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},Mo:()=>d.close()}),y=(m,g,b)=>{m.listen(g,N=>{try{b(N)}catch(v){setTimeout(()=>{throw v},0)}})};return y(d,Ir.EventType.OPEN,()=>{p||(de(ut,`RPC '${e}' stream ${i} transport opened.`),_.Qo())}),y(d,Ir.EventType.CLOSE,()=>{p||(p=!0,de(ut,`RPC '${e}' stream ${i} transport closed`),_.Uo())}),y(d,Ir.EventType.ERROR,m=>{p||(p=!0,qn(ut,`RPC '${e}' stream ${i} transport errored:`,m),_.Uo(new he(te.UNAVAILABLE,"The operation could not be completed")))}),y(d,Ir.EventType.MESSAGE,m=>{var g;if(!p){const b=m.data[0];je(!!b);const N=b,v=(N==null?void 0:N.error)||((g=N[0])===null||g===void 0?void 0:g.error);if(v){de(ut,`RPC '${e}' stream ${i} received error:`,v);const O=v.status;let R=function(I){const x=Xe[I];if(x!==void 0)return jf(x)}(O),w=v.message;R===void 0&&(R=te.INTERNAL,w="Unknown error status: "+O+" with message "+v.message),p=!0,_.Uo(new he(R,w)),d.close()}else de(ut,`RPC '${e}' stream ${i} received:`,b),_.Ko(b)}}),y(l,Xc.STAT_EVENT,m=>{m.stat===gs.PROXY?de(ut,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===gs.NOPROXY&&de(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.$o()},0),_}}function Qo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(n){return new Hg(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="PersistentStream";class Qf{constructor(e,t,r,i,o,s,l,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Wf(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new he(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(Ou,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(Ou,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $y extends Qf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Wg(this.serializer,e),r=function(o){if(!("targetChange"in o))return ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ve.min():s.readTime?Dt(s.readTime):ve.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Is(this.serializer),t.addTarget=function(o,s){let l;const u=s.target;if(l=ws(u)?{documents:Xg(o,u)}:{query:Zg(o,u).ht},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=Mf(o,s.resumeToken);const h=xs(o,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(ve.min())>0){l.readTime=Ui(o,s.snapshotVersion.toTimestamp());const h=xs(o,s.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=ey(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Is(this.serializer),t.removeTarget=e,this.I_(t)}}class Uy extends Qf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Yg(e.writeResults,e.commitTime),r=Dt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Is(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qg(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{}class Hy extends zy{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,As(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(te.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Co(e,As(t,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(te.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Ky{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Wt(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="RemoteStore";class Gy{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(async()=>{kn(this)&&(de(xn,"Restarting streams for network reachability change."),await async function(u){const h=be(u);h.W_.add(4),await Kr(h),h.j_.set("Unknown"),h.W_.delete(4),await go(h)}(this))})}),this.j_=new Ky(r,i)}}async function go(n){if(kn(n))for(const e of n.G_)await e(!0)}async function Kr(n){for(const e of n.G_)await e(!1)}function Yf(n,e){const t=be(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),la(t)?aa(t):Jn(t).c_()&&sa(t,e))}function oa(n,e){const t=be(n),r=Jn(t);t.K_.delete(e),r.c_()&&Xf(t,e),t.K_.size===0&&(r.c_()?r.P_():kn(t)&&t.j_.set("Unknown"))}function sa(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jn(n).y_(e)}function Xf(n,e){n.H_.Ne(e),Jn(n).w_(e)}function aa(n){n.H_=new Bg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Jn(n).start(),n.j_.B_()}function la(n){return kn(n)&&!Jn(n).u_()&&n.K_.size>0}function kn(n){return be(n).W_.size===0}function Zf(n){n.H_=void 0}async function Wy(n){n.j_.set("Online")}async function Qy(n){n.K_.forEach((e,t)=>{sa(n,e)})}async function Yy(n,e){Zf(n),la(n)?(n.j_.q_(e),aa(n)):n.j_.set("Unknown")}async function Xy(n,e,t){if(n.j_.set("Online"),e instanceof Df&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.K_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.K_.delete(l),i.H_.removeTarget(l))}(n,e)}catch(r){de(xn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hi(n,r)}else if(e instanceof Ci?n.H_.We(e):e instanceof Lf?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ve.min()))try{const r=await Gf(n.localStore);t.compareTo(r)>=0&&await function(o,s){const l=o.H_.ot(s);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.K_.get(h);f&&o.K_.set(h,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,h)=>{const f=o.K_.get(u);if(!f)return;o.K_.set(u,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),Xf(o,u);const d=new en(f.target,u,h,f.sequenceNumber);sa(o,d)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){de(xn,"Failed to raise snapshot:",r),await Hi(n,r)}}async function Hi(n,e,t){if(!Xn(e))throw e;n.W_.add(1),await Kr(n),n.j_.set("Offline"),t||(t=()=>Gf(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(xn,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await go(n)})}function Jf(n,e){return e().catch(t=>Hi(n,t,e))}async function yo(n){const e=be(n),t=ln(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ks;for(;Zy(e);)try{const i=await Cy(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,Jy(e,i)}catch(i){await Hi(e,i)}eh(e)&&th(e)}function Zy(n){return kn(n)&&n.U_.length<10}function Jy(n,e){n.U_.push(e);const t=ln(n);t.c_()&&t.S_&&t.b_(e.mutations)}function eh(n){return kn(n)&&!ln(n).u_()&&n.U_.length>0}function th(n){ln(n).start()}async function e0(n){ln(n).C_()}async function t0(n){const e=ln(n);for(const t of n.U_)e.b_(t.mutations)}async function n0(n,e,t){const r=n.U_.shift(),i=Zs.from(r,e,t);await Jf(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await yo(n)}async function r0(n,e){e&&ln(n).S_&&await async function(r,i){if(function(s){return qg(s)&&s!==te.ABORTED}(i.code)){const o=r.U_.shift();ln(r).h_(),await Jf(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await yo(r)}}(n,e),eh(n)&&th(n)}async function Pu(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),de(xn,"RemoteStore received new credentials");const r=kn(t);t.W_.add(3),await Kr(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await go(t)}async function i0(n,e){const t=be(n);e?(t.W_.delete(2),await go(t)):e||(t.W_.add(2),await Kr(t),t.j_.set("Unknown"))}function Jn(n){return n.J_||(n.J_=function(t,r,i){const o=be(t);return o.M_(),new $y(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:Wy.bind(null,n),No:Qy.bind(null,n),Lo:Yy.bind(null,n),p_:Xy.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),la(n)?aa(n):n.j_.set("Unknown")):(await n.J_.stop(),Zf(n))})),n.J_}function ln(n){return n.Y_||(n.Y_=function(t,r,i){const o=be(t);return o.M_(),new Uy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:e0.bind(null,n),Lo:r0.bind(null,n),D_:t0.bind(null,n),v_:n0.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await yo(n)):(await n.Y_.stop(),n.U_.length>0&&(de(xn,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,l=new ua(e,t,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ca(n,e){if(Wt("AsyncQueue",`${e}: ${n}`),Xn(n))return new he(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{static emptySet(e){return new Vn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=Nr(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this.Z_=new ze(ge.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ye():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class zn{constructor(e,t,r,i,o,s,l,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new zn(e,t,Vn.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class s0{constructor(){this.queries=Cu(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=be(t),o=i.queries;i.queries=Cu(),o.forEach((s,l)=>{for(const u of l.ta)u.onError(r)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function Cu(){return new An(n=>Ef(n),lo)}async function fa(n,e){const t=be(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new o0,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(i,!0);break;case 1:o.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const l=ca(s,`Initialization of query '${Ln(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&da(t)}async function ha(n,e){const t=be(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function a0(n,e){const t=be(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const l of s.ta)l.oa(i)&&(r=!0);s.ea=i}}r&&da(t)}function l0(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const o of i.ta)o.onError(t);r.queries.delete(e)}function da(n){n.ia.forEach(e=>{e.next()})}var Os,ju;(ju=Os||(Os={}))._a="default",ju.Cache="cache";class pa{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=zn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Os.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.key=e}}class rh{constructor(e){this.key=e}}class u0{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Pe(),this.mutatedKeys=Pe(),this.ya=Tf(e),this.wa=new Vn(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new Ru,i=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,d)=>{const c=i.get(f),p=uo(this.query,d)?d:null,_=!!c&&this.mutatedKeys.has(c.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let m=!1;c&&p?c.data.isEqual(p.data)?_!==y&&(r.track({type:3,doc:p}),m=!0):this.va(c,p)||(r.track({type:2,doc:p}),m=!0,(u&&this.ya(p,u)>0||h&&this.ya(p,h)<0)&&(l=!0)):!c&&p?(r.track({type:0,doc:p}),m=!0):c&&!p&&(r.track({type:1,doc:c}),m=!0,(u||h)&&(l=!0)),m&&(p?(s=s.add(p),o=y?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{wa:s,Da:r,ls:l,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort((f,d)=>function(p,_){const y=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return y(p)-y(_)}(f.type,d.type)||this.ya(f.doc,d.doc)),this.Ca(r),i=i!=null&&i;const l=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,h=u!==this.ga;return this.ga=u,s.length!==0||h?{snapshot:new zn(this.query,e.wa,o,s,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Ru,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Pe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new rh(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new nh(r))}),t}Oa(e){this.fa=e.gs,this.pa=Pe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return zn.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ma="SyncEngine";class c0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class f0{constructor(e){this.key=e,this.Ba=!1}}class h0{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new An(l=>Ef(l),lo),this.qa=new Map,this.Qa=new Set,this.$a=new ze(ge.comparator),this.Ua=new Map,this.Ka=new ta,this.Wa={},this.Ga=new Map,this.za=Un.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function d0(n,e,t=!0){const r=uh(n);let i;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await ih(r,e,t,!0),i}async function p0(n,e){const t=uh(n);await ih(t,e,!0,!1)}async function ih(n,e,t,r){const i=await jy(n.localStore,Lt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let l;return r&&(l=await m0(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Yf(n.remoteStore,i),l}async function m0(n,e,t,r,i){n.Ha=(d,c,p)=>async function(y,m,g,b){let N=m.view.ba(g);N.ls&&(N=await ku(y.localStore,m.query,!1).then(({documents:w})=>m.view.ba(w,N)));const v=b&&b.targetChanges.get(m.targetId),O=b&&b.targetMismatches.get(m.targetId)!=null,R=m.view.applyChanges(N,y.isPrimaryClient,v,O);return Du(y,m.targetId,R.Ma),R.snapshot}(n,d,c,p);const o=await ku(n.localStore,e,!0),s=new u0(e,o.gs),l=s.ba(o.documents),u=Hr.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=s.applyChanges(l,n.isPrimaryClient,u);Du(n,t,h.Ma);const f=new c0(e,t,s);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function g0(n,e,t){const r=be(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!lo(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ns(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oa(r.remoteStore,i.targetId),Ps(r,i.targetId)}).catch(Yn)):(Ps(r,i.targetId),await Ns(r.localStore,i.targetId,!0))}async function y0(n,e){const t=be(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oa(t.remoteStore,r.targetId))}async function v0(n,e,t){const r=A0(n);try{const i=await function(s,l){const u=be(s),h=et.now(),f=l.reduce((p,_)=>p.add(_.key),Pe());let d,c;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Qt(),y=Pe();return u.ds.getEntries(p,f).next(m=>{_=m,_.forEach((g,b)=>{b.isValidDocument()||(y=y.add(g))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,_)).next(m=>{d=m;const g=[];for(const b of l){const N=jg(b,d.get(b.key).overlayedDocument);N!=null&&g.push(new fn(b.key,N,pf(N.value.mapValue),gt.exists(!0)))}return u.mutationQueue.addMutationBatch(p,h,g,l)}).next(m=>{c=m;const g=m.applyToLocalDocumentSet(d,y);return u.documentOverlayCache.saveOverlays(p,m.batchId,g)})}).then(()=>({batchId:c.batchId,changes:Af(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let h=s.Wa[s.currentUser.toKey()];h||(h=new ze(Ne)),h=h.insert(l,u),s.Wa[s.currentUser.toKey()]=h}(r,i.batchId,t),await Gr(r,i.changes),await yo(r.remoteStore)}catch(i){const o=ca(i,"Failed to persist write");t.reject(o)}}async function oh(n,e){const t=be(n);try{const r=await Py(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Ua.get(o);s&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?je(s.Ba):i.removedDocuments.size>0&&(je(s.Ba),s.Ba=!1))}),await Gr(t,r,e)}catch(r){await Yn(r)}}function Lu(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((o,s)=>{const l=s.view.sa(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=be(s);u.onlineState=l;let h=!1;u.queries.forEach((f,d)=>{for(const c of d.ta)c.sa(l)&&(h=!0)}),h&&da(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _0(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),o=i&&i.key;if(o){let s=new ze(ge.comparator);s=s.insert(o,ft.newNoDocument(o,ve.min()));const l=Pe().add(o),u=new po(ve.min(),new Map,new ze(Ne),s,l);await oh(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),ga(r)}else await Ns(r.localStore,e,!1).then(()=>Ps(r,e,t)).catch(Yn)}async function b0(n,e){const t=be(n),r=e.batch.batchId;try{const i=await Oy(t.localStore,e);ah(t,r,null),sh(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gr(t,i)}catch(i){await Yn(i)}}async function w0(n,e,t){const r=be(n);try{const i=await function(s,l){const u=be(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(d=>(je(d!==null),f=d.keys(),u.mutationQueue.removeMutationBatch(h,d))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);ah(r,e,t),sh(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gr(r,i)}catch(i){await Yn(i)}}function sh(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function ah(n,e,t){const r=be(n);let i=r.Wa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Ps(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||lh(n,r)})}function lh(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(oa(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),ga(n))}function Du(n,e,t){for(const r of t)r instanceof nh?(n.Ka.addReference(r.key,e),E0(n,r)):r instanceof rh?(de(ma,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||lh(n,r.key)):ye()}function E0(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(de(ma,"New document in limbo: "+t),n.Qa.add(r),ga(n))}function ga(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ge($e.fromString(e)),r=n.za.next();n.Ua.set(r,new f0(t)),n.$a=n.$a.insert(t,r),Yf(n.remoteStore,new en(Lt(ao(t.path)),r,"TargetPurposeLimboResolution",io.ae))}}async function Gr(n,e,t){const r=be(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((l,u)=>{s.push(r.Ha(u,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){const d=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(h){i.push(h);const d=ra.Yi(u.targetId,h);o.push(d)}}))}),await Promise.all(s),r.La.p_(i),await async function(u,h){const f=be(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(h,c=>ne.forEach(c.Hi,p=>f.persistence.referenceDelegate.addReference(d,c.targetId,p)).next(()=>ne.forEach(c.Ji,p=>f.persistence.referenceDelegate.removeReference(d,c.targetId,p)))))}catch(d){if(!Xn(d))throw d;de(ia,"Failed to update sequence numbers: "+d)}for(const d of h){const c=d.targetId;if(!d.fromCache){const p=f.Ts.get(c),_=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(_);f.Ts=f.Ts.insert(c,y)}}}(r.localStore,o))}async function T0(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){de(ma,"User change. New user:",e.toKey());const r=await Kf(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(l=>{l.forEach(u=>{u.reject(new he(te.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gr(t,r.Rs)}}function x0(n,e){const t=be(n),r=t.Ua.get(e);if(r&&r.Ba)return Pe().add(r.key);{let i=Pe();const o=t.qa.get(e);if(!o)return i;for(const s of o){const l=t.ka.get(s);i=i.unionWith(l.view.Sa)}return i}}function uh(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_0.bind(null,e),e.La.p_=a0.bind(null,e.eventManager),e.La.Ja=l0.bind(null,e.eventManager),e}function A0(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w0.bind(null,e),e}class Ki{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mo(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Sy(this.persistence,new ky,e.initialUser,this.serializer)}Xa(e){return new Hf(na.ri,this.serializer)}Za(e){return new Dy}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ki.provider={build:()=>new Ki};class k0 extends Ki{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){je(this.persistence.referenceDelegate instanceof zi);const r=this.persistence.referenceDelegate.garbageCollector;return new fy(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Hf(r=>zi.ri(r,t),this.serializer)}}class Rs{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lu(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T0.bind(null,this.syncEngine),await i0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s0}()}createDatastore(e){const t=mo(e.databaseInfo.databaseId),r=function(o){return new By(o)}(e.databaseInfo);return function(o,s,l,u){return new Hy(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,l){return new Gy(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Lu(this.syncEngine,t,0),function(){return Su.D()?new Su:new My}())}createSyncEngine(e,t){return function(i,o,s,l,u,h,f){const d=new h0(i,o,s,l,u,h);return f&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=be(i);de(xn,"RemoteStore shutting down."),o.W_.add(5),await Kr(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Rs.provider={build:()=>new Rs};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="FirestoreClient";class I0{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{de(un,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(de(un,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ca(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yo(n,e){n.asyncQueue.verifyOperationInProgress(),de(un,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Kf(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Mu(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N0(n);de(un,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Pu(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Pu(e.remoteStore,i)),n._onlineComponents=e}async function N0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(un,"Using user provided OfflineComponentProvider");try{await Yo(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qn("Error using user provided cache. Falling back to memory cache: "+t),await Yo(n,new Ki)}}else de(un,"Using default OfflineComponentProvider"),await Yo(n,new k0(void 0));return n._offlineComponents}async function ch(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(un,"Using user provided OnlineComponentProvider"),await Mu(n,n._uninitializedComponentsProvider._online)):(de(un,"Using default OnlineComponentProvider"),await Mu(n,new Rs))),n._onlineComponents}function S0(n){return ch(n).then(e=>e.syncEngine)}async function Gi(n){const e=await ch(n),t=e.eventManager;return t.onListen=d0.bind(null,e.syncEngine),t.onUnlisten=g0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y0.bind(null,e.syncEngine),t}function O0(n,e,t={}){const r=new Kt;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,h){const f=new ya({next:c=>{f.su(),s.enqueueAndForget(()=>ha(o,d));const p=c.docs.has(l);!p&&c.fromCache?h.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&c.fromCache&&u&&u.source==="server"?h.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(c)},error:c=>h.reject(c)}),d=new pa(ao(l.path),f,{includeMetadataChanges:!0,Ta:!0});return fa(o,d)}(await Gi(n),n.asyncQueue,e,t,r)),r.promise}function P0(n,e,t={}){const r=new Kt;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,h){const f=new ya({next:c=>{f.su(),s.enqueueAndForget(()=>ha(o,d)),c.fromCache&&u.source==="server"?h.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(c)},error:c=>h.reject(c)}),d=new pa(l,f,{includeMetadataChanges:!0,Ta:!0});return fa(o,d)}(await Gi(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function R0(n,e,t,r){if(e===!0&&r===!0)throw new he(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qu(n){if(!ge.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fu(n){if(ge.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vo(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vo(n);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="firestore.googleapis.com",Bu=!0;class $u{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dh,this.ssl=Bu}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Bu;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uy)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fh((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _o{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $u({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $u(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bm;switch(r.type){case"firstParty":return new Hm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Vu.get(t);r&&(de("ComponentProvider","Removing Datastore"),Vu.delete(t),r.terminate())}(this),Promise.resolve()}}function C0(n,e,t,r={}){var i;const o=(n=yt(n,_o))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o.host!==dh&&o.host!==l&&qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:!1,emulatorOptions:r});if(!np(u,s)&&(n._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ct.MOCK_USER;else{h=rp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ct(d)}n._authCredentials=new $m(new ef(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hn(this.firestore,e,this._query)}}class dt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class nn extends hn{constructor(e,t,r){super(e,t,ao(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ge(e))}withConverter(e){return new nn(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=xt(n),hh("collection","path",e),n instanceof _o){const r=$e.fromString(e,...t);return Fu(r),new nn(n,null,r)}{if(!(n instanceof dt||n instanceof nn))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return Fu(r),new nn(n.firestore,null,r)}}function We(n,e,...t){if(n=xt(n),arguments.length===1&&(e=nf.newId()),hh("doc","path",e),n instanceof _o){const r=$e.fromString(e,...t);return qu(r),new dt(n,null,new ge(r))}{if(!(n instanceof dt||n instanceof nn))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return qu(r),new dt(n.firestore,n instanceof nn?n.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="AsyncQueue";class zu{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Wf(this,"async_queue_retry"),this.Su=()=>{const r=Qo();r&&de(Uu,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Qo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Qo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Kt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Xn(e))throw e;de(Uu,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw Wt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=ua.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ye()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Hu(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class qt extends _o{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zu,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zu(e),this._firestoreClient=void 0,await e}}}function j0(n,e){const t=typeof n=="object"?n:Jd(),r=typeof n=="string"?n:Vi,i=ep(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=tp("firestore");o&&C0(i,...o)}return i}function Wr(n){if(n._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||L0(n),n._firestoreClient}function L0(n){var e,t,r;const i=n._freezeSettings(),o=function(l,u,h,f){return new sg(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,fh(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new I0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(st.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=/^__.*__$/;class M0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new zr(e,this.data,t,this.fieldTransforms)}}class ph{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mh(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class wa{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new wa(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Wi(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(mh(this.Lu)&&D0.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class V0{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mo(e)}ju(e,t,r,i=!1){return new wa({Lu:e,methodName:t,zu:r,path:ot.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yr(n){const e=n._freezeSettings(),t=mo(n._databaseId);return new V0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ea(n,e,t,r,i,o={}){const s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);Ta("Data must be an object, but it was:",s,r);const l=vh(r,s);let u,h;if(o.merge)u=new Et(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const d of o.mergeFields){const c=Cs(e,d,t);if(!s.contains(c))throw new he(te.INVALID_ARGUMENT,`Field '${c}' is specified in your field mask but missing from your input data.`);bh(f,c)||f.push(c)}u=new Et(f),h=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,h=s.fieldTransforms;return new M0(new _t(l),u,h)}class Xr extends va{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xr}}function gh(n,e,t,r){const i=n.ju(1,e,t);Ta("Data must be an object, but it was:",i,r);const o=[],s=_t.empty();cn(r,(u,h)=>{const f=xa(e,u,t);h=xt(h);const d=i.Uu(f);if(h instanceof Xr)o.push(f);else{const c=Zr(h,d);c!=null&&(o.push(f),s.set(f,c))}});const l=new Et(o);return new ph(s,l,i.fieldTransforms)}function yh(n,e,t,r,i,o){const s=n.ju(1,e,t),l=[Cs(e,r,t)],u=[i];if(o.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let c=0;c<o.length;c+=2)l.push(Cs(e,o[c])),u.push(o[c+1]);const h=[],f=_t.empty();for(let c=l.length-1;c>=0;--c)if(!bh(h,l[c])){const p=l[c];let _=u[c];_=xt(_);const y=s.Uu(p);if(_ instanceof Xr)h.push(p);else{const m=Zr(_,y);m!=null&&(h.push(p),f.set(p,m))}}const d=new Et(h);return new ph(f,d,s.fieldTransforms)}function q0(n,e,t,r=!1){return Zr(t,n.ju(r?4:3,e))}function Zr(n,e){if(_h(n=xt(n)))return Ta("Unsupported field value:",e,n),vh(n,e);if(n instanceof va)return function(r,i){if(!mh(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=Zr(l,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ng(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=et.fromDate(r);return{timestampValue:Ui(i.serializer,o)}}if(r instanceof et){const o=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ui(i.serializer,o)}}if(r instanceof _a)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:Mf(i.serializer,r._byteString)};if(r instanceof dt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ea(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ba)return function(s,l){return{mapValue:{fields:{[ff]:{stringValue:df},[qi]:{arrayValue:{values:s.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Xs(l.serializer,h)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${vo(r)}`)}(n,e)}function vh(n,e){const t={};return of(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cn(n,(r,i)=>{const o=Zr(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _h(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof et||n instanceof _a||n instanceof Kn||n instanceof dt||n instanceof va||n instanceof ba)}function Ta(n,e,t){if(!_h(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=vo(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Cs(n,e,t){if((e=xt(e))instanceof Qr)return e._internalPath;if(typeof e=="string")return xa(n,e);throw Wi("Field path arguments must be of type string or ",n,!1,void 0,t)}const F0=new RegExp("[~\\*/\\[\\]]");function xa(n,e,t){if(e.search(F0)>=0)throw Wi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qr(...e.split("."))._internalPath}catch{throw Wi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wi(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new he(te.INVALID_ARGUMENT,l+n+u)}function bh(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Aa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class B0 extends wh{data(){return super.data()}}function Aa(n,e){return typeof e=="string"?xa(n,e):e instanceof Qr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ka{}class Th extends ka{}function bo(n,e,...t){let r=[];e instanceof ka&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof Na).length,l=o.filter(u=>u instanceof Ia).length;if(s>1||s>0&&l>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ia extends Th{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ia(e,t,r)}_apply(e){const t=this._parse(e);return xh(e._query,t),new hn(e.firestore,e.converter,Es(e._query,t))}_parse(e){const t=Yr(e.firestore);return function(o,s,l,u,h,f,d){let c;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Gu(d,f);const _=[];for(const y of d)_.push(Ku(u,o,y));c={arrayValue:{values:_}}}else c=Ku(u,o,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Gu(d,f),c=q0(l,s,d,f==="in"||f==="not-in");return Ze.create(h,f,c)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Na extends ka{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Na(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)xh(s,u),s=Es(s,u)}(e._query,t),new hn(e.firestore,e.converter,Es(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sa extends Th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sa(e,t)}_apply(e){const t=function(i,o,s){if(i.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fr(o,s)}(e._query,this._field,this._direction);return new hn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Zn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function wo(n,e="asc"){const t=e,r=Aa("orderBy",n);return Sa._create(r,t)}function Ku(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wf(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!ge.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return au(n,new ge(r))}if(t instanceof dt)return au(n,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vo(t)}.`)}function Gu(n,e){if(!Array.isArray(n)||n.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xh(n,e){const t=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $0{convertValue(e,t="none"){switch(an(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cn(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[qi].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ge(s.doubleValue));return new ba(o)}convertGeoPoint(e){return new _a(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=so(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mr(e));default:return null}}convertTimestamp(e){const t=on(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);je(Uf(r));const i=new Vr(r.get(1),r.get(3)),o=new ge(r.popFirst(5));return i.isEqual(t)||Wt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ah extends wh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Aa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ji extends Ah{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ji(this._firestore,this._userDataWriter,r.key,r,new Or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new ji(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Or(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new ji(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Or(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:U0(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){n=yt(n,dt);const e=yt(n.firestore,qt);return O0(Wr(e),n._key).then(t=>Ih(e,n,t))}class Pa extends $0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Jr(n){n=yt(n,hn);const e=yt(n.firestore,qt),t=Wr(e),r=new Pa(e);return Eh(n._query),P0(t,n._query).then(i=>new kh(e,r,n,i))}function js(n,e,t){n=yt(n,dt);const r=yt(n.firestore,qt),i=Oa(n.converter,e,t);return ei(r,[Ea(Yr(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function Qi(n,e,t,...r){n=yt(n,dt);const i=yt(n.firestore,qt),o=Yr(i);let s;return s=typeof(e=xt(e))=="string"||e instanceof Qr?yh(o,"updateDoc",n._key,e,t,r):gh(o,"updateDoc",n._key,e),ei(i,[s.toMutation(n._key,gt.exists(!0))])}function Ra(n){return ei(yt(n.firestore,qt),[new ho(n._key,gt.none())])}function Ca(n,e){const t=yt(n.firestore,qt),r=We(n),i=Oa(n.converter,e);return ei(t,[Ea(Yr(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function ja(n,...e){var t,r,i;n=xt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Hu(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Hu(e[s])){const d=e[s];e[s]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,h,f;if(n instanceof dt)h=yt(n.firestore,qt),f=ao(n._key.path),u={next:d=>{e[s]&&e[s](Ih(h,n,d))},error:e[s+1],complete:e[s+2]};else{const d=yt(n,hn);h=yt(d.firestore,qt),f=d._query;const c=new Pa(h);u={next:p=>{e[s]&&e[s](new kh(h,c,d,p))},error:e[s+1],complete:e[s+2]},Eh(n._query)}return function(c,p,_,y){const m=new ya(y),g=new pa(p,m,_);return c.asyncQueue.enqueueAndForget(async()=>fa(await Gi(c),g)),()=>{m.su(),c.asyncQueue.enqueueAndForget(async()=>ha(await Gi(c),g))}}(Wr(h),f,l,u)}function ei(n,e){return function(r,i){const o=new Kt;return r.asyncQueue.enqueueAndForget(async()=>v0(await S0(r),i,o)),o.promise}(Wr(n),e)}function Ih(n,e,t){const r=t.docs.get(e._key),i=new Pa(n);return new Ah(n,i,e._key,r,new Or(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yr(e)}set(e,t,r){this._verifyNotCommitted();const i=Xo(e,this._firestore),o=Oa(i.converter,t,r),s=Ea(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Xo(e,this._firestore);let s;return s=typeof(t=xt(t))=="string"||t instanceof Qr?yh(this._dataReader,"WriteBatch.update",o._key,t,r,i):gh(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xo(e,this._firestore);return this._mutations=this._mutations.concat(new ho(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xo(n,e){if((n=xt(n)).firestore!==e)throw new he(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){return new Xr("deleteField")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(n){return Wr(n=yt(n,qt)),new H0(n,e=>ei(n,e))}(function(e,t=!0){(function(i){Qn=i})(ip),Qd(new Yd("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new qt(new Um(r.getProvider("auth-internal")),new Km(s,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vr(h.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Fl(Ql,Yl,e),Fl(Ql,Yl,"esm2017")})();const G0={apiKey:"AIzaSyAsGrtbRSjz77iShv4tB0vQ33A23ie9JM8",authDomain:"tiger3homs-f3a5f-d60da.firebaseapp.com",projectId:"tiger3homs-f3a5f-d60da",storageBucket:"tiger3homs-f3a5f-d60da.firebasestorage.app",messagingSenderId:"509990310606",appId:"1:509990310606:web:e36d91ea748c4cd64d369f",measurementId:"G-DDZTZ6MR6S"};let Zo=null,It=null,pe=null;try{Zo=ap(G0),It=lp(Zo),pe=j0(Zo)}catch(n){throw console.error("Firebase initialization error:",n),new Error(`Firebase initialization failed: ${n instanceof Error?n.message:String(n)}`)}if(!pe)throw new Error("Firestore failed to initialize and is null.");const Nt={en:{generalInfo:{title:"General Information",siteTitle:"Tiger3Homs",siteRole:"Website Developer & Tech Enthusiast",logoUrl:"https://raw.githubusercontent.com/tiger3homs/home/refs/heads/main/public/logo.png",footerText:" 2025. Built and designed by Tiger3homs"},about:{title:"About Me",description:"I'm a passionate software developer with expertise in web development and system architecture. I love building efficient, scalable solutions and contributing to open-source projects. When I'm not coding, you can find me exploring new technologies and sharing knowledge with the developer community."},projects:{title:"Featured Projects",project1:{title:"OS Design v1",description:"The website offers a sleek, intuitive design with straightforward navigation and professional fonts. It highlights the company's services and expertise, making it easy for visitors to get in touch. Simple visuals and effective calls-to-action ensure a smooth and engaging experience. For more information, explore the site.",tags:["Modern","User-friendly","Professional"],link:""},project2:{title:"Project 2",description:"Coming soon.",tags:["Wait","For","It"],link:""},project3:{title:"New Project",description:"This is a new project description.",tags:["New","Exciting","Innovative"],link:""}},contact:{title:"Contact Me",nameLabel:"Name",namePlaceholder:"Enter your name",emailLabel:"Email",emailPlaceholder:"Enter your email",messageLabel:"Message",messagePlaceholder:"Enter your message",submitButton:"Send Message"},services:{title:"Services",list:[{title:"Web Development",description:"Building modern, responsive websites tailored to your needs."},{title:"UI/UX Design",description:"Crafting user-friendly and visually appealing designs."},{title:"SEO Optimization",description:"Improving your website's visibility on search engines."},{title:"Consulting",description:"Providing expert advice to help you achieve your goals."}]}}},W0=n=>{const t=/[A-Z]/.test(n),r=/[a-z]/.test(n),i=/\d/.test(n),o=/[!@#$%^&*(),.?":{}|<>]/.test(n);return n.length>=8&&t&&r&&i&&o},Q0=()=>{const[n,e]=ie.useState(""),[t,r]=ie.useState(""),[i,o]=ie.useState(""),[s,l]=ie.useState(!1),u=Mc();ie.useEffect(()=>{const f=setTimeout(()=>{It&&It.signOut()},18e5);return()=>clearTimeout(f)},[]),ie.useEffect(()=>{if(!It)return;const f=qc(It,d=>{d&&u("/admin/dashboard",{replace:!0})});return()=>f()},[u]);const h=async f=>{if(f.preventDefault(),o(""),l(!0),!n.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){o("Please enter a valid email address"),l(!1);return}if(!W0(t)){o("Password must be at least 8 characters long and contain uppercase, lowercase, numbers, and special characters"),l(!1);return}if(!It){o("Authentication service is not available."),l(!1);return}try{await up(It,n,t)}catch(d){let c="Failed to log in. Please check your credentials.";if(d.code)switch(d.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":c="Invalid email or password.";break;case"auth/invalid-email":c="Invalid email format.";break;case"auth/too-many-requests":c="Too many failed attempts. Please try again later.";break;default:console.error("Firebase Login error:",d)}o(c)}finally{l(!1)}};return C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:C.jsxs("div",{className:"p-8 bg-white rounded shadow-md w-full max-w-sm",children:[C.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),C.jsxs("form",{onSubmit:h,children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),C.jsx("input",{type:"email",id:"email",value:n,onChange:f=>e(f.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:s})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),C.jsx("input",{type:"password",id:"password",value:t,onChange:f=>r(f.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,disabled:s})]}),i&&C.jsx("p",{className:"text-red-500 text-xs italic mb-4",children:i}),C.jsx("div",{className:"flex items-center justify-between",children:C.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full disabled:opacity-50",disabled:s,children:s?"Logging in...":"Login"})})]})]})})},Y0={title:"New Project Title",description:"New project description.",tags:["Tag1","Tag2"],link:""},wn=(n,e,t,r,i,o,s)=>e.length===1&&e[0]==="projects"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?C.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[C.jsxs("div",{className:"flex justify-between items-center mb-3",children:[C.jsx("h4",{className:"text-lg font-semibold capitalize",children:String(e[0]).replace(/([A-Z])/g," $1")}),o&&C.jsx("button",{onClick:o,className:"bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-1 px-3 rounded focus:outline-none focus:shadow-outline",children:"+ Add Project"})]}),Object.entries(n).map(([l,u])=>{if(l!=="title"&&typeof u=="object"&&u!==null&&!Array.isArray(u)){const h=[...e,l];return C.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm relative",children:[C.jsxs("div",{className:"flex justify-between items-start mb-3",children:[" ",C.jsxs("h5",{className:"text-lg font-semibold text-gray-700 mr-4",children:["Project: ",C.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:l})]}),s&&C.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete project "${l}"?`)&&s(h)},className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete project ${l}`,children:"Delete Project"})]}),C.jsxs("div",{className:"space-y-4",children:[" ",wn(u,h,t,r,i,void 0,void 0)]})]},h.join("."))}else if(l==="title"&&typeof u=="string"){const h=[...e,l],f=h.join("."),d=r===f;return C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:f,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),d?C.jsx("input",{type:"text",id:f,name:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2",value:u,onChange:c=>t(h,c.target.value),onBlur:()=>i(null),autoFocus:!0}):C.jsx("div",{className:"mt-1 block w-full rounded-md border border-transparent p-2 cursor-pointer hover:bg-gray-100 min-h-[38px]",onClick:()=>i(f),children:u||C.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},f)}return null})]},e.join(".")):Object.entries(n).map(([l,u])=>{const h=[...e,l],f=h.map(String).join("."),d=r===f;return typeof u=="string"?C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:f,className:"block text-sm font-medium text-gray-700 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),d?C.jsx("textarea",{id:f,name:f,rows:u.length>100?4:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:u,onChange:c=>t(h,c.target.value),onBlur:()=>i(null),autoFocus:!0}):C.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[50px] whitespace-pre-wrap text-gray-800",onClick:()=>i(f),children:u||C.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})})]},f):typeof u=="object"&&u!==null&&!Array.isArray(u)?C.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[C.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize",children:String(l).replace(/([A-Z])/g," $1")}),wn(u,h,t,r,i)]},f):Array.isArray(u)?C.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-sm",children:[C.jsx("h4",{className:"text-lg font-semibold mb-3 capitalize text-gray-700",children:String(l).replace(/([A-Z])/g," $1")}),C.jsxs("div",{className:"space-y-3",children:[" ",u.map((c,p)=>{const _=[...h,p],y=_.map(String).join("."),m=r===y;return typeof c=="string"?C.jsxs("div",{className:"flex items-center space-x-2",children:[m?C.jsx("input",{type:"text",id:y,name:y,className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-white",value:c,onChange:g=>t(_,g.target.value),onBlur:()=>i(null),autoFocus:!0}):C.jsx("div",{className:"flex-grow rounded-md border border-gray-200 bg-gray-50 p-2 cursor-pointer hover:bg-gray-100 min-h-[38px] text-gray-800",onClick:()=>i(y),children:c||C.jsx("span",{className:"text-gray-400 italic",children:"Click to edit..."})}),s&&C.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this item?")&&s(_)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete item ${p+1}`,children:"Delete"})]},y):typeof c=="object"&&c!==null?C.jsxs("div",{className:"mb-4 p-3 border border-gray-100 rounded relative",children:[" ",C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[" ",C.jsxs("h5",{className:"text-md font-medium",children:["Item ",p+1]}),s&&C.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete Item ${p+1}?`)&&s(_)},className:"bg-red-400 hover:bg-red-600 text-white text-xs font-bold py-0.5 px-1.5 rounded focus:outline-none focus:shadow-outline","aria-label":`Delete item ${p+1}`,children:"Delete"})]}),wn(c,_,t,r,i,void 0,s)]},y):null})]})," "]},f):null}),X0=(n,e,t)=>{if(!e||e.length===0)return n;const r=JSON.parse(JSON.stringify(n));let i=r;for(let s=0;s<e.length-1;s++){const l=e[s];if(i[l]===void 0||i[l]===null){const u=typeof e[s+1]=="number";i[l]=u?[]:{}}if(Array.isArray(i)&&typeof l=="number")for(;i.length<=l;)i.push(null);i=i[l]}const o=e[e.length-1];return typeof i!="object"||i===null?(console.error("Cannot set property on non-object:",i,"at path",e),n):(i[o]=t,r)},Ei=n=>n.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),Z0=n=>n===null?!1:n in Nt.en,xr="translations/en",J0={title:"New Service Title",description:"New service description."},ev=()=>{var p;const[n,e]=ie.useState(Nt),[t,r]=ie.useState(!0),[i,o]=ie.useState("");ie.useEffect(()=>{if(!pe){console.error("Firestore instance is not available."),o("Error: Firestore connection failed."),r(!1);return}const _=We(pe,xr);r(!0);const y=ja(_,m=>{if(m.exists()){const g=m.data();e(b=>({...b,en:g}))}else e(Nt),console.log("No translations document found in Firestore, using defaults.");r(!1)},m=>{console.error("Firestore snapshot error:",m),o("Error fetching data from Firestore."),r(!1)});return()=>y()},[]);const s=ie.useCallback((_,y)=>{e(m=>{const g="en";if(!_||_.length===0)return m;const b=X0(m[g],_,y);return{...m,[g]:b}}),o("")},[]),l=ie.useCallback(()=>{e(_=>{const y=`project_${Date.now()}`,m={..._.en};return(typeof m.projects!="object"||m.projects===null)&&(m.projects={title:Nt.en.projects.title}),m.projects[y]={...Y0},{..._,en:m}}),o("New project added. Edit details and save.")},[]),u=ie.useCallback(()=>{e(_=>{var N;const y=(N=_.en)==null?void 0:N.services,g=[...Array.isArray(y==null?void 0:y.list)?y.list:[],{...J0}],b={..._.en,services:{...y||{title:Nt.en.services.title||"Services",list:[]},list:g}};return{..._,en:b}}),o("New service added. Edit details and save.")},[]),h=async _=>{const y=_||n.en;if(!pe){o("Error: Firestore connection failed.");return}o("Saving...");try{const m=We(pe,xr);await js(m,y,{merge:!0}),o("Content changes saved successfully!"),setTimeout(()=>o(""),3e3)}catch(m){console.error("Failed to save translations to Firestore:",m),o("Error saving content changes."),setTimeout(()=>o(""),5e3)}},f=async _=>{if(!pe){o("Error: Firestore connection failed.");return}o("Deleting item...");const y=We(pe,xr);try{await Qi(y,{[_]:K0()})}catch(m){console.error("Failed to delete item from Firestore:",m),o("Error deleting item."),setTimeout(()=>o(""),5e3)}},d=ie.useCallback(async _=>{var y;if(!_||_.length<1){console.error("Invalid path for deletion:",_),o("Error: Invalid deletion path.");return}if(_[0]==="services"&&_[1]==="list"&&typeof _[2]=="number"){const m=_[2],g=(y=n.en.services)==null?void 0:y.list;if(!Array.isArray(g)){console.error("Cannot delete service item: services.list is not an array or is missing.",g),o("Error: Services data structure issue.");return}const b=g.filter((v,O)=>O!==m);if(!pe){o("Error: Firestore connection failed.");return}o("Deleting service item...");const N=We(pe,xr);try{await Qi(N,{"services.list":b})}catch(v){console.error("Failed to update services list in Firestore:",v),o("Error deleting service item."),setTimeout(()=>o(""),5e3)}}else{const m=_.join(".");if(!m){console.error("Generated empty field path for deletion:",_),o("Error: Could not determine field to delete.");return}await f(m)}},[(p=n.en.services)==null?void 0:p.list]);return{translations:n,isLoading:t,saveStatus:i,setSaveStatus:o,setTranslations:e,handleInputChange:s,handleAddNewProject:l,handleAddNewService:u,saveChanges:h,handleDeleteItem:d,resetToDefaults:async()=>{if(!pe){o("Error: Firestore connection failed.");return}if(window.confirm("Are you sure you want to reset the English text content (About, Contact, Services, General Info) to the default values? This cannot be undone and does not affect Projects, Styles, or Social Links.")){o("Resetting...");const _={...Nt.en,projects:n.en.projects};try{const y=We(pe,xr);await js(y,_),o("Text content sections reset to defaults."),setTimeout(()=>o(""),3e3)}catch(y){console.error("Failed to reset translations in Firestore:",y),o("Error resetting content."),setTimeout(()=>o(""),5e3)}}}}},tv=({data:n,path:e,handleChange:t,editingPath:r,setEditingPath:i,handleAddProject:o,handleDelete:s,renderFields:l})=>C.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded",children:[C.jsxs("div",{className:"flex justify-between items-center mb-3",children:[C.jsx("h4",{className:"text-lg font-semibold capitalize",children:(n==null?void 0:n.title)||String(e[0]).replace(/([A-Z])/g," $1")}),C.jsx("button",{onClick:o,className:"bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-1 px-3 rounded focus:outline-none focus:shadow-outline",children:"+ Add Project"})]}),(n==null?void 0:n.title)!==void 0&&typeof n.title=="string"&&l({title:n.title},e,t,r,i,void 0,void 0),Object.entries(n).map(([u,h])=>{if(u!=="title"&&typeof h=="object"&&h!==null&&!Array.isArray(h)){const f=[...e,u];return C.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm relative",children:[C.jsxs("div",{className:"flex justify-between items-start mb-3",children:[C.jsxs("h5",{className:"text-lg font-semibold text-gray-700 mr-4",children:["Project: ",C.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:u})]}),C.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete project "${u}"?`)&&s(f)},className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline transition-colors duration-150","aria-label":`Delete project ${u}`,children:"Delete Project"})]}),C.jsx("div",{className:"space-y-4",children:l(h,f,t,r,i,void 0,s)})]},f.join("."))}return null})]},e.join(".")),nv=({data:n,path:e,handleChange:t,editingPath:r,setEditingPath:i,handleDelete:o,handleAddService:s,renderFields:l})=>!n||typeof n!="object"?C.jsx("p",{children:"Error: Services data is missing or invalid."}):(Array.isArray(n.list)||console.warn("Services data is missing 'list' array."),C.jsxs(C.Fragment,{children:[C.jsx("button",{onClick:s,className:"mb-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50","aria-label":"Add new service item",children:"Add New Service Item"}),l(n,e,t,r,i,void 0,o)]})),{min:rv,max:iv}=Math,En=(n,e=0,t=1)=>rv(iv(e,n),t),La=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let e=0;e<=3;e++)e<3?((n[e]<0||n[e]>255)&&(n._clipped=!0),n[e]=En(n[e],0,255)):e===3&&(n[e]=En(n[e],0,1));return n},Nh={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Nh[`[object ${n}]`]=n.toLowerCase();function Se(n){return Nh[Object.prototype.toString.call(n)]||"object"}const xe=(n,e=null)=>n.length>=3?Array.prototype.slice.call(n):Se(n[0])=="object"&&e?e.split("").filter(t=>n[0][t]!==void 0).map(t=>n[0][t]):n[0].slice(0),er=n=>{if(n.length<2)return null;const e=n.length-1;return Se(n[e])=="string"?n[e].toLowerCase():null},{PI:Eo,min:Sh,max:Oh}=Math,Tt=n=>Math.round(n*100)/100,Ds=n=>Math.round(n*100)/100,Ut=Eo*2,Jo=Eo/3,ov=Eo/180,sv=180/Eo;function Ph(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const we={format:{},autodetect:[]};class ae{constructor(...e){const t=this;if(Se(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=er(e),i=!1;if(!r){i=!0,we.sorted||(we.autodetect=we.autodetect.sort((o,s)=>s.p-o.p),we.sorted=!0);for(let o of we.autodetect)if(r=o.test(...e),r)break}if(we.format[r]){const o=we.format[r].apply(null,i?e:e.slice(0,-1));t._rgb=La(o)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Se(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const av="3.1.2",Ae=(...n)=>new ae(...n);Ae.version=av;const Gn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},lv=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,uv=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Rh=n=>{if(n.match(lv)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=parseInt(n,16),t=e>>16,r=e>>8&255,i=e&255;return[t,r,i,1]}if(n.match(uv)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=parseInt(n,16),t=e>>24&255,r=e>>16&255,i=e>>8&255,o=Math.round((e&255)/255*100)/100;return[t,r,i,o]}throw new Error(`unknown hex color: ${n}`)},{round:Ti}=Math,Ch=(...n)=>{let[e,t,r,i]=xe(n,"rgba"),o=er(n)||"auto";i===void 0&&(i=1),o==="auto"&&(o=i<1?"rgba":"rgb"),e=Ti(e),t=Ti(t),r=Ti(r);let l="000000"+(e<<16|t<<8|r).toString(16);l=l.substr(l.length-6);let u="0"+Ti(i*255).toString(16);switch(u=u.substr(u.length-2),o.toLowerCase()){case"rgba":return`#${l}${u}`;case"argb":return`#${u}${l}`;default:return`#${l}`}};ae.prototype.name=function(){const n=Ch(this._rgb,"rgb");for(let e of Object.keys(Gn))if(Gn[e]===n)return e.toLowerCase();return n};we.format.named=n=>{if(n=n.toLowerCase(),Gn[n])return Rh(Gn[n]);throw new Error("unknown color name: "+n)};we.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Se(n)==="string"&&Gn[n.toLowerCase()])return"named"}});ae.prototype.alpha=function(n,e=!1){return n!==void 0&&Se(n)==="number"?e?(this._rgb[3]=n,this):new ae([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};ae.prototype.clipped=function(){return this._rgb._clipped||!1};const Mt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},cv=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Ht(n){const e=cv.get(String(n).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+n);Mt.labWhitePoint=n,Mt.Xn=e[0],Mt.Zn=e[1]}function Ur(){return Mt.labWhitePoint}const Da=(...n)=>{n=xe(n,"lab");const[e,t,r]=n,[i,o,s]=fv(e,t,r),[l,u,h]=jh(i,o,s);return[l,u,h,n.length>3?n[3]:1]},fv=(n,e,t)=>{const{kE:r,kK:i,kKE:o,Xn:s,Yn:l,Zn:u}=Mt,h=(n+16)/116,f=.002*e+h,d=h-.005*t,c=f*f*f,p=d*d*d,_=c>r?c:(116*f-16)/i,y=n>o?Math.pow((n+16)/116,3):n/i,m=p>r?p:(116*d-16)/i,g=_*s,b=y*l,N=m*u;return[g,b,N]},es=n=>{const e=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*e},jh=(n,e,t)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:l,Yn:u,Zn:h}=Mt,f=l*r.m00+u*r.m10+h*r.m20,d=l*r.m01+u*r.m11+h*r.m21,c=l*r.m02+u*r.m12+h*r.m22,p=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,_=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,y=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,m=(n*r.m00+e*r.m10+t*r.m20)*(p/f),g=(n*r.m01+e*r.m11+t*r.m21)*(_/d),b=(n*r.m02+e*r.m12+t*r.m22)*(y/c),N=m*i.m00+g*i.m10+b*i.m20,v=m*i.m01+g*i.m11+b*i.m21,O=m*i.m02+g*i.m12+b*i.m22,R=es(N*o.m00+v*o.m10+O*o.m20),w=es(N*o.m01+v*o.m11+O*o.m21),E=es(N*o.m02+v*o.m12+O*o.m22);return[R*255,w*255,E*255]},Ma=(...n)=>{const[e,t,r,...i]=xe(n,"rgb"),[o,s,l]=Lh(e,t,r),[u,h,f]=hv(o,s,l);return[u,h,f,...i.length>0&&i[0]<1?[i[0]]:[]]};function hv(n,e,t){const{Xn:r,Yn:i,Zn:o,kE:s,kK:l}=Mt,u=n/r,h=e/i,f=t/o,d=u>s?Math.pow(u,1/3):(l*u+16)/116,c=h>s?Math.pow(h,1/3):(l*h+16)/116,p=f>s?Math.pow(f,1/3):(l*f+16)/116;return[116*c-16,500*(d-c),200*(c-p)]}function ts(n){const e=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*e}const Lh=(n,e,t)=>{n=ts(n/255),e=ts(e/255),t=ts(t/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:s,Yn:l,Zn:u,As:h,Bs:f,Cs:d}=Mt;let c=n*r.m00+e*r.m10+t*r.m20,p=n*r.m01+e*r.m11+t*r.m21,_=n*r.m02+e*r.m12+t*r.m22;const y=s*i.m00+l*i.m10+u*i.m20,m=s*i.m01+l*i.m11+u*i.m21,g=s*i.m02+l*i.m12+u*i.m22;let b=c*i.m00+p*i.m10+_*i.m20,N=c*i.m01+p*i.m11+_*i.m21,v=c*i.m02+p*i.m12+_*i.m22;return b*=y/h,N*=m/f,v*=g/d,c=b*o.m00+N*o.m10+v*o.m20,p=b*o.m01+N*o.m11+v*o.m21,_=b*o.m02+N*o.m12+v*o.m22,[c,p,_]};ae.prototype.lab=function(){return Ma(this._rgb)};const dv=(...n)=>new ae(...n,"lab");Object.assign(Ae,{lab:dv,getLabWhitePoint:Ur,setLabWhitePoint:Ht});we.format.lab=Da;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"lab"),Se(n)==="array"&&n.length===3)return"lab"}});ae.prototype.darken=function(n=1){const e=this,t=e.lab();return t[0]-=Mt.Kn*n,new ae(t,"lab").alpha(e.alpha(),!0)};ae.prototype.brighten=function(n=1){return this.darken(-n)};ae.prototype.darker=ae.prototype.darken;ae.prototype.brighter=ae.prototype.brighten;ae.prototype.get=function(n){const[e,t]=n.split("."),r=this[e]();if(t){const i=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${t} in mode ${e}`)}else return r};const{pow:pv}=Math,mv=1e-7,gv=20;ae.prototype.luminance=function(n,e="rgb"){if(n!==void 0&&Se(n)==="number"){if(n===0)return new ae([0,0,0,this._rgb[3]],"rgb");if(n===1)return new ae([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),r=gv;const i=(s,l)=>{const u=s.interpolate(l,.5,e),h=u.luminance();return Math.abs(n-h)<mv||!r--?u:h>n?i(s,u):i(u,l)},o=(t>n?i(new ae([0,0,0]),this):i(this,new ae([255,255,255]))).rgb();return new ae([...o,this._rgb[3]])}return yv(...this._rgb.slice(0,3))};const yv=(n,e,t)=>(n=ns(n),e=ns(e),t=ns(t),.2126*n+.7152*e+.0722*t),ns=n=>(n/=255,n<=.03928?n/12.92:pv((n+.055)/1.055,2.4)),ht={},Wn=(n,e,t=.5,...r)=>{let i=r[0]||"lrgb";if(!ht[i]&&!r.length&&(i=Object.keys(ht)[0]),!ht[i])throw new Error(`interpolation mode ${i} is not defined`);return Se(n)!=="object"&&(n=new ae(n)),Se(e)!=="object"&&(e=new ae(e)),ht[i](n,e,t).alpha(n.alpha()+t*(e.alpha()-n.alpha()))};ae.prototype.mix=ae.prototype.interpolate=function(n,e=.5,...t){return Wn(this,n,e,...t)};ae.prototype.premultiply=function(n=!1){const e=this._rgb,t=e[3];return n?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new ae([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};const{sin:vv,cos:_v}=Math,Dh=(...n)=>{let[e,t,r]=xe(n,"lch");return isNaN(r)&&(r=0),r=r*ov,[e,_v(r)*t,vv(r)*t]},Va=(...n)=>{n=xe(n,"lch");const[e,t,r]=n,[i,o,s]=Dh(e,t,r),[l,u,h]=Da(i,o,s);return[l,u,h,n.length>3?n[3]:1]},bv=(...n)=>{const e=Ph(xe(n,"hcl"));return Va(...e)},{sqrt:wv,atan2:Ev,round:Tv}=Math,Mh=(...n)=>{const[e,t,r]=xe(n,"lab"),i=wv(t*t+r*r);let o=(Ev(r,t)*sv+360)%360;return Tv(i*1e4)===0&&(o=Number.NaN),[e,i,o]},qa=(...n)=>{const[e,t,r,...i]=xe(n,"rgb"),[o,s,l]=Ma(e,t,r),[u,h,f]=Mh(o,s,l);return[u,h,f,...i.length>0&&i[0]<1?[i[0]]:[]]};ae.prototype.lch=function(){return qa(this._rgb)};ae.prototype.hcl=function(){return Ph(qa(this._rgb))};const xv=(...n)=>new ae(...n,"lch"),Av=(...n)=>new ae(...n,"hcl");Object.assign(Ae,{lch:xv,hcl:Av});we.format.lch=Va;we.format.hcl=bv;["lch","hcl"].forEach(n=>we.autodetect.push({p:2,test:(...e)=>{if(e=xe(e,n),Se(e)==="array"&&e.length===3)return n}}));ae.prototype.saturate=function(n=1){const e=this,t=e.lch();return t[1]+=Mt.Kn*n,t[1]<0&&(t[1]=0),new ae(t,"lch").alpha(e.alpha(),!0)};ae.prototype.desaturate=function(n=1){return this.saturate(-n)};ae.prototype.set=function(n,e,t=!1){const[r,i]=n.split("."),o=this[r]();if(i){const s=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(Se(e)=="string")switch(e.charAt(0)){case"+":o[s]+=+e;break;case"-":o[s]+=+e;break;case"*":o[s]*=+e.substr(1);break;case"/":o[s]/=+e.substr(1);break;default:o[s]=+e}else if(Se(e)==="number")o[s]=e;else throw new Error("unsupported value for Color.set");const l=new ae(o,r);return t?(this._rgb=l._rgb,this):l}throw new Error(`unknown channel ${i} in mode ${r}`)}else return o};ae.prototype.tint=function(n=.5,...e){return Wn(this,"white",n,...e)};ae.prototype.shade=function(n=.5,...e){return Wn(this,"black",n,...e)};const kv=(n,e,t)=>{const r=n._rgb,i=e._rgb;return new ae(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"rgb")};ht.rgb=kv;const{sqrt:rs,pow:Pn}=Math,Iv=(n,e,t)=>{const[r,i,o]=n._rgb,[s,l,u]=e._rgb;return new ae(rs(Pn(r,2)*(1-t)+Pn(s,2)*t),rs(Pn(i,2)*(1-t)+Pn(l,2)*t),rs(Pn(o,2)*(1-t)+Pn(u,2)*t),"rgb")};ht.lrgb=Iv;const Nv=(n,e,t)=>{const r=n.lab(),i=e.lab();return new ae(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"lab")};ht.lab=Nv;const tr=(n,e,t,r)=>{let i,o;r==="hsl"?(i=n.hsl(),o=e.hsl()):r==="hsv"?(i=n.hsv(),o=e.hsv()):r==="hcg"?(i=n.hcg(),o=e.hcg()):r==="hsi"?(i=n.hsi(),o=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",i=n.hcl(),o=e.hcl()):r==="oklch"&&(i=n.oklch().reverse(),o=e.oklch().reverse());let s,l,u,h,f,d;(r.substr(0,1)==="h"||r==="oklch")&&([s,u,f]=i,[l,h,d]=o);let c,p,_,y;return!isNaN(s)&&!isNaN(l)?(l>s&&l-s>180?y=l-(s+360):l<s&&s-l>180?y=l+360-s:y=l-s,p=s+t*y):isNaN(s)?isNaN(l)?p=Number.NaN:(p=l,(f==1||f==0)&&r!="hsv"&&(c=h)):(p=s,(d==1||d==0)&&r!="hsv"&&(c=u)),c===void 0&&(c=u+t*(h-u)),_=f+t*(d-f),r==="oklch"?new ae([_,c,p],r):new ae([p,c,_],r)},Vh=(n,e,t)=>tr(n,e,t,"lch");ht.lch=Vh;ht.hcl=Vh;const Sv=n=>{if(Se(n)=="number"&&n>=0&&n<=16777215){const e=n>>16,t=n>>8&255,r=n&255;return[e,t,r,1]}throw new Error("unknown num color: "+n)},Ov=(...n)=>{const[e,t,r]=xe(n,"rgb");return(e<<16)+(t<<8)+r};ae.prototype.num=function(){return Ov(this._rgb)};const Pv=(...n)=>new ae(...n,"num");Object.assign(Ae,{num:Pv});we.format.num=Sv;we.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&Se(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const Rv=(n,e,t)=>{const r=n.num(),i=e.num();return new ae(r+t*(i-r),"num")};ht.num=Rv;const{floor:Cv}=Math,jv=(...n)=>{n=xe(n,"hcg");let[e,t,r]=n,i,o,s;r=r*255;const l=t*255;if(t===0)i=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const u=Cv(e),h=e-u,f=r*(1-t),d=f+l*(1-h),c=f+l*h,p=f+l;switch(u){case 0:[i,o,s]=[p,c,f];break;case 1:[i,o,s]=[d,p,f];break;case 2:[i,o,s]=[f,p,c];break;case 3:[i,o,s]=[f,d,p];break;case 4:[i,o,s]=[c,f,p];break;case 5:[i,o,s]=[p,f,d];break}}return[i,o,s,n.length>3?n[3]:1]},Lv=(...n)=>{const[e,t,r]=xe(n,"rgb"),i=Sh(e,t,r),o=Oh(e,t,r),s=o-i,l=s*100/255,u=i/(255-s)*100;let h;return s===0?h=Number.NaN:(e===o&&(h=(t-r)/s),t===o&&(h=2+(r-e)/s),r===o&&(h=4+(e-t)/s),h*=60,h<0&&(h+=360)),[h,l,u]};ae.prototype.hcg=function(){return Lv(this._rgb)};const Dv=(...n)=>new ae(...n,"hcg");Ae.hcg=Dv;we.format.hcg=jv;we.autodetect.push({p:1,test:(...n)=>{if(n=xe(n,"hcg"),Se(n)==="array"&&n.length===3)return"hcg"}});const Mv=(n,e,t)=>tr(n,e,t,"hcg");ht.hcg=Mv;const{cos:Rn}=Math,Vv=(...n)=>{n=xe(n,"hsi");let[e,t,r]=n,i,o,s;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(s=(1-t)/3,i=(1+t*Rn(Ut*e)/Rn(Jo-Ut*e))/3,o=1-(s+i)):e<2/3?(e-=1/3,i=(1-t)/3,o=(1+t*Rn(Ut*e)/Rn(Jo-Ut*e))/3,s=1-(i+o)):(e-=2/3,o=(1-t)/3,s=(1+t*Rn(Ut*e)/Rn(Jo-Ut*e))/3,i=1-(o+s)),i=En(r*i*3),o=En(r*o*3),s=En(r*s*3),[i*255,o*255,s*255,n.length>3?n[3]:1]},{min:qv,sqrt:Fv,acos:Bv}=Math,$v=(...n)=>{let[e,t,r]=xe(n,"rgb");e/=255,t/=255,r/=255;let i;const o=qv(e,t,r),s=(e+t+r)/3,l=s>0?1-o/s:0;return l===0?i=NaN:(i=(e-t+(e-r))/2,i/=Fv((e-t)*(e-t)+(e-r)*(t-r)),i=Bv(i),r>t&&(i=Ut-i),i/=Ut),[i*360,l,s]};ae.prototype.hsi=function(){return $v(this._rgb)};const Uv=(...n)=>new ae(...n,"hsi");Ae.hsi=Uv;we.format.hsi=Vv;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"hsi"),Se(n)==="array"&&n.length===3)return"hsi"}});const zv=(n,e,t)=>tr(n,e,t,"hsi");ht.hsi=zv;const Ms=(...n)=>{n=xe(n,"hsl");const[e,t,r]=n;let i,o,s;if(t===0)i=o=s=r*255;else{const l=[0,0,0],u=[0,0,0],h=r<.5?r*(1+t):r+t-r*t,f=2*r-h,d=e/360;l[0]=d+1/3,l[1]=d,l[2]=d-1/3;for(let c=0;c<3;c++)l[c]<0&&(l[c]+=1),l[c]>1&&(l[c]-=1),6*l[c]<1?u[c]=f+(h-f)*6*l[c]:2*l[c]<1?u[c]=h:3*l[c]<2?u[c]=f+(h-f)*(2/3-l[c])*6:u[c]=f;[i,o,s]=[u[0]*255,u[1]*255,u[2]*255]}return n.length>3?[i,o,s,n[3]]:[i,o,s,1]},qh=(...n)=>{n=xe(n,"rgba");let[e,t,r]=n;e/=255,t/=255,r/=255;const i=Sh(e,t,r),o=Oh(e,t,r),s=(o+i)/2;let l,u;return o===i?(l=0,u=Number.NaN):l=s<.5?(o-i)/(o+i):(o-i)/(2-o-i),e==o?u=(t-r)/(o-i):t==o?u=2+(r-e)/(o-i):r==o&&(u=4+(e-t)/(o-i)),u*=60,u<0&&(u+=360),n.length>3&&n[3]!==void 0?[u,l,s,n[3]]:[u,l,s]};ae.prototype.hsl=function(){return qh(this._rgb)};const Hv=(...n)=>new ae(...n,"hsl");Ae.hsl=Hv;we.format.hsl=Ms;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"hsl"),Se(n)==="array"&&n.length===3)return"hsl"}});const Kv=(n,e,t)=>tr(n,e,t,"hsl");ht.hsl=Kv;const{floor:Gv}=Math,Wv=(...n)=>{n=xe(n,"hsv");let[e,t,r]=n,i,o,s;if(r*=255,t===0)i=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=Gv(e),u=e-l,h=r*(1-t),f=r*(1-t*u),d=r*(1-t*(1-u));switch(l){case 0:[i,o,s]=[r,d,h];break;case 1:[i,o,s]=[f,r,h];break;case 2:[i,o,s]=[h,r,d];break;case 3:[i,o,s]=[h,f,r];break;case 4:[i,o,s]=[d,h,r];break;case 5:[i,o,s]=[r,h,f];break}}return[i,o,s,n.length>3?n[3]:1]},{min:Qv,max:Yv}=Math,Xv=(...n)=>{n=xe(n,"rgb");let[e,t,r]=n;const i=Qv(e,t,r),o=Yv(e,t,r),s=o-i;let l,u,h;return h=o/255,o===0?(l=Number.NaN,u=0):(u=s/o,e===o&&(l=(t-r)/s),t===o&&(l=2+(r-e)/s),r===o&&(l=4+(e-t)/s),l*=60,l<0&&(l+=360)),[l,u,h]};ae.prototype.hsv=function(){return Xv(this._rgb)};const Zv=(...n)=>new ae(...n,"hsv");Ae.hsv=Zv;we.format.hsv=Wv;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"hsv"),Se(n)==="array"&&n.length===3)return"hsv"}});const Jv=(n,e,t)=>tr(n,e,t,"hsv");ht.hsv=Jv;function Yi(n,e){let t=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,i=e[0].map((s,l)=>e.map(u=>u[l])),o=n.map(s=>i.map(l=>Array.isArray(s)?s.reduce((u,h,f)=>u+h*(l[f]||0),0):l.reduce((u,h)=>u+h*s,0)));return t===1&&(o=o[0]),r===1?o.map(s=>s[0]):o}const Fa=(...n)=>{n=xe(n,"lab");const[e,t,r,...i]=n,[o,s,l]=e1([e,t,r]),[u,h,f]=jh(o,s,l);return[u,h,f,...i.length>0&&i[0]<1?[i[0]]:[]]};function e1(n){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],t=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Yi(t,n);return Yi(e,r.map(i=>i**3))}const Ba=(...n)=>{const[e,t,r,...i]=xe(n,"rgb"),o=Lh(e,t,r);return[...t1(o),...i.length>0&&i[0]<1?[i[0]]:[]]};function t1(n){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Yi(e,n);return Yi(t,r.map(i=>Math.cbrt(i)))}ae.prototype.oklab=function(){return Ba(this._rgb)};const n1=(...n)=>new ae(...n,"oklab");Object.assign(Ae,{oklab:n1});we.format.oklab=Fa;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"oklab"),Se(n)==="array"&&n.length===3)return"oklab"}});const r1=(n,e,t)=>{const r=n.oklab(),i=e.oklab();return new ae(r[0]+t*(i[0]-r[0]),r[1]+t*(i[1]-r[1]),r[2]+t*(i[2]-r[2]),"oklab")};ht.oklab=r1;const i1=(n,e,t)=>tr(n,e,t,"oklch");ht.oklch=i1;const{pow:is,sqrt:os,PI:ss,cos:Wu,sin:Qu,atan2:o1}=Math,s1=(n,e="lrgb",t=null)=>{const r=n.length;t||(t=Array.from(new Array(r)).map(()=>1));const i=r/t.reduce(function(d,c){return d+c});if(t.forEach((d,c)=>{t[c]*=i}),n=n.map(d=>new ae(d)),e==="lrgb")return a1(n,t);const o=n.shift(),s=o.get(e),l=[];let u=0,h=0;for(let d=0;d<s.length;d++)if(s[d]=(s[d]||0)*t[0],l.push(isNaN(s[d])?0:t[0]),e.charAt(d)==="h"&&!isNaN(s[d])){const c=s[d]/180*ss;u+=Wu(c)*t[0],h+=Qu(c)*t[0]}let f=o.alpha()*t[0];n.forEach((d,c)=>{const p=d.get(e);f+=d.alpha()*t[c+1];for(let _=0;_<s.length;_++)if(!isNaN(p[_]))if(l[_]+=t[c+1],e.charAt(_)==="h"){const y=p[_]/180*ss;u+=Wu(y)*t[c+1],h+=Qu(y)*t[c+1]}else s[_]+=p[_]*t[c+1]});for(let d=0;d<s.length;d++)if(e.charAt(d)==="h"){let c=o1(h/l[d],u/l[d])/ss*180;for(;c<0;)c+=360;for(;c>=360;)c-=360;s[d]=c}else s[d]=s[d]/l[d];return f/=r,new ae(s,e).alpha(f>.99999?1:f,!0)},a1=(n,e)=>{const t=n.length,r=[0,0,0,0];for(let i=0;i<n.length;i++){const o=n[i],s=e[i]/t,l=o._rgb;r[0]+=is(l[0],2)*s,r[1]+=is(l[1],2)*s,r[2]+=is(l[2],2)*s,r[3]+=l[3]*s}return r[0]=os(r[0]),r[1]=os(r[1]),r[2]=os(r[2]),r[3]>.9999999&&(r[3]=1),new ae(La(r))},{pow:l1}=Math;function Xi(n){let e="rgb",t=Ae("#ccc"),r=0,i=[0,1],o=[],s=[0,0],l=!1,u=[],h=!1,f=0,d=1,c=!1,p={},_=!0,y=1;const m=function(w){if(w=w||["#fff","#000"],w&&Se(w)==="string"&&Ae.brewer&&Ae.brewer[w.toLowerCase()]&&(w=Ae.brewer[w.toLowerCase()]),Se(w)==="array"){w.length===1&&(w=[w[0],w[0]]),w=w.slice(0);for(let E=0;E<w.length;E++)w[E]=Ae(w[E]);o.length=0;for(let E=0;E<w.length;E++)o.push(E/(w.length-1))}return O(),u=w},g=function(w){if(l!=null){const E=l.length-1;let I=0;for(;I<E&&w>=l[I];)I++;return I-1}return 0};let b=w=>w,N=w=>w;const v=function(w,E){let I,x;if(E==null&&(E=!1),isNaN(w)||w===null)return t;E?x=w:l&&l.length>2?x=g(w)/(l.length-2):d!==f?x=(w-f)/(d-f):x=1,x=N(x),E||(x=b(x)),y!==1&&(x=l1(x,y)),x=s[0]+x*(1-s[0]-s[1]),x=En(x,0,1);const T=Math.floor(x*1e4);if(_&&p[T])I=p[T];else{if(Se(u)==="array")for(let k=0;k<o.length;k++){const S=o[k];if(x<=S){I=u[k];break}if(x>=S&&k===o.length-1){I=u[k];break}if(x>S&&x<o[k+1]){x=(x-S)/(o[k+1]-S),I=Ae.interpolate(u[k],u[k+1],x,e);break}}else Se(u)==="function"&&(I=u(x));_&&(p[T]=I)}return I};var O=()=>p={};m(n);const R=function(w){const E=Ae(v(w));return h&&E[h]?E[h]():E};return R.classes=function(w){if(w!=null){if(Se(w)==="array")l=w,i=[w[0],w[w.length-1]];else{const E=Ae.analyze(i);w===0?l=[E.min,E.max]:l=Ae.limits(E,"e",w)}return R}return l},R.domain=function(w){if(!arguments.length)return i;f=w[0],d=w[w.length-1],o=[];const E=u.length;if(w.length===E&&f!==d)for(let I of Array.from(w))o.push((I-f)/(d-f));else{for(let I=0;I<E;I++)o.push(I/(E-1));if(w.length>2){const I=w.map((T,k)=>k/(w.length-1)),x=w.map(T=>(T-f)/(d-f));x.every((T,k)=>I[k]===T)||(N=T=>{if(T<=0||T>=1)return T;let k=0;for(;T>=x[k+1];)k++;const S=(T-x[k])/(x[k+1]-x[k]);return I[k]+S*(I[k+1]-I[k])})}}return i=[f,d],R},R.mode=function(w){return arguments.length?(e=w,O(),R):e},R.range=function(w,E){return m(w),R},R.out=function(w){return h=w,R},R.spread=function(w){return arguments.length?(r=w,R):r},R.correctLightness=function(w){return w==null&&(w=!0),c=w,O(),c?b=function(E){const I=v(0,!0).lab()[0],x=v(1,!0).lab()[0],T=I>x;let k=v(E,!0).lab()[0];const S=I+(x-I)*E;let D=k-S,F=0,K=1,G=20;for(;Math.abs(D)>.01&&G-- >0;)(function(){return T&&(D*=-1),D<0?(F=E,E+=(K-E)*.5):(K=E,E+=(F-E)*.5),k=v(E,!0).lab()[0],D=k-S})();return E}:b=E=>E,R},R.padding=function(w){return w!=null?(Se(w)==="number"&&(w=[w,w]),s=w,R):s},R.colors=function(w,E){arguments.length<2&&(E="hex");let I=[];if(arguments.length===0)I=u.slice(0);else if(w===1)I=[R(.5)];else if(w>1){const x=i[0],T=i[1]-x;I=u1(0,w).map(k=>R(x+k/(w-1)*T))}else{n=[];let x=[];if(l&&l.length>2)for(let T=1,k=l.length,S=1<=k;S?T<k:T>k;S?T++:T--)x.push((l[T-1]+l[T])*.5);else x=i;I=x.map(T=>R(T))}return Ae[E]&&(I=I.map(x=>x[E]())),I},R.cache=function(w){return w!=null?(_=w,R):_},R.gamma=function(w){return w!=null?(y=w,R):y},R.nodata=function(w){return w!=null?(t=Ae(w),R):t},R}function u1(n,e,t){let r=[],i=n<e,o=e;for(let s=n;i?s<o:s>o;i?s++:s--)r.push(s);return r}const c1=function(n){let e=[1,1];for(let t=1;t<n;t++){let r=[1];for(let i=1;i<=e.length;i++)r[i]=(e[i]||0)+e[i-1];e=r}return e},f1=function(n){let e,t,r,i;if(n=n.map(o=>new ae(o)),n.length===2)[t,r]=n.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(l=>t[l]+o*(r[l]-t[l]));return new ae(s,"lab")};else if(n.length===3)[t,r,i]=n.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(l=>(1-o)*(1-o)*t[l]+2*(1-o)*o*r[l]+o*o*i[l]);return new ae(s,"lab")};else if(n.length===4){let o;[t,r,i,o]=n.map(s=>s.lab()),e=function(s){const l=[0,1,2].map(u=>(1-s)*(1-s)*(1-s)*t[u]+3*(1-s)*(1-s)*s*r[u]+3*(1-s)*s*s*i[u]+s*s*s*o[u]);return new ae(l,"lab")}}else if(n.length>=5){let o,s,l;o=n.map(u=>u.lab()),l=n.length-1,s=c1(l),e=function(u){const h=1-u,f=[0,1,2].map(d=>o.reduce((c,p,_)=>c+s[_]*h**(l-_)*u**_*p[d],0));return new ae(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},h1=n=>{const e=f1(n);return e.scale=()=>Xi(e),e},{round:Fh}=Math;ae.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Fh)};ae.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?n===!1?e:Fh(e):e)};const d1=(...n)=>new ae(...n,"rgb");Object.assign(Ae,{rgb:d1});we.format.rgb=(...n)=>{const e=xe(n,"rgba");return e[3]===void 0&&(e[3]=1),e};we.autodetect.push({p:3,test:(...n)=>{if(n=xe(n,"rgba"),Se(n)==="array"&&(n.length===3||n.length===4&&Se(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const Pt=(n,e,t)=>{if(!Pt[t])throw new Error("unknown blend mode "+t);return Pt[t](n,e)},dn=n=>(e,t)=>{const r=Ae(t).rgb(),i=Ae(e).rgb();return Ae.rgb(n(r,i))},pn=n=>(e,t)=>{const r=[];return r[0]=n(e[0],t[0]),r[1]=n(e[1],t[1]),r[2]=n(e[2],t[2]),r},p1=n=>n,m1=(n,e)=>n*e/255,g1=(n,e)=>n>e?e:n,y1=(n,e)=>n>e?n:e,v1=(n,e)=>255*(1-(1-n/255)*(1-e/255)),_1=(n,e)=>e<128?2*n*e/255:255*(1-2*(1-n/255)*(1-e/255)),b1=(n,e)=>255*(1-(1-e/255)/(n/255)),w1=(n,e)=>n===255?255:(n=255*(e/255)/(1-n/255),n>255?255:n);Pt.normal=dn(pn(p1));Pt.multiply=dn(pn(m1));Pt.screen=dn(pn(v1));Pt.overlay=dn(pn(_1));Pt.darken=dn(pn(g1));Pt.lighten=dn(pn(y1));Pt.dodge=dn(pn(w1));Pt.burn=dn(pn(b1));const{pow:E1,sin:T1,cos:x1}=Math;function A1(n=300,e=-1.5,t=1,r=1,i=[0,1]){let o=0,s;Se(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const l=function(u){const h=Ut*((n+120)/360+e*u),f=E1(i[0]+s*u,r),c=(o!==0?t[0]+u*o:t)*f*(1-f)/2,p=x1(h),_=T1(h),y=f+c*(-.14861*p+1.78277*_),m=f+c*(-.29227*p-.90649*_),g=f+c*(1.97294*p);return Ae(La([y*255,m*255,g*255,1]))};return l.start=function(u){return u==null?n:(n=u,l)},l.rotations=function(u){return u==null?e:(e=u,l)},l.gamma=function(u){return u==null?r:(r=u,l)},l.hue=function(u){return u==null?t:(t=u,Se(t)==="array"?(o=t[1]-t[0],o===0&&(t=t[1])):o=0,l)},l.lightness=function(u){return u==null?i:(Se(u)==="array"?(i=u,s=u[1]-u[0]):(i=[u,u],s=0),l)},l.scale=()=>Ae.scale(l),l.hue(t),l}const k1="0123456789abcdef",{floor:I1,random:N1}=Math,S1=()=>{let n="#";for(let e=0;e<6;e++)n+=k1.charAt(I1(N1()*16));return new ae(n,"hex")},{log:Yu,pow:O1,floor:P1,abs:R1}=Math;function Bh(n,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Se(n)==="object"&&(n=Object.values(n)),n.forEach(r=>{e&&Se(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(t.values.push(r),t.sum+=r,r<t.min&&(t.min=r),r>t.max&&(t.max=r),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(r,i)=>$h(t,r,i),t}function $h(n,e="equal",t=7){Se(n)=="array"&&(n=Bh(n));const{min:r,max:i}=n,o=n.values.sort((l,u)=>l-u);if(t===1)return[r,i];const s=[];if(e.substr(0,1)==="c"&&(s.push(r),s.push(i)),e.substr(0,1)==="e"){s.push(r);for(let l=1;l<t;l++)s.push(r+l/t*(i-r));s.push(i)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const l=Math.LOG10E*Yu(r),u=Math.LOG10E*Yu(i);s.push(r);for(let h=1;h<t;h++)s.push(O1(10,l+h/t*(u-l)));s.push(i)}else if(e.substr(0,1)==="q"){s.push(r);for(let l=1;l<t;l++){const u=(o.length-1)*l/t,h=P1(u);if(h===u)s.push(o[h]);else{const f=u-h;s.push(o[h]*(1-f)+o[h+1]*f)}}s.push(i)}else if(e.substr(0,1)==="k"){let l;const u=o.length,h=new Array(u),f=new Array(t);let d=!0,c=0,p=null;p=[],p.push(r);for(let m=1;m<t;m++)p.push(r+m/t*(i-r));for(p.push(i);d;){for(let g=0;g<t;g++)f[g]=0;for(let g=0;g<u;g++){const b=o[g];let N=Number.MAX_VALUE,v;for(let O=0;O<t;O++){const R=R1(p[O]-b);R<N&&(N=R,v=O),f[v]++,h[g]=v}}const m=new Array(t);for(let g=0;g<t;g++)m[g]=null;for(let g=0;g<u;g++)l=h[g],m[l]===null?m[l]=o[g]:m[l]+=o[g];for(let g=0;g<t;g++)m[g]*=1/f[g];d=!1;for(let g=0;g<t;g++)if(m[g]!==p[g]){d=!0;break}p=m,c++,c>200&&(d=!1)}const _={};for(let m=0;m<t;m++)_[m]=[];for(let m=0;m<u;m++)l=h[m],_[l].push(o[m]);let y=[];for(let m=0;m<t;m++)y.push(_[m][0]),y.push(_[m][_[m].length-1]);y=y.sort((m,g)=>m-g),s.push(y[0]);for(let m=1;m<y.length;m+=2){const g=y[m];!isNaN(g)&&s.indexOf(g)===-1&&s.push(g)}}return s}const C1=(n,e)=>{n=new ae(n),e=new ae(e);const t=n.luminance(),r=e.luminance();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const Xu=.027,j1=5e-4,L1=.1,Zu=1.14,xi=.022,Ju=1.414,D1=(n,e)=>{n=new ae(n),e=new ae(e),n.alpha()<1&&(n=Wn(e,n,n.alpha(),"rgb"));const t=ec(...n.rgb()),r=ec(...e.rgb()),i=t>=xi?t:t+Math.pow(xi-t,Ju),o=r>=xi?r:r+Math.pow(xi-r,Ju),s=Math.pow(o,.56)-Math.pow(i,.57),l=Math.pow(o,.65)-Math.pow(i,.62),u=Math.abs(o-i)<j1?0:i<o?s*Zu:l*Zu;return(Math.abs(u)<L1?0:u>0?u-Xu:u+Xu)*100};function ec(n,e,t){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(t/255,2.4)}const{sqrt:$t,pow:Qe,min:M1,max:V1,atan2:tc,abs:nc,cos:Ai,sin:rc,exp:q1,PI:ic}=Math;function F1(n,e,t=1,r=1,i=1){var o=function(q){return 360*q/(2*ic)},s=function(q){return 2*ic*q/360};n=new ae(n),e=new ae(e);const[l,u,h]=Array.from(n.lab()),[f,d,c]=Array.from(e.lab()),p=(l+f)/2,_=$t(Qe(u,2)+Qe(h,2)),y=$t(Qe(d,2)+Qe(c,2)),m=(_+y)/2,g=.5*(1-$t(Qe(m,7)/(Qe(m,7)+Qe(25,7)))),b=u*(1+g),N=d*(1+g),v=$t(Qe(b,2)+Qe(h,2)),O=$t(Qe(N,2)+Qe(c,2)),R=(v+O)/2,w=o(tc(h,b)),E=o(tc(c,N)),I=w>=0?w:w+360,x=E>=0?E:E+360,T=nc(I-x)>180?(I+x+360)/2:(I+x)/2,k=1-.17*Ai(s(T-30))+.24*Ai(s(2*T))+.32*Ai(s(3*T+6))-.2*Ai(s(4*T-63));let S=x-I;S=nc(S)<=180?S:x<=I?S+360:S-360,S=2*$t(v*O)*rc(s(S)/2);const D=f-l,F=O-v,K=1+.015*Qe(p-50,2)/$t(20+Qe(p-50,2)),G=1+.045*R,re=1+.015*R*k,z=30*q1(-Qe((T-275)/25,2)),j=-(2*$t(Qe(R,7)/(Qe(R,7)+Qe(25,7))))*rc(2*s(z)),V=$t(Qe(D/(t*K),2)+Qe(F/(r*G),2)+Qe(S/(i*re),2)+j*(F/(r*G))*(S/(i*re)));return V1(0,M1(100,V))}function B1(n,e,t="lab"){n=new ae(n),e=new ae(e);const r=n.get(t),i=e.get(t);let o=0;for(let s in r){const l=(r[s]||0)-(i[s]||0);o+=l*l}return Math.sqrt(o)}const $1=(...n)=>{try{return new ae(...n),!0}catch{return!1}},U1={cool(){return Xi([Ae.hsl(180,1,.9),Ae.hsl(250,.7,.4)])},hot(){return Xi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Vs={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Uh=Object.keys(Vs),oc=new Map(Uh.map(n=>[n.toLowerCase(),n])),z1=typeof Proxy=="function"?new Proxy(Vs,{get(n,e){const t=e.toLowerCase();if(oc.has(t))return n[oc.get(t)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Uh)}}):Vs,H1=(...n)=>{n=xe(n,"cmyk");const[e,t,r,i]=n,o=n.length>4?n[4]:1;return i===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-i),t>=1?0:255*(1-t)*(1-i),r>=1?0:255*(1-r)*(1-i),o]},{max:sc}=Math,K1=(...n)=>{let[e,t,r]=xe(n,"rgb");e=e/255,t=t/255,r=r/255;const i=1-sc(e,sc(t,r)),o=i<1?1/(1-i):0,s=(1-e-i)*o,l=(1-t-i)*o,u=(1-r-i)*o;return[s,l,u,i]};ae.prototype.cmyk=function(){return K1(this._rgb)};const G1=(...n)=>new ae(...n,"cmyk");Object.assign(Ae,{cmyk:G1});we.format.cmyk=H1;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"cmyk"),Se(n)==="array"&&n.length===4)return"cmyk"}});const W1=(...n)=>{const e=xe(n,"hsla");let t=er(n)||"lsa";return e[0]=Tt(e[0]||0)+"deg",e[1]=Tt(e[1]*100)+"%",e[2]=Tt(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),t="hsla"):e.length=3,`${t.substr(0,3)}(${e.join(" ")})`},Q1=(...n)=>{const e=xe(n,"lab");let t=er(n)||"lab";return e[0]=Tt(e[0])+"%",e[1]=Tt(e[1]),e[2]=Tt(e[2]),t==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},Y1=(...n)=>{const e=xe(n,"lch");let t=er(n)||"lab";return e[0]=Tt(e[0])+"%",e[1]=Tt(e[1]),e[2]=isNaN(e[2])?"none":Tt(e[2])+"deg",t==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},X1=(...n)=>{const e=xe(n,"lab");return e[0]=Tt(e[0]*100)+"%",e[1]=Ds(e[1]),e[2]=Ds(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},zh=(...n)=>{const[e,t,r,...i]=xe(n,"rgb"),[o,s,l]=Ba(e,t,r),[u,h,f]=Mh(o,s,l);return[u,h,f,...i.length>0&&i[0]<1?[i[0]]:[]]},Z1=(...n)=>{const e=xe(n,"lch");return e[0]=Tt(e[0]*100)+"%",e[1]=Ds(e[1]),e[2]=isNaN(e[2])?"none":Tt(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:as}=Math,J1=(...n)=>{const e=xe(n,"rgba");let t=er(n)||"rgb";if(t.substr(0,3)==="hsl")return W1(qh(e),t);if(t.substr(0,3)==="lab"){const r=Ur();Ht("d50");const i=Q1(Ma(e),t);return Ht(r),i}if(t.substr(0,3)==="lch"){const r=Ur();Ht("d50");const i=Y1(qa(e),t);return Ht(r),i}return t.substr(0,5)==="oklab"?X1(Ba(e)):t.substr(0,5)==="oklch"?Z1(zh(e)):(e[0]=as(e[0]),e[1]=as(e[1]),e[2]=as(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),t="rgba"),`${t.substr(0,3)}(${e.slice(0,t==="rgb"?3:4).join(" ")})`)},Hh=(...n)=>{n=xe(n,"lch");const[e,t,r,...i]=n,[o,s,l]=Dh(e,t,r),[u,h,f]=Fa(o,s,l);return[u,h,f,...i.length>0&&i[0]<1?[i[0]]:[]]},Gt=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,St=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Zi=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,At=/\s*/.source,nr=/\s+/.source,$a=/\s*,\s*/.source,To=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,rr=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Kh=new RegExp("^rgba?\\("+At+[Gt,Gt,Gt].join(nr)+rr+"\\)$"),Gh=new RegExp("^rgb\\("+At+[Gt,Gt,Gt].join($a)+At+"\\)$"),Wh=new RegExp("^rgba\\("+At+[Gt,Gt,Gt,St].join($a)+At+"\\)$"),Qh=new RegExp("^hsla?\\("+At+[To,Zi,Zi].join(nr)+rr+"\\)$"),Yh=new RegExp("^hsl?\\("+At+[To,Zi,Zi].join($a)+At+"\\)$"),Xh=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Zh=new RegExp("^lab\\("+At+[St,St,St].join(nr)+rr+"\\)$"),Jh=new RegExp("^lch\\("+At+[St,St,To].join(nr)+rr+"\\)$"),ed=new RegExp("^oklab\\("+At+[St,St,St].join(nr)+rr+"\\)$"),td=new RegExp("^oklch\\("+At+[St,St,To].join(nr)+rr+"\\)$"),{round:nd}=Math,Cn=n=>n.map((e,t)=>t<=2?En(nd(e),0,255):e),Ye=(n,e=0,t=100,r=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,r?n=e+(n+1)*.5*(t-e):n=e+n*(t-e)),+n),mt=(n,e)=>n==="none"?e:n,Ua=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let e;if(we.format.named)try{return we.format.named(n)}catch{}if((e=n.match(Kh))||(e=n.match(Gh))){let t=e.slice(1,4);for(let i=0;i<3;i++)t[i]=+Ye(mt(t[i],0),0,255);t=Cn(t);const r=e[4]!==void 0?+Ye(e[4],0,1):1;return t[3]=r,t}if(e=n.match(Wh)){const t=e.slice(1,5);for(let r=0;r<4;r++)t[r]=+Ye(t[r],0,255);return t}if((e=n.match(Qh))||(e=n.match(Yh))){const t=e.slice(1,4);t[0]=+mt(t[0].replace("deg",""),0),t[1]=+Ye(mt(t[1],0),0,100)*.01,t[2]=+Ye(mt(t[2],0),0,100)*.01;const r=Cn(Ms(t)),i=e[4]!==void 0?+Ye(e[4],0,1):1;return r[3]=i,r}if(e=n.match(Xh)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const r=Ms(t);for(let i=0;i<3;i++)r[i]=nd(r[i]);return r[3]=+e[4],r}if(e=n.match(Zh)){const t=e.slice(1,4);t[0]=Ye(mt(t[0],0),0,100),t[1]=Ye(mt(t[1],0),-125,125,!0),t[2]=Ye(mt(t[2],0),-125,125,!0);const r=Ur();Ht("d50");const i=Cn(Da(t));Ht(r);const o=e[4]!==void 0?+Ye(e[4],0,1):1;return i[3]=o,i}if(e=n.match(Jh)){const t=e.slice(1,4);t[0]=Ye(t[0],0,100),t[1]=Ye(mt(t[1],0),0,150,!1),t[2]=+mt(t[2].replace("deg",""),0);const r=Ur();Ht("d50");const i=Cn(Va(t));Ht(r);const o=e[4]!==void 0?+Ye(e[4],0,1):1;return i[3]=o,i}if(e=n.match(ed)){const t=e.slice(1,4);t[0]=Ye(mt(t[0],0),0,1),t[1]=Ye(mt(t[1],0),-.4,.4,!0),t[2]=Ye(mt(t[2],0),-.4,.4,!0);const r=Cn(Fa(t)),i=e[4]!==void 0?+Ye(e[4],0,1):1;return r[3]=i,r}if(e=n.match(td)){const t=e.slice(1,4);t[0]=Ye(mt(t[0],0),0,1),t[1]=Ye(mt(t[1],0),0,.4,!1),t[2]=+mt(t[2].replace("deg",""),0);const r=Cn(Hh(t)),i=e[4]!==void 0?+Ye(e[4],0,1):1;return r[3]=i,r}};Ua.test=n=>Kh.test(n)||Qh.test(n)||Zh.test(n)||Jh.test(n)||ed.test(n)||td.test(n)||Gh.test(n)||Wh.test(n)||Yh.test(n)||Xh.test(n)||n==="transparent";ae.prototype.css=function(n){return J1(this._rgb,n)};const e_=(...n)=>new ae(...n,"css");Ae.css=e_;we.format.css=Ua;we.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Se(n)==="string"&&Ua.test(n))return"css"}});we.format.gl=(...n)=>{const e=xe(n,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const t_=(...n)=>new ae(...n,"gl");Ae.gl=t_;ae.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};ae.prototype.hex=function(n){return Ch(this._rgb,n)};const n_=(...n)=>new ae(...n,"hex");Ae.hex=n_;we.format.hex=Rh;we.autodetect.push({p:4,test:(n,...e)=>{if(!e.length&&Se(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:ki}=Math,rd=n=>{const e=n/100;let t,r,i;return e<66?(t=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*ki(r),i=e<20?0:-254.76935184120902+.8274096064007395*(i=e-10)+115.67994401066147*ki(i)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*ki(t),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*ki(r),i=255),[t,r,i,1]},{round:r_}=Math,i_=(...n)=>{const e=xe(n,"rgb"),t=e[0],r=e[2];let i=1e3,o=4e4;const s=.4;let l;for(;o-i>s;){l=(o+i)*.5;const u=rd(l);u[2]/u[0]>=r/t?o=l:i=l}return r_(l)};ae.prototype.temp=ae.prototype.kelvin=ae.prototype.temperature=function(){return i_(this._rgb)};const ls=(...n)=>new ae(...n,"temp");Object.assign(Ae,{temp:ls,kelvin:ls,temperature:ls});we.format.temp=we.format.kelvin=we.format.temperature=rd;ae.prototype.oklch=function(){return zh(this._rgb)};const o_=(...n)=>new ae(...n,"oklch");Object.assign(Ae,{oklch:o_});we.format.oklch=Hh;we.autodetect.push({p:2,test:(...n)=>{if(n=xe(n,"oklch"),Se(n)==="array"&&n.length===3)return"oklch"}});Object.assign(Ae,{analyze:Bh,average:s1,bezier:h1,blend:Pt,brewer:z1,Color:ae,colors:Gn,contrast:C1,contrastAPCA:D1,cubehelix:A1,deltaE:F1,distance:B1,input:we,interpolate:Wn,limits:$h,mix:Wn,random:S1,scale:Xi,scales:U1,valid:$1});const us={light:{primaryColor:"#3b82f6",secondaryColor:"#6b7280",titleColor:"#1f2937",h3TitleColor:"#1f2937",textColor:"#1f2937",backgroundFromColor:"#ffffff",backgroundToColor:"#f3f4f6",sectionBgColor:"#f3f4f6"},dark:{primaryColor:"#60a5fa",secondaryColor:"#9ca3af",titleColor:"#f9fafb",h3TitleColor:"#f9fafb",textColor:"#f9fafb",backgroundFromColor:"#111827",backgroundToColor:"#1f2937",sectionBgColor:"#111827"},forest:{primaryColor:"#34d399",secondaryColor:"#6b7280",titleColor:"#064e3b",h3TitleColor:"#064e3b",textColor:"#064e3b",backgroundFromColor:"#d1fae5",backgroundToColor:"#ecfdf5",sectionBgColor:"#d1fae5"},ocean:{primaryColor:"#38bdf8",secondaryColor:"#94a3b8",titleColor:"#0c4a6e",h3TitleColor:"#0c4a6e",textColor:"#0c4a6e",backgroundFromColor:"#e0f2fe",backgroundToColor:"#f0f9ff",sectionBgColor:"#e0f2fe"},sunset:{primaryColor:"#fb7185",secondaryColor:"#f97316",titleColor:"#881337",h3TitleColor:"#881337",textColor:"#881337",backgroundFromColor:"#ffe4e6",backgroundToColor:"#fff1f2",sectionBgColor:"#ffe4e6"}},s_=({onThemeSelect:n})=>{const e=[{name:"Light",value:"light",icon:""},{name:"Dark",value:"dark",icon:""},{name:"Forest",value:"forest",icon:""},{name:"Ocean",value:"ocean",icon:""},{name:"Sunset",value:"sunset",icon:""}],[t,r]=ie.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem("theme");return o&&us[o]?o:"light"}return"light"});ie.useEffect(()=>{if(typeof window<"u"){const o=Object.keys(us);document.documentElement.classList.remove(...o),document.documentElement.classList.add(t),localStorage.setItem("theme",t)}},[t]);const i=o=>{const s=us[o];s?(r(o),n(s)):console.warn(`Theme data not found for: ${o}`)};return C.jsx("div",{className:"theme-switcher",children:C.jsx("div",{className:"flex items-center space-x-1 sm:space-x-2 p-1 sm:p-2 bg-[var(--color-background-secondary)] rounded-lg border border-gray-300 dark:border-gray-700",children:C.jsx("div",{className:"flex space-x-1",children:e.map(o=>C.jsx("button",{onClick:()=>i(o.value),className:`p-1 sm:p-2 rounded-md text-xs sm:text-sm transition-colors duration-150 ${t===o.value?"bg-[var(--color-primary)] text-white shadow-md":"bg-[var(--color-background-secondary)] text-[var(--color-text)] hover:bg-[var(--color-secondary)] hover:text-white"}`,title:o.name,children:C.jsx("span",{className:"flex items-center",children:C.jsx("span",{className:"mr-1",children:o.icon})})},o.value))})})})},Ve={primaryColor:"#377dc8",secondaryColor:"#0f3257",fontFamily:"'Noto Sans', sans-serif",titleColor:"#d7e3ee",h3TitleColor:"#d7e3ee",textColor:"#c6d3e2",backgroundFromColor:"#111827",backgroundToColor:"#1F2937",sectionBgColor:"#374151"},a_=()=>{const[n,e]=ie.useState(Ve.primaryColor),[t,r]=ie.useState(Ve.secondaryColor),[i,o]=ie.useState(Ve.fontFamily),[s,l]=ie.useState(Ve.titleColor??"#ffffff"),[u,h]=ie.useState(Ve.h3TitleColor??"#d7e3ee"),[f,d]=ie.useState(Ve.textColor??"#c6d3e2"),[c,p]=ie.useState(Ve.backgroundFromColor??"#111827"),[_,y]=ie.useState(Ve.backgroundToColor??"#1F2937"),[m,g]=ie.useState(Ve.sectionBgColor??"#374151"),[b,N]=ie.useState(!0),[v,O]=ie.useState(!1),[R,w]=ie.useState(0),[E,I]=ie.useState([]),[x,T]=ie.useState(""),[k,S]=ie.useState(!0),[D,F]=ie.useState("colors");ie.useState(!1),ie.useState(null),ie.useEffect(()=>{z()},[]),ie.useEffect(()=>{b||K()},[n,t,i,s,u,f,c,_,m,b]);const K=()=>{const $=document.documentElement,X=G({primaryColor:n,secondaryColor:t,titleColor:s,h3TitleColor:u,textColor:f,backgroundFromColor:c,backgroundToColor:_,sectionBgColor:m});Object.entries(X).forEach(([se,le])=>{$.style.setProperty(`--${se.replace(/([A-Z])/g,"-$1").toLowerCase()}`,le)}),$.style.setProperty("--font-family",i)},G=$=>{const X={};return Object.entries($).forEach(([se,le])=>{X[se]=le.match(/^#[0-9A-F]{6}$/i)?le:Ve[se]||"#000000"}),X},re=$=>{e($.primaryColor),r($.secondaryColor),l($.titleColor),h($.h3TitleColor),d($.textColor),p($.backgroundFromColor),y($.backgroundToColor),g($.sectionBgColor)},z=async()=>{if(!pe){console.error("Firestore not available"),N(!1);return}try{const $=await z0(We(pe,"settings","styles"));if($.exists()){const le=$.data();e(le.primaryColor||Ve.primaryColor),r(le.secondaryColor||Ve.secondaryColor),o(le.fontFamily||Ve.fontFamily),l(le.titleColor||Ve.titleColor||"#ffffff"),h(le.h3TitleColor||Ve.h3TitleColor||"#d7e3ee"),d(le.textColor||Ve.textColor||"#c6d3e2"),p(le.backgroundFromColor||Ve.backgroundFromColor||"#111827"),y(le.backgroundToColor||Ve.backgroundToColor||"#1F2937"),g(le.sectionBgColor||Ve.sectionBgColor||"#374151")}const se=(await Jr(Hn(pe,"themes"))).docs.map(le=>({id:le.id,...le.data()}));I(se)}catch($){console.error("Error loading data:",$)}finally{N(!1),S(!1)}},B=async()=>{if(!pe){console.error("Firestore not available");return}O(!0);try{const $={primaryColor:n,secondaryColor:t,fontFamily:i,titleColor:s,h3TitleColor:u,textColor:f,backgroundFromColor:c,backgroundToColor:_,sectionBgColor:m};await js(We(pe,"settings","styles"),$),alert("Styles saved successfully!")}catch($){console.error("Error saving styles:",$),alert("Failed to save styles")}finally{O(!1)}},j=async()=>{if(!(!pe||!x.trim())){O(!0);try{const $={name:x.trim(),style:{primaryColor:n,secondaryColor:t,fontFamily:i,titleColor:s,h3TitleColor:u,textColor:f,backgroundFromColor:c,backgroundToColor:_,sectionBgColor:m}};await Ca(Hn(pe,"themes"),$),z(),T(""),alert("Theme saved successfully!")}catch($){console.error("Error saving theme:",$),alert("Failed to save theme")}finally{O(!1)}}},V=async $=>{if(!(!pe||!window.confirm("Are you sure you want to delete this theme?")))try{await Ra(We(pe,"themes",$)),I(X=>X.filter(se=>se.id!==$))}catch(X){console.error("Error deleting theme:",X),alert("Failed to delete theme")}},q=$=>{const{style:X}=$;e(X.primaryColor),r(X.secondaryColor),o(X.fontFamily),l(X.titleColor||Ve.titleColor||"#ffffff"),h(X.h3TitleColor||Ve.h3TitleColor||"#d7e3ee"),d(X.textColor||Ve.textColor||"#c6d3e2"),p(X.backgroundFromColor||Ve.backgroundFromColor||"#111827"),y(X.backgroundToColor||Ve.backgroundToColor||"#1F2937"),g(X.sectionBgColor||Ve.sectionBgColor||"#374151")},W=()=>{try{const $=Ae.valid(n)?Ae(n):Ae(Ve.primaryColor),X=R%3;let se,le;switch(X){case 1:se=$.set("hsl.h","+30").hex(),le=$.set("hsl.h","-30").hex();break;case 2:se=$.set("hsl.h","+120").hex(),le=$.set("hsl.h","-120").hex();break;default:se=$.set("hsl.h","+180").hex(),le=$.set("hsl.h","+150").hex();break}r(se);const me=Ae.mix($.brighten(1.5),"#ffffff",.1).hex(),_e=Ae.mix($.brighten(1),"#ffffff",.05).hex(),Ie=Ae.mix($.brighten(2.5).desaturate(.5),"#ffffff",.2).hex();l(me),h(_e),d(Ie),p($.darken(2.2).desaturate(.5).hex()),y($.darken(1.8).desaturate(.3).hex()),g($.darken(1.5).desaturate(.4).hex()),w(Je=>Je+1)}catch($){console.error("Error generating AI colors:",$),alert("Failed to generate colors")}},H=()=>{const $={primaryColor:n,secondaryColor:t,fontFamily:i,titleColor:s,h3TitleColor:u,textColor:f,backgroundFromColor:c,backgroundToColor:_,sectionBgColor:m},X=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),se=URL.createObjectURL(X),le=document.createElement("a");le.href=se,le.download="theme.json",document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(se)},M=$=>{var le;const X=(le=$.target.files)==null?void 0:le[0];if(!X)return;const se=new FileReader;se.onload=me=>{var _e;try{const Ie=JSON.parse((_e=me.target)==null?void 0:_e.result);re(Ie)}catch(Ie){console.error("Error importing theme:",Ie),alert("Invalid theme file")}},se.readAsText(X)},U=($,X,se,le)=>C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:$}),C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 space-y-2 sm:space-y-0",children:[C.jsx("input",{type:"color",value:X,onChange:me=>se(me.target.value),className:"h-10 w-10 p-1 border border-gray-300 rounded cursor-pointer self-start sm:self-center"}),C.jsx("input",{type:"text",value:X,onChange:me=>se(me.target.value),className:"w-full sm:flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:7}),C.jsx("button",{onClick:()=>{navigator.clipboard.writeText(X),alert("Color code copied!")},className:"p-2 text-gray-500 hover:text-gray-700 self-start sm:self-center",title:"Copy color code",children:C.jsx(jp,{size:20})})]}),le&&C.jsx("p",{className:"mt-1 text-sm text-gray-500",children:le})]}),Y=[{id:"colors",label:"Colors",icon:C.jsx(zc,{size:20})},{id:"typography",label:"Typography",icon:C.jsx(Om,{size:20})},{id:"layout",label:"Layout",icon:C.jsx(dm,{size:20})},{id:"advanced",label:"Advanced",icon:C.jsx(Em,{size:20})}];return b?C.jsx("div",{className:"flex items-center justify-center h-64",children:C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[C.jsxs("div",{className:"border-b border-gray-200 overflow-x-auto",children:[" ",C.jsxs("nav",{className:"-mb-px flex space-x-8 whitespace-nowrap",children:[" ",Y.map($=>C.jsxs("button",{onClick:()=>F($.id),className:`
                  flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm
                  ${D===$.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[$.icon,C.jsx("span",{children:$.label})]},$.id))]})]}),C.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[D==="colors"&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Color Settings"}),C.jsxs("button",{onClick:W,className:"flex items-center justify-center sm:justify-start space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors w-full sm:w-auto",children:[C.jsx(Dm,{size:16}),C.jsx("span",{children:"Generate AI Colors"})]})]}),U("Primary Color",n,e,"Main brand color used for buttons and important elements"),U("Secondary Color",t,r,"Supporting color for secondary elements"),U("Title Color",s,l,"Color for main headings"),U("Subtitle Color",u,h,"Color for subheadings"),U("Text Color",f,d,"Color for body text"),C.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[C.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Background Colors"}),U("Background Start",c,p,"Starting color for background gradient"),U("Background End",_,y,"Ending color for background gradient"),U("Section Background",m,g,"Background color for content sections")]})]}),D==="typography"&&C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Typography Settings"}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Family"}),C.jsxs("select",{value:i,onChange:$=>o($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[C.jsx("option",{value:"'Noto Sans', sans-serif",children:"Noto Sans"}),C.jsx("option",{value:"'Arial', sans-serif",children:"Arial"}),C.jsx("option",{value:"'Helvetica', sans-serif",children:"Helvetica"}),C.jsx("option",{value:"'Georgia', serif",children:"Georgia"}),C.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"})]})]}),C.jsxs("div",{className:"mt-6 p-6 bg-gray-50 rounded-lg",children:[C.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Preview"}),C.jsxs("div",{style:{fontFamily:i},children:[C.jsx("h1",{style:{color:s},className:"text-4xl font-bold mb-4",children:"Heading 1"}),C.jsx("h2",{style:{color:u},className:"text-3xl font-semibold mb-4",children:"Heading 2"}),C.jsx("h3",{style:{color:u},className:"text-2xl font-medium mb-4",children:"Heading 3"}),C.jsx("p",{style:{color:f},className:"mb-4",children:"This is a paragraph of text that shows how your typography settings will look in the actual content. The quick brown fox jumps over the lazy dog."})]})]})]}),D==="layout"&&C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Layout Settings"}),C.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"p-4 rounded",style:{backgroundColor:m},children:[C.jsx("h4",{style:{color:u},className:"text-lg font-medium mb-2",children:"Section Preview"}),C.jsx("p",{style:{color:f},className:"text-sm",children:"Preview of section background and spacing"})]}),C.jsxs("div",{className:"p-4 rounded",style:{backgroundColor:m},children:[C.jsx("h4",{style:{color:u},className:"text-lg font-medium mb-2",children:"Content Area"}),C.jsx("p",{style:{color:f},className:"text-sm",children:"Sample content area layout"})]})]})})]}),D==="advanced"&&C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Advanced Settings"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("button",{onClick:H,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[C.jsx(Dp,{size:16}),C.jsx("span",{children:"Export Theme"})]}),C.jsxs("label",{className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors cursor-pointer",children:[C.jsx(Rm,{size:16}),C.jsx("span",{children:"Import Theme"}),C.jsx("input",{type:"file",accept:".json",onChange:M,className:"hidden"})]})]})})]})]}),C.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0",children:[C.jsxs("button",{onClick:()=>re(Ve),className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[C.jsx(mm,{size:16}),C.jsx("span",{children:"Reset to Defaults"})]}),C.jsxs("button",{onClick:B,disabled:v,className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[C.jsx(Hc,{size:16}),C.jsx("span",{children:v?"Saving...":"Save Changes"})]})]})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Global Theme"}),C.jsx(s_,{onThemeSelect:re})]}),C.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Saved Themes"}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[C.jsx("input",{type:"text",value:x,onChange:$=>T($.target.value),placeholder:"Enter theme name",className:"w-full sm:flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),C.jsx("button",{onClick:j,disabled:!x.trim()||v,className:"w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex-shrink-0",children:"Save"})]})}),C.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:E.map($=>C.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[C.jsx("span",{className:"font-medium text-gray-700",children:$.name}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("button",{onClick:()=>q($),className:"text-blue-600 hover:text-blue-800",children:"Apply"}),C.jsx("button",{onClick:()=>V($.id),className:"text-red-600 hover:text-red-800",children:C.jsx(Di,{size:16})})]})]},$.id))})]})]})]})},Ii=["Github","Facebook","Mail","Instagram","Linkedin","Twitter"],l_=()=>{const[n,e]=ie.useState([]),[t,r]=ie.useState(!0),[i,o]=ie.useState(null),[s,l]=ie.useState(!1),[u,h]=ie.useState(null),[f,d]=ie.useState({name:"",url:"",icon:Ii[0],order:0}),c=ie.useMemo(()=>pe?Hn(pe,"socialLinks"):null,[]),p=ie.useCallback(async()=>{if(!pe||!c){o("Firestore is not initialized correctly."),r(!1);return}r(!0),o(null);try{const R=bo(c,wo("order","asc")),E=(await Jr(R)).docs.map(I=>({...I.data(),id:I.id}));e(E)}catch(R){console.error("Error fetching social links:",R),o("Failed to load social links. Please try again.")}finally{r(!1)}},[c]);ie.useEffect(()=>{p()},[p]);const _=R=>{const{name:w,value:E}=R.target;d(I=>({...I,[w]:w==="order"?parseInt(E,10)||0:E}))},y=()=>{l(!1),h(null),d({name:"",url:"",icon:Ii[0],order:0})},m=async R=>{if(R.preventDefault(),!f.name||!f.url||!f.icon){o("Name, URL, and Icon are required.");return}if(o(null),!pe||!c){o("Firestore is not initialized correctly.");return}try{await Ca(c,f),y(),p()}catch(w){console.error("Error adding link:",w),o("Failed to add link. Please try again.")}},g=async R=>{if(R.preventDefault(),!u||!f.name||!f.url||!f.icon){o("Name, URL, and Icon are required.");return}if(o(null),!pe){o("Firestore is not initialized correctly.");return}try{const w=We(pe,"socialLinks",u);await Qi(w,f),y(),p()}catch(w){console.error("Error updating link:",w),o("Failed to update link. Please try again.")}},b=async R=>{if(R===0||!pe)return;o(null);const w=n[R],E=n[R-1],I=Ls(pe),x=We(pe,"socialLinks",w.id),T=We(pe,"socialLinks",E.id);I.update(x,{order:E.order}),I.update(T,{order:w.order});try{await I.commit(),p()}catch(k){console.error("Error moving link up:",k),o("Failed to reorder link. Please try again.")}},N=async R=>{if(R===n.length-1||!pe)return;o(null);const w=n[R],E=n[R+1],I=Ls(pe),x=We(pe,"socialLinks",w.id),T=We(pe,"socialLinks",E.id);I.update(x,{order:E.order}),I.update(T,{order:w.order});try{await I.commit(),p()}catch(k){console.error("Error moving link down:",k),o("Failed to reorder link. Please try again.")}},v=async R=>{if(window.confirm("Are you sure you want to delete this link?")){if(o(null),!pe){o("Firestore is not initialized correctly.");return}try{const w=We(pe,"socialLinks",R);await Ra(w),p()}catch(w){console.error("Error deleting link:",w),o("Failed to delete link. Please try again.")}}},O=R=>{h(R.id),d({name:R.name,url:R.url,icon:R.icon,order:R.order}),l(!1)};return C.jsxs("div",{className:"p-4 md:p-6 bg-gray-800 rounded-lg shadow-lg text-gray-200",children:[C.jsx("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Manage Social Links"}),i&&C.jsx("p",{className:"text-red-400 bg-red-900/50 p-3 rounded mb-4",children:i}),t&&C.jsx("p",{children:"Loading links..."}),(s||u)&&C.jsxs("form",{onSubmit:u?g:m,className:"mb-6 p-4 bg-gray-700 rounded",children:[C.jsx("h3",{className:"text-xl font-medium mb-3 text-white",children:u?"Edit Link":"Add New Link"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[C.jsx("input",{type:"text",name:"name",placeholder:"Link Name (e.g., GitHub)",value:f.name,onChange:_,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0}),C.jsx("input",{type:"url",name:"url",placeholder:"Full URL (e.g., https://github.com/user)",value:f.url,onChange:_,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0}),C.jsxs("select",{name:"icon",value:f.icon,onChange:_,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0,children:[C.jsx("option",{value:"",disabled:!0,children:"Select Icon"}),Ii.map(R=>C.jsx("option",{value:R,children:R},R))]}),C.jsx("input",{type:"number",name:"order",placeholder:"Order (e.g., 1)",value:f.order,onChange:_,className:"p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-400 focus:ring focus:ring-blue-400 focus:ring-opacity-50",required:!0,min:"0"})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("button",{type:"submit",className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[C.jsx(Hc,{size:18})," ",u?"Save Changes":"Add Link"]}),C.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[C.jsx(Rp,{size:18})," Cancel"]})]})]}),!s&&!u&&C.jsxs("button",{onClick:()=>{l(!0),d({name:"",url:"",icon:Ii[0],order:n.length>0?Math.max(...n.map(R=>R.order))+1:0})},className:"mb-6 flex items-center gap-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out",children:[C.jsx(Op,{size:18})," Add New Link"]}),!t&&n.length>0&&C.jsxs("div",{className:"space-y-4 md:space-y-0",children:[C.jsxs("div",{className:"hidden md:flex bg-gray-600 rounded-t-lg p-3 font-semibold text-white",children:[C.jsx("div",{className:"w-1/12 px-2",children:"Order"}),C.jsx("div",{className:"w-3/12 px-2",children:"Name"}),C.jsx("div",{className:"w-4/12 px-2",children:"URL"}),C.jsx("div",{className:"w-2/12 px-2",children:"Icon"}),C.jsx("div",{className:"w-2/12 px-2 text-right",children:"Actions"})]}),n.map((R,w)=>C.jsxs("div",{className:"bg-gray-700 md:bg-transparent md:hover:bg-gray-600/50 rounded-lg md:rounded-none p-4 md:p-0 md:flex md:items-center border-b border-gray-600 md:border-gray-600 last:border-b-0 md:last:border-b",children:[C.jsxs("div",{className:"md:hidden space-y-2",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"font-semibold text-lg text-white",children:R.name}),C.jsxs("span",{className:"text-sm text-gray-400",children:["(Order: ",R.order,")"]})]}),C.jsxs("div",{children:[C.jsx("span",{className:"font-medium text-gray-400",children:"URL: "}),C.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline break-all",children:R.url})]}),C.jsxs("div",{children:[C.jsx("span",{className:"font-medium text-gray-400",children:"Icon: "}),C.jsx("span",{className:"text-gray-300",children:R.icon})]}),C.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-gray-600 mt-2",children:[C.jsx("button",{onClick:()=>b(w),disabled:w===0,className:`p-1 ${w===0?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Up",children:C.jsx(ps,{size:18})}),C.jsx("button",{onClick:()=>N(w),disabled:w===n.length-1,className:`p-1 ${w===n.length-1?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Down",children:C.jsx(ds,{size:18})}),C.jsx("button",{onClick:()=>O(R),className:"text-yellow-400 hover:text-yellow-300 p-1",title:"Edit",children:C.jsx(ms,{size:18})}),C.jsx("button",{onClick:()=>v(R.id),className:"text-red-500 hover:text-red-400 p-1",title:"Delete",children:C.jsx(Di,{size:18})})]})]}),C.jsxs("div",{className:"hidden md:flex w-full items-center py-2",children:[C.jsx("div",{className:"w-1/12 px-2",children:R.order}),C.jsx("div",{className:"w-3/12 px-2 truncate",children:R.name}),C.jsx("div",{className:"w-4/12 px-2 truncate",children:C.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:R.url})}),C.jsx("div",{className:"w-2/12 px-2",children:R.icon}),C.jsxs("div",{className:"w-2/12 px-2 flex items-center justify-end gap-1",children:[C.jsx("button",{onClick:()=>b(w),disabled:w===0,className:`p-1 ${w===0?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Up",children:C.jsx(ps,{size:18})}),C.jsx("button",{onClick:()=>N(w),disabled:w===n.length-1,className:`p-1 ${w===n.length-1?"text-gray-500 cursor-not-allowed":"text-blue-400 hover:text-blue-300"}`,title:"Move Down",children:C.jsx(ds,{size:18})}),C.jsx("button",{onClick:()=>O(R),className:"text-yellow-400 hover:text-yellow-300 p-1",title:"Edit",children:C.jsx(ms,{size:18})}),C.jsx("button",{onClick:()=>v(R.id),className:"text-red-500 hover:text-red-400 p-1",title:"Delete",children:C.jsx(Di,{size:18})})]})]})]},R.id))]}),!t&&n.length===0&&!s&&C.jsx("p",{className:"text-center text-gray-400 mt-4",children:"No social links found. Add one!"})]})},u_=({translations:n,handleInputChange:e,editingPath:t,setEditingPath:r,handleDeleteItem:i,renderFields:o,getStaticSectionName:s})=>{const l=n.en.generalInfo,u=n.en.about;return l||console.warn("General Info data is missing."),C.jsxs(C.Fragment,{children:[l&&o(l,["generalInfo"],e,t,r,void 0,i),u&&C.jsxs(C.Fragment,{children:[C.jsxs("h4",{className:"text-lg font-semibold mt-6 mb-3 text-gray-600 capitalize",children:[s("about")," Content (Merged)"]}),o(u,["about"],e,t,r,void 0,i)]}),!u&&C.jsx("p",{className:"mt-4 text-gray-500",children:"About section data not found."})]})};function c_(){this.__data__=[],this.size=0}var f_=c_;function h_(n,e){return n===e||n!==n&&e!==e}var id=h_,d_=id;function p_(n,e){for(var t=n.length;t--;)if(d_(n[t][0],e))return t;return-1}var xo=p_,m_=xo,g_=Array.prototype,y_=g_.splice;function v_(n){var e=this.__data__,t=m_(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():y_.call(e,t,1),--this.size,!0}var __=v_,b_=xo;function w_(n){var e=this.__data__,t=b_(e,n);return t<0?void 0:e[t][1]}var E_=w_,T_=xo;function x_(n){return T_(this.__data__,n)>-1}var A_=x_,k_=xo;function I_(n,e){var t=this.__data__,r=k_(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var N_=I_,S_=f_,O_=__,P_=E_,R_=A_,C_=N_;function ir(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ir.prototype.clear=S_;ir.prototype.delete=O_;ir.prototype.get=P_;ir.prototype.has=R_;ir.prototype.set=C_;var Ao=ir,j_=Ao;function L_(){this.__data__=new j_,this.size=0}var D_=L_;function M_(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var V_=M_;function q_(n){return this.__data__.get(n)}var F_=q_;function B_(n){return this.__data__.has(n)}var $_=B_,U_=typeof wt=="object"&&wt&&wt.Object===Object&&wt,od=U_,z_=od,H_=typeof self=="object"&&self&&self.Object===Object&&self,K_=z_||H_||Function("return this")(),Yt=K_,G_=Yt,W_=G_.Symbol,za=W_,ac=za,sd=Object.prototype,Q_=sd.hasOwnProperty,Y_=sd.toString,Ar=ac?ac.toStringTag:void 0;function X_(n){var e=Q_.call(n,Ar),t=n[Ar];try{n[Ar]=void 0;var r=!0}catch{}var i=Y_.call(n);return r&&(e?n[Ar]=t:delete n[Ar]),i}var Z_=X_,J_=Object.prototype,eb=J_.toString;function tb(n){return eb.call(n)}var nb=tb,lc=za,rb=Z_,ib=nb,ob="[object Null]",sb="[object Undefined]",uc=lc?lc.toStringTag:void 0;function ab(n){return n==null?n===void 0?sb:ob:uc&&uc in Object(n)?rb(n):ib(n)}var ko=ab;function lb(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ad=lb,ub=ko,cb=ad,fb="[object AsyncFunction]",hb="[object Function]",db="[object GeneratorFunction]",pb="[object Proxy]";function mb(n){if(!cb(n))return!1;var e=ub(n);return e==hb||e==db||e==fb||e==pb}var ld=mb,gb=Yt,yb=gb["__core-js_shared__"],vb=yb,cs=vb,cc=function(){var n=/[^.]+$/.exec(cs&&cs.keys&&cs.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function _b(n){return!!cc&&cc in n}var bb=_b,wb=Function.prototype,Eb=wb.toString;function Tb(n){if(n!=null){try{return Eb.call(n)}catch{}try{return n+""}catch{}}return""}var ud=Tb,xb=ld,Ab=bb,kb=ad,Ib=ud,Nb=/[\\^$.*+?()[\]{}|]/g,Sb=/^\[object .+?Constructor\]$/,Ob=Function.prototype,Pb=Object.prototype,Rb=Ob.toString,Cb=Pb.hasOwnProperty,jb=RegExp("^"+Rb.call(Cb).replace(Nb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lb(n){if(!kb(n)||Ab(n))return!1;var e=xb(n)?jb:Sb;return e.test(Ib(n))}var Db=Lb;function Mb(n,e){return n==null?void 0:n[e]}var Vb=Mb,qb=Db,Fb=Vb;function Bb(n,e){var t=Fb(n,e);return qb(t)?t:void 0}var or=Bb,$b=or,Ub=Yt,zb=$b(Ub,"Map"),Ha=zb,Hb=or,Kb=Hb(Object,"create"),Io=Kb,fc=Io;function Gb(){this.__data__=fc?fc(null):{},this.size=0}var Wb=Gb;function Qb(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Yb=Qb,Xb=Io,Zb="__lodash_hash_undefined__",Jb=Object.prototype,e2=Jb.hasOwnProperty;function t2(n){var e=this.__data__;if(Xb){var t=e[n];return t===Zb?void 0:t}return e2.call(e,n)?e[n]:void 0}var n2=t2,r2=Io,i2=Object.prototype,o2=i2.hasOwnProperty;function s2(n){var e=this.__data__;return r2?e[n]!==void 0:o2.call(e,n)}var a2=s2,l2=Io,u2="__lodash_hash_undefined__";function c2(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=l2&&e===void 0?u2:e,this}var f2=c2,h2=Wb,d2=Yb,p2=n2,m2=a2,g2=f2;function sr(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}sr.prototype.clear=h2;sr.prototype.delete=d2;sr.prototype.get=p2;sr.prototype.has=m2;sr.prototype.set=g2;var y2=sr,hc=y2,v2=Ao,_2=Ha;function b2(){this.size=0,this.__data__={hash:new hc,map:new(_2||v2),string:new hc}}var w2=b2;function E2(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var T2=E2,x2=T2;function A2(n,e){var t=n.__data__;return x2(e)?t[typeof e=="string"?"string":"hash"]:t.map}var No=A2,k2=No;function I2(n){var e=k2(this,n).delete(n);return this.size-=e?1:0,e}var N2=I2,S2=No;function O2(n){return S2(this,n).get(n)}var P2=O2,R2=No;function C2(n){return R2(this,n).has(n)}var j2=C2,L2=No;function D2(n,e){var t=L2(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var M2=D2,V2=w2,q2=N2,F2=P2,B2=j2,$2=M2;function ar(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ar.prototype.clear=V2;ar.prototype.delete=q2;ar.prototype.get=F2;ar.prototype.has=B2;ar.prototype.set=$2;var cd=ar,U2=Ao,z2=Ha,H2=cd,K2=200;function G2(n,e){var t=this.__data__;if(t instanceof U2){var r=t.__data__;if(!z2||r.length<K2-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new H2(r)}return t.set(n,e),this.size=t.size,this}var W2=G2,Q2=Ao,Y2=D_,X2=V_,Z2=F_,J2=$_,ew=W2;function lr(n){var e=this.__data__=new Q2(n);this.size=e.size}lr.prototype.clear=Y2;lr.prototype.delete=X2;lr.prototype.get=Z2;lr.prototype.has=J2;lr.prototype.set=ew;var tw=lr,nw="__lodash_hash_undefined__";function rw(n){return this.__data__.set(n,nw),this}var iw=rw;function ow(n){return this.__data__.has(n)}var sw=ow,aw=cd,lw=iw,uw=sw;function Ji(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new aw;++e<t;)this.add(n[e])}Ji.prototype.add=Ji.prototype.push=lw;Ji.prototype.has=uw;var cw=Ji;function fw(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var hw=fw;function dw(n,e){return n.has(e)}var pw=dw,mw=cw,gw=hw,yw=pw,vw=1,_w=2;function bw(n,e,t,r,i,o){var s=t&vw,l=n.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var h=o.get(n),f=o.get(e);if(h&&f)return h==e&&f==n;var d=-1,c=!0,p=t&_w?new mw:void 0;for(o.set(n,e),o.set(e,n);++d<l;){var _=n[d],y=e[d];if(r)var m=s?r(y,_,d,e,n,o):r(_,y,d,n,e,o);if(m!==void 0){if(m)continue;c=!1;break}if(p){if(!gw(e,function(g,b){if(!yw(p,b)&&(_===g||i(_,g,t,r,o)))return p.push(b)})){c=!1;break}}else if(!(_===y||i(_,y,t,r,o))){c=!1;break}}return o.delete(n),o.delete(e),c}var fd=bw,ww=Yt,Ew=ww.Uint8Array,Tw=Ew;function xw(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var Aw=xw;function kw(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var Iw=kw,dc=za,pc=Tw,Nw=id,Sw=fd,Ow=Aw,Pw=Iw,Rw=1,Cw=2,jw="[object Boolean]",Lw="[object Date]",Dw="[object Error]",Mw="[object Map]",Vw="[object Number]",qw="[object RegExp]",Fw="[object Set]",Bw="[object String]",$w="[object Symbol]",Uw="[object ArrayBuffer]",zw="[object DataView]",mc=dc?dc.prototype:void 0,fs=mc?mc.valueOf:void 0;function Hw(n,e,t,r,i,o,s){switch(t){case zw:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Uw:return!(n.byteLength!=e.byteLength||!o(new pc(n),new pc(e)));case jw:case Lw:case Vw:return Nw(+n,+e);case Dw:return n.name==e.name&&n.message==e.message;case qw:case Bw:return n==e+"";case Mw:var l=Ow;case Fw:var u=r&Rw;if(l||(l=Pw),n.size!=e.size&&!u)return!1;var h=s.get(n);if(h)return h==e;r|=Cw,s.set(n,e);var f=Sw(l(n),l(e),r,i,o,s);return s.delete(n),f;case $w:if(fs)return fs.call(n)==fs.call(e)}return!1}var Kw=Hw;function Gw(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var Ww=Gw,Qw=Array.isArray,Ka=Qw,Yw=Ww,Xw=Ka;function Zw(n,e,t){var r=e(n);return Xw(n)?r:Yw(r,t(n))}var Jw=Zw;function eE(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}var tE=eE;function nE(){return[]}var rE=nE,iE=tE,oE=rE,sE=Object.prototype,aE=sE.propertyIsEnumerable,gc=Object.getOwnPropertySymbols,lE=gc?function(n){return n==null?[]:(n=Object(n),iE(gc(n),function(e){return aE.call(n,e)}))}:oE,uE=lE;function cE(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var fE=cE;function hE(n){return n!=null&&typeof n=="object"}var So=hE,dE=ko,pE=So,mE="[object Arguments]";function gE(n){return pE(n)&&dE(n)==mE}var yE=gE,yc=yE,vE=So,hd=Object.prototype,_E=hd.hasOwnProperty,bE=hd.propertyIsEnumerable,wE=yc(function(){return arguments}())?yc:function(n){return vE(n)&&_E.call(n,"callee")&&!bE.call(n,"callee")},EE=wE,eo={exports:{}};function TE(){return!1}var xE=TE;eo.exports;(function(n,e){var t=Yt,r=xE,i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===i,l=s?t.Buffer:void 0,u=l?l.isBuffer:void 0,h=u||r;n.exports=h})(eo,eo.exports);var dd=eo.exports,AE=9007199254740991,kE=/^(?:0|[1-9]\d*)$/;function IE(n,e){var t=typeof n;return e=e??AE,!!e&&(t=="number"||t!="symbol"&&kE.test(n))&&n>-1&&n%1==0&&n<e}var NE=IE,SE=9007199254740991;function OE(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=SE}var pd=OE,PE=ko,RE=pd,CE=So,jE="[object Arguments]",LE="[object Array]",DE="[object Boolean]",ME="[object Date]",VE="[object Error]",qE="[object Function]",FE="[object Map]",BE="[object Number]",$E="[object Object]",UE="[object RegExp]",zE="[object Set]",HE="[object String]",KE="[object WeakMap]",GE="[object ArrayBuffer]",WE="[object DataView]",QE="[object Float32Array]",YE="[object Float64Array]",XE="[object Int8Array]",ZE="[object Int16Array]",JE="[object Int32Array]",eT="[object Uint8Array]",tT="[object Uint8ClampedArray]",nT="[object Uint16Array]",rT="[object Uint32Array]",Be={};Be[QE]=Be[YE]=Be[XE]=Be[ZE]=Be[JE]=Be[eT]=Be[tT]=Be[nT]=Be[rT]=!0;Be[jE]=Be[LE]=Be[GE]=Be[DE]=Be[WE]=Be[ME]=Be[VE]=Be[qE]=Be[FE]=Be[BE]=Be[$E]=Be[UE]=Be[zE]=Be[HE]=Be[KE]=!1;function iT(n){return CE(n)&&RE(n.length)&&!!Be[PE(n)]}var oT=iT;function sT(n){return function(e){return n(e)}}var aT=sT,to={exports:{}};to.exports;(function(n,e){var t=od,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,s=o&&t.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();n.exports=l})(to,to.exports);var lT=to.exports,uT=oT,cT=aT,vc=lT,_c=vc&&vc.isTypedArray,fT=_c?cT(_c):uT,md=fT,hT=fE,dT=EE,pT=Ka,mT=dd,gT=NE,yT=md,vT=Object.prototype,_T=vT.hasOwnProperty;function bT(n,e){var t=pT(n),r=!t&&dT(n),i=!t&&!r&&mT(n),o=!t&&!r&&!i&&yT(n),s=t||r||i||o,l=s?hT(n.length,String):[],u=l.length;for(var h in n)(e||_T.call(n,h))&&!(s&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||gT(h,u)))&&l.push(h);return l}var wT=bT,ET=Object.prototype;function TT(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ET;return n===t}var xT=TT;function AT(n,e){return function(t){return n(e(t))}}var kT=AT,IT=kT,NT=IT(Object.keys,Object),ST=NT,OT=xT,PT=ST,RT=Object.prototype,CT=RT.hasOwnProperty;function jT(n){if(!OT(n))return PT(n);var e=[];for(var t in Object(n))CT.call(n,t)&&t!="constructor"&&e.push(t);return e}var LT=jT,DT=ld,MT=pd;function VT(n){return n!=null&&MT(n.length)&&!DT(n)}var qT=VT,FT=wT,BT=LT,$T=qT;function UT(n){return $T(n)?FT(n):BT(n)}var zT=UT,HT=Jw,KT=uE,GT=zT;function WT(n){return HT(n,GT,KT)}var QT=WT,bc=QT,YT=1,XT=Object.prototype,ZT=XT.hasOwnProperty;function JT(n,e,t,r,i,o){var s=t&YT,l=bc(n),u=l.length,h=bc(e),f=h.length;if(u!=f&&!s)return!1;for(var d=u;d--;){var c=l[d];if(!(s?c in e:ZT.call(e,c)))return!1}var p=o.get(n),_=o.get(e);if(p&&_)return p==e&&_==n;var y=!0;o.set(n,e),o.set(e,n);for(var m=s;++d<u;){c=l[d];var g=n[c],b=e[c];if(r)var N=s?r(b,g,c,e,n,o):r(g,b,c,n,e,o);if(!(N===void 0?g===b||i(g,b,t,r,o):N)){y=!1;break}m||(m=c=="constructor")}if(y&&!m){var v=n.constructor,O=e.constructor;v!=O&&"constructor"in n&&"constructor"in e&&!(typeof v=="function"&&v instanceof v&&typeof O=="function"&&O instanceof O)&&(y=!1)}return o.delete(n),o.delete(e),y}var ex=JT,tx=or,nx=Yt,rx=tx(nx,"DataView"),ix=rx,ox=or,sx=Yt,ax=ox(sx,"Promise"),lx=ax,ux=or,cx=Yt,fx=ux(cx,"Set"),hx=fx,dx=or,px=Yt,mx=dx(px,"WeakMap"),gx=mx,qs=ix,Fs=Ha,Bs=lx,$s=hx,Us=gx,gd=ko,ur=ud,wc="[object Map]",yx="[object Object]",Ec="[object Promise]",Tc="[object Set]",xc="[object WeakMap]",Ac="[object DataView]",vx=ur(qs),_x=ur(Fs),bx=ur(Bs),wx=ur($s),Ex=ur(Us),_n=gd;(qs&&_n(new qs(new ArrayBuffer(1)))!=Ac||Fs&&_n(new Fs)!=wc||Bs&&_n(Bs.resolve())!=Ec||$s&&_n(new $s)!=Tc||Us&&_n(new Us)!=xc)&&(_n=function(n){var e=gd(n),t=e==yx?n.constructor:void 0,r=t?ur(t):"";if(r)switch(r){case vx:return Ac;case _x:return wc;case bx:return Ec;case wx:return Tc;case Ex:return xc}return e});var Tx=_n,hs=tw,xx=fd,Ax=Kw,kx=ex,kc=Tx,Ic=Ka,Nc=dd,Ix=md,Nx=1,Sc="[object Arguments]",Oc="[object Array]",Ni="[object Object]",Sx=Object.prototype,Pc=Sx.hasOwnProperty;function Ox(n,e,t,r,i,o){var s=Ic(n),l=Ic(e),u=s?Oc:kc(n),h=l?Oc:kc(e);u=u==Sc?Ni:u,h=h==Sc?Ni:h;var f=u==Ni,d=h==Ni,c=u==h;if(c&&Nc(n)){if(!Nc(e))return!1;s=!0,f=!1}if(c&&!f)return o||(o=new hs),s||Ix(n)?xx(n,e,t,r,i,o):Ax(n,e,u,t,r,i,o);if(!(t&Nx)){var p=f&&Pc.call(n,"__wrapped__"),_=d&&Pc.call(e,"__wrapped__");if(p||_){var y=p?n.value():n,m=_?e.value():e;return o||(o=new hs),i(y,m,t,r,o)}}return c?(o||(o=new hs),kx(n,e,t,r,i,o)):!1}var Px=Ox,Rx=Px,Rc=So;function yd(n,e,t,r,i){return n===e?!0:n==null||e==null||!Rc(n)&&!Rc(e)?n!==n&&e!==e:Rx(n,e,t,r,yd,i)}var Cx=yd,jx=Cx;function Lx(n,e){return jx(n,e)}var Dx=Lx,vd={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:wt,function(){return function(t){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=r,i.d=function(o,s,l){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:l})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),l=i(19),u=i(45),h=i(46),f=i(47),d=i(48),c=i(49),p=i(12),_=i(32),y=i(33),m=i(31),g=i(1),b={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:o.default,Format:s.default,Leaf:l.default,Embed:d.default,Scroll:u.default,Block:f.default,Inline:h.default,Text:c.default,Attributor:{Attribute:p.default,Class:_.default,Style:y.default,Store:m.default}};r.default=b},function(t,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var N in b)b.hasOwnProperty(N)&&(g[N]=b[N])};return function(g,b){m(g,b);function N(){this.constructor=g}g.prototype=b===null?Object.create(b):(N.prototype=b.prototype,new N)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(m){o(g,m);function g(b){var N=this;return b="[Parchment] "+b,N=m.call(this,b)||this,N.message=b,N.name=N.constructor.name,N}return g}(Error);r.ParchmentError=s;var l={},u={},h={},f={};r.DATA_KEY="__blot";var d;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(d=r.Scope||(r.Scope={}));function c(m,g){var b=_(m);if(b==null)throw new s("Unable to create "+m+" blot");var N=b,v=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:N.create(g);return new N(v,g)}r.create=c;function p(m,g){return g===void 0&&(g=!1),m==null?null:m[r.DATA_KEY]!=null?m[r.DATA_KEY].blot:g?p(m.parentNode,g):null}r.find=p;function _(m,g){g===void 0&&(g=d.ANY);var b;if(typeof m=="string")b=f[m]||l[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)b=f.text;else if(typeof m=="number")m&d.LEVEL&d.BLOCK?b=f.block:m&d.LEVEL&d.INLINE&&(b=f.inline);else if(m instanceof HTMLElement){var N=(m.getAttribute("class")||"").split(/\s+/);for(var v in N)if(b=u[N[v]],b)break;b=b||h[m.tagName]}return b==null?null:g&d.LEVEL&b.scope&&g&d.TYPE&b.scope?b:null}r.query=_;function y(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];if(m.length>1)return m.map(function(v){return y(v)});var b=m[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new s("Invalid definition");if(b.blotName==="abstract")throw new s("Cannot register abstract class");if(f[b.blotName||b.attrName]=b,typeof b.keyName=="string")l[b.keyName]=b;else if(b.className!=null&&(u[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(v){return v.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var N=Array.isArray(b.tagName)?b.tagName:[b.tagName];N.forEach(function(v){(h[v]==null||b.className==null)&&(h[v]=b)})}return b}r.register=y},function(t,r,i){var o=i(51),s=i(11),l=i(3),u=i(20),h="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,c){var p={};return d.length===0?this:(p.insert=d,c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(p.attributes=c),this.push(p))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,c){if(d<=0)return this;var p={retain:d};return c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(p.attributes=c),this.push(p)},f.prototype.push=function(d){var c=this.ops.length,p=this.ops[c-1];if(d=l(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[c-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(c-=1,p=this.ops[c-1],typeof p!="object"))return this.ops.unshift(d),this;if(s(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[c-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[c-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[c-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[c-1].attributes=d.attributes),this}}return c===this.ops.length?this.ops.push(d):this.ops.splice(c,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var c=[],p=[];return this.forEach(function(_){var y=d(_)?c:p;y.push(_)}),[c,p]},f.prototype.reduce=function(d,c){return this.ops.reduce(d,c)},f.prototype.changeLength=function(){return this.reduce(function(d,c){return c.insert?d+u.length(c):c.delete?d-c.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,c){return d+u.length(c)},0)},f.prototype.slice=function(d,c){d=d||0,typeof c!="number"&&(c=1/0);for(var p=[],_=u.iterator(this.ops),y=0;y<c&&_.hasNext();){var m;y<d?m=_.next(d-y):(m=_.next(c-y),p.push(m)),y+=u.length(m)}return new f(p)},f.prototype.compose=function(d){var c=u.iterator(this.ops),p=u.iterator(d.ops),_=[],y=p.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var m=y.retain;c.peekType()==="insert"&&c.peekLength()<=m;)m-=c.peekLength(),_.push(c.next());y.retain-m>0&&p.next(y.retain-m)}for(var g=new f(_);c.hasNext()||p.hasNext();)if(p.peekType()==="insert")g.push(p.next());else if(c.peekType()==="delete")g.push(c.next());else{var b=Math.min(c.peekLength(),p.peekLength()),N=c.next(b),v=p.next(b);if(typeof v.retain=="number"){var O={};typeof N.retain=="number"?O.retain=b:O.insert=N.insert;var R=u.attributes.compose(N.attributes,v.attributes,typeof N.retain=="number");if(R&&(O.attributes=R),g.push(O),!p.hasNext()&&s(g.ops[g.ops.length-1],O)){var w=new f(c.rest());return g.concat(w).chop()}}else typeof v.delete=="number"&&typeof N.retain=="number"&&g.push(v)}return g.chop()},f.prototype.concat=function(d){var c=new f(this.ops.slice());return d.ops.length>0&&(c.push(d.ops[0]),c.ops=c.ops.concat(d.ops.slice(1))),c},f.prototype.diff=function(d,c){if(this.ops===d.ops)return new f;var p=[this,d].map(function(b){return b.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:h;var v=b===d?"on":"with";throw new Error("diff() called "+v+" non-document")}).join("")}),_=new f,y=o(p[0],p[1],c),m=u.iterator(this.ops),g=u.iterator(d.ops);return y.forEach(function(b){for(var N=b[1].length;N>0;){var v=0;switch(b[0]){case o.INSERT:v=Math.min(g.peekLength(),N),_.push(g.next(v));break;case o.DELETE:v=Math.min(N,m.peekLength()),m.next(v),_.delete(v);break;case o.EQUAL:v=Math.min(m.peekLength(),g.peekLength(),N);var O=m.next(v),R=g.next(v);s(O.insert,R.insert)?_.retain(v,u.attributes.diff(O.attributes,R.attributes)):_.push(R).delete(v);break}N-=v}}),_.chop()},f.prototype.eachLine=function(d,c){c=c||`
`;for(var p=u.iterator(this.ops),_=new f,y=0;p.hasNext();){if(p.peekType()!=="insert")return;var m=p.peek(),g=u.length(m)-p.peekLength(),b=typeof m.insert=="string"?m.insert.indexOf(c,g)-g:-1;if(b<0)_.push(p.next());else if(b>0)_.push(p.next(b));else{if(d(_,p.next(1).attributes||{},y)===!1)return;y+=1,_=new f}}_.length()>0&&d(_,{},y)},f.prototype.transform=function(d,c){if(c=!!c,typeof d=="number")return this.transformPosition(d,c);for(var p=u.iterator(this.ops),_=u.iterator(d.ops),y=new f;p.hasNext()||_.hasNext();)if(p.peekType()==="insert"&&(c||_.peekType()!=="insert"))y.retain(u.length(p.next()));else if(_.peekType()==="insert")y.push(_.next());else{var m=Math.min(p.peekLength(),_.peekLength()),g=p.next(m),b=_.next(m);if(g.delete)continue;b.delete?y.push(b):y.retain(m,u.attributes.transform(g.attributes,b.attributes,c))}return y.chop()},f.prototype.transformPosition=function(d,c){c=!!c;for(var p=u.iterator(this.ops),_=0;p.hasNext()&&_<=d;){var y=p.peekLength(),m=p.peekType();if(p.next(),m==="delete"){d-=Math.min(y,d-_);continue}else m==="insert"&&(_<d||!c)&&(d+=y);_+=y}return d},t.exports=f},function(t,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=function(p){return typeof Array.isArray=="function"?Array.isArray(p):o.call(p)==="[object Array]"},h=function(p){if(!p||o.call(p)!=="[object Object]")return!1;var _=i.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!_&&!y)return!1;var m;for(m in p);return typeof m>"u"||i.call(p,m)},f=function(p,_){s&&_.name==="__proto__"?s(p,_.name,{enumerable:!0,configurable:!0,value:_.newValue,writable:!0}):p[_.name]=_.newValue},d=function(p,_){if(_==="__proto__")if(i.call(p,_)){if(l)return l(p,_).value}else return;return p[_]};t.exports=function c(){var p,_,y,m,g,b,N=arguments[0],v=1,O=arguments.length,R=!1;for(typeof N=="boolean"&&(R=N,N=arguments[1]||{},v=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});v<O;++v)if(p=arguments[v],p!=null)for(_ in p)y=d(N,_),m=d(p,_),N!==m&&(R&&m&&(h(m)||(g=u(m)))?(g?(g=!1,b=y&&u(y)?y:[]):b=y&&h(y)?y:{},f(N,{name:_,newValue:c(R,b,m)})):typeof m<"u"&&f(N,{name:_,newValue:m}));return N}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function T(k,S){for(var D=0;D<S.length;D++){var F=S[D];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,S,D){return S&&T(k.prototype,S),D&&T(k,D),k}}(),s=function T(k,S,D){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,S);if(F===void 0){var K=Object.getPrototypeOf(k);return K===null?void 0:T(K,S,D)}else{if("value"in F)return F.value;var G=F.get;return G===void 0?void 0:G.call(D)}},l=i(3),u=N(l),h=i(2),f=N(h),d=i(0),c=N(d),p=i(16),_=N(p),y=i(6),m=N(y),g=i(7),b=N(g);function N(T){return T&&T.__esModule?T:{default:T}}function v(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function O(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function R(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}var w=1,E=function(T){R(k,T);function k(){return v(this,k),O(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"attach",value:function(){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"attach",this).call(this),this.attributes=new c.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,F){var K=c.default.query(D,c.default.Scope.BLOCK_ATTRIBUTE);K!=null&&this.attributes.attribute(K,F)}},{key:"formatAt",value:function(D,F,K,G){this.format(K,G)}},{key:"insertAt",value:function(D,F,K){if(typeof F=="string"&&F.endsWith(`
`)){var G=c.default.create(I.blotName);this.parent.insertBefore(G,D===0?this:this.next),G.insertAt(0,F.slice(0,-1))}else s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,D,F,K)}}]),k}(c.default.Embed);E.scope=c.default.Scope.BLOCK_BLOT;var I=function(T){R(k,T);function k(S){v(this,k);var D=O(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,S));return D.cache={},D}return o(k,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(c.default.Leaf).reduce(function(D,F){return F.length()===0?D:D.insert(F.value(),x(F))},new f.default).insert(`
`,x(this))),this.cache.delta}},{key:"deleteAt",value:function(D,F){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,D,F),this.cache={}}},{key:"formatAt",value:function(D,F,K,G){F<=0||(c.default.query(K,c.default.Scope.BLOCK)?D+F===this.length()&&this.format(K,G):s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,D,Math.min(F,this.length()-D-1),K,G),this.cache={})}},{key:"insertAt",value:function(D,F,K){if(K!=null)return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,D,F,K);if(F.length!==0){var G=F.split(`
`),re=G.shift();re.length>0&&(D<this.length()-1||this.children.tail==null?s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var z=this;G.reduce(function(B,j){return z=z.split(B,!0),z.insertAt(0,j),j.length},D+re.length)}}},{key:"insertBefore",value:function(D,F){var K=this.children.head;s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,D,F),K instanceof _.default&&K.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"length",this).call(this)+w),this.cache.length}},{key:"moveChildren",value:function(D,F){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"moveChildren",this).call(this,D,F),this.cache={}}},{key:"optimize",value:function(D){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&(D===0||D>=this.length()-w)){var K=this.clone();return D===0?(this.parent.insertBefore(K,this),this):(this.parent.insertBefore(K,this.next),K)}else{var G=s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"split",this).call(this,D,F);return this.cache={},G}}}]),k}(c.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[m.default,c.default.Embed,b.default];function x(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(k=(0,u.default)(k,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?k:x(T.parent,k)}r.bubbleFormats=x,r.BlockEmbed=E,r.default=I},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(B,j){var V=[],q=!0,W=!1,H=void 0;try{for(var M=B[Symbol.iterator](),U;!(q=(U=M.next()).done)&&(V.push(U.value),!(j&&V.length===j));q=!0);}catch(Y){W=!0,H=Y}finally{try{!q&&M.return&&M.return()}finally{if(W)throw H}}return V}return function(B,j){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return z(B,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function z(B,j){for(var V=0;V<j.length;V++){var q=j[V];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,j,V){return j&&z(B.prototype,j),V&&z(B,V),B}}();i(50);var u=i(2),h=x(u),f=i(14),d=x(f),c=i(8),p=x(c),_=i(9),y=x(_),m=i(0),g=x(m),b=i(15),N=x(b),v=i(3),O=x(v),R=i(10),w=x(R),E=i(34),I=x(E);function x(z){return z&&z.__esModule?z:{default:z}}function T(z,B,j){return B in z?Object.defineProperty(z,B,{value:j,enumerable:!0,configurable:!0,writable:!0}):z[B]=j,z}function k(z,B){if(!(z instanceof B))throw new TypeError("Cannot call a class as a function")}var S=(0,w.default)("quill"),D=function(){l(z,null,[{key:"debug",value:function(j){j===!0&&(j="log"),w.default.level(j)}},{key:"find",value:function(j){return j.__quill||g.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&S.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,V){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var H=j.attrName||j.blotName;typeof H=="string"?this.register("formats/"+H,j,V):Object.keys(j).forEach(function(M){q.register(M,j[M],V)})}else this.imports[j]!=null&&!W&&S.warn("Overwriting "+j+" with",V),this.imports[j]=V,(j.startsWith("blots/")||j.startsWith("formats/"))&&V.blotName!=="abstract"?g.default.register(V):j.startsWith("modules")&&typeof V.register=="function"&&V.register()}}]);function z(B){var j=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(k(this,z),this.options=F(B,V),this.container=this.options.container,this.container==null)return S.error("Invalid Quill container",B);this.options.debug&&z.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(H){H===p.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(H,M){var U=j.selection.lastRange,Y=U&&U.length===0?U.index:void 0;K.call(j,function(){return j.editor.update(null,M,Y)},H)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(z,[{key:"addContainer",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var q=j;j=document.createElement("div"),j.classList.add(q)}return this.container.insertBefore(j,V),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,V,q){var W=this,H=G(j,V,q),M=s(H,4);return j=M[0],V=M[1],q=M[3],K.call(this,function(){return W.editor.deleteText(j,V)},q,j,-1*V)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,V){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return K.call(this,function(){var H=q.getSelection(!0),M=new h.default;if(H==null)return M;if(g.default.query(j,g.default.Scope.BLOCK))M=q.editor.formatLine(H.index,H.length,T({},j,V));else{if(H.length===0)return q.selection.format(j,V),M;M=q.editor.formatText(H.index,H.length,T({},j,V))}return q.setSelection(H,p.default.sources.SILENT),M},W)}},{key:"formatLine",value:function(j,V,q,W,H){var M=this,U=void 0,Y=G(j,V,q,W,H),$=s(Y,4);return j=$[0],V=$[1],U=$[2],H=$[3],K.call(this,function(){return M.editor.formatLine(j,V,U)},H,j,0)}},{key:"formatText",value:function(j,V,q,W,H){var M=this,U=void 0,Y=G(j,V,q,W,H),$=s(Y,4);return j=$[0],V=$[1],U=$[2],H=$[3],K.call(this,function(){return M.editor.formatText(j,V,U)},H,j,0)}},{key:"getBounds",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof j=="number"?q=this.selection.getBounds(j,V):q=this.selection.getBounds(j.index,j.length);var W=this.container.getBoundingClientRect();return{bottom:q.bottom-W.top,height:q.height,left:q.left-W.left,right:q.right-W.left,top:q.top-W.top,width:q.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,q=G(j,V),W=s(q,2);return j=W[0],V=W[1],this.editor.getContents(j,V)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,V):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,V)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,q=G(j,V),W=s(q,2);return j=W[0],V=W[1],this.editor.getText(j,V)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,V,q){var W=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return K.call(this,function(){return W.editor.insertEmbed(j,V,q)},H,j)}},{key:"insertText",value:function(j,V,q,W,H){var M=this,U=void 0,Y=G(j,0,q,W,H),$=s(Y,4);return j=$[0],U=$[2],H=$[3],K.call(this,function(){return M.editor.insertText(j,V,U)},H,j,V.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,V,q){this.clipboard.dangerouslyPasteHTML(j,V,q)}},{key:"removeFormat",value:function(j,V,q){var W=this,H=G(j,V,q),M=s(H,4);return j=M[0],V=M[1],q=M[3],K.call(this,function(){return W.editor.removeFormat(j,V)},q,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var V=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return K.call(this,function(){j=new h.default(j);var W=V.getLength(),H=V.editor.deleteText(0,W),M=V.editor.applyDelta(j),U=M.ops[M.ops.length-1];U!=null&&typeof U.insert=="string"&&U.insert[U.insert.length-1]===`
`&&(V.editor.deleteText(V.getLength()-1,1),M.delete(1));var Y=H.compose(M);return Y},q)}},{key:"setSelection",value:function(j,V,q){if(j==null)this.selection.setRange(null,V||z.sources.API);else{var W=G(j,V,q),H=s(W,4);j=H[0],V=H[1],q=H[3],this.selection.setRange(new b.Range(j,V),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new h.default().insert(j);return this.setContents(q,V)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,V=this.scroll.update(j);return this.selection.update(j),V}},{key:"updateContents",value:function(j){var V=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return K.call(this,function(){return j=new h.default(j),V.editor.applyDelta(j,q)},q,!0)}}]),z}();D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=p.default.events,D.sources=p.default.sources,D.version="1.3.7",D.imports={delta:h.default,parchment:g.default,"core/module":y.default,"core/theme":I.default};function F(z,B){if(B=(0,O.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===D.DEFAULTS.theme)B.theme=I.default;else if(B.theme=D.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var j=(0,O.default)(!0,{},B.theme.DEFAULTS);[j,B].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(H){W.modules[H]===!0&&(W.modules[H]={})})});var V=Object.keys(j.modules).concat(Object.keys(B.modules)),q=V.reduce(function(W,H){var M=D.import("modules/"+H);return M==null?S.error("Cannot load "+H+" module. Are you sure you registered it?"):W[H]=M.DEFAULTS||{},W},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,O.default)(!0,{},D.DEFAULTS,{modules:q},j,B),["bounds","container","scrollingContainer"].forEach(function(W){typeof B[W]=="string"&&(B[W]=document.querySelector(B[W]))}),B.modules=Object.keys(B.modules).reduce(function(W,H){return B.modules[H]&&(W[H]=B.modules[H]),W},{}),B}function K(z,B,j,V){if(this.options.strict&&!this.isEnabled()&&B===p.default.sources.USER)return new h.default;var q=j==null?null:this.getSelection(),W=this.editor.delta,H=z();if(q!=null&&(j===!0&&(j=q.index),V==null?q=re(q,H,B):V!==0&&(q=re(q,j,V,B)),this.setSelection(q,p.default.sources.SILENT)),H.length()>0){var M,U=[p.default.events.TEXT_CHANGE,H,W,B];if((M=this.emitter).emit.apply(M,[p.default.events.EDITOR_CHANGE].concat(U)),B!==p.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,U)}}return H}function G(z,B,j,V,q){var W={};return typeof z.index=="number"&&typeof z.length=="number"?typeof B!="number"?(q=V,V=j,j=B,B=z.length,z=z.index):(B=z.length,z=z.index):typeof B!="number"&&(q=V,V=j,j=B,B=0),(typeof j>"u"?"undefined":o(j))==="object"?(W=j,q=V):typeof j=="string"&&(V!=null?W[j]=V:q=j),q=q||p.default.sources.API,[z,B,W,q]}function re(z,B,j,V){if(z==null)return null;var q=void 0,W=void 0;if(B instanceof h.default){var H=[z.index,z.index+z.length].map(function($){return B.transformPosition($,V!==p.default.sources.USER)}),M=s(H,2);q=M[0],W=M[1]}else{var U=[z.index,z.index+z.length].map(function($){return $<B||$===B&&V===p.default.sources.USER?$:j>=0?$+j:Math.max(B,$+j)}),Y=s(U,2);q=Y[0],W=Y[1]}return new b.Range(q,W-q)}r.expandConfig=F,r.overload=G,r.default=D},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,b){for(var N=0;N<b.length;N++){var v=b[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,N){return b&&m(g.prototype,b),N&&m(g,N),g}}(),s=function m(g,b,N){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var O=Object.getPrototypeOf(g);return O===null?void 0:m(O,b,N)}else{if("value"in v)return v.value;var R=v.get;return R===void 0?void 0:R.call(N)}},l=i(7),u=d(l),h=i(0),f=d(h);function d(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function p(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function _(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var y=function(m){_(g,m);function g(){return c(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"formatAt",value:function(N,v,O,R){if(g.compare(this.statics.blotName,O)<0&&f.default.query(O,f.default.Scope.BLOT)){var w=this.isolate(N,v);R&&w.wrap(O,R)}else s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,N,v,O,R)}},{key:"optimize",value:function(N){if(s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,N),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var v=this.parent.isolate(this.offset(),this.length());this.moveChildren(v),v.wrap(this)}}}],[{key:"compare",value:function(N,v){var O=g.order.indexOf(N),R=g.order.indexOf(v);return O>=0||R>=0?O-R:N===v?0:N<v?-1:1}}]),g}(f.default.Inline);y.allowedChildren=[y,f.default.Embed,u.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function h(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function f(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var d=function(c){f(p,c);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default.Text);r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(N,v){for(var O=0;O<v.length;O++){var R=v[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(N,R.key,R)}}return function(N,v,O){return v&&b(N.prototype,v),O&&b(N,O),N}}(),s=function b(N,v,O){N===null&&(N=Function.prototype);var R=Object.getOwnPropertyDescriptor(N,v);if(R===void 0){var w=Object.getPrototypeOf(N);return w===null?void 0:b(w,v,O)}else{if("value"in R)return R.value;var E=R.get;return E===void 0?void 0:E.call(O)}},l=i(54),u=d(l),h=i(10),f=d(h);function d(b){return b&&b.__esModule?b:{default:b}}function c(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function p(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function _(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var y=(0,f.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(b){document.addEventListener(b,function(){for(var N=arguments.length,v=Array(N),O=0;O<N;O++)v[O]=arguments[O];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(R){if(R.__quill&&R.__quill.emitter){var w;(w=R.__quill.emitter).handleDOM.apply(w,v)}})})});var g=function(b){_(N,b);function N(){c(this,N);var v=p(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return v.listeners={},v.on("error",y.error),v}return o(N,[{key:"emit",value:function(){y.log.apply(y,arguments),s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(O){for(var R=arguments.length,w=Array(R>1?R-1:0),E=1;E<R;E++)w[E-1]=arguments[E];(this.listeners[O.type]||[]).forEach(function(I){var x=I.node,T=I.handler;(O.target===x||x.contains(O.target))&&T.apply(void 0,[O].concat(w))})}},{key:"listenDOM",value:function(O,R,w){this.listeners[O]||(this.listeners[O]=[]),this.listeners[O].push({node:R,handler:w})}}]),N}(u.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function l(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,l),this.quill=u,this.options=h};s.DEFAULTS={},r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function l(h){if(o.indexOf(h)<=o.indexOf(s)){for(var f,d=arguments.length,c=Array(d>1?d-1:0),p=1;p<d;p++)c[p-1]=arguments[p];(f=console)[h].apply(f,c)}}function u(h){return o.reduce(function(f,d){return f[d]=l.bind(console,d,h),f},{})}l.level=u.level=function(h){s=h},r.default=u},function(t,r,i){var o=Array.prototype.slice,s=i(52),l=i(53),u=t.exports=function(c,p,_){return _||(_={}),c===p?!0:c instanceof Date&&p instanceof Date?c.getTime()===p.getTime():!c||!p||typeof c!="object"&&typeof p!="object"?_.strict?c===p:c==p:d(c,p,_)};function h(c){return c==null}function f(c){return!(!c||typeof c!="object"||typeof c.length!="number"||typeof c.copy!="function"||typeof c.slice!="function"||c.length>0&&typeof c[0]!="number")}function d(c,p,_){var y,m;if(h(c)||h(p)||c.prototype!==p.prototype)return!1;if(l(c))return l(p)?(c=o.call(c),p=o.call(p),u(c,p,_)):!1;if(f(c)){if(!f(p)||c.length!==p.length)return!1;for(y=0;y<c.length;y++)if(c[y]!==p[y])return!1;return!0}try{var g=s(c),b=s(p)}catch{return!1}if(g.length!=b.length)return!1;for(g.sort(),b.sort(),y=g.length-1;y>=0;y--)if(g[y]!=b[y])return!1;for(y=g.length-1;y>=0;y--)if(m=g[y],!u(c[m],p[m],_))return!1;return typeof c==typeof p}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function l(u,h,f){f===void 0&&(f={}),this.attrName=u,this.keyName=h;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(u){return[].map.call(u.attributes,function(h){return h.name})},l.prototype.add=function(u,h){return this.canAdd(u,h)?(u.setAttribute(this.keyName,h),!0):!1},l.prototype.canAdd=function(u,h){var f=o.query(u,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},l.prototype.remove=function(u){u.removeAttribute(this.keyName)},l.prototype.value=function(u){var h=u.getAttribute(this.keyName);return this.canAdd(u,h)&&h?h:""},l}();r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function E(I,x){var T=[],k=!0,S=!1,D=void 0;try{for(var F=I[Symbol.iterator](),K;!(k=(K=F.next()).done)&&(T.push(K.value),!(x&&T.length===x));k=!0);}catch(G){S=!0,D=G}finally{try{!k&&F.return&&F.return()}finally{if(S)throw D}}return T}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(I,x){for(var T=0;T<x.length;T++){var k=x[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(I,k.key,k)}}return function(I,x,T){return x&&E(I.prototype,x),T&&E(I,T),I}}(),l=function E(I,x,T){I===null&&(I=Function.prototype);var k=Object.getOwnPropertyDescriptor(I,x);if(k===void 0){var S=Object.getPrototypeOf(I);return S===null?void 0:E(S,x,T)}else{if("value"in k)return k.value;var D=k.get;return D===void 0?void 0:D.call(T)}},u=i(2),h=b(u),f=i(0),d=b(f),c=i(4),p=b(c),_=i(6),y=b(_),m=i(7),g=b(m);function b(E){return E&&E.__esModule?E:{default:E}}function N(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function v(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function O(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var R=function(E){O(I,E);function I(){return N(this,I),v(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I}(y.default);R.blotName="code",R.tagName="CODE";var w=function(E){O(I,E);function I(){return N(this,I),v(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return s(I,[{key:"delta",value:function(){var T=this,k=this.domNode.textContent;return k.endsWith(`
`)&&(k=k.slice(0,-1)),k.split(`
`).reduce(function(S,D){return S.insert(D).insert(`
`,T.formats())},new h.default)}},{key:"format",value:function(T,k){if(!(T===this.statics.blotName&&k)){var S=this.descendant(g.default,this.length()-1),D=o(S,1),F=D[0];F!=null&&F.deleteAt(F.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,T,k)}}},{key:"formatAt",value:function(T,k,S,D){if(k!==0&&!(d.default.query(S,d.default.Scope.BLOCK)==null||S===this.statics.blotName&&D===this.statics.formats(this.domNode))){var F=this.newlineIndex(T);if(!(F<0||F>=T+k)){var K=this.newlineIndex(T,!0)+1,G=F-K+1,re=this.isolate(K,G),z=re.next;re.format(S,D),z instanceof I&&z.formatAt(0,T-K+k-G,S,D)}}}},{key:"insertAt",value:function(T,k,S){if(S==null){var D=this.descendant(g.default,T),F=o(D,2),K=F[0],G=F[1];K.insertAt(G,k)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(k)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var S=this.domNode.textContent.slice(T).indexOf(`
`);return S>-1?T+S:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,T);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===k.statics.formats(k.domNode)&&(k.optimize(T),k.moveChildren(this),k.remove())}},{key:"replace",value:function(T){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(k){var S=d.default.find(k);S==null?k.parentNode.removeChild(k):S instanceof d.default.Embed?S.remove():S.unwrap()})}}],[{key:"create",value:function(T){var k=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,T);return k.setAttribute("spellcheck",!1),k}},{key:"formats",value:function(){return!0}}]),I}(p.default);w.blotName="code-block",w.tagName="PRE",w.TAB="  ",r.Code=R,r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(B,j){var V=[],q=!0,W=!1,H=void 0;try{for(var M=B[Symbol.iterator](),U;!(q=(U=M.next()).done)&&(V.push(U.value),!(j&&V.length===j));q=!0);}catch(Y){W=!0,H=Y}finally{try{!q&&M.return&&M.return()}finally{if(W)throw H}}return V}return function(B,j){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return z(B,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function z(B,j){for(var V=0;V<j.length;V++){var q=j[V];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,j,V){return j&&z(B.prototype,j),V&&z(B,V),B}}(),u=i(2),h=k(u),f=i(20),d=k(f),c=i(0),p=k(c),_=i(13),y=k(_),m=i(24),g=k(m),b=i(4),N=k(b),v=i(16),O=k(v),R=i(21),w=k(R),E=i(11),I=k(E),x=i(3),T=k(x);function k(z){return z&&z.__esModule?z:{default:z}}function S(z,B,j){return B in z?Object.defineProperty(z,B,{value:j,enumerable:!0,configurable:!0,writable:!0}):z[B]=j,z}function D(z,B){if(!(z instanceof B))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,K=function(){function z(B){D(this,z),this.scroll=B,this.delta=this.getDelta()}return l(z,[{key:"applyDelta",value:function(j){var V=this,q=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),j=re(j),j.reduce(function(H,M){var U=M.retain||M.delete||M.insert.length||1,Y=M.attributes||{};if(M.insert!=null){if(typeof M.insert=="string"){var $=M.insert;$.endsWith(`
`)&&q&&(q=!1,$=$.slice(0,-1)),H>=W&&!$.endsWith(`
`)&&(q=!0),V.scroll.insertAt(H,$);var X=V.scroll.line(H),se=s(X,2),le=se[0],me=se[1],_e=(0,T.default)({},(0,b.bubbleFormats)(le));if(le instanceof N.default){var Ie=le.descendant(p.default.Leaf,me),Je=s(Ie,1),Ke=Je[0];_e=(0,T.default)(_e,(0,b.bubbleFormats)(Ke))}Y=d.default.attributes.diff(_e,Y)||{}}else if(o(M.insert)==="object"){var J=Object.keys(M.insert)[0];if(J==null)return H;V.scroll.insertAt(H,J,M.insert[J])}W+=U}return Object.keys(Y).forEach(function(ee){V.scroll.formatAt(H,U,ee,Y[ee])}),H+U},0),j.reduce(function(H,M){return typeof M.delete=="number"?(V.scroll.deleteAt(H,M.delete),H):H+(M.retain||M.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,V){return this.scroll.deleteAt(j,V),this.update(new h.default().retain(j).delete(V))}},{key:"formatLine",value:function(j,V){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(H){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[H])){var M=q.scroll.lines(j,Math.max(V,1)),U=V;M.forEach(function(Y){var $=Y.length();if(!(Y instanceof y.default))Y.format(H,W[H]);else{var X=j-Y.offset(q.scroll),se=Y.newlineIndex(X+U)-X+1;Y.formatAt(X,se,H,W[H])}U-=$})}}),this.scroll.optimize(),this.update(new h.default().retain(j).retain(V,(0,w.default)(W)))}},{key:"formatText",value:function(j,V){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(H){q.scroll.formatAt(j,V,H,W[H])}),this.update(new h.default().retain(j).retain(V,(0,w.default)(W)))}},{key:"getContents",value:function(j,V){return this.delta.slice(j,j+V)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,V){return j.concat(V.delta())},new h.default)}},{key:"getFormat",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],W=[];V===0?this.scroll.path(j).forEach(function(M){var U=s(M,1),Y=U[0];Y instanceof N.default?q.push(Y):Y instanceof p.default.Leaf&&W.push(Y)}):(q=this.scroll.lines(j,V),W=this.scroll.descendants(p.default.Leaf,j,V));var H=[q,W].map(function(M){if(M.length===0)return{};for(var U=(0,b.bubbleFormats)(M.shift());Object.keys(U).length>0;){var Y=M.shift();if(Y==null)return U;U=G((0,b.bubbleFormats)(Y),U)}return U});return T.default.apply(T.default,H)}},{key:"getText",value:function(j,V){return this.getContents(j,V).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(j,V,q){return this.scroll.insertAt(j,V,q),this.update(new h.default().retain(j).insert(S({},V,q)))}},{key:"insertText",value:function(j,V){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V=V.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,V),Object.keys(W).forEach(function(H){q.scroll.formatAt(j,V.length,H,W[H])}),this.update(new h.default().retain(j).insert(V,(0,w.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==N.default.blotName||j.children.length>1?!1:j.children.head instanceof O.default}},{key:"removeFormat",value:function(j,V){var q=this.getText(j,V),W=this.scroll.line(j+V),H=s(W,2),M=H[0],U=H[1],Y=0,$=new h.default;M!=null&&(M instanceof y.default?Y=M.newlineIndex(U)-U+1:Y=M.length()-U,$=M.delta().slice(U,U+Y-1).insert(`
`));var X=this.getContents(j,V+Y),se=X.diff(new h.default().insert(q).concat($)),le=new h.default().retain(j).concat(se);return this.applyDelta(le)}},{key:"update",value:function(j){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(V.length===1&&V[0].type==="characterData"&&V[0].target.data.match(F)&&p.default.find(V[0].target)){var H=p.default.find(V[0].target),M=(0,b.bubbleFormats)(H),U=H.offset(this.scroll),Y=V[0].oldValue.replace(g.default.CONTENTS,""),$=new h.default().insert(Y),X=new h.default().insert(H.value()),se=new h.default().retain(U).concat($.diff(X,q));j=se.reduce(function(le,me){return me.insert?le.insert(me.insert,M):le.push(me)},new h.default),this.delta=W.compose(j)}else this.delta=this.getDelta(),(!j||!(0,I.default)(W.compose(j),this.delta))&&(j=W.diff(this.delta,q));return j}}]),z}();function G(z,B){return Object.keys(B).reduce(function(j,V){return z[V]==null||(B[V]===z[V]?j[V]=B[V]:Array.isArray(B[V])?B[V].indexOf(z[V])<0&&(j[V]=B[V].concat([z[V]])):j[V]=[B[V],z[V]]),j},{})}function re(z){return z.reduce(function(B,j){if(j.insert===1){var V=(0,w.default)(j.attributes);return delete V.image,B.insert({image:j.attributes.image},V)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,w.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var q=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(q,j.attributes)}return B.push(j)},new h.default)}r.default=K},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function E(I,x){var T=[],k=!0,S=!1,D=void 0;try{for(var F=I[Symbol.iterator](),K;!(k=(K=F.next()).done)&&(T.push(K.value),!(x&&T.length===x));k=!0);}catch(G){S=!0,D=G}finally{try{!k&&F.return&&F.return()}finally{if(S)throw D}}return T}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(I,x){for(var T=0;T<x.length;T++){var k=x[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(I,k.key,k)}}return function(I,x,T){return x&&E(I.prototype,x),T&&E(I,T),I}}(),l=i(0),u=g(l),h=i(21),f=g(h),d=i(11),c=g(d),p=i(8),_=g(p),y=i(10),m=g(y);function g(E){return E&&E.__esModule?E:{default:E}}function b(E){if(Array.isArray(E)){for(var I=0,x=Array(E.length);I<E.length;I++)x[I]=E[I];return x}else return Array.from(E)}function N(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}var v=(0,m.default)("quill:selection"),O=function E(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,E),this.index=I,this.length=x},R=function(){function E(I,x){var T=this;N(this,E),this.emitter=x,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new O(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,_.default.sources.USER),1)}),this.emitter.on(_.default.events.EDITOR_CHANGE,function(k,S){k===_.default.events.TEXT_CHANGE&&S.length()>0&&T.update(_.default.sources.SILENT)}),this.emitter.on(_.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var k=T.getNativeRange();k!=null&&k.start.node!==T.cursor.textNode&&T.emitter.once(_.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(k.start.node,k.start.offset,k.end.node,k.end.offset)}catch{}})}}),this.emitter.on(_.default.events.SCROLL_OPTIMIZE,function(k,S){if(S.range){var D=S.range,F=D.startNode,K=D.startOffset,G=D.endNode,re=D.endOffset;T.setNativeRange(F,K,G,re)}}),this.update(_.default.sources.SILENT)}return s(E,[{key:"handleComposition",value:function(){var x=this;this.root.addEventListener("compositionstart",function(){x.composing=!0}),this.root.addEventListener("compositionend",function(){if(x.composing=!1,x.cursor.parent){var T=x.cursor.restore();if(!T)return;setTimeout(function(){x.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var x=this;this.emitter.listenDOM("mousedown",document.body,function(){x.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){x.mouseDown=!1,x.update(_.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(x,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[x])){this.scroll.update();var k=this.getNativeRange();if(!(k==null||!k.native.collapsed||u.default.query(x,u.default.Scope.BLOCK))){if(k.start.node!==this.cursor.textNode){var S=u.default.find(k.start.node,!1);if(S==null)return;if(S instanceof u.default.Leaf){var D=S.split(k.start.offset);S.parent.insertBefore(this.cursor,D)}else S.insertBefore(this.cursor,k.start.node);this.cursor.attach()}this.cursor.format(x,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=this.scroll.length();x=Math.min(x,k-1),T=Math.min(x+T,k-1)-x;var S=void 0,D=this.scroll.leaf(x),F=o(D,2),K=F[0],G=F[1];if(K==null)return null;var re=K.position(G,!0),z=o(re,2);S=z[0],G=z[1];var B=document.createRange();if(T>0){B.setStart(S,G);var j=this.scroll.leaf(x+T),V=o(j,2);if(K=V[0],G=V[1],K==null)return null;var q=K.position(G,!0),W=o(q,2);return S=W[0],G=W[1],B.setEnd(S,G),B.getBoundingClientRect()}else{var H="left",M=void 0;return S instanceof Text?(G<S.data.length?(B.setStart(S,G),B.setEnd(S,G+1)):(B.setStart(S,G-1),B.setEnd(S,G),H="right"),M=B.getBoundingClientRect()):(M=K.domNode.getBoundingClientRect(),G>0&&(H="right")),{bottom:M.top+M.height,height:M.height,left:M[H],right:M[H],top:M.top,width:0}}}},{key:"getNativeRange",value:function(){var x=document.getSelection();if(x==null||x.rangeCount<=0)return null;var T=x.getRangeAt(0);if(T==null)return null;var k=this.normalizeNative(T);return v.info("getNativeRange",k),k}},{key:"getRange",value:function(){var x=this.getNativeRange();if(x==null)return[null,null];var T=this.normalizedToRange(x);return[T,x]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(x){var T=this,k=[[x.start.node,x.start.offset]];x.native.collapsed||k.push([x.end.node,x.end.offset]);var S=k.map(function(K){var G=o(K,2),re=G[0],z=G[1],B=u.default.find(re,!0),j=B.offset(T.scroll);return z===0?j:B instanceof u.default.Container?j+B.length():j+B.index(re,z)}),D=Math.min(Math.max.apply(Math,b(S)),this.scroll.length()-1),F=Math.min.apply(Math,[D].concat(b(S)));return new O(F,D-F)}},{key:"normalizeNative",value:function(x){if(!w(this.root,x.startContainer)||!x.collapsed&&!w(this.root,x.endContainer))return null;var T={start:{node:x.startContainer,offset:x.startOffset},end:{node:x.endContainer,offset:x.endOffset},native:x};return[T.start,T.end].forEach(function(k){for(var S=k.node,D=k.offset;!(S instanceof Text)&&S.childNodes.length>0;)if(S.childNodes.length>D)S=S.childNodes[D],D=0;else if(S.childNodes.length===D)S=S.lastChild,D=S instanceof Text?S.data.length:S.childNodes.length+1;else break;k.node=S,k.offset=D}),T}},{key:"rangeToNative",value:function(x){var T=this,k=x.collapsed?[x.index]:[x.index,x.index+x.length],S=[],D=this.scroll.length();return k.forEach(function(F,K){F=Math.min(D-1,F);var G=void 0,re=T.scroll.leaf(F),z=o(re,2),B=z[0],j=z[1],V=B.position(j,K!==0),q=o(V,2);G=q[0],j=q[1],S.push(G,j)}),S.length<2&&(S=S.concat(S)),S}},{key:"scrollIntoView",value:function(x){var T=this.lastRange;if(T!=null){var k=this.getBounds(T.index,T.length);if(k!=null){var S=this.scroll.length()-1,D=this.scroll.line(Math.min(T.index,S)),F=o(D,1),K=F[0],G=K;if(T.length>0){var re=this.scroll.line(Math.min(T.index+T.length,S)),z=o(re,1);G=z[0]}if(!(K==null||G==null)){var B=x.getBoundingClientRect();k.top<B.top?x.scrollTop-=B.top-k.top:k.bottom>B.bottom&&(x.scrollTop+=k.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(x,T){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(v.info("setNativeRange",x,T,k,S),!(x!=null&&(this.root.parentNode==null||x.parentNode==null||k.parentNode==null))){var F=document.getSelection();if(F!=null)if(x!=null){this.hasFocus()||this.root.focus();var K=(this.getNativeRange()||{}).native;if(K==null||D||x!==K.startContainer||T!==K.startOffset||k!==K.endContainer||S!==K.endOffset){x.tagName=="BR"&&(T=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode),k.tagName=="BR"&&(S=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode);var G=document.createRange();G.setStart(x,T),G.setEnd(k,S),F.removeAllRanges(),F.addRange(G)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof T=="string"&&(k=T,T=!1),v.info("setRange",x),x!=null){var S=this.rangeToNative(x);this.setNativeRange.apply(this,b(S).concat([T]))}else this.setNativeRange(null);this.update(k)}},{key:"update",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_.default.sources.USER,T=this.lastRange,k=this.getRange(),S=o(k,2),D=S[0],F=S[1];if(this.lastRange=D,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,c.default)(T,this.lastRange)){var K;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var G=[_.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(T),x];if((K=this.emitter).emit.apply(K,[_.default.events.EDITOR_CHANGE].concat(G)),x!==_.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,G)}}}}]),E}();function w(E,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),E.contains(I)}r.Range=O,r.default=R},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(y,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,m,g){return m&&_(y.prototype,m),g&&_(y,g),y}}(),s=function _(y,m,g){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,m);if(b===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:_(N,m,g)}else{if("value"in b)return b.value;var v=b.get;return v===void 0?void 0:v.call(g)}},l=i(0),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"insertInto",value:function(g,b){g.children.length===0?s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,g,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(u.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(t,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var _ in p)p.hasOwnProperty(_)&&(c[_]=p[_])};return function(c,p){d(c,p);function _(){this.constructor=c}c.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),l=i(30),u=i(1),h=function(d){o(c,d);function c(p){var _=d.call(this,p)||this;return _.build(),_}return c.prototype.appendChild=function(p){this.insertBefore(p)},c.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},c.prototype.build=function(){var p=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(_){try{var y=f(_);p.insertBefore(y,p.children.head||void 0)}catch(m){if(m instanceof u.ParchmentError)return;throw m}})},c.prototype.deleteAt=function(p,_){if(p===0&&_===this.length())return this.remove();this.children.forEachAt(p,_,function(y,m,g){y.deleteAt(m,g)})},c.prototype.descendant=function(p,_){var y=this.children.find(_),m=y[0],g=y[1];return p.blotName==null&&p(m)||p.blotName!=null&&m instanceof p?[m,g]:m instanceof c?m.descendant(p,g):[null,-1]},c.prototype.descendants=function(p,_,y){_===void 0&&(_=0),y===void 0&&(y=Number.MAX_VALUE);var m=[],g=y;return this.children.forEachAt(_,y,function(b,N,v){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&m.push(b),b instanceof c&&(m=m.concat(b.descendants(p,N,g))),g-=v}),m},c.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},c.prototype.formatAt=function(p,_,y,m){this.children.forEachAt(p,_,function(g,b,N){g.formatAt(b,N,y,m)})},c.prototype.insertAt=function(p,_,y){var m=this.children.find(p),g=m[0],b=m[1];if(g)g.insertAt(b,_,y);else{var N=y==null?u.create("text",_):u.create(_,y);this.appendChild(N)}},c.prototype.insertBefore=function(p,_){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return p instanceof y}))throw new u.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,_)},c.prototype.length=function(){return this.children.reduce(function(p,_){return p+_.length()},0)},c.prototype.moveChildren=function(p,_){this.children.forEach(function(y){p.insertBefore(y,_)})},c.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var _=u.create(this.statics.defaultChild);this.appendChild(_),_.optimize(p)}else this.remove()},c.prototype.path=function(p,_){_===void 0&&(_=!1);var y=this.children.find(p,_),m=y[0],g=y[1],b=[[this,p]];return m instanceof c?b.concat(m.path(g,_)):(m!=null&&b.push([m,g]),b)},c.prototype.removeChild=function(p){this.children.remove(p)},c.prototype.replace=function(p){p instanceof c&&p.moveChildren(this),d.prototype.replace.call(this,p)},c.prototype.split=function(p,_){if(_===void 0&&(_=!1),!_){if(p===0)return this;if(p===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(p,this.length(),function(m,g,b){m=m.split(g,_),y.appendChild(m)}),y},c.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},c.prototype.update=function(p,_){var y=this,m=[],g=[];p.forEach(function(b){b.target===y.domNode&&b.type==="childList"&&(m.push.apply(m,b.addedNodes),g.push.apply(g,b.removedNodes))}),g.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=u.find(b);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===y.domNode)&&N.detach()}}),m.filter(function(b){return b.parentNode==y.domNode}).sort(function(b,N){return b===N?0:b.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var N=null;b.nextSibling!=null&&(N=u.find(b.nextSibling));var v=f(b);(v.next!=N||v.next==null)&&(v.parent!=null&&v.parent.removeChild(y),y.insertBefore(v,N||void 0))})},c}(l.default);function f(d){var c=u.find(d);if(c==null)try{c=u.create(d)}catch{c=u.create(u.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(_){c.domNode.appendChild(_)}),d.parentNode&&d.parentNode.replaceChild(c.domNode,d),c.attach()}return c}r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var _ in p)p.hasOwnProperty(_)&&(c[_]=p[_])};return function(c,p){d(c,p);function _(){this.constructor=c}c.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),l=i(31),u=i(17),h=i(1),f=function(d){o(c,d);function c(p){var _=d.call(this,p)||this;return _.attributes=new l.default(_.domNode),_}return c.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},c.prototype.format=function(p,_){var y=h.query(p);y instanceof s.default?this.attributes.attribute(y,_):_&&y!=null&&(p!==this.statics.blotName||this.formats()[p]!==_)&&this.replaceWith(p,_)},c.prototype.formats=function(){var p=this.attributes.values(),_=this.statics.formats(this.domNode);return _!=null&&(p[this.statics.blotName]=_),p},c.prototype.replaceWith=function(p,_){var y=d.prototype.replaceWith.call(this,p,_);return this.attributes.copy(y),y},c.prototype.update=function(p,_){var y=this;d.prototype.update.call(this,p,_),p.some(function(m){return m.target===y.domNode&&m.type==="attributes"})&&this.attributes.build()},c.prototype.wrap=function(p,_){var y=d.prototype.wrap.call(this,p,_);return y instanceof c&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},c}(u.default);r.default=f},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),l=i(1),u=function(h){o(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,c){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(c,1):-1},f.prototype.position=function(d,c){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f}(s.default);r.default=u},function(t,r,i){var o=i(11),s=i(3),l={attributes:{compose:function(h,f,d){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var c=s(!0,{},f);d||(c=Object.keys(c).reduce(function(_,y){return c[y]!=null&&(_[y]=c[y]),_},{}));for(var p in h)h[p]!==void 0&&f[p]===void 0&&(c[p]=h[p]);return Object.keys(c).length>0?c:void 0},diff:function(h,f){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var d=Object.keys(h).concat(Object.keys(f)).reduce(function(c,p){return o(h[p],f[p])||(c[p]=f[p]===void 0?null:f[p]),c},{});return Object.keys(d).length>0?d:void 0},transform:function(h,f,d){if(typeof h!="object")return f;if(typeof f=="object"){if(!d)return f;var c=Object.keys(f).reduce(function(p,_){return h[_]===void 0&&(p[_]=f[_]),p},{});return Object.keys(c).length>0?c:void 0}}},iterator:function(h){return new u(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function u(h){this.ops=h,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(h){h||(h=1/0);var f=this.ops[this.index];if(f){var d=this.offset,c=l.length(f);if(h>=c-d?(h=c-d,this.index+=1,this.offset=0):this.offset+=h,typeof f.delete=="number")return{delete:h};var p={};return f.attributes&&(p.attributes=f.attributes),typeof f.retain=="number"?p.retain=h:typeof f.insert=="string"?p.insert=f.insert.substr(d,h):p.insert=f.insert,p}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,f=this.index,d=this.next(),c=this.ops.slice(this.index);return this.offset=h,this.index=f,[d].concat(c)}else return[]},t.exports=l},function(t,r){var i=function(){function o(y,m){return m!=null&&y instanceof m}var s;try{s=Map}catch{s=function(){}}var l;try{l=Set}catch{l=function(){}}var u;try{u=Promise}catch{u=function(){}}function h(y,m,g,b,N){typeof m=="object"&&(g=m.depth,b=m.prototype,N=m.includeNonEnumerable,m=m.circular);var v=[],O=[],R=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof g>"u"&&(g=1/0);function w(E,I){if(E===null)return null;if(I===0)return E;var x,T;if(typeof E!="object")return E;if(o(E,s))x=new s;else if(o(E,l))x=new l;else if(o(E,u))x=new u(function(B,j){E.then(function(V){B(w(V,I-1))},function(V){j(w(V,I-1))})});else if(h.__isArray(E))x=[];else if(h.__isRegExp(E))x=new RegExp(E.source,_(E)),E.lastIndex&&(x.lastIndex=E.lastIndex);else if(h.__isDate(E))x=new Date(E.getTime());else{if(R&&Buffer.isBuffer(E))return Buffer.allocUnsafe?x=Buffer.allocUnsafe(E.length):x=new Buffer(E.length),E.copy(x),x;o(E,Error)?x=Object.create(E):typeof b>"u"?(T=Object.getPrototypeOf(E),x=Object.create(T)):(x=Object.create(b),T=b)}if(m){var k=v.indexOf(E);if(k!=-1)return O[k];v.push(E),O.push(x)}o(E,s)&&E.forEach(function(B,j){var V=w(j,I-1),q=w(B,I-1);x.set(V,q)}),o(E,l)&&E.forEach(function(B){var j=w(B,I-1);x.add(j)});for(var S in E){var D;T&&(D=Object.getOwnPropertyDescriptor(T,S)),!(D&&D.set==null)&&(x[S]=w(E[S],I-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(E),S=0;S<F.length;S++){var K=F[S],G=Object.getOwnPropertyDescriptor(E,K);G&&!G.enumerable&&!N||(x[K]=w(E[K],I-1),G.enumerable||Object.defineProperty(x,K,{enumerable:!1}))}if(N)for(var re=Object.getOwnPropertyNames(E),S=0;S<re.length;S++){var z=re[S],G=Object.getOwnPropertyDescriptor(E,z);G&&G.enumerable||(x[z]=w(E[z],I-1),Object.defineProperty(x,z,{enumerable:!1}))}return x}return w(y,g)}h.clonePrototype=function(m){if(m===null)return null;var g=function(){};return g.prototype=m,new g};function f(y){return Object.prototype.toString.call(y)}h.__objToStr=f;function d(y){return typeof y=="object"&&f(y)==="[object Date]"}h.__isDate=d;function c(y){return typeof y=="object"&&f(y)==="[object Array]"}h.__isArray=c;function p(y){return typeof y=="object"&&f(y)==="[object RegExp]"}h.__isRegExp=p;function _(y){var m="";return y.global&&(m+="g"),y.ignoreCase&&(m+="i"),y.multiline&&(m+="m"),m}return h.__getRegExpFlags=_,h}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function x(T,k){var S=[],D=!0,F=!1,K=void 0;try{for(var G=T[Symbol.iterator](),re;!(D=(re=G.next()).done)&&(S.push(re.value),!(k&&S.length===k));D=!0);}catch(z){F=!0,K=z}finally{try{!D&&G.return&&G.return()}finally{if(F)throw K}}return S}return function(T,k){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return x(T,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function x(T,k){for(var S=0;S<k.length;S++){var D=k[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(T,D.key,D)}}return function(T,k,S){return k&&x(T.prototype,k),S&&x(T,S),T}}(),l=function x(T,k,S){T===null&&(T=Function.prototype);var D=Object.getOwnPropertyDescriptor(T,k);if(D===void 0){var F=Object.getPrototypeOf(T);return F===null?void 0:x(F,k,S)}else{if("value"in D)return D.value;var K=D.get;return K===void 0?void 0:K.call(S)}},u=i(0),h=v(u),f=i(8),d=v(f),c=i(4),p=v(c),_=i(16),y=v(_),m=i(13),g=v(m),b=i(25),N=v(b);function v(x){return x&&x.__esModule?x:{default:x}}function O(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function R(x,T){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:x}function w(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(x,T):x.__proto__=T)}function E(x){return x instanceof p.default||x instanceof c.BlockEmbed}var I=function(x){w(T,x);function T(k,S){O(this,T);var D=R(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,k));return D.emitter=S.emitter,Array.isArray(S.whitelist)&&(D.whitelist=S.whitelist.reduce(function(F,K){return F[K]=!0,F},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return s(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(S,D){var F=this.line(S),K=o(F,2),G=K[0],re=K[1],z=this.line(S+D),B=o(z,1),j=B[0];if(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,S,D),j!=null&&G!==j&&re>0){if(G instanceof c.BlockEmbed||j instanceof c.BlockEmbed){this.optimize();return}if(G instanceof g.default){var V=G.newlineIndex(G.length(),!0);if(V>-1&&(G=G.split(V+1),G===j)){this.optimize();return}}else if(j instanceof g.default){var q=j.newlineIndex(0);q>-1&&j.split(q+1)}var W=j.children.head instanceof y.default?null:j.children.head;G.moveChildren(j,W),G.remove()}this.optimize()}},{key:"enable",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",S)}},{key:"formatAt",value:function(S,D,F,K){this.whitelist!=null&&!this.whitelist[F]||(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,S,D,F,K),this.optimize())}},{key:"insertAt",value:function(S,D,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[D])){if(S>=this.length())if(F==null||h.default.query(D,h.default.Scope.BLOCK)==null){var K=h.default.create(this.statics.defaultChild);this.appendChild(K),F==null&&D.endsWith(`
`)&&(D=D.slice(0,-1)),K.insertAt(0,D,F)}else{var G=h.default.create(D,F);this.appendChild(G)}else l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,S,D,F);this.optimize()}}},{key:"insertBefore",value:function(S,D){if(S.statics.scope===h.default.Scope.INLINE_BLOT){var F=h.default.create(this.statics.defaultChild);F.appendChild(S),S=F}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,S,D)}},{key:"leaf",value:function(S){return this.path(S).pop()||[null,-1]}},{key:"line",value:function(S){return S===this.length()?this.line(S-1):this.descendant(E,S)}},{key:"lines",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function K(G,re,z){var B=[],j=z;return G.children.forEachAt(re,z,function(V,q,W){E(V)?B.push(V):V instanceof h.default.Container&&(B=B.concat(K(V,q,j))),j-=W}),B};return F(this,S,D)}},{key:"optimize",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,S,D),S.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,S,D))}},{key:"path",value:function(S){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,S).slice(1)}},{key:"update",value:function(S){if(this.batch!==!0){var D=d.default.sources.USER;typeof S=="string"&&(D=S),Array.isArray(S)||(S=this.observer.takeRecords()),S.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,D,S),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,S.concat([])),S.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,D,S)}}}]),T}(h.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,c.BlockEmbed,N.default],r.default=I},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=function(){function M(U,Y){var $=[],X=!0,se=!1,le=void 0;try{for(var me=U[Symbol.iterator](),_e;!(X=(_e=me.next()).done)&&($.push(_e.value),!(Y&&$.length===Y));X=!0);}catch(Ie){se=!0,le=Ie}finally{try{!X&&me.return&&me.return()}finally{if(se)throw le}}return $}return function(U,Y){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return M(U,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function M(U,Y){for(var $=0;$<Y.length;$++){var X=Y[$];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,Y,$){return Y&&M(U.prototype,Y),$&&M(U,$),U}}(),u=i(21),h=x(u),f=i(11),d=x(f),c=i(3),p=x(c),_=i(2),y=x(_),m=i(20),g=x(m),b=i(0),N=x(b),v=i(5),O=x(v),R=i(10),w=x(R),E=i(9),I=x(E);function x(M){return M&&M.__esModule?M:{default:M}}function T(M,U,Y){return U in M?Object.defineProperty(M,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}):M[U]=Y,M}function k(M,U){if(!(M instanceof U))throw new TypeError("Cannot call a class as a function")}function S(M,U){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:M}function D(M,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);M.prototype=Object.create(U&&U.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(M,U):M.__proto__=U)}var F=(0,w.default)("quill:keyboard"),K=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(M){D(U,M),l(U,null,[{key:"match",value:function($,X){return X=H(X),["altKey","ctrlKey","metaKey","shiftKey"].some(function(se){return!!X[se]!==$[se]&&X[se]!==null})?!1:X.key===($.which||$.keyCode)}}]);function U(Y,$){k(this,U);var X=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,Y,$));return X.bindings={},Object.keys(X.options.bindings).forEach(function(se){se==="list autofill"&&Y.scroll.whitelist!=null&&!Y.scroll.whitelist.list||X.options.bindings[se]&&X.addBinding(X.options.bindings[se])}),X.addBinding({key:U.keys.ENTER,shiftKey:null},V),X.addBinding({key:U.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(X.addBinding({key:U.keys.BACKSPACE},{collapsed:!0},z),X.addBinding({key:U.keys.DELETE},{collapsed:!0},B)):(X.addBinding({key:U.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),X.addBinding({key:U.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),X.addBinding({key:U.keys.BACKSPACE},{collapsed:!1},j),X.addBinding({key:U.keys.DELETE},{collapsed:!1},j),X.addBinding({key:U.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),X.listen(),X}return l(U,[{key:"addBinding",value:function($){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},le=H($);if(le==null||le.key==null)return F.warn("Attempted to add invalid keyboard binding",le);typeof X=="function"&&(X={handler:X}),typeof se=="function"&&(se={handler:se}),le=(0,p.default)(le,X,se),this.bindings[le.key]=this.bindings[le.key]||[],this.bindings[le.key].push(le)}},{key:"listen",value:function(){var $=this;this.quill.root.addEventListener("keydown",function(X){if(!X.defaultPrevented){var se=X.which||X.keyCode,le=($.bindings[se]||[]).filter(function(Ue){return U.match(X,Ue)});if(le.length!==0){var me=$.quill.getSelection();if(!(me==null||!$.quill.hasFocus())){var _e=$.quill.getLine(me.index),Ie=s(_e,2),Je=Ie[0],Ke=Ie[1],J=$.quill.getLeaf(me.index),ee=s(J,2),ce=ee[0],fe=ee[1],oe=me.length===0?[ce,fe]:$.quill.getLeaf(me.index+me.length),Ee=s(oe,2),Te=Ee[0],ke=Ee[1],Le=ce instanceof N.default.Text?ce.value().slice(0,fe):"",qe=Te instanceof N.default.Text?Te.value().slice(ke):"",De={collapsed:me.length===0,empty:me.length===0&&Je.length()<=1,format:$.quill.getFormat(me),offset:Ke,prefix:Le,suffix:qe},ti=le.some(function(Ue){if(Ue.collapsed!=null&&Ue.collapsed!==De.collapsed||Ue.empty!=null&&Ue.empty!==De.empty||Ue.offset!=null&&Ue.offset!==De.offset)return!1;if(Array.isArray(Ue.format)){if(Ue.format.every(function(Rt){return De.format[Rt]==null}))return!1}else if(o(Ue.format)==="object"&&!Object.keys(Ue.format).every(function(Rt){return Ue.format[Rt]===!0?De.format[Rt]!=null:Ue.format[Rt]===!1?De.format[Rt]==null:(0,d.default)(Ue.format[Rt],De.format[Rt])}))return!1;return Ue.prefix!=null&&!Ue.prefix.test(De.prefix)||Ue.suffix!=null&&!Ue.suffix.test(De.suffix)?!1:Ue.handler.call($,me,De)!==!0});ti&&X.preventDefault()}}}})}}]),U}(I.default);G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function(U,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","+1",O.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(U,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","-1",O.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(U,Y){Y.format.indent!=null?this.quill.format("indent","-1",O.default.sources.USER):Y.format.list!=null&&this.quill.format("list",!1,O.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(U){this.quill.deleteText(U.index-1,1,O.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function(U){this.quill.history.cutoff();var Y=new y.default().retain(U.index).delete(U.length).insert("	");this.quill.updateContents(Y,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index+1,O.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(U,Y){this.quill.format("list",!1,O.default.sources.USER),Y.format.indent&&this.quill.format("indent",!1,O.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(U){var Y=this.quill.getLine(U.index),$=s(Y,2),X=$[0],se=$[1],le=(0,p.default)({},X.formats(),{list:"checked"}),me=new y.default().retain(U.index).insert(`
`,le).retain(X.length()-se-1).retain(1,{list:"unchecked"});this.quill.updateContents(me,O.default.sources.USER),this.quill.setSelection(U.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(U,Y){var $=this.quill.getLine(U.index),X=s($,2),se=X[0],le=X[1],me=new y.default().retain(U.index).insert(`
`,Y.format).retain(se.length()-le-1).retain(1,{header:null});this.quill.updateContents(me,O.default.sources.USER),this.quill.setSelection(U.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(U,Y){var $=Y.prefix.length,X=this.quill.getLine(U.index),se=s(X,2),le=se[0],me=se[1];if(me>$)return!0;var _e=void 0;switch(Y.prefix.trim()){case"[]":case"[ ]":_e="unchecked";break;case"[x]":_e="checked";break;case"-":case"*":_e="bullet";break;default:_e="ordered"}this.quill.insertText(U.index," ",O.default.sources.USER),this.quill.history.cutoff();var Ie=new y.default().retain(U.index-me).delete($+1).retain(le.length()-2-me).retain(1,{list:_e});this.quill.updateContents(Ie,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index-$,O.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(U){var Y=this.quill.getLine(U.index),$=s(Y,2),X=$[0],se=$[1],le=new y.default().retain(U.index+X.length()-se-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(le,O.default.sources.USER)}},"embed left":re(G.keys.LEFT,!1),"embed left shift":re(G.keys.LEFT,!0),"embed right":re(G.keys.RIGHT,!1),"embed right shift":re(G.keys.RIGHT,!0)}};function re(M,U){var Y,$=M===G.keys.LEFT?"prefix":"suffix";return Y={key:M,shiftKey:U,altKey:null},T(Y,$,/^$/),T(Y,"handler",function(se){var le=se.index;M===G.keys.RIGHT&&(le+=se.length+1);var me=this.quill.getLeaf(le),_e=s(me,1),Ie=_e[0];return Ie instanceof N.default.Embed?(M===G.keys.LEFT?U?this.quill.setSelection(se.index-1,se.length+1,O.default.sources.USER):this.quill.setSelection(se.index-1,O.default.sources.USER):U?this.quill.setSelection(se.index,se.length+1,O.default.sources.USER):this.quill.setSelection(se.index+se.length+1,O.default.sources.USER),!1):!0}),Y}function z(M,U){if(!(M.index===0||this.quill.getLength()<=1)){var Y=this.quill.getLine(M.index),$=s(Y,1),X=$[0],se={};if(U.offset===0){var le=this.quill.getLine(M.index-1),me=s(le,1),_e=me[0];if(_e!=null&&_e.length()>1){var Ie=X.formats(),Je=this.quill.getFormat(M.index-1,1);se=g.default.attributes.diff(Ie,Je)||{}}}var Ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(U.prefix)?2:1;this.quill.deleteText(M.index-Ke,Ke,O.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(M.index-Ke,Ke,se,O.default.sources.USER),this.quill.focus()}}function B(M,U){var Y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(U.suffix)?2:1;if(!(M.index>=this.quill.getLength()-Y)){var $={},X=0,se=this.quill.getLine(M.index),le=s(se,1),me=le[0];if(U.offset>=me.length()-1){var _e=this.quill.getLine(M.index+1),Ie=s(_e,1),Je=Ie[0];if(Je){var Ke=me.formats(),J=this.quill.getFormat(M.index,1);$=g.default.attributes.diff(Ke,J)||{},X=Je.length()}}this.quill.deleteText(M.index,Y,O.default.sources.USER),Object.keys($).length>0&&this.quill.formatLine(M.index+X-1,Y,$,O.default.sources.USER)}}function j(M){var U=this.quill.getLines(M),Y={};if(U.length>1){var $=U[0].formats(),X=U[U.length-1].formats();Y=g.default.attributes.diff(X,$)||{}}this.quill.deleteText(M,O.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(M.index,1,Y,O.default.sources.USER),this.quill.setSelection(M.index,O.default.sources.SILENT),this.quill.focus()}function V(M,U){var Y=this;M.length>0&&this.quill.scroll.deleteAt(M.index,M.length);var $=Object.keys(U.format).reduce(function(X,se){return N.default.query(se,N.default.Scope.BLOCK)&&!Array.isArray(U.format[se])&&(X[se]=U.format[se]),X},{});this.quill.insertText(M.index,`
`,$,O.default.sources.USER),this.quill.setSelection(M.index+1,O.default.sources.SILENT),this.quill.focus(),Object.keys(U.format).forEach(function(X){$[X]==null&&(Array.isArray(U.format[X])||X!=="link"&&Y.quill.format(X,U.format[X],O.default.sources.USER))})}function q(M){return{key:G.keys.TAB,shiftKey:!M,format:{"code-block":!0},handler:function(Y){var $=N.default.query("code-block"),X=Y.index,se=Y.length,le=this.quill.scroll.descendant($,X),me=s(le,2),_e=me[0],Ie=me[1];if(_e!=null){var Je=this.quill.getIndex(_e),Ke=_e.newlineIndex(Ie,!0)+1,J=_e.newlineIndex(Je+Ie+se),ee=_e.domNode.textContent.slice(Ke,J).split(`
`);Ie=0,ee.forEach(function(ce,fe){M?(_e.insertAt(Ke+Ie,$.TAB),Ie+=$.TAB.length,fe===0?X+=$.TAB.length:se+=$.TAB.length):ce.startsWith($.TAB)&&(_e.deleteAt(Ke+Ie,$.TAB.length),Ie-=$.TAB.length,fe===0?X-=$.TAB.length:se-=$.TAB.length),Ie+=ce.length+1}),this.quill.update(O.default.sources.USER),this.quill.setSelection(X,se,O.default.sources.SILENT)}}}}function W(M){return{key:M[0].toUpperCase(),shortKey:!0,handler:function(Y,$){this.quill.format(M,!$.format[M],O.default.sources.USER)}}}function H(M){if(typeof M=="string"||typeof M=="number")return H({key:M});if((typeof M>"u"?"undefined":o(M))==="object"&&(M=(0,h.default)(M,!1)),typeof M.key=="string")if(G.keys[M.key.toUpperCase()]!=null)M.key=G.keys[M.key.toUpperCase()];else if(M.key.length===1)M.key=M.key.toUpperCase().charCodeAt(0);else return null;return M.shortKey&&(M[K]=M.shortKey,delete M.shortKey),M}r.default=G,r.SHORTKEY=K},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(b,N){var v=[],O=!0,R=!1,w=void 0;try{for(var E=b[Symbol.iterator](),I;!(O=(I=E.next()).done)&&(v.push(I.value),!(N&&v.length===N));O=!0);}catch(x){R=!0,w=x}finally{try{!O&&E.return&&E.return()}finally{if(R)throw w}}return v}return function(b,N){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return g(b,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function g(b,N,v){b===null&&(b=Function.prototype);var O=Object.getOwnPropertyDescriptor(b,N);if(O===void 0){var R=Object.getPrototypeOf(b);return R===null?void 0:g(R,N,v)}else{if("value"in O)return O.value;var w=O.get;return w===void 0?void 0:w.call(v)}},l=function(){function g(b,N){for(var v=0;v<N.length;v++){var O=N[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,N,v){return N&&g(b.prototype,N),v&&g(b,v),b}}(),u=i(0),h=c(u),f=i(7),d=c(f);function c(g){return g&&g.__esModule?g:{default:g}}function p(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function _(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){y(b,g),l(b,null,[{key:"value",value:function(){}}]);function b(N,v){p(this,b);var O=_(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N));return O.selection=v,O.textNode=document.createTextNode(b.CONTENTS),O.domNode.appendChild(O.textNode),O._length=0,O}return l(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(v,O){if(this._length!==0)return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,v,O);for(var R=this,w=0;R!=null&&R.statics.scope!==h.default.Scope.BLOCK_BLOT;)w+=R.offset(R.parent),R=R.parent;R!=null&&(this._length=b.CONTENTS.length,R.optimize(),R.formatAt(w,b.CONTENTS.length,v,O),this._length=0)}},{key:"index",value:function(v,O){return v===this.textNode?0:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,v,O)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var v=this.textNode,O=this.selection.getNativeRange(),R=void 0,w=void 0,E=void 0;if(O!=null&&O.start.node===v&&O.end.node===v){var I=[v,O.start.offset,O.end.offset];R=I[0],w=I[1],E=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var x=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof d.default?(R=this.next.domNode,this.next.insertAt(0,x),this.textNode.data=b.CONTENTS):(this.textNode.data=x,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),w!=null){var T=[w,E].map(function(S){return Math.max(0,Math.min(R.data.length,S-1))}),k=o(T,2);return w=k[0],E=k[1],{startNode:R,startOffset:w,endNode:R,endOffset:E}}}}},{key:"update",value:function(v,O){var R=this;if(v.some(function(E){return E.type==="characterData"&&E.target===R.textNode})){var w=this.restore();w&&(O.range=w)}}},{key:"value",value:function(){return""}}]),b}(h.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=h(o),l=i(4),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(s.default.Container);p.allowedChildren=[u.default,l.BlockEmbed,p],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function m(g,b){for(var N=0;N<b.length;N++){var v=b[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,N){return b&&m(g.prototype,b),N&&m(g,N),g}}(),s=function m(g,b,N){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var O=Object.getPrototypeOf(g);return O===null?void 0:m(O,b,N)}else{if("value"in v)return v.value;var R=v.get;return R===void 0?void 0:R.call(N)}},l=i(0),u=h(l);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function c(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){c(g,m);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(N){var v=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,N);return v.startsWith("rgb(")?(v=v.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+v.split(",").map(function(O){return("00"+parseInt(O).toString(16)).slice(-2)}).join("")):v}}]),g}(u.default.Attributor.Style),_=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),y=new p("color","color",{scope:u.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=_,r.ColorStyle=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function y(m,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,N.key,N)}}return function(m,g,b){return g&&y(m.prototype,g),b&&y(m,b),m}}(),s=function y(m,g,b){m===null&&(m=Function.prototype);var N=Object.getOwnPropertyDescriptor(m,g);if(N===void 0){var v=Object.getPrototypeOf(m);return v===null?void 0:y(v,g,b)}else{if("value"in N)return N.value;var O=N.get;return O===void 0?void 0:O.call(b)}},l=i(6),u=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function f(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function d(y,m){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:y}function c(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(y,m):y.__proto__=m)}var p=function(y){c(m,y);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(b,N){if(b!==this.statics.blotName||!N)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,b,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(b){var N=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,b);return b=this.sanitize(b),N.setAttribute("href",b),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return _(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),m}(u.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function _(y,m){var g=document.createElement("a");g.href=y;var b=g.href.slice(0,g.href.indexOf(":"));return m.indexOf(b)>-1}r.default=p,r.sanitize=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=function(){function m(g,b){for(var N=0;N<b.length;N++){var v=b[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,N){return b&&m(g.prototype,b),N&&m(g,N),g}}(),l=i(23),u=d(l),h=i(107),f=d(h);function d(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}var p=0;function _(m,g){m.setAttribute(g,m.getAttribute(g)!=="true")}var y=function(){function m(g){var b=this;c(this,m),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case u.default.keys.ENTER:b.togglePicker();break;case u.default.keys.ESCAPE:b.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),_(this.label,"aria-expanded"),_(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var N=this,v=document.createElement("span");return v.tabIndex="0",v.setAttribute("role","button"),v.classList.add("ql-picker-item"),b.hasAttribute("value")&&v.setAttribute("data-value",b.getAttribute("value")),b.textContent&&v.setAttribute("data-label",b.textContent),v.addEventListener("click",function(){N.selectItem(v,!0)}),v.addEventListener("keydown",function(O){switch(O.keyCode){case u.default.keys.ENTER:N.selectItem(v,!0),O.preventDefault();break;case u.default.keys.ESCAPE:N.escape(),O.preventDefault();break}}),v}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=f.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(v){var O=b.buildItem(v);N.appendChild(O),v.selected===!0&&b.selectItem(O)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(N){b.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=this.container.querySelector(".ql-selected");if(b!==v&&(v!=null&&v.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var O=document.createEvent("Event");O.initEvent("change",!0,!0),this.select.dispatchEvent(O)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var v=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",v)}}]),m}();r.default=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=F(o),l=i(5),u=F(l),h=i(4),f=F(h),d=i(16),c=F(d),p=i(25),_=F(p),y=i(24),m=F(y),g=i(35),b=F(g),N=i(6),v=F(N),O=i(22),R=F(O),w=i(7),E=F(w),I=i(55),x=F(I),T=i(42),k=F(T),S=i(23),D=F(S);function F(K){return K&&K.__esModule?K:{default:K}}u.default.register({"blots/block":f.default,"blots/block/embed":h.BlockEmbed,"blots/break":c.default,"blots/container":_.default,"blots/cursor":m.default,"blots/embed":b.default,"blots/inline":v.default,"blots/scroll":R.default,"blots/text":E.default,"modules/clipboard":x.default,"modules/history":k.default,"modules/keyboard":D.default}),s.default.register(f.default,c.default,m.default,v.default,R.default,E.default),r.default=u.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function l(u){this.domNode=u,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(u){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?h=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?h=document.createElement(u):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return o.create(u)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},l.prototype.deleteAt=function(u,h){var f=this.isolate(u,h);f.remove()},l.prototype.formatAt=function(u,h,f,d){var c=this.isolate(u,h);if(o.query(f,o.Scope.BLOT)!=null&&d)c.wrap(f,d);else if(o.query(f,o.Scope.ATTRIBUTE)!=null){var p=o.create(this.statics.scope);c.wrap(p),p.format(f,d)}},l.prototype.insertAt=function(u,h,f){var d=f==null?o.create("text",h):o.create(h,f),c=this.split(u);this.parent.insertBefore(d,c)},l.prototype.insertInto=function(u,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var f=null;u.children.insertBefore(this,h),h!=null&&(f=h.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=f)&&u.domNode.insertBefore(this.domNode,f),this.parent=u,this.attach()},l.prototype.isolate=function(u,h){var f=this.split(u);return f.split(h),f},l.prototype.length=function(){return 1},l.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},l.prototype.optimize=function(u){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},l.prototype.replaceWith=function(u,h){var f=typeof u=="string"?o.create(u,h):u;return f.replace(this),f},l.prototype.split=function(u,h){return u===0?this:this.next},l.prototype.update=function(u,h){},l.prototype.wrap=function(u,h){var f=typeof u=="string"?o.create(u,h):u;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();r.default=s},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),l=i(33),u=i(1),h=function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,c){c?d.add(this.domNode,c)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var c=o.default.keys(this.domNode),p=s.default.keys(this.domNode),_=l.default.keys(this.domNode);c.concat(p).concat(_).forEach(function(y){var m=u.query(y,u.Scope.ATTRIBUTE);m instanceof o.default&&(d.attributes[m.attrName]=m)})},f.prototype.copy=function(d){var c=this;Object.keys(this.attributes).forEach(function(p){var _=c.attributes[p].value(c.domNode);d.format(p,_)})},f.prototype.move=function(d){var c=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){c.attributes[p].remove(c.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(c,p){return c[p]=d.attributes[p].value(d.domNode),c},{})},f}();r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function l(h,f){var d=h.getAttribute("class")||"";return d.split(/\s+/).filter(function(c){return c.indexOf(f+"-")===0})}var u=function(h){o(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(c){return c.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,c){return this.canAdd(d,c)?(this.remove(d),d.classList.add(this.keyName+"-"+c),!0):!1},f.prototype.remove=function(d){var c=l(d,this.keyName);c.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var c=l(d,this.keyName)[0]||"",p=c.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},f}(s.default);r.default=u},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function l(h){var f=h.split("-"),d=f.slice(1).map(function(c){return c[0].toUpperCase()+c.slice(1)}).join("");return f[0]+d}var u=function(h){o(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(c){var p=c.split(":");return p[0].trim()})},f.prototype.add=function(d,c){return this.canAdd(d,c)?(d.style[l(this.keyName)]=c,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var c=d.style[l(this.keyName)];return this.canAdd(d,c)?c:""},f}(s.default);r.default=u},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(h,f){for(var d=0;d<f.length;d++){var c=f[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,f,d){return f&&u(h.prototype,f),d&&u(h,d),h}}();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(h,f){s(this,u),this.quill=h,this.options=f,this.modules={}}return o(u,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),u}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(b,N){for(var v=0;v<N.length;v++){var O=N[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,N,v){return N&&g(b.prototype,N),v&&g(b,v),b}}(),s=function g(b,N,v){b===null&&(b=Function.prototype);var O=Object.getOwnPropertyDescriptor(b,N);if(O===void 0){var R=Object.getPrototypeOf(b);return R===null?void 0:g(R,N,v)}else{if("value"in O)return O.value;var w=O.get;return w===void 0?void 0:w.call(v)}},l=i(0),u=d(l),h=i(7),f=d(h);function d(g){return g&&g.__esModule?g:{default:g}}function c(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function p(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function _(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y="\uFEFF",m=function(g){_(b,g);function b(N){c(this,b);var v=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N));return v.contentNode=document.createElement("span"),v.contentNode.setAttribute("contenteditable",!1),[].slice.call(v.domNode.childNodes).forEach(function(O){v.contentNode.appendChild(O)}),v.leftGuard=document.createTextNode(y),v.rightGuard=document.createTextNode(y),v.domNode.appendChild(v.leftGuard),v.domNode.appendChild(v.contentNode),v.domNode.appendChild(v.rightGuard),v}return o(b,[{key:"index",value:function(v,O){return v===this.leftGuard?0:v===this.rightGuard?1:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,v,O)}},{key:"restore",value:function(v){var O=void 0,R=void 0,w=v.data.split(y).join("");if(v===this.leftGuard)if(this.prev instanceof f.default){var E=this.prev.length();this.prev.insertAt(E,w),O={startNode:this.prev.domNode,startOffset:E+w.length}}else R=document.createTextNode(w),this.parent.insertBefore(u.default.create(R),this),O={startNode:R,startOffset:w.length};else v===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,w),O={startNode:this.next.domNode,startOffset:w.length}):(R=document.createTextNode(w),this.parent.insertBefore(u.default.create(R),this.next),O={startNode:R,startOffset:w.length}));return v.data=y,O}},{key:"update",value:function(v,O){var R=this;v.forEach(function(w){if(w.type==="characterData"&&(w.target===R.leftGuard||w.target===R.rightGuard)){var E=R.restore(w.target);E&&(O.range=E)}})}}]),b}(u.default.Embed);r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}var u={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new s.default.Attributor.Attribute("align","align",u),f=new s.default.Attributor.Class("align","ql-align",u),d=new s.default.Attributor.Style("align","text-align",u);r.AlignAttribute=h,r.AlignClass=f,r.AlignStyle=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=u(o),l=i(26);function u(d){return d&&d.__esModule?d:{default:d}}var h=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=h,r.BackgroundStyle=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}var u={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},h=new s.default.Attributor.Attribute("direction","dir",u),f=new s.default.Attributor.Class("direction","ql-direction",u),d=new s.default.Attributor.Style("direction","direction",u);r.DirectionAttribute=h,r.DirectionClass=f,r.DirectionStyle=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function g(b,N){for(var v=0;v<N.length;v++){var O=N[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,N,v){return N&&g(b.prototype,N),v&&g(b,v),b}}(),s=function g(b,N,v){b===null&&(b=Function.prototype);var O=Object.getOwnPropertyDescriptor(b,N);if(O===void 0){var R=Object.getPrototypeOf(b);return R===null?void 0:g(R,N,v)}else{if("value"in O)return O.value;var w=O.get;return w===void 0?void 0:w.call(v)}},l=i(0),u=h(l);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function c(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},_=new u.default.Attributor.Class("font","ql-font",p),y=function(g){c(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"value",value:function(v){return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,v).replace(/["']/g,"")}}]),b}(u.default.Attributor.Style),m=new y("font","font-family",p);r.FontStyle=m,r.FontClass=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}var u=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=u,r.SizeStyle=h},function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function N(v,O){for(var R=0;R<O.length;R++){var w=O[R];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,O,R){return O&&N(v.prototype,O),R&&N(v,R),v}}(),s=i(0),l=c(s),u=i(5),h=c(u),f=i(9),d=c(f);function c(N){return N&&N.__esModule?N:{default:N}}function p(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function _(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function y(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var m=function(N){y(v,N);function v(O,R){p(this,v);var w=_(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,O,R));return w.lastRecorded=0,w.ignoreChange=!1,w.clear(),w.quill.on(h.default.events.EDITOR_CHANGE,function(E,I,x,T){E!==h.default.events.TEXT_CHANGE||w.ignoreChange||(!w.options.userOnly||T===h.default.sources.USER?w.record(I,x):w.transform(I))}),w.quill.keyboard.addBinding({key:"Z",shortKey:!0},w.undo.bind(w)),w.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},w.redo.bind(w)),/Win/i.test(navigator.platform)&&w.quill.keyboard.addBinding({key:"Y",shortKey:!0},w.redo.bind(w)),w}return o(v,[{key:"change",value:function(R,w){if(this.stack[R].length!==0){var E=this.stack[R].pop();this.stack[w].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[R],h.default.sources.USER),this.ignoreChange=!1;var I=b(E[R]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(R,w){if(R.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(w),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var x=this.stack.undo.pop();E=E.compose(x.undo),R=x.redo.compose(R)}else this.lastRecorded=I;this.stack.undo.push({redo:R,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(R){this.stack.undo.forEach(function(w){w.undo=R.transform(w.undo,!0),w.redo=R.transform(w.redo,!0)}),this.stack.redo.forEach(function(w){w.undo=R.transform(w.undo,!0),w.redo=R.transform(w.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),v}(d.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(N){var v=N.ops[N.ops.length-1];return v==null?!1:v.insert!=null?typeof v.insert=="string"&&v.insert.endsWith(`
`):v.attributes!=null?Object.keys(v.attributes).some(function(O){return l.default.query(O,l.default.Scope.BLOCK)!=null}):!1}function b(N){var v=N.reduce(function(R,w){return R+=w.delete||0,R},0),O=N.length()-v;return g(N)&&(O-=1),O}r.default=m,r.getLastChangeIndex=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function V(q,W){for(var H=0;H<W.length;H++){var M=W[H];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(q,M.key,M)}}return function(q,W,H){return W&&V(q.prototype,W),H&&V(q,H),q}}(),s=function V(q,W,H){q===null&&(q=Function.prototype);var M=Object.getOwnPropertyDescriptor(q,W);if(M===void 0){var U=Object.getPrototypeOf(q);return U===null?void 0:V(U,W,H)}else{if("value"in M)return M.value;var Y=M.get;return Y===void 0?void 0:Y.call(H)}},l=i(3),u=I(l),h=i(2),f=I(h),d=i(8),c=I(d),p=i(23),_=I(p),y=i(34),m=I(y),g=i(59),b=I(g),N=i(60),v=I(N),O=i(28),R=I(O),w=i(61),E=I(w);function I(V){return V&&V.__esModule?V:{default:V}}function x(V,q){if(!(V instanceof q))throw new TypeError("Cannot call a class as a function")}function T(V,q){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:V}function k(V,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);V.prototype=Object.create(q&&q.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(V,q):V.__proto__=q)}var S=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],K=["1","2","3",!1],G=["small",!1,"large","huge"],re=function(V){k(q,V);function q(W,H){x(this,q);var M=T(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,H)),U=function Y($){if(!document.body.contains(W.root))return document.body.removeEventListener("click",Y);M.tooltip!=null&&!M.tooltip.root.contains($.target)&&document.activeElement!==M.tooltip.textbox&&!M.quill.hasFocus()&&M.tooltip.hide(),M.pickers!=null&&M.pickers.forEach(function(X){X.container.contains($.target)||X.close()})};return W.emitter.listenDOM("click",document.body,U),M}return o(q,[{key:"addModule",value:function(H){var M=s(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(M),M}},{key:"buildButtons",value:function(H,M){H.forEach(function(U){var Y=U.getAttribute("class")||"";Y.split(/\s+/).forEach(function($){if($.startsWith("ql-")&&($=$.slice(3),M[$]!=null))if($==="direction")U.innerHTML=M[$][""]+M[$].rtl;else if(typeof M[$]=="string")U.innerHTML=M[$];else{var X=U.value||"";X!=null&&M[$][X]&&(U.innerHTML=M[$][X])}})})}},{key:"buildPickers",value:function(H,M){var U=this;this.pickers=H.map(function($){if($.classList.contains("ql-align"))return $.querySelector("option")==null&&j($,S),new v.default($,M.align);if($.classList.contains("ql-background")||$.classList.contains("ql-color")){var X=$.classList.contains("ql-background")?"background":"color";return $.querySelector("option")==null&&j($,D,X==="background"?"#ffffff":"#000000"),new b.default($,M[X])}else return $.querySelector("option")==null&&($.classList.contains("ql-font")?j($,F):$.classList.contains("ql-header")?j($,K):$.classList.contains("ql-size")&&j($,G)),new R.default($)});var Y=function(){U.pickers.forEach(function(X){X.update()})};this.quill.on(c.default.events.EDITOR_CHANGE,Y)}}]),q}(m.default);re.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var H=new FileReader;H.onload=function(M){var U=q.quill.getSelection(!0);q.quill.updateContents(new f.default().retain(U.index).delete(U.length).insert({image:M.target.result}),c.default.sources.USER),q.quill.setSelection(U.index+1,c.default.sources.SILENT),W.value=""},H.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(V){k(q,V);function q(W,H){x(this,q);var M=T(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,H));return M.textbox=M.root.querySelector('input[type="text"]'),M.listen(),M}return o(q,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(M){_.default.match(M,"enter")?(H.save(),M.preventDefault()):_.default.match(M,"escape")&&(H.cancel(),M.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),M!=null?this.textbox.value=M:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var M=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,c.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,c.default.sources.USER)),this.quill.root.scrollTop=M;break}case"video":H=B(H);case"formula":{if(!H)break;var U=this.quill.getSelection(!0);if(U!=null){var Y=U.index+U.length;this.quill.insertEmbed(Y,this.root.getAttribute("data-mode"),H,c.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Y+1," ",c.default.sources.USER),this.quill.setSelection(Y+2,c.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q}(E.default);function B(V){var q=V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=V.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":V}function j(V,q){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(H){var M=document.createElement("option");H===W?M.setAttribute("selected","selected"):M.setAttribute("value",H),V.appendChild(M)})}r.BaseTooltip=z,r.default=re},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},s.prototype.contains=function(l){for(var u,h=this.iterator();u=h();)if(u===l)return!0;return!1},s.prototype.insertBefore=function(l,u){l&&(l.next=u,u!=null?(l.prev=u.prev,u.prev!=null&&(u.prev.next=l),u.prev=l,u===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},s.prototype.offset=function(l){for(var u=0,h=this.head;h!=null;){if(h===l)return u;u+=h.length(),h=h.next}return-1},s.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},s.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var u=l;return l!=null&&(l=l.next),u}},s.prototype.find=function(l,u){u===void 0&&(u=!1);for(var h,f=this.iterator();h=f();){var d=h.length();if(l<d||u&&l===d&&(h.next==null||h.next.length()!==0))return[h,l];l-=d}return[null,0]},s.prototype.forEach=function(l){for(var u,h=this.iterator();u=h();)l(u)},s.prototype.forEachAt=function(l,u,h){if(!(u<=0))for(var f=this.find(l),d=f[0],c=f[1],p,_=l-c,y=this.iterator(d);(p=y())&&_<l+u;){var m=p.length();l>_?h(p,l-_,Math.min(u,_+m-l)):h(p,0,Math.min(m,l+u-_)),_+=m}},s.prototype.map=function(l){return this.reduce(function(u,h){return u.push(l(h)),u},[])},s.prototype.reduce=function(l,u){for(var h,f=this.iterator();h=f();)u=l(u,h);return u},s}();r.default=o},function(t,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var _ in p)p.hasOwnProperty(_)&&(c[_]=p[_])};return function(c,p){d(c,p);function _(){this.constructor=c}c.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),l=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,f=function(d){o(c,d);function c(p){var _=d.call(this,p)||this;return _.scroll=_,_.observer=new MutationObserver(function(y){_.update(y)}),_.observer.observe(_.domNode,u),_.attach(),_}return c.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},c.prototype.deleteAt=function(p,_){this.update(),p===0&&_===this.length()?this.children.forEach(function(y){y.remove()}):d.prototype.deleteAt.call(this,p,_)},c.prototype.formatAt=function(p,_,y,m){this.update(),d.prototype.formatAt.call(this,p,_,y,m)},c.prototype.insertAt=function(p,_,y){this.update(),d.prototype.insertAt.call(this,p,_,y)},c.prototype.optimize=function(p,_){var y=this;p===void 0&&(p=[]),_===void 0&&(_={}),d.prototype.optimize.call(this,_);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)p.push(m.pop());for(var g=function(O,R){R===void 0&&(R=!0),!(O==null||O===y)&&O.domNode.parentNode!=null&&(O.domNode[l.DATA_KEY].mutations==null&&(O.domNode[l.DATA_KEY].mutations=[]),R&&g(O.parent))},b=function(O){O.domNode[l.DATA_KEY]==null||O.domNode[l.DATA_KEY].mutations==null||(O instanceof s.default&&O.children.forEach(b),O.optimize(_))},N=p,v=0;N.length>0;v+=1){if(v>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(O){var R=l.find(O.target,!0);R!=null&&(R.domNode===O.target&&(O.type==="childList"?(g(l.find(O.previousSibling,!1)),[].forEach.call(O.addedNodes,function(w){var E=l.find(w,!1);g(E,!1),E instanceof s.default&&E.children.forEach(function(I){g(I,!1)})})):O.type==="attributes"&&g(R.prev)),g(R))}),this.children.forEach(b),N=[].slice.call(this.observer.takeRecords()),m=N.slice();m.length>0;)p.push(m.pop())}},c.prototype.update=function(p,_){var y=this;_===void 0&&(_={}),p=p||this.observer.takeRecords(),p.map(function(m){var g=l.find(m.target,!0);return g==null?null:g.domNode[l.DATA_KEY].mutations==null?(g.domNode[l.DATA_KEY].mutations=[m],g):(g.domNode[l.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===y||m.domNode[l.DATA_KEY]==null||m.update(m.domNode[l.DATA_KEY].mutations||[],_)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,_),this.optimize(p,_)},c.blotName="scroll",c.defaultChild="block",c.scope=l.Scope.BLOCK_BLOT,c.tagName="DIV",c}(s.default);r.default=f},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var p in c)c.hasOwnProperty(p)&&(d[p]=c[p])};return function(d,c){f(d,c);function p(){this.constructor=d}d.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),l=i(1);function u(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var c in f)if(f[c]!==d[c])return!1;return!0}var h=function(f){o(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(c){if(c.tagName!==d.tagName)return f.formats.call(this,c)},d.prototype.format=function(c,p){var _=this;c===this.statics.blotName&&!p?(this.children.forEach(function(y){y instanceof s.default||(y=y.wrap(d.blotName,!0)),_.attributes.copy(y)}),this.unwrap()):f.prototype.format.call(this,c,p)},d.prototype.formatAt=function(c,p,_,y){if(this.formats()[_]!=null||l.query(_,l.Scope.ATTRIBUTE)){var m=this.isolate(c,p);m.format(_,y)}else f.prototype.formatAt.call(this,c,p,_,y)},d.prototype.optimize=function(c){f.prototype.optimize.call(this,c);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var _=this.next;_ instanceof d&&_.prev===this&&u(p,_.formats())&&(_.moveChildren(this),_.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d}(s.default);r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),l=i(1),u=function(h){o(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.formats=function(d){var c=l.query(f.blotName).tagName;if(d.tagName!==c)return h.formats.call(this,d)},f.prototype.format=function(d,c){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!c?this.replaceWith(f.blotName):h.prototype.format.call(this,d,c))},f.prototype.formatAt=function(d,c,p,_){l.query(p,l.Scope.BLOCK)!=null?this.format(p,_):h.prototype.formatAt.call(this,d,c,p,_)},f.prototype.insertAt=function(d,c,p){if(p==null||l.query(c,l.Scope.INLINE)!=null)h.prototype.insertAt.call(this,d,c,p);else{var _=this.split(d),y=l.create(c,p);_.parent.insertBefore(y,_)}},f.prototype.update=function(d,c){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,d,c)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(s.default);r.default=u},function(t,r,i){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){u(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),l=function(u){o(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(f){},h.prototype.format=function(f,d){u.prototype.formatAt.call(this,0,this.length(),f,d)},h.prototype.formatAt=function(f,d,c,p){f===0&&d===this.length()?this.format(c,p):u.prototype.formatAt.call(this,f,d,c,p)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(s.default);r.default=l},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var c in d)d.hasOwnProperty(c)&&(f[c]=d[c])};return function(f,d){h(f,d);function c(){this.constructor=f}f.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),l=i(1),u=function(h){o(f,h);function f(d){var c=h.call(this,d)||this;return c.text=c.statics.value(c.domNode),c}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var c=d.data;return c.normalize&&(c=c.normalize()),c},f.prototype.deleteAt=function(d,c){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+c)},f.prototype.index=function(d,c){return this.domNode===d?c:-1},f.prototype.insertAt=function(d,c,p){p==null?(this.text=this.text.slice(0,d)+c+this.text.slice(d),this.domNode.data=this.text):h.prototype.insertAt.call(this,d,c,p)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){h.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,c){return[this.domNode,d]},f.prototype.split=function(d,c){if(c===void 0&&(c=!1),!c){if(d===0)return this;if(d===this.length())return this.next}var p=l.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},f.prototype.update=function(d,c){var p=this;d.some(function(_){return _.type==="characterData"&&_.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(s.default);r.default=u},function(t,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,u){return arguments.length>1&&!this.contains(l)==!u?u:s.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,u){return u=u||0,this.substr(u,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,u){var h=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>h.length)&&(u=h.length),u-=l.length;var f=h.indexOf(l,u);return f!==-1&&f===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),f=h.length>>>0,d=arguments[1],c,p=0;p<f;p++)if(c=h[p],u.call(d,c,p,h))return c}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var i=-1,o=1,s=0;function l(v,O,R){if(v==O)return v?[[s,v]]:[];(R<0||v.length<R)&&(R=null);var w=d(v,O),E=v.substring(0,w);v=v.substring(w),O=O.substring(w),w=c(v,O);var I=v.substring(v.length-w);v=v.substring(0,v.length-w),O=O.substring(0,O.length-w);var x=u(v,O);return E&&x.unshift([s,E]),I&&x.push([s,I]),_(x),R!=null&&(x=g(x,R)),x=b(x),x}function u(v,O){var R;if(!v)return[[o,O]];if(!O)return[[i,v]];var w=v.length>O.length?v:O,E=v.length>O.length?O:v,I=w.indexOf(E);if(I!=-1)return R=[[o,w.substring(0,I)],[s,E],[o,w.substring(I+E.length)]],v.length>O.length&&(R[0][0]=R[2][0]=i),R;if(E.length==1)return[[i,v],[o,O]];var x=p(v,O);if(x){var T=x[0],k=x[1],S=x[2],D=x[3],F=x[4],K=l(T,S),G=l(k,D);return K.concat([[s,F]],G)}return h(v,O)}function h(v,O){for(var R=v.length,w=O.length,E=Math.ceil((R+w)/2),I=E,x=2*E,T=new Array(x),k=new Array(x),S=0;S<x;S++)T[S]=-1,k[S]=-1;T[I+1]=0,k[I+1]=0;for(var D=R-w,F=D%2!=0,K=0,G=0,re=0,z=0,B=0;B<E;B++){for(var j=-B+K;j<=B-G;j+=2){var V=I+j,q;j==-B||j!=B&&T[V-1]<T[V+1]?q=T[V+1]:q=T[V-1]+1;for(var W=q-j;q<R&&W<w&&v.charAt(q)==O.charAt(W);)q++,W++;if(T[V]=q,q>R)G+=2;else if(W>w)K+=2;else if(F){var H=I+D-j;if(H>=0&&H<x&&k[H]!=-1){var M=R-k[H];if(q>=M)return f(v,O,q,W)}}}for(var U=-B+re;U<=B-z;U+=2){var H=I+U,M;U==-B||U!=B&&k[H-1]<k[H+1]?M=k[H+1]:M=k[H-1]+1;for(var Y=M-U;M<R&&Y<w&&v.charAt(R-M-1)==O.charAt(w-Y-1);)M++,Y++;if(k[H]=M,M>R)z+=2;else if(Y>w)re+=2;else if(!F){var V=I+D-U;if(V>=0&&V<x&&T[V]!=-1){var q=T[V],W=I+q-V;if(M=R-M,q>=M)return f(v,O,q,W)}}}}return[[i,v],[o,O]]}function f(v,O,R,w){var E=v.substring(0,R),I=O.substring(0,w),x=v.substring(R),T=O.substring(w),k=l(E,I),S=l(x,T);return k.concat(S)}function d(v,O){if(!v||!O||v.charAt(0)!=O.charAt(0))return 0;for(var R=0,w=Math.min(v.length,O.length),E=w,I=0;R<E;)v.substring(I,E)==O.substring(I,E)?(R=E,I=R):w=E,E=Math.floor((w-R)/2+R);return E}function c(v,O){if(!v||!O||v.charAt(v.length-1)!=O.charAt(O.length-1))return 0;for(var R=0,w=Math.min(v.length,O.length),E=w,I=0;R<E;)v.substring(v.length-E,v.length-I)==O.substring(O.length-E,O.length-I)?(R=E,I=R):w=E,E=Math.floor((w-R)/2+R);return E}function p(v,O){var R=v.length>O.length?v:O,w=v.length>O.length?O:v;if(R.length<4||w.length*2<R.length)return null;function E(G,re,z){for(var B=G.substring(z,z+Math.floor(G.length/4)),j=-1,V="",q,W,H,M;(j=re.indexOf(B,j+1))!=-1;){var U=d(G.substring(z),re.substring(j)),Y=c(G.substring(0,z),re.substring(0,j));V.length<Y+U&&(V=re.substring(j-Y,j)+re.substring(j,j+U),q=G.substring(0,z-Y),W=G.substring(z+U),H=re.substring(0,j-Y),M=re.substring(j+U))}return V.length*2>=G.length?[q,W,H,M,V]:null}var I=E(R,w,Math.ceil(R.length/4)),x=E(R,w,Math.ceil(R.length/2)),T;if(!I&&!x)return null;x?I?T=I[4].length>x[4].length?I:x:T=x:T=I;var k,S,D,F;v.length>O.length?(k=T[0],S=T[1],D=T[2],F=T[3]):(D=T[0],F=T[1],k=T[2],S=T[3]);var K=T[4];return[k,S,D,F,K]}function _(v){v.push([s,""]);for(var O=0,R=0,w=0,E="",I="",x;O<v.length;)switch(v[O][0]){case o:w++,I+=v[O][1],O++;break;case i:R++,E+=v[O][1],O++;break;case s:R+w>1?(R!==0&&w!==0&&(x=d(I,E),x!==0&&(O-R-w>0&&v[O-R-w-1][0]==s?v[O-R-w-1][1]+=I.substring(0,x):(v.splice(0,0,[s,I.substring(0,x)]),O++),I=I.substring(x),E=E.substring(x)),x=c(I,E),x!==0&&(v[O][1]=I.substring(I.length-x)+v[O][1],I=I.substring(0,I.length-x),E=E.substring(0,E.length-x))),R===0?v.splice(O-w,R+w,[o,I]):w===0?v.splice(O-R,R+w,[i,E]):v.splice(O-R-w,R+w,[i,E],[o,I]),O=O-R-w+(R?1:0)+(w?1:0)+1):O!==0&&v[O-1][0]==s?(v[O-1][1]+=v[O][1],v.splice(O,1)):O++,w=0,R=0,E="",I="";break}v[v.length-1][1]===""&&v.pop();var T=!1;for(O=1;O<v.length-1;)v[O-1][0]==s&&v[O+1][0]==s&&(v[O][1].substring(v[O][1].length-v[O-1][1].length)==v[O-1][1]?(v[O][1]=v[O-1][1]+v[O][1].substring(0,v[O][1].length-v[O-1][1].length),v[O+1][1]=v[O-1][1]+v[O+1][1],v.splice(O-1,1),T=!0):v[O][1].substring(0,v[O+1][1].length)==v[O+1][1]&&(v[O-1][1]+=v[O+1][1],v[O][1]=v[O][1].substring(v[O+1][1].length)+v[O+1][1],v.splice(O+1,1),T=!0)),O++;T&&_(v)}var y=l;y.INSERT=o,y.DELETE=i,y.EQUAL=s,t.exports=y;function m(v,O){if(O===0)return[s,v];for(var R=0,w=0;w<v.length;w++){var E=v[w];if(E[0]===i||E[0]===s){var I=R+E[1].length;if(O===I)return[w+1,v];if(O<I){v=v.slice();var x=O-R,T=[E[0],E[1].slice(0,x)],k=[E[0],E[1].slice(x)];return v.splice(w,1,T,k),[w+1,v]}else R=I}}throw new Error("cursor_pos is out of bounds!")}function g(v,O){var R=m(v,O),w=R[1],E=R[0],I=w[E],x=w[E+1];if(I==null)return v;if(I[0]!==s)return v;if(x!=null&&I[1]+x[1]===x[1]+I[1])return w.splice(E,2,x,I),N(w,E,2);if(x!=null&&x[1].indexOf(I[1])===0){w.splice(E,2,[x[0],I[1]],[0,I[1]]);var T=x[1].slice(I[1].length);return T.length>0&&w.splice(E+2,0,[x[0],T]),N(w,E,3)}else return v}function b(v){for(var O=!1,R=function(x){return x.charCodeAt(0)>=56320&&x.charCodeAt(0)<=57343},w=function(x){return x.charCodeAt(x.length-1)>=55296&&x.charCodeAt(x.length-1)<=56319},E=2;E<v.length;E+=1)v[E-2][0]===s&&w(v[E-2][1])&&v[E-1][0]===i&&R(v[E-1][1])&&v[E][0]===o&&R(v[E][1])&&(O=!0,v[E-1][1]=v[E-2][1].slice(-1)+v[E-1][1],v[E][1]=v[E-2][1].slice(-1)+v[E][1],v[E-2][1]=v[E-2][1].slice(0,-1));if(!O)return v;for(var I=[],E=0;E<v.length;E+=1)v[E][1].length>0&&I.push(v[E]);return I}function N(v,O,R){for(var w=O+R-1;w>=0&&w>=O-1;w--)if(w+1<v.length){var E=v[w],I=v[w+1];E[0]===I[1]&&v.splice(w,2,[E[0],E[1]+I[1]])}return v}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var l in o)s.push(l);return s}},function(t,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=i?o:s,r.supported=o;function o(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=s;function s(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(t,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function l(h,f,d){this.fn=h,this.context=f,this.once=d||!1}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],d,c;if(this._eventsCount===0)return f;for(c in d=this._events)i.call(d,c)&&f.push(o?c.slice(1):c);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},u.prototype.listeners=function(f,d){var c=o?o+f:f,p=this._events[c];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var _=0,y=p.length,m=new Array(y);_<y;_++)m[_]=p[_].fn;return m},u.prototype.emit=function(f,d,c,p,_,y){var m=o?o+f:f;if(!this._events[m])return!1;var g=this._events[m],b=arguments.length,N,v;if(g.fn){switch(g.once&&this.removeListener(f,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,c),!0;case 4:return g.fn.call(g.context,d,c,p),!0;case 5:return g.fn.call(g.context,d,c,p,_),!0;case 6:return g.fn.call(g.context,d,c,p,_,y),!0}for(v=1,N=new Array(b-1);v<b;v++)N[v-1]=arguments[v];g.fn.apply(g.context,N)}else{var O=g.length,R;for(v=0;v<O;v++)switch(g[v].once&&this.removeListener(f,g[v].fn,void 0,!0),b){case 1:g[v].fn.call(g[v].context);break;case 2:g[v].fn.call(g[v].context,d);break;case 3:g[v].fn.call(g[v].context,d,c);break;case 4:g[v].fn.call(g[v].context,d,c,p);break;default:if(!N)for(R=1,N=new Array(b-1);R<b;R++)N[R-1]=arguments[R];g[v].fn.apply(g[v].context,N)}}return!0},u.prototype.on=function(f,d,c){var p=new l(d,c||this),_=o?o+f:f;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],p]:this._events[_].push(p):(this._events[_]=p,this._eventsCount++),this},u.prototype.once=function(f,d,c){var p=new l(d,c||this,!0),_=o?o+f:f;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],p]:this._events[_].push(p):(this._events[_]=p,this._eventsCount++),this},u.prototype.removeListener=function(f,d,c,p){var _=o?o+f:f;if(!this._events[_])return this;if(!d)return--this._eventsCount===0?this._events=new s:delete this._events[_],this;var y=this._events[_];if(y.fn)y.fn===d&&(!p||y.once)&&(!c||y.context===c)&&(--this._eventsCount===0?this._events=new s:delete this._events[_]);else{for(var m=0,g=[],b=y.length;m<b;m++)(y[m].fn!==d||p&&!y[m].once||c&&y[m].context!==c)&&g.push(y[m]);g.length?this._events[_]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new s:delete this._events[_]}return this},u.prototype.removeAllListeners=function(f){var d;return f?(d=o?o+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new s:delete this._events[d])):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=o,u.EventEmitter=u,typeof t<"u"&&(t.exports=u)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},s=function(){function J(ee,ce){var fe=[],oe=!0,Ee=!1,Te=void 0;try{for(var ke=ee[Symbol.iterator](),Le;!(oe=(Le=ke.next()).done)&&(fe.push(Le.value),!(ce&&fe.length===ce));oe=!0);}catch(qe){Ee=!0,Te=qe}finally{try{!oe&&ke.return&&ke.return()}finally{if(Ee)throw Te}}return fe}return function(ee,ce){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return J(ee,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function J(ee,ce){for(var fe=0;fe<ce.length;fe++){var oe=ce[fe];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ee,oe.key,oe)}}return function(ee,ce,fe){return ce&&J(ee.prototype,ce),fe&&J(ee,fe),ee}}(),u=i(3),h=k(u),f=i(2),d=k(f),c=i(0),p=k(c),_=i(5),y=k(_),m=i(10),g=k(m),b=i(9),N=k(b),v=i(36),O=i(37),R=i(13),w=k(R),E=i(26),I=i(38),x=i(39),T=i(40);function k(J){return J&&J.__esModule?J:{default:J}}function S(J,ee,ce){return ee in J?Object.defineProperty(J,ee,{value:ce,enumerable:!0,configurable:!0,writable:!0}):J[ee]=ce,J}function D(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")}function F(J,ee){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:J}function K(J,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);J.prototype=Object.create(ee&&ee.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(J,ee):J.__proto__=ee)}var G=(0,g.default)("quill:clipboard"),re="__ql-matcher",z=[[Node.TEXT_NODE,Ke],[Node.TEXT_NODE,_e],["br",se],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,Je],["li",me],["b",Y.bind(Y,"bold")],["i",Y.bind(Y,"italic")],["style",le]],B=[v.AlignAttribute,I.DirectionAttribute].reduce(function(J,ee){return J[ee.keyName]=ee,J},{}),j=[v.AlignStyle,O.BackgroundStyle,E.ColorStyle,I.DirectionStyle,x.FontStyle,T.SizeStyle].reduce(function(J,ee){return J[ee.keyName]=ee,J},{}),V=function(J){K(ee,J);function ee(ce,fe){D(this,ee);var oe=F(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ce,fe));return oe.quill.root.addEventListener("paste",oe.onPaste.bind(oe)),oe.container=oe.quill.addContainer("ql-clipboard"),oe.container.setAttribute("contenteditable",!0),oe.container.setAttribute("tabindex",-1),oe.matchers=[],z.concat(oe.options.matchers).forEach(function(Ee){var Te=s(Ee,2),ke=Te[0],Le=Te[1];!fe.matchVisual&&Le===Ie||oe.addMatcher(ke,Le)}),oe}return l(ee,[{key:"addMatcher",value:function(fe,oe){this.matchers.push([fe,oe])}},{key:"convert",value:function(fe){if(typeof fe=="string")return this.container.innerHTML=fe.replace(/\>\r?\n +\</g,"><"),this.convert();var oe=this.quill.getFormat(this.quill.selection.savedRange.index);if(oe[w.default.blotName]){var Ee=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ee,S({},w.default.blotName,oe[w.default.blotName]))}var Te=this.prepareMatching(),ke=s(Te,2),Le=ke[0],qe=ke[1],De=U(this.container,Le,qe);return H(De,`
`)&&De.ops[De.ops.length-1].attributes==null&&(De=De.compose(new d.default().retain(De.length()-1).delete(1))),G.log("convert",this.container.innerHTML,De),this.container.innerHTML="",De}},{key:"dangerouslyPasteHTML",value:function(fe,oe){var Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof fe=="string")this.quill.setContents(this.convert(fe),oe),this.quill.setSelection(0,y.default.sources.SILENT);else{var Te=this.convert(oe);this.quill.updateContents(new d.default().retain(fe).concat(Te),Ee),this.quill.setSelection(fe+Te.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(fe){var oe=this;if(!(fe.defaultPrevented||!this.quill.isEnabled())){var Ee=this.quill.getSelection(),Te=new d.default().retain(Ee.index),ke=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){Te=Te.concat(oe.convert()).delete(Ee.length),oe.quill.updateContents(Te,y.default.sources.USER),oe.quill.setSelection(Te.length()-Ee.length,y.default.sources.SILENT),oe.quill.scrollingContainer.scrollTop=ke,oe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var fe=this,oe=[],Ee=[];return this.matchers.forEach(function(Te){var ke=s(Te,2),Le=ke[0],qe=ke[1];switch(Le){case Node.TEXT_NODE:Ee.push(qe);break;case Node.ELEMENT_NODE:oe.push(qe);break;default:[].forEach.call(fe.container.querySelectorAll(Le),function(De){De[re]=De[re]||[],De[re].push(qe)});break}}),[oe,Ee]}}]),ee}(N.default);V.DEFAULTS={matchers:[],matchVisual:!0};function q(J,ee,ce){return(typeof ee>"u"?"undefined":o(ee))==="object"?Object.keys(ee).reduce(function(fe,oe){return q(fe,oe,ee[oe])},J):J.reduce(function(fe,oe){return oe.attributes&&oe.attributes[ee]?fe.push(oe):fe.insert(oe.insert,(0,h.default)({},S({},ee,ce),oe.attributes))},new d.default)}function W(J){if(J.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return J[ee]||(J[ee]=window.getComputedStyle(J))}function H(J,ee){for(var ce="",fe=J.ops.length-1;fe>=0&&ce.length<ee.length;--fe){var oe=J.ops[fe];if(typeof oe.insert!="string")break;ce=oe.insert+ce}return ce.slice(-1*ee.length)===ee}function M(J){if(J.childNodes.length===0)return!1;var ee=W(J);return["block","list-item"].indexOf(ee.display)>-1}function U(J,ee,ce){return J.nodeType===J.TEXT_NODE?ce.reduce(function(fe,oe){return oe(J,fe)},new d.default):J.nodeType===J.ELEMENT_NODE?[].reduce.call(J.childNodes||[],function(fe,oe){var Ee=U(oe,ee,ce);return oe.nodeType===J.ELEMENT_NODE&&(Ee=ee.reduce(function(Te,ke){return ke(oe,Te)},Ee),Ee=(oe[re]||[]).reduce(function(Te,ke){return ke(oe,Te)},Ee)),fe.concat(Ee)},new d.default):new d.default}function Y(J,ee,ce){return q(ce,J,!0)}function $(J,ee){var ce=p.default.Attributor.Attribute.keys(J),fe=p.default.Attributor.Class.keys(J),oe=p.default.Attributor.Style.keys(J),Ee={};return ce.concat(fe).concat(oe).forEach(function(Te){var ke=p.default.query(Te,p.default.Scope.ATTRIBUTE);ke!=null&&(Ee[ke.attrName]=ke.value(J),Ee[ke.attrName])||(ke=B[Te],ke!=null&&(ke.attrName===Te||ke.keyName===Te)&&(Ee[ke.attrName]=ke.value(J)||void 0),ke=j[Te],ke!=null&&(ke.attrName===Te||ke.keyName===Te)&&(ke=j[Te],Ee[ke.attrName]=ke.value(J)||void 0))}),Object.keys(Ee).length>0&&(ee=q(ee,Ee)),ee}function X(J,ee){var ce=p.default.query(J);if(ce==null)return ee;if(ce.prototype instanceof p.default.Embed){var fe={},oe=ce.value(J);oe!=null&&(fe[ce.blotName]=oe,ee=new d.default().insert(fe,ce.formats(J)))}else typeof ce.formats=="function"&&(ee=q(ee,ce.blotName,ce.formats(J)));return ee}function se(J,ee){return H(ee,`
`)||ee.insert(`
`),ee}function le(){return new d.default}function me(J,ee){var ce=p.default.query(J);if(ce==null||ce.blotName!=="list-item"||!H(ee,`
`))return ee;for(var fe=-1,oe=J.parentNode;!oe.classList.contains("ql-clipboard");)(p.default.query(oe)||{}).blotName==="list"&&(fe+=1),oe=oe.parentNode;return fe<=0?ee:ee.compose(new d.default().retain(ee.length()-1).retain(1,{indent:fe}))}function _e(J,ee){return H(ee,`
`)||(M(J)||ee.length()>0&&J.nextSibling&&M(J.nextSibling))&&ee.insert(`
`),ee}function Ie(J,ee){if(M(J)&&J.nextElementSibling!=null&&!H(ee,`

`)){var ce=J.offsetHeight+parseFloat(W(J).marginTop)+parseFloat(W(J).marginBottom);J.nextElementSibling.offsetTop>J.offsetTop+ce*1.5&&ee.insert(`
`)}return ee}function Je(J,ee){var ce={},fe=J.style||{};return fe.fontStyle&&W(J).fontStyle==="italic"&&(ce.italic=!0),fe.fontWeight&&(W(J).fontWeight.startsWith("bold")||parseInt(W(J).fontWeight)>=700)&&(ce.bold=!0),Object.keys(ce).length>0&&(ee=q(ee,ce)),parseFloat(fe.textIndent||0)>0&&(ee=new d.default().insert("	").concat(ee)),ee}function Ke(J,ee){var ce=J.data;if(J.parentNode.tagName==="O:P")return ee.insert(ce.trim());if(ce.trim().length===0&&J.parentNode.classList.contains("ql-clipboard"))return ee;if(!W(J.parentNode).whiteSpace.startsWith("pre")){var fe=function(Ee,Te){return Te=Te.replace(/[^\u00a0]/g,""),Te.length<1&&Ee?" ":Te};ce=ce.replace(/\r\n/g," ").replace(/\n/g," "),ce=ce.replace(/\s\s+/g,fe.bind(fe,!0)),(J.previousSibling==null&&M(J.parentNode)||J.previousSibling!=null&&M(J.previousSibling))&&(ce=ce.replace(/^\s+/,fe.bind(fe,!1))),(J.nextSibling==null&&M(J.parentNode)||J.nextSibling!=null&&M(J.nextSibling))&&(ce=ce.replace(/\s+$/,fe.bind(fe,!1)))}return ee.insert(ce)}r.default=V,r.matchAttributor=$,r.matchBlot=X,r.matchNewline=_e,r.matchSpacing=Ie,r.matchText=Ke},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(y,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,m,g){return m&&_(y.prototype,m),g&&_(y,g),y}}(),s=function _(y,m,g){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,m);if(b===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:_(N,m,g)}else{if("value"in b)return b.value;var v=b.get;return v===void 0?void 0:v.call(g)}},l=i(6),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"optimize",value:function(g){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(u.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function T(k,S){var D=[],F=!0,K=!1,G=void 0;try{for(var re=k[Symbol.iterator](),z;!(F=(z=re.next()).done)&&(D.push(z.value),!(S&&D.length===S));F=!0);}catch(B){K=!0,G=B}finally{try{!F&&re.return&&re.return()}finally{if(K)throw G}}return D}return function(k,S){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return T(k,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(k,S){for(var D=0;D<S.length;D++){var F=S[D];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,S,D){return S&&T(k.prototype,S),D&&T(k,D),k}}(),l=i(2),u=g(l),h=i(0),f=g(h),d=i(5),c=g(d),p=i(10),_=g(p),y=i(9),m=g(y);function g(T){return T&&T.__esModule?T:{default:T}}function b(T,k,S){return k in T?Object.defineProperty(T,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):T[k]=S,T}function N(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function v(T,k){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:T}function O(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}var R=(0,_.default)("quill:toolbar"),w=function(T){O(k,T);function k(S,D){N(this,k);var F=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,S,D));if(Array.isArray(F.options.container)){var K=document.createElement("div");I(K,F.options.container),S.container.parentNode.insertBefore(K,S.container),F.container=K}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var G;return G=R.error("Container required for toolbar",F.options),v(F,G)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(re){F.addHandler(re,F.options.handlers[re])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(re){F.attach(re)}),F.quill.on(c.default.events.EDITOR_CHANGE,function(re,z){re===c.default.events.SELECTION_CHANGE&&F.update(z)}),F.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){var re=F.quill.selection.getRange(),z=o(re,1),B=z[0];F.update(B)}),F}return s(k,[{key:"addHandler",value:function(D,F){this.handlers[D]=F}},{key:"attach",value:function(D){var F=this,K=[].find.call(D.classList,function(re){return re.indexOf("ql-")===0});if(K){if(K=K.slice(3),D.tagName==="BUTTON"&&D.setAttribute("type","button"),this.handlers[K]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[K]==null){R.warn("ignoring attaching to disabled format",K,D);return}if(f.default.query(K)==null){R.warn("ignoring attaching to nonexistent format",K,D);return}}var G=D.tagName==="SELECT"?"change":"click";D.addEventListener(G,function(re){var z=void 0;if(D.tagName==="SELECT"){if(D.selectedIndex<0)return;var B=D.options[D.selectedIndex];B.hasAttribute("selected")?z=!1:z=B.value||!1}else D.classList.contains("ql-active")?z=!1:z=D.value||!D.hasAttribute("value"),re.preventDefault();F.quill.focus();var j=F.quill.selection.getRange(),V=o(j,1),q=V[0];if(F.handlers[K]!=null)F.handlers[K].call(F,z);else if(f.default.query(K).prototype instanceof f.default.Embed){if(z=prompt("Enter "+K),!z)return;F.quill.updateContents(new u.default().retain(q.index).delete(q.length).insert(b({},K,z)),c.default.sources.USER)}else F.quill.format(K,z,c.default.sources.USER);F.update(q)}),this.controls.push([K,D])}}},{key:"update",value:function(D){var F=D==null?{}:this.quill.getFormat(D);this.controls.forEach(function(K){var G=o(K,2),re=G[0],z=G[1];if(z.tagName==="SELECT"){var B=void 0;if(D==null)B=null;else if(F[re]==null)B=z.querySelector("option[selected]");else if(!Array.isArray(F[re])){var j=F[re];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),B=z.querySelector('option[value="'+j+'"]')}B==null?(z.value="",z.selectedIndex=-1):B.selected=!0}else if(D==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var V=F[re]===z.getAttribute("value")||F[re]!=null&&F[re].toString()===z.getAttribute("value")||F[re]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",V)}else z.classList.toggle("ql-active",F[re]!=null)})}}]),k}(m.default);w.DEFAULTS={};function E(T,k,S){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+k),S!=null&&(D.value=S),T.appendChild(D)}function I(T,k){Array.isArray(k[0])||(k=[k]),k.forEach(function(S){var D=document.createElement("span");D.classList.add("ql-formats"),S.forEach(function(F){if(typeof F=="string")E(D,F);else{var K=Object.keys(F)[0],G=F[K];Array.isArray(G)?x(D,K,G):E(D,K,G)}}),T.appendChild(D)})}function x(T,k,S){var D=document.createElement("select");D.classList.add("ql-"+k),S.forEach(function(F){var K=document.createElement("option");F!==!1?K.setAttribute("value",F):K.setAttribute("selected","selected"),D.appendChild(K)}),T.appendChild(D)}w.DEFAULTS={container:null,handlers:{clean:function(){var k=this,S=this.quill.getSelection();if(S!=null)if(S.length==0){var D=this.quill.getFormat();Object.keys(D).forEach(function(F){f.default.query(F,f.default.Scope.INLINE)!=null&&k.quill.format(F,!1)})}else this.quill.removeFormat(S,c.default.sources.USER)},direction:function(k){var S=this.quill.getFormat().align;k==="rtl"&&S==null?this.quill.format("align","right",c.default.sources.USER):!k&&S==="right"&&this.quill.format("align",!1,c.default.sources.USER),this.quill.format("direction",k,c.default.sources.USER)},indent:function(k){var S=this.quill.getSelection(),D=this.quill.getFormat(S),F=parseInt(D.indent||0);if(k==="+1"||k==="-1"){var K=k==="+1"?1:-1;D.direction==="rtl"&&(K*=-1),this.quill.format("indent",F+K,c.default.sources.USER)}},link:function(k){k===!0&&(k=prompt("Enter link URL:")),this.quill.format("link",k,c.default.sources.USER)},list:function(k){var S=this.quill.getSelection(),D=this.quill.getFormat(S);k==="check"?D.list==="checked"||D.list==="unchecked"?this.quill.format("list",!1,c.default.sources.USER):this.quill.format("list","unchecked",c.default.sources.USER):this.quill.format("list",k,c.default.sources.USER)}}},r.default=w,r.addControls=I},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(y,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,m,g){return m&&_(y.prototype,m),g&&_(y,g),y}}(),s=function _(y,m,g){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,m);if(b===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:_(N,m,g)}else{if("value"in b)return b.value;var v=b.get;return v===void 0?void 0:v.call(g)}},l=i(28),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(m,g){f(this,y);var b=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,m));return b.label.innerHTML=g,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),b}return o(y,[{key:"buildItem",value:function(g){var b=s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,g);return b.style.backgroundColor=g.getAttribute("value")||"",b}},{key:"selectItem",value:function(g,b){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,g,b);var N=this.label.querySelector(".ql-color-label"),v=g&&g.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=v:N.style.fill=v)}}]),y}(u.default);r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(y,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,m,g){return m&&_(y.prototype,m),g&&_(y,g),y}}(),s=function _(y,m,g){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,m);if(b===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:_(N,m,g)}else{if("value"in b)return b.value;var v=b.get;return v===void 0?void 0:v.call(g)}},l=i(28),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(m,g){f(this,y);var b=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,m));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=g[N.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return o(y,[{key:"selectItem",value:function(g,b){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,g,b),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),y}(u.default);r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(h,f){for(var d=0;d<f.length;d++){var c=f[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,f,d){return f&&u(h.prototype,f),d&&u(h,d),h}}();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(h,f){var d=this;s(this,u),this.quill=h,this.boundsContainer=f||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,c=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=c+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),_=this.root.getBoundingClientRect(),y=0;if(_.right>p.right&&(y=p.right-_.right,this.root.style.left=d+y+"px"),_.left<p.left&&(y=p.left-_.left,this.root.style.left=d+y+"px"),_.bottom>p.bottom){var m=_.bottom-_.top,g=f.bottom-f.top+m;this.root.style.top=c-g+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function x(T,k){var S=[],D=!0,F=!1,K=void 0;try{for(var G=T[Symbol.iterator](),re;!(D=(re=G.next()).done)&&(S.push(re.value),!(k&&S.length===k));D=!0);}catch(z){F=!0,K=z}finally{try{!D&&G.return&&G.return()}finally{if(F)throw K}}return S}return function(T,k){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return x(T,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function x(T,k,S){T===null&&(T=Function.prototype);var D=Object.getOwnPropertyDescriptor(T,k);if(D===void 0){var F=Object.getPrototypeOf(T);return F===null?void 0:x(F,k,S)}else{if("value"in D)return D.value;var K=D.get;return K===void 0?void 0:K.call(S)}},l=function(){function x(T,k){for(var S=0;S<k.length;S++){var D=k[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(T,D.key,D)}}return function(T,k,S){return k&&x(T.prototype,k),S&&x(T,S),T}}(),u=i(3),h=N(u),f=i(8),d=N(f),c=i(43),p=N(c),_=i(27),y=N(_),m=i(15),g=i(41),b=N(g);function N(x){return x&&x.__esModule?x:{default:x}}function v(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function O(x,T){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:x}function R(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(x,T):x.__proto__=T)}var w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(x){R(T,x);function T(k,S){v(this,T),S.modules.toolbar!=null&&S.modules.toolbar.container==null&&(S.modules.toolbar.container=w);var D=O(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,k,S));return D.quill.container.classList.add("ql-snow"),D}return l(T,[{key:"extendToolbar",value:function(S){S.container.classList.add("ql-snow"),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),b.default),this.tooltip=new I(this.quill,this.options.bounds),S.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,F){S.handlers.link.call(S,!F.format.link)})}}]),T}(p.default);E.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var k=this.quill.getSelection();if(k==null||k.length==0)return;var S=this.quill.getText(k);/^\S+@\S+\.\S+$/.test(S)&&S.indexOf("mailto:")!==0&&(S="mailto:"+S);var D=this.quill.theme.tooltip;D.edit("link",S)}else this.quill.format("link",!1)}}}}});var I=function(x){R(T,x);function T(k,S){v(this,T);var D=O(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,k,S));return D.preview=D.root.querySelector("a.ql-preview"),D}return l(T,[{key:"listen",value:function(){var S=this;s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){S.root.classList.contains("ql-editing")?S.save():S.edit("link",S.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if(S.linkRange!=null){var F=S.linkRange;S.restoreFocus(),S.quill.formatText(F,"link",!1,d.default.sources.USER),delete S.linkRange}D.preventDefault(),S.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(D,F,K){if(D!=null){if(D.length===0&&K===d.default.sources.USER){var G=S.quill.scroll.descendant(y.default,D.index),re=o(G,2),z=re[0],B=re[1];if(z!=null){S.linkRange=new m.Range(D.index-B,z.length());var j=y.default.formats(z.domNode);S.preview.textContent=j,S.preview.setAttribute("href",j),S.show(),S.position(S.quill.getBounds(S.linkRange));return}}else delete S.linkRange;S.hide()}})}},{key:"show",value:function(){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T}(c.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=E},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=oe(o),l=i(36),u=i(38),h=i(64),f=i(65),d=oe(f),c=i(66),p=oe(c),_=i(67),y=oe(_),m=i(37),g=i(26),b=i(39),N=i(40),v=i(56),O=oe(v),R=i(68),w=oe(R),E=i(27),I=oe(E),x=i(69),T=oe(x),k=i(70),S=oe(k),D=i(71),F=oe(D),K=i(72),G=oe(K),re=i(73),z=oe(re),B=i(13),j=oe(B),V=i(74),q=oe(V),W=i(75),H=oe(W),M=i(57),U=oe(M),Y=i(41),$=oe(Y),X=i(28),se=oe(X),le=i(59),me=oe(le),_e=i(60),Ie=oe(_e),Je=i(61),Ke=oe(Je),J=i(108),ee=oe(J),ce=i(62),fe=oe(ce);function oe(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}s.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":N.SizeStyle},!0),s.default.register({"formats/align":l.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":h.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":b.FontClass,"formats/size":N.SizeClass,"formats/blockquote":d.default,"formats/code-block":j.default,"formats/header":p.default,"formats/list":y.default,"formats/bold":O.default,"formats/code":B.Code,"formats/italic":w.default,"formats/link":I.default,"formats/script":T.default,"formats/strike":S.default,"formats/underline":F.default,"formats/image":G.default,"formats/video":z.default,"formats/list/item":_.ListItem,"modules/formula":q.default,"modules/syntax":H.default,"modules/toolbar":U.default,"themes/bubble":ee.default,"themes/snow":fe.default,"ui/icons":$.default,"ui/picker":se.default,"ui/icon-picker":Ie.default,"ui/color-picker":me.default,"ui/tooltip":Ke.default},!0),r.default=s.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function y(m,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,N.key,N)}}return function(m,g,b){return g&&y(m.prototype,g),b&&y(m,b),m}}(),s=function y(m,g,b){m===null&&(m=Function.prototype);var N=Object.getOwnPropertyDescriptor(m,g);if(N===void 0){var v=Object.getPrototypeOf(m);return v===null?void 0:y(v,g,b)}else{if("value"in N)return N.value;var O=N.get;return O===void 0?void 0:O.call(b)}},l=i(0),u=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function f(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function d(y,m){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:y}function c(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(y,m):y.__proto__=m)}var p=function(y){c(m,y);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"add",value:function(b,N){if(N==="+1"||N==="-1"){var v=this.value(b)||0;N=N==="+1"?v+1:v-1}return N===0?(this.remove(b),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,b,N)}},{key:"canAdd",value:function(b,N){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,b,N)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,b,parseInt(N))}},{key:"value",value:function(b){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,b))||void 0}}]),m}(u.default.Attributor.Class),_=new p("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function h(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function f(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var d=function(c){f(p,c);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="blockquote",d.tagName="blockquote",r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(_,y){for(var m=0;m<y.length;m++){var g=y[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,g.key,g)}}return function(_,y,m){return y&&p(_.prototype,y),m&&p(_,m),_}}(),s=i(4),l=u(s);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}function f(p,_){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:p}function d(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(p,_):p.__proto__=_)}var c=function(p){d(_,p);function _(){return h(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),_}(l.default);c.blotName="header",c.tagName=["H1","H2","H3","H4","H5","H6"],r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function v(O,R){for(var w=0;w<R.length;w++){var E=R[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(O,E.key,E)}}return function(O,R,w){return R&&v(O.prototype,R),w&&v(O,w),O}}(),s=function v(O,R,w){O===null&&(O=Function.prototype);var E=Object.getOwnPropertyDescriptor(O,R);if(E===void 0){var I=Object.getPrototypeOf(O);return I===null?void 0:v(I,R,w)}else{if("value"in E)return E.value;var x=E.get;return x===void 0?void 0:x.call(w)}},l=i(0),u=p(l),h=i(4),f=p(h),d=i(25),c=p(d);function p(v){return v&&v.__esModule?v:{default:v}}function _(v,O,R){return O in v?Object.defineProperty(v,O,{value:R,enumerable:!0,configurable:!0,writable:!0}):v[O]=R,v}function y(v,O){if(!(v instanceof O))throw new TypeError("Cannot call a class as a function")}function m(v,O){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:v}function g(v,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);v.prototype=Object.create(O&&O.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(v,O):v.__proto__=O)}var b=function(v){g(O,v);function O(){return y(this,O),m(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"format",value:function(w,E){w===N.blotName&&!E?this.replaceWith(u.default.create(this.statics.scope)):s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,w,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(w,E){return this.parent.isolate(this.offset(this.parent),this.length()),w===this.parent.statics.blotName?(this.parent.replaceWith(w,E),this):(this.parent.unwrap(),s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,w,E))}}],[{key:"formats",value:function(w){return w.tagName===this.tagName?void 0:s(O.__proto__||Object.getPrototypeOf(O),"formats",this).call(this,w)}}]),O}(f.default);b.blotName="list-item",b.tagName="LI";var N=function(v){g(O,v),o(O,null,[{key:"create",value:function(w){var E=w==="ordered"?"OL":"UL",I=s(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,E);return(w==="checked"||w==="unchecked")&&I.setAttribute("data-checked",w==="checked"),I}},{key:"formats",value:function(w){if(w.tagName==="OL")return"ordered";if(w.tagName==="UL")return w.hasAttribute("data-checked")?w.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function O(R){y(this,O);var w=m(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,R)),E=function(x){if(x.target.parentNode===R){var T=w.statics.formats(R),k=u.default.find(x.target);T==="checked"?k.format("list","unchecked"):T==="unchecked"&&k.format("list","checked")}};return R.addEventListener("touchstart",E),R.addEventListener("mousedown",E),w}return o(O,[{key:"format",value:function(w,E){this.children.length>0&&this.children.tail.format(w,E)}},{key:"formats",value:function(){return _({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(w,E){if(w instanceof b)s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,w,E);else{var I=E==null?this.length():E.offset(this),x=this.split(I);x.parent.insertBefore(w,x)}}},{key:"optimize",value:function(w){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,w);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(w){if(w.statics.blotName!==this.statics.blotName){var E=u.default.create(this.statics.defaultChild);w.moveChildren(E),this.appendChild(E)}s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,w)}}]),O}(c.default);N.blotName="list",N.scope=u.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[b],r.ListItem=b,r.default=N},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function h(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function f(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var d=function(c){f(p,c);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="italic",d.tagName=["EM","I"],r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(y,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,m,g){return m&&_(y.prototype,m),g&&_(y,g),y}}(),s=function _(y,m,g){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,m);if(b===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:_(N,m,g)}else{if("value"in b)return b.value;var v=b.get;return v===void 0?void 0:v.call(g)}},l=i(6),u=h(l);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function d(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function c(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var p=function(_){c(y,_);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),y}(u.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function h(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function f(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var d=function(c){f(p,c);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="strike",d.tagName="S",r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function h(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function f(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var d=function(c){f(p,c);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="underline",d.tagName="U",r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,b){for(var N=0;N<b.length;N++){var v=b[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,N){return b&&m(g.prototype,b),N&&m(g,N),g}}(),s=function m(g,b,N){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var O=Object.getPrototypeOf(g);return O===null?void 0:m(O,b,N)}else{if("value"in v)return v.value;var R=v.get;return R===void 0?void 0:R.call(N)}},l=i(0),u=f(l),h=i(27);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function c(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var _=["alt","height","width"],y=function(m){p(g,m);function g(){return d(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(N,v){_.indexOf(N)>-1?v?this.domNode.setAttribute(N,v):this.domNode.removeAttribute(N):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,N,v)}}],[{key:"create",value:function(N){var v=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,N);return typeof N=="string"&&v.setAttribute("src",this.sanitize(N)),v}},{key:"formats",value:function(N){return _.reduce(function(v,O){return N.hasAttribute(O)&&(v[O]=N.getAttribute(O)),v},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,h.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),g}(u.default.Embed);y.blotName="image",y.tagName="IMG",r.default=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,b){for(var N=0;N<b.length;N++){var v=b[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,N){return b&&m(g.prototype,b),N&&m(g,N),g}}(),s=function m(g,b,N){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var O=Object.getPrototypeOf(g);return O===null?void 0:m(O,b,N)}else{if("value"in v)return v.value;var R=v.get;return R===void 0?void 0:R.call(N)}},l=i(4),u=i(27),h=f(u);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function c(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var _=["height","width"],y=function(m){p(g,m);function g(){return d(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(N,v){_.indexOf(N)>-1?v?this.domNode.setAttribute(N,v):this.domNode.removeAttribute(N):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,N,v)}}],[{key:"create",value:function(N){var v=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,N);return v.setAttribute("frameborder","0"),v.setAttribute("allowfullscreen",!0),v.setAttribute("src",this.sanitize(N)),v}},{key:"formats",value:function(N){return _.reduce(function(v,O){return N.hasAttribute(O)&&(v[O]=N.getAttribute(O)),v},{})}},{key:"sanitize",value:function(N){return h.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),g}(l.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",r.default=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function N(v,O){for(var R=0;R<O.length;R++){var w=O[R];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,O,R){return O&&N(v.prototype,O),R&&N(v,R),v}}(),s=function N(v,O,R){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,O);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:N(E,O,R)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(R)}},l=i(35),u=p(l),h=i(5),f=p(h),d=i(9),c=p(d);function p(N){return N&&N.__esModule?N:{default:N}}function _(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function y(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function m(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var g=function(N){m(v,N);function v(){return _(this,v),y(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,null,[{key:"create",value:function(R){var w=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,R);return typeof R=="string"&&(window.katex.render(R,w,{throwOnError:!1,errorColor:"#f00"}),w.setAttribute("data-value",R)),w}},{key:"value",value:function(R){return R.getAttribute("data-value")}}]),v}(u.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var b=function(N){m(v,N),o(v,null,[{key:"register",value:function(){f.default.register(g,!0)}}]);function v(){_(this,v);var O=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return O}return v}(c.default);r.FormulaBlot=g,r.default=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function R(w,E){for(var I=0;I<E.length;I++){var x=E[I];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}return function(w,E,I){return E&&R(w.prototype,E),I&&R(w,I),w}}(),s=function R(w,E,I){w===null&&(w=Function.prototype);var x=Object.getOwnPropertyDescriptor(w,E);if(x===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:R(T,E,I)}else{if("value"in x)return x.value;var k=x.get;return k===void 0?void 0:k.call(I)}},l=i(0),u=y(l),h=i(5),f=y(h),d=i(9),c=y(d),p=i(13),_=y(p);function y(R){return R&&R.__esModule?R:{default:R}}function m(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function g(R,w){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:R}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(R,w):R.__proto__=w)}var N=function(R){b(w,R);function w(){return m(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var x=this.domNode.textContent;this.cachedText!==x&&((x.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(x),this.domNode.normalize(),this.attach()),this.cachedText=x)}}]),w}(_.default);N.className="ql-syntax";var v=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),O=function(R){b(w,R),o(w,null,[{key:"register",value:function(){f.default.register(v,!0),f.default.register(N,!0)}}]);function w(E,I){m(this,w);var x=g(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,I));if(typeof x.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return x.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){x.highlight(),T=null},x.options.interval)}),x.highlight(),x}return o(w,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var x=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(T){T.highlight(I.options.highlight)}),this.quill.update(f.default.sources.SILENT),x!=null&&this.quill.setSelection(x,f.default.sources.SILENT)}}}]),w}(c.default);O.DEFAULTS={highlight:function(){return window.hljs==null?null:function(R){var w=window.hljs.highlightAuto(R);return w.value}}(),interval:1e3},r.CodeBlock=N,r.CodeToken=v,r.default=O},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function w(E,I,x){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,I);if(T===void 0){var k=Object.getPrototypeOf(E);return k===null?void 0:w(k,I,x)}else{if("value"in T)return T.value;var S=T.get;return S===void 0?void 0:S.call(x)}},s=function(){function w(E,I){for(var x=0;x<I.length;x++){var T=I[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,I,x){return I&&w(E.prototype,I),x&&w(E,x),E}}(),l=i(3),u=m(l),h=i(8),f=m(h),d=i(43),c=m(d),p=i(15),_=i(41),y=m(_);function m(w){return w&&w.__esModule?w:{default:w}}function g(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function b(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function N(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],O=function(w){N(E,w);function E(I,x){g(this,E),x.modules.toolbar!=null&&x.modules.toolbar.container==null&&(x.modules.toolbar.container=v);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,x));return T.quill.container.classList.add("ql-bubble"),T}return s(E,[{key:"extendToolbar",value:function(x){this.tooltip=new R(this.quill,this.options.bounds),this.tooltip.root.appendChild(x.container),this.buildButtons([].slice.call(x.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(x.container.querySelectorAll("select")),y.default)}}]),E}(c.default);O.DEFAULTS=(0,u.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var R=function(w){N(E,w);function E(I,x){g(this,E);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,x));return T.quill.on(f.default.events.EDITOR_CHANGE,function(k,S,D,F){if(k===f.default.events.SELECTION_CHANGE)if(S!=null&&S.length>0&&F===f.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var K=T.quill.getLines(S.index,S.length);if(K.length===1)T.position(T.quill.getBounds(S));else{var G=K[K.length-1],re=T.quill.getIndex(G),z=Math.min(G.length()-1,S.index+S.length-re),B=T.quill.getBounds(new p.Range(re,z));T.position(B)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return s(E,[{key:"listen",value:function(){var x=this;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){x.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!x.root.classList.contains("ql-hidden")){var T=x.quill.getSelection();T!=null&&x.position(x.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(x){var T=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,x),k=this.root.querySelector(".ql-tooltip-arrow");if(k.style.marginLeft="",T===0)return T;k.style.marginLeft=-1*T-k.offsetWidth/2+"px"}}]),E}(d.BaseTooltip);R.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=R,r.default=O},function(t,r,i){t.exports=i(63)}]).default})})(vd);var Mx=vd.exports,Vx=wt&&wt.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),no=wt&&wt.__assign||function(){return no=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},no.apply(this,arguments)},qx=wt&&wt.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,l=o.length;s<l;s++,i++)r[i]=o[s];return r},Oo=wt&&wt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},Ct=Oo(ie),Fx=Oo(Dc),kr=Oo(Dx),Cc=Oo(Mx),Bx=function(n){Vx(e,n);function e(t){var r=n.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,l,u){var h,f,d,c;o==="text-change"?(f=(h=r).onEditorChangeText)===null||f===void 0||f.call(h,r.editor.root.innerHTML,s,u,r.unprivilegedEditor):o==="selection-change"&&((c=(d=r).onEditorChangeSelection)===null||c===void 0||c.call(d,s,u,r.unprivilegedEditor))};var i=r.isControlled()?t.value:t.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(t){var r;if(Ct.default.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ct.default.Children.count(t.children)){var i=Ct.default.Children.only(t.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(t,r){var i=this,o;if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){var s=this.getEditorContents(),l=(o=t.value,o??"");this.isEqualValue(l,s)||this.setEditorContents(this.editor,l)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),qx(this.cleanProps,this.dirtyProps).some(function(u){return!kr.default(t[u],i.props[u])})},e.prototype.shouldComponentRegenerate=function(t){var r=this;return this.dirtyProps.some(function(i){return!kr.default(t[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(t,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(t)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,o=l.delta,u=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(o),jc(function(){return i.setEditorSelection(h,u)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(t,r){var i=new Cc.default(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(t){return t&&t.ops},e.prototype.isEqualValue=function(t,r){return this.isDelta(t)&&this.isDelta(r)?kr.default(t.ops,r.ops):kr.default(t,r)},e.prototype.setEditorContents=function(t,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert(r)):t.setContents(r),jc(function(){return i.setEditorSelection(t,o)})},e.prototype.setEditorSelection=function(t,r){if(this.selection=r,r){var i=t.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),t.setSelection(r)}},e.prototype.setEditorTabIndex=function(t,r){var i,o;!((o=(i=t)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(t.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(t,r){r?t.disable():t.enable()},e.prototype.makeUnprivilegedEditor=function(t){var r=t;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var t=Fx.default.findDOMNode(this.editingArea);if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t},e.prototype.renderEditingArea=function(){var t=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,l={key:s,ref:function(u){t.editingArea=u}};return Ct.default.Children.count(i)?Ct.default.cloneElement(Ct.default.Children.only(i),l):o?Ct.default.createElement("pre",no({},l)):Ct.default.createElement("div",no({},l))},e.prototype.render=function(){var t;return Ct.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(t=this.props.className,t??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(t,r,i,o){var s,l;if(this.editor){var u=this.isDelta(this.value)?o.getContents():o.getHTML();u!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=u,(l=(s=this.props).onChange)===null||l===void 0||l.call(s,t,r,i,o))}},e.prototype.onEditorChangeSelection=function(t,r,i){var o,s,l,u,h,f;if(this.editor){var d=this.getEditorSelection(),c=!d&&t,p=d&&!t;kr.default(t,d)||(this.selection=t,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,t,r,i),c?(u=(l=this.props).onFocus)===null||u===void 0||u.call(l,t,r,i):p&&((f=(h=this.props).onBlur)===null||f===void 0||f.call(h,d,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Cc.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Ct.default.Component);function jc(n){Promise.resolve().then(n)}var $x=Bx;const Ux=zd($x),zx=100,Hx=800,Kx=200,Gx=({value:n,onChange:e,placeholder:t="Enter content here...",style:r={},className:i="mt-1"})=>{const o=ie.useRef(null),[s,l]=ie.useState(Kx);ie.useEffect(()=>{var y,m;const f=(y=o.current)==null?void 0:y.getEditor(),d=(m=f==null?void 0:f.getModule("toolbar"))==null?void 0:m.container;if(!d)return;let c=0;const p=g=>{g.target.closest(".ql-picker")&&(c=window.scrollY)},_=g=>{g.target.closest(".ql-picker")&&setTimeout(()=>{window.scrollY!==c&&window.scrollTo(window.scrollX,c)},0)};return d.addEventListener("mousedown",p),d.addEventListener("mouseup",_),()=>{d.removeEventListener("mousedown",p),d.removeEventListener("mouseup",_)}},[]);const u=ie.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{align:[]}],[{color:[]},{background:[]}],["link","image","video"],["clean"]],handlers:{image:function(){var N;const f=(N=o.current)==null?void 0:N.getEditor();if(!f){console.error("Quill editor instance not found.");return}const d=f.getSelection(!0);if(!d)return;const c=f.theme.tooltip,p=c.save,_=c.action;c.edit();const y=c.textbox;if(!y){console.error("Tooltip input element not found."),c.hide();return}y.value="",y.setAttribute("placeholder","Enter image URL"),y.setAttribute("data-mode","image");const m=()=>{var O;const v=y.value;v&&f.insertEmbed(d.index,"image",v,"user"),c.hide(),c.save=p,c.action=_,y.removeEventListener("keydown",g),(O=c.root.querySelector("a.ql-action"))==null||O.removeEventListener("click",m)},g=v=>{var O;v.key==="Enter"?(v.preventDefault(),m()):v.key==="Escape"&&(v.preventDefault(),c.hide(),c.save=p,c.action=_,y.removeEventListener("keydown",g),(O=c.root.querySelector("a.ql-action"))==null||O.removeEventListener("click",m))};c.save=m,y.removeEventListener("keydown",g),y.addEventListener("keydown",g);const b=c.root.querySelector("a.ql-action");b?(b.removeEventListener("click",m),b.addEventListener("click",m)):console.warn("Tooltip save button (a.ql-action) not found."),y.focus()}}}}),[]),h=ie.useMemo(()=>["header","font","size","bold","italic","underline","strike","blockquote","code-block","list","bullet","script","indent","direction","align","color","background","link","image","video"],[]);return C.jsxs("div",{className:`quill-editor-container ${i}`,children:[C.jsx("div",{className:"quill-editor-wrapper border border-gray-300 rounded-md overflow-hidden",style:{...r,height:`${s}px`,display:"flex",flexDirection:"column"},children:C.jsx(Ux,{theme:"snow",value:n,onChange:e,ref:o,modules:u,formats:h,className:"bg-white flex-grow",placeholder:t,style:{height:"calc(100% - 42px)"}})}),C.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-gray-600",children:[C.jsx(cm,{size:16}),C.jsx("input",{type:"range",min:zx,max:Hx,value:s,onChange:f=>l(Number(f.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700","aria-label":"Adjust editor height"}),C.jsx(sm,{size:16}),C.jsxs("span",{className:"text-xs w-12 text-right",children:[s,"px"]})]})]})},Wx=()=>{const[n,e]=ie.useState([]),[t,r]=ie.useState(!1),[i,o]=ie.useState(null),[s,l]=ie.useState(null),[u,h]=ie.useState(""),[f,d]=ie.useState(""),[c,p]=ie.useState(""),[_,y]=ie.useState(0),m=ie.useMemo(()=>pe?Hn(pe,"pages"):null,[]),g=ie.useCallback(async()=>{if(!pe||!m){o("Firestore database is not initialized."),r(!1);return}r(!0),o(null);try{console.log("Fetching pages from Firestore...");const I=bo(m,wo("order","asc")),T=(await Jr(I)).docs.map(k=>({id:k.id,...k.data()}));e(T)}catch(I){console.error("Error fetching pages:",I),o('Failed to load pages. Ensure the "pages" collection exists and has an "order" field.')}finally{r(!1)}},[m]);ie.useEffect(()=>{g()},[g]);const b=async I=>{if(I.preventDefault(),!u||!f||!c){o("Title, Slug, and Content are required.");return}if(r(!0),o(null),!pe){o("Firestore database is not initialized. Cannot save page."),r(!1);return}const x=n.length>0?Math.max(...n.map(S=>S.order))+1:0,k={title:u,slug:f,content:c,order:s?_:x};try{if(s){console.log("Updating page in Firestore:",s,k);const S=We(pe,"pages",s);await Qi(S,k),console.log("Page updated successfully.")}else{if(console.log("Adding new page to Firestore:",k),!m)throw new Error("Collection reference not available");await Ca(m,k),console.log("Page added successfully.")}O(),g()}catch(S){console.error("Error saving page:",S),o("Failed to save page. Check console for details.")}finally{r(!1)}},N=async I=>{if(!I){console.error("Cannot delete page without ID."),o("Cannot delete page: Invalid ID.");return}if(window.confirm(`Are you sure you want to delete the page with ID: ${I}?`)){if(r(!0),o(null),!pe){o("Firestore database is not initialized. Cannot delete page."),r(!1);return}try{console.log("Deleting page from Firestore:",I);const x=We(pe,"pages",I);await Ra(x),e(n.filter(T=>T.id!==I)),console.log("Page deleted successfully."),s===I&&O()}catch(x){console.error("Error deleting page:",x),o("Failed to delete page. Check console for details.")}finally{r(!1)}}},v=I=>{if(!I.id){console.error("Cannot edit page without ID."),o("Cannot edit page: Invalid ID.");return}l(I.id),h(I.title),d(I.slug),p(I.content),y(I.order)},O=()=>{l(null),h(""),d(""),p(""),y(0)},R=async(I,x)=>{const T=x==="up"?I-1:I+1;if(T<0||T>=n.length||!pe||!m)return;o(null),r(!0);const k=n[I],S=n[T],D=Ls(pe),F=We(m,k.id),K=We(m,S.id);D.update(F,{order:S.order}),D.update(K,{order:k.order});try{await D.commit(),g()}catch(G){console.error(`Error moving page ${x}:`,G),o("Failed to reorder page. Please try again."),r(!1)}},w=I=>R(I,"up"),E=I=>R(I,"down");return C.jsxs("div",{className:"space-y-6",children:[C.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manage Pages"}),i&&C.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded",children:i}),C.jsxs("form",{onSubmit:b,className:"p-4 border rounded shadow-sm bg-white space-y-4",children:[C.jsx("h3",{className:"text-lg font-medium",children:s?"Edit Page":"Add New Page"}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"pageTitle",className:"block text-sm font-medium text-gray-700",children:"Title"}),C.jsx("input",{type:"text",id:"pageTitle",value:u,onChange:I=>h(I.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"pageSlug",className:"block text-sm font-medium text-gray-700",children:"Slug (URL Path, e.g., 'about-us')"}),C.jsx("input",{type:"text",id:"pageSlug",value:f,onChange:I=>d(I.target.value.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",pattern:"^[a-z0-9-]+$",title:"Slug can only contain lowercase letters, numbers, and hyphens."})]}),C.jsxs("div",{className:"relative quill-editor-wrapper",children:[C.jsx("label",{htmlFor:"pageContent",className:"block text-sm font-medium text-gray-700",children:"Content"}),C.jsx(Gx,{value:c,onChange:p,placeholder:"Enter page content here..."})]}),C.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s&&C.jsx("button",{type:"button",onClick:O,disabled:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Cancel Edit"}),C.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:t?"Saving...":s?"Update Page":"Add Page"})]})]}),C.jsxs("div",{className:"mt-6 border rounded shadow-sm bg-white",children:[C.jsx("h3",{className:"text-lg font-medium p-4 border-b",children:"Existing Pages"}),t&&!n.length?C.jsx("p",{className:"p-4 text-gray-500",children:"Loading pages..."}):n.length===0?C.jsx("p",{className:"p-4 text-gray-500",children:"No pages found."}):C.jsx("ul",{className:"divide-y divide-gray-200",children:n.map((I,x)=>C.jsxs("li",{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("span",{className:"text-xs font-mono text-gray-400 w-6 text-right",children:I.order}),C.jsxs("div",{children:[C.jsx("p",{className:"font-medium text-gray-900",children:I.title}),C.jsxs("p",{className:"text-sm text-gray-500",children:["/",I.slug]})]})]}),C.jsxs("div",{className:"flex items-center space-x-1",children:[C.jsx("button",{onClick:()=>w(x),disabled:t||x===0,className:`p-1 rounded ${t||x===0?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Up",children:C.jsx(ps,{size:18})}),C.jsx("button",{onClick:()=>E(x),disabled:t||x===n.length-1,className:`p-1 rounded ${t||x===n.length-1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-100"}`,title:"Move Down",children:C.jsx(ds,{size:18})}),C.jsx("button",{onClick:()=>v(I),disabled:t,className:"p-1 rounded text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 disabled:opacity-50",title:"Edit",children:C.jsx(ms,{size:18})}),I.id&&C.jsx("button",{onClick:()=>N(I.id),disabled:t,className:"p-1 rounded text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50",title:"Delete",children:C.jsx(Di,{size:18})})]})]},I.id))})]})]})},Qx=()=>{const n=Mc(),[e,t]=ie.useState(!1),[r,i]=ie.useState(!1),[o,s]=ie.useState(!1),[l,u]=ie.useState(!1),[h,f]=ie.useState(window.innerWidth<768);ie.useEffect(()=>{const k=()=>{const S=window.innerWidth<768;f(S),S||t(!1)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const{translations:d,isLoading:c,saveStatus:p,handleInputChange:_,handleAddNewProject:y,handleAddNewService:m,saveChanges:g,handleDeleteItem:b}=ev(),[N,v]=ie.useState(null),[O,R]=ie.useState(null),w={pageViews:"1,234",totalPages:"12",comments:"45",averageRating:"4.8"},E=async()=>{if(!It){console.error("Firebase auth instance is not available."),alert("Logout service unavailable. Please try again later.");return}try{await cp(It),n("/admin/login")}catch(k){console.error("Logout failed:",k),alert("Failed to log out. Please try again.")}},I=[{icon:C.jsx(Hl,{size:20}),label:"Dashboard",tab:"dashboard"},{icon:C.jsx(zl,{size:20}),label:"Pages",tab:"pages"},{icon:C.jsx($p,{size:20}),label:"Projects",tab:"projects"},{icon:C.jsx(Gp,{size:20}),label:"Media",tab:"media"},{icon:C.jsx(zc,{size:20}),label:"Appearance",tab:"styleEditor"},{icon:C.jsx(Zp,{size:20}),label:"Social Links",tab:"socialLinks"},{icon:C.jsx(bm,{size:20}),label:"Settings",tab:"generalInfo"}],x=()=>C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h3",{className:"text-gray-700 font-semibold",children:"Page Views"}),C.jsx(Vp,{className:"text-blue-500",size:20})]}),C.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.pageViews}),C.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Last 30 days"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h3",{className:"text-gray-700 font-semibold",children:"Total Pages"}),C.jsx(zl,{className:"text-green-500",size:20})]}),C.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.totalPages}),C.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Published content"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h3",{className:"text-gray-700 font-semibold",children:"Comments"}),C.jsx(lm,{className:"text-purple-500",size:20})]}),C.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.comments}),C.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Awaiting response"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h3",{className:"text-gray-700 font-semibold",children:"Average Rating"}),C.jsx(Am,{className:"text-yellow-500",size:20})]}),C.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.averageRating}),C.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Based on feedback"})]})]}),T=()=>{if(c)return C.jsx("div",{className:"flex items-center justify-center py-10",children:C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(!N||N==="dashboard")return x();if(N==="styleEditor")return C.jsx(a_,{});if(N==="socialLinks")return C.jsx(l_,{});if(N==="pages")return C.jsx(Wx,{});if(Z0(N)){const k=Ei(N);return C.jsxs(C.Fragment,{children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700 capitalize",children:k}),N==="projects"?C.jsx(tv,{data:d.en.projects,path:[N],handleChange:_,editingPath:O,setEditingPath:R,handleAddProject:y,handleDelete:b,renderFields:wn}):N==="services"?C.jsx(nv,{data:d.en.services,path:[N],handleChange:_,editingPath:O,setEditingPath:R,handleAddService:m,handleDelete:b,renderFields:wn}):N==="generalInfo"?C.jsx(u_,{translations:d,handleInputChange:_,editingPath:O,setEditingPath:R,handleDeleteItem:b,renderFields:wn,getStaticSectionName:Ei}):wn(d.en[N],[N],_,O,R,void 0,b)]})}return C.jsxs("p",{className:"text-red-500",children:["Error: Invalid tab '",N,"' selected."]})};return C.jsxs("div",{className:"min-h-screen bg-gray-100",children:[C.jsx("nav",{className:"bg-white shadow-md fixed w-full z-10",children:C.jsxs("div",{className:"px-4 h-16 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("button",{onClick:()=>{h?t(!e):i(!r)},className:"text-gray-500 hover:text-gray-700",children:C.jsx(Hl,{size:24})}),C.jsxs("div",{className:"relative hidden md:block",children:[C.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),C.jsx(vm,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})]}),C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsxs("div",{className:"relative",children:[C.jsxs("button",{onClick:()=>u(!l),className:"text-gray-500 hover:text-gray-700 relative",children:[C.jsx(kp,{size:20}),C.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:"3"})]}),l&&C.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-2 border border-gray-200",children:[C.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:C.jsx("h3",{className:"font-semibold text-gray-700",children:"Notifications"})}),C.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[C.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 cursor-pointer",children:[C.jsx("p",{className:"text-sm text-gray-800",children:"New comment on your post"}),C.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),C.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 cursor-pointer",children:[C.jsx("p",{className:"text-sm text-gray-800",children:"Your page was viewed 100 times"}),C.jsx("p",{className:"text-xs text-gray-500",children:"1 hour ago"})]})]})]})]}),C.jsxs("div",{className:"relative",children:[C.jsxs("button",{onClick:()=>s(!o),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[C.jsx(jm,{size:20}),C.jsx("span",{children:"Admin"}),C.jsx(Np,{size:16})]}),o&&C.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 border border-gray-200",children:C.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left text-red-600 hover:bg-gray-50 flex items-center space-x-2",children:[C.jsx(nm,{size:16}),C.jsx("span",{children:"Logout"})]})})]})]})]})}),C.jsxs("div",{className:"flex pt-16",children:[h&&e&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:()=>t(!1)}),C.jsx("aside",{className:`fixed top-16 h-[calc(100vh-4rem)] bg-gray-800 text-white transition-transform duration-300 ease-in-out z-30 md:translate-x-0 md:transition-all md:duration-300
            ${h?e?"translate-x-0 w-64":"-translate-x-full w-64":r?"w-20":"w-64"}
          `,children:C.jsx("nav",{className:"p-4 overflow-y-auto h-full",children:I.map(k=>C.jsxs("button",{onClick:()=>v(k.tab),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${N===k.tab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[k.icon,C.jsx("span",{className:`${h&&e||!h&&!r?"inline":"hidden"} md:inline`,children:k.label})]},k.tab))})}),C.jsx("main",{className:`flex-1 transition-all duration-300 pt-0 md:pt-0 ${h?"ml-0":r?"md:ml-20":"md:ml-64"}`,children:C.jsxs("div",{className:"p-4 md:p-8",children:[C.jsxs("div",{className:"mb-4 md:mb-6",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:N?Ei(N):"Dashboard"}),C.jsxs("p",{className:"text-sm text-gray-500",children:["Home / ",N?Ei(N):"Dashboard"]})]}),C.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:T()}),N&&N!=="styleEditor"&&N!=="socialLinks"&&N!=="pages"&&C.jsxs("div",{className:"mt-6 flex justify-end items-center gap-4",children:[p&&C.jsx("span",{className:"text-green-600 text-sm",children:p}),C.jsx("button",{onClick:()=>g(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",disabled:c,children:"Save Changes"})]})]})})]})]})},Yx=(n=Nt)=>{const e=n.en,t=e==null?void 0:e.projects,r=t?Object.entries(t).filter(([i,o])=>i!=="title"&&typeof o=="object"&&o!==null).map(([i,o])=>({title:(o==null?void 0:o.title)??`Project ${i}`,description:(o==null?void 0:o.description)??"Description missing.",tags:(o==null?void 0:o.tags)??[],link:(o==null?void 0:o.link)??""})):[];return{title:(t==null?void 0:t.title)??"Featured Projects",projects:r}},Xx=({logoUrl:n})=>C.jsx("img",{src:n||"https://raw.githubusercontent.com/tiger3homs/home/refs/heads/main/public/logo.png",alt:"Logo",className:"mx-auto mb-6 w-24 h-24",style:{pointerEvents:"none",userSelect:"none"}}),Zx=({page:n})=>{const e=Hd();return n?C.jsx("div",{className:"min-h-screen text-white",style:{background:"linear-gradient(to bottom right, var(--background-from-color, #111827), var(--background-to-color, #1F2937))"},children:C.jsxs("div",{className:"container mx-auto px-4 py-16",children:[C.jsx("h1",{className:"text-4xl font-bold mb-6",style:{color:"var(--title-color)"},children:n.title}),C.jsxs("div",{className:"prose prose-invert max-w-none text-text",children:[" ",C.jsx("div",{className:"ql-snow",children:C.jsx("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:n.content}})})]}),C.jsx("div",{className:"mt-12 text-center",children:C.jsx(Li,{to:"/",className:"text-blue-400 hover:text-blue-300 underline",children:" Back to Home"})})]})}):C.jsxs("div",{className:"container mx-auto px-4 py-16 text-center text-white min-h-screen flex flex-col items-center justify-center",children:[C.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Page Not Found"}),C.jsxs("p",{className:"text-xl",children:["The page you requested (",e.pathname,") could not be found."]}),C.jsx(Li,{to:"/",className:"mt-6 inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Go Home"})]})},Jx=()=>{const[n,e]=ie.useState(!1),t=()=>{window.pageYOffset>300?e(!0):e(!1)};ie.useEffect(()=>(window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}),[]);const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return C.jsx("button",{type:"button",onClick:r,className:`fixed bottom-5 right-5 p-3 rounded-full bg-blue-500 text-white shadow-lg transition-opacity duration-300 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-label":"Scroll to top",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})})})},eA=ie.lazy(()=>zs(()=>import("./ServicesSection-Bh_NfVYO.js"),__vite__mapDeps([0,1,2]),import.meta.url)),tA=ie.lazy(()=>zs(()=>import("./ProjectsSection-CPhJNFxq.js"),__vite__mapDeps([3,1,2]),import.meta.url)),nA=ie.lazy(()=>zs(()=>import("./ContactSection-BBolqeET.js"),__vite__mapDeps([4,1,2]),import.meta.url)),rA=6e4;let Lc=0;const iA=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),oA=n=>n.length>=10&&n.length<=1e3,sA={Github:Hp,Facebook:Fp,Mail:im,Instagram:Qp,Linkedin:em,Twitter:Nm},aA=({children:n})=>{const[e,t]=ie.useState(null),[r,i]=ie.useState(!0);return ie.useEffect(()=>{if(!It){i(!1);return}const o=qc(It,s=>{t(s),i(!1)});return()=>o()},[]),r?C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):e?n:C.jsx(Vc,{to:"/admin/login",replace:!0})},lA=({dynamicPages:n})=>{const[e,t]=ie.useState(Nt),[r,i]=ie.useState(!0),[o,s]=ie.useState(!1);ie.useEffect(()=>{if(!pe){console.error("MainSite: Firestore instance is not available."),i(!1);return}const b=We(pe,"translations/en");i(!0);const N=ja(b,v=>{if(v.exists()){const O=v.data();t(R=>({...R,en:{...Nt.en,...O}}))}else t(Nt),console.log("MainSite: No translations document found in Firestore, using defaults.");i(!1)},v=>{console.error("MainSite: Firestore snapshot error:",v),t(Nt),i(!1)});return()=>N()},[]),ie.useEffect(()=>{const b=N=>{N.ctrlKey&&N.altKey&&N.key==="a"&&(N.preventDefault(),s(v=>!v))};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[]);const l=ie.useMemo(()=>e.en,[e]),[u,h]=ie.useState([]),[f,d]=ie.useState({name:"",email:"",message:""}),c=ie.useCallback(b=>{const{name:N,value:v}=b.target;d(O=>({...O,[N]:v}))},[]),p=ie.useCallback(async b=>{b.preventDefault();const N=Date.now();if(N-Lc<rA){alert("Please wait a minute before sending another message.");return}if(!iA(f.email)){alert("Please enter a valid email address.");return}if(!oA(f.message)){alert("Message must be between 10 and 1000 characters.");return}Lc=N;try{Gl.init("skwn_-DYfDakGK644"),await Gl.send("service_bdj14o3","template_2e2nikq",{name:f.name,email:f.email,message:f.message,to_email:"tiger3homs@gmail.com"}),alert("Message sent successfully!"),d({name:"",email:"",message:""})}catch(v){console.error("Failed to send message:",v),alert("Failed to send message. Please try again.")}},[f]);ie.useEffect(()=>{(async()=>{if(pe)try{const N=Hn(pe,"socialLinks"),v=bo(N,wo("order","asc")),R=(await Jr(v)).docs.map(w=>({id:w.id,...w.data()}));h(R)}catch(N){console.error("Error fetching social links:",N)}})()},[]);const _=ie.useMemo(()=>Yx(e),[e]),y=C.jsx("div",{className:"flex items-center justify-center p-8",children:C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});return r?C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:C.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):C.jsxs("div",{className:"min-h-screen text-white ltr",style:{background:"linear-gradient(to bottom right, var(--background-from-color, #111827), var(--background-to-color, #1F2937))"},children:[C.jsx("header",{className:"container mx-auto px-4 py-16 md:py-32",children:C.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[C.jsx(Xx,{logoUrl:l.generalInfo.logoUrl}),C.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 text-primary",style:{pointerEvents:"none",userSelect:"none"},children:l.generalInfo.siteTitle}),C.jsx("p",{className:"text-xl md:text-2xl text-secondary mb-8",style:{pointerEvents:"none",userSelect:"none"},children:l.generalInfo.siteRole}),C.jsx("div",{className:"flex justify-center space-x-6",children:u.map(b=>{const N=sA[b.icon];return N?C.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer","aria-label":b.name,className:"text-primary hover:text-text transition-colors transform hover:scale-110",children:C.jsx(N,{size:24})},b.id):null})}),n&&n.length>0&&C.jsx("nav",{className:"mb-4 flex justify-center flex-wrap gap-x-4 gap-y-2 mt-8",children:n.map(b=>C.jsx(Li,{to:`/${b.slug}`,className:"text-secondary hover:text-primary transition-colors text-sm",children:b.title},b.id))})]})}),C.jsx(ie.Suspense,{fallback:y,children:C.jsx(tA,{title:_.title,projects:_.projects})}),C.jsx("section",{className:"container mx-auto px-4 py-16 bg-gray-800/50 backdrop-blur-sm",children:C.jsxs("div",{className:"max-w-3xl mx-auto",children:[C.jsx("h2",{className:"text-3xl font-bold text-center mb-8",style:{color:"var(--title-color)"},children:l.about.title}),C.jsx("p",{className:"text-lg leading-relaxed text-text",children:l.about.description})]})}),C.jsx(ie.Suspense,{fallback:y,children:C.jsx(eA,{title:l.services.title,services:l.services.list})}),C.jsx(ie.Suspense,{fallback:y,children:C.jsx(nA,{t:l.contact,handleSubmit:p,formData:f,handleInputChange:c})}),C.jsxs("footer",{className:"container mx-auto px-4 py-8 text-center relative",children:[C.jsx("p",{className:"text-secondary mb-4",children:l.generalInfo.footerText}),C.jsx(Li,{to:"/admin/dashboard",className:`absolute bottom-2 left-1/2 -translate-x-1/2 text-sm text-primary hover:text-text underline transition-opacity duration-300 ${o?"opacity-100":"opacity-0 pointer-events-none"}`,children:"Admin Dashboard"})]})]})};function uA(){const[n,e]=ie.useState([]),[t,r]=ie.useState(!0);return ie.useEffect(()=>{if(!pe){console.error("App.tsx: Firestore not initialized correctly for loading styles.");return}const i=We(pe,"settings","styles");console.log("App.tsx: Setting up real-time listener for global styles...");const o=ja(i,s=>{if(s.exists()){const l=s.data();console.log("App.tsx: Received style update from Firestore:",l),document.documentElement.style.setProperty("--primary-color",l.primaryColor),document.documentElement.style.setProperty("--secondary-color",l.secondaryColor),document.documentElement.style.setProperty("--font-family",l.fontFamily),document.documentElement.style.setProperty("--title-color",l.titleColor||"#d7e3ee"),document.documentElement.style.setProperty("--h3title-color",l.h3TitleColor||"#d7e3ee"),document.documentElement.style.setProperty("--text-color",l.textColor||"#c6d3e2"),document.documentElement.style.setProperty("--background-from-color",l.backgroundFromColor||"#111827"),document.documentElement.style.setProperty("--background-to-color",l.backgroundToColor||"#1F2937"),document.documentElement.style.setProperty("--section-bg-color",l.sectionBgColor||"#374151")}else console.log("App.tsx: No global styles document found in Firestore, applying CSS defaults.")},s=>{console.error("App.tsx: Error listening to global styles:",s)});return()=>{console.log("App.tsx: Unsubscribing from global styles listener."),o()}},[]),ie.useEffect(()=>{if(r(!0),!pe){console.error("App.tsx: Firestore not initialized correctly for loading pages."),r(!1);return}(async()=>{if(!pe){console.error("App.tsx: Firestore not initialized correctly for loading pages."),r(!1);return}try{const o=Hn(pe,"pages"),s=bo(o,wo("order","asc")),u=(await Jr(s)).docs.map(h=>({id:h.id,...h.data()}));e(u),console.log("App.tsx: Fetched dynamic pages:",u)}catch(o){console.error("App.tsx: Error fetching dynamic pages:",o)}finally{r(!1)}})()},[]),t?C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:C.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):C.jsxs(Kd,{children:[C.jsxs(Gd,{children:[C.jsx(Tr,{path:"/",element:C.jsx(lA,{dynamicPages:n})}),n.map(i=>C.jsx(Tr,{path:`/${i.slug}`,element:C.jsx(Zx,{page:i})},i.id)),C.jsx(Tr,{path:"/admin/login",element:C.jsx(Q0,{})}),C.jsx(Tr,{path:"/admin/dashboard",element:C.jsx(aA,{children:C.jsx(Qx,{})})}),C.jsx(Tr,{path:"/admin",element:C.jsx(Vc,{to:"/admin/login",replace:!0})})]}),C.jsx(Jx,{})," "]})}$c(document.getElementById("root")).render(C.jsx(uA,{}));export{Oe as c,C as j};
//# sourceMappingURL=index-DvtqGowl.js.map
